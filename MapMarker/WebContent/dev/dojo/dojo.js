//>>built
(function(_1,_2){var _3=function(){},_4=function(it){for(var p in it){return 0;}return 1;},_5={}.toString,_6=function(it){return _5.call(it)=="[object Function]";},_7=function(it){return _5.call(it)=="[object String]";},_8=function(it){return _5.call(it)=="[object Array]";},_9=function(_a,_b){if(_a){for(var i=0;i<_a.length;){_b(_a[i++]);}}},_c=function(_d,_e){for(var p in _e){_d[p]=_e[p];}return _d;},_f=function(_10,_11){return _c(new Error(_10),{src:"dojoLoader",info:_11});},_12=1,uid=function(){return "_"+_12++;},req=function(_13,_14,_15){return _16(_13,_14,_15,0,req);},_17=this,doc=_17.document,_18=doc&&doc.createElement("DiV"),has=req.has=function(_19){return _6(_1a[_19])?(_1a[_19]=_1a[_19](_17,doc,_18)):_1a[_19];},_1a=has.cache=_2.hasCache;has.add=function(_1b,_1c,now,_1d){(_1a[_1b]===undefined||_1d)&&(_1a[_1b]=_1c);return now&&has(_1b);};0&&has.add("host-node",_1.has&&"host-node" in _1.has?_1.has["host-node"]:(typeof process=="object"&&process.versions&&process.versions.node&&process.versions.v8));if(0){require("./_base/configNode.js").config(_2);_2.loaderPatch.nodeRequire=require;}0&&has.add("host-rhino",_1.has&&"host-rhino" in _1.has?_1.has["host-rhino"]:(typeof load=="function"&&(typeof Packages=="function"||typeof Packages=="object")));if(0){for(var _1e=_1.baseUrl||".",arg,_1f=this.arguments,i=0;i<_1f.length;){arg=(_1f[i++]+"").split("=");if(arg[0]=="baseUrl"){_1e=arg[1];break;}}load(_1e+"/_base/configRhino.js");rhinoDojoConfig(_2,_1e,_1f);}has.add("host-webworker",((typeof WorkerGlobalScope!=="undefined")&&(self instanceof WorkerGlobalScope)));if(has("host-webworker")){_c(_2.hasCache,{"host-browser":0,"dom":0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1});_2.loaderPatch={injectUrl:function(url,_20){try{importScripts(url);_20();}catch(e){console.error(e);}}};}for(var p in _1.has){has.add(p,_1.has[p],0,1);}var _21=1,_22=2,_23=3,_24=4,_25=5;if(0){_21="requested";_22="arrived";_23="not-a-module";_24="executing";_25="executed";}var _26=0,_27="sync",xd="xd",_28=[],_29=0,_2a=_3,_2b=_3,_2c;if(1){req.isXdUrl=_3;req.initSyncLoader=function(_2d,_2e,_2f){if(!_29){_29=_2d;_2a=_2e;_2b=_2f;}return {sync:_27,requested:_21,arrived:_22,nonmodule:_23,executing:_24,executed:_25,syncExecStack:_28,modules:_30,execQ:_31,getModule:_32,injectModule:_33,setArrived:_34,signal:_35,finishExec:_36,execModule:_37,dojoRequirePlugin:_29,getLegacyMode:function(){return _26;},guardCheckComplete:_38};};if(1||has("host-webworker")){var _39=location.protocol,_3a=location.host;req.isXdUrl=function(url){if(/^\./.test(url)){return false;}if(/^\/\//.test(url)){return true;}var _3b=url.match(/^([^\/\:]+\:)\/+([^\/]+)/);return _3b&&(_3b[1]!=_39||(_3a&&_3b[2]!=_3a));};1||has.add("dojo-xhr-factory",1);has.add("dojo-force-activex-xhr",1&&!doc.addEventListener&&window.location.protocol=="file:");has.add("native-xhr",typeof XMLHttpRequest!="undefined");if(has("native-xhr")&&!has("dojo-force-activex-xhr")){_2c=function(){return new XMLHttpRequest();};}else{for(var _3c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],_3d,i=0;i<3;){try{_3d=_3c[i++];if(new ActiveXObject(_3d)){break;}}catch(e){}}_2c=function(){return new ActiveXObject(_3d);};}req.getXhr=_2c;has.add("dojo-gettext-api",1);req.getText=function(url,_3e,_3f){var xhr=_2c();xhr.open("GET",_40(url),false);xhr.send(null);if(xhr.status==200||(!location.host&&!xhr.status)){if(_3f){_3f(xhr.responseText,_3e);}}else{throw _f("xhrFailed",xhr.status);}return xhr.responseText;};}}else{req.async=1;}var _41=new Function("return eval(arguments[0]);");req.eval=function(_42,_43){return _41(_42+"\r\n//# sourceURL="+_43);};var _44={},_45="error",_35=req.signal=function(_46,_47){var _48=_44[_46];_9(_48&&_48.slice(0),function(_49){_49.apply(null,_8(_47)?_47:[_47]);});},on=req.on=function(_4a,_4b){var _4c=_44[_4a]||(_44[_4a]=[]);_4c.push(_4b);return {remove:function(){for(var i=0;i<_4c.length;i++){if(_4c[i]===_4b){_4c.splice(i,1);return;}}}};};var _4d=[],_4e={},_4f=[],_50={},map=req.map={},_51=[],_30={},_52="",_53={},_54="url:",_55={},_56={},_57=0;if(1){var _58=function(_59){var p,_5a,_5b,now,m;for(p in _55){_5a=_55[p];_5b=p.match(/^url\:(.+)/);if(_5b){_53[_54+_5c(_5b[1],_59)]=_5a;}else{if(p=="*now"){now=_5a;}else{if(p!="*noref"){m=_5d(p,_59,true);_53[m.mid]=_53[_54+m.url]=_5a;}}}}if(now){now(_5e(_59));}_55={};},_5f=function(s){return s.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){return "\\"+c;});},_60=function(map,_61){_61.splice(0,_61.length);for(var p in map){_61.push([p,map[p],new RegExp("^"+_5f(p)+"(/|$)"),p.length]);}_61.sort(function(lhs,rhs){return rhs[3]-lhs[3];});return _61;},_62=function(_63,_64){_9(_63,function(_65){_64.push([_7(_65[0])?new RegExp("^"+_5f(_65[0])+"$"):_65[0],_65[1]]);});},_66=function(_67){var _68=_67.name;if(!_68){_68=_67;_67={name:_68};}_67=_c({main:"main"},_67);_67.location=_67.location?_67.location:_68;if(_67.packageMap){map[_68]=_67.packageMap;}if(!_67.main.indexOf("./")){_67.main=_67.main.substring(2);}_50[_68]=_67;},_69=[],_6a=function(_6b,_6c,_6d){for(var p in _6b){if(p=="waitSeconds"){req.waitms=(_6b[p]||0)*1000;}if(p=="cacheBust"){_52=_6b[p]?(_7(_6b[p])?_6b[p]:(new Date()).getTime()+""):"";}if(p=="baseUrl"||p=="combo"){req[p]=_6b[p];}if(1&&p=="async"){var _6e=_6b[p];req.legacyMode=_26=(_7(_6e)&&/sync|legacyAsync/.test(_6e)?_6e:(!_6e?_27:false));req.async=!_26;}if(_6b[p]!==_1a){req.rawConfig[p]=_6b[p];p!="has"&&has.add("config-"+p,_6b[p],0,_6c);}}if(!req.baseUrl){req.baseUrl="./";}if(!/\/$/.test(req.baseUrl)){req.baseUrl+="/";}for(p in _6b.has){has.add(p,_6b.has[p],0,_6c);}_9(_6b.packages,_66);for(var _6f in _6b.packagePaths){_9(_6b.packagePaths[_6f],function(_70){var _71=_6f+"/"+_70;if(_7(_70)){_70={name:_70};}_70.location=_71;_66(_70);});}_60(_c(map,_6b.map),_51);_9(_51,function(_72){_72[1]=_60(_72[1],[]);if(_72[0]=="*"){_51.star=_72;}});_60(_c(_4e,_6b.paths),_4f);_62(_6b.aliases,_4d);if(_6c){_69.push({config:_6b.config});}else{for(p in _6b.config){var _73=_32(p,_6d);_73.config=_c(_73.config||{},_6b.config[p]);}}if(_6b.cache){_58();_55=_6b.cache;if(_6b.cache["*noref"]){_58();}}_35("config",[_6b,req.rawConfig]);};if(has("dojo-cdn")||1){var _74=doc.getElementsByTagName("script"),i=0,_75,_76,src,_77;while(i<_74.length){_75=_74[i++];if((src=_75.getAttribute("src"))&&(_77=src.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){_76=_77[3]||"";_2.baseUrl=_2.baseUrl||_76;_57=_75;}if((src=(_75.getAttribute("data-dojo-config")||_75.getAttribute("djConfig")))){_56=req.eval("({ "+src+" })","data-dojo-config");_57=_75;}if(0){if((src=_75.getAttribute("data-main"))){_56.deps=_56.deps||[src];}}}}if(0){try{if(window.parent!=window&&window.parent.require){var doh=window.parent.require("doh");doh&&_c(_56,doh.testConfig);}}catch(e){}}req.rawConfig={};_6a(_2,1);if(has("dojo-cdn")){_50.dojo.location=_76;if(_76){_76+="/";}_50.dijit.location=_76+"../dijit/";_50.dojox.location=_76+"../dojox/";}_6a(_1,1);_6a(_56,1);}else{_4e=_2.paths;_4f=_2.pathsMapProg;_50=_2.packs;_4d=_2.aliases;_51=_2.mapProgs;_30=_2.modules;_53=_2.cache;_52=_2.cacheBust;req.rawConfig=_2;}if(0){req.combo=req.combo||{add:_3};var _78=0,_79=[],_7a=null;}var _7b=function(_7c){_38(function(){_9(_7c.deps,_33);if(0&&_78&&!_7a){_7a=setTimeout(function(){_78=0;_7a=null;req.combo.done(function(_7d,url){var _7e=function(){_7f(0,_7d);_80();};_79.push(_7d);_81=_7d;req.injectUrl(url,_7e,_7d);_81=0;},req);},0);}});},_16=function(a1,a2,a3,_82,_83){var _84,_85;if(_7(a1)){_84=_32(a1,_82,true);if(_84&&_84.executed){return _84.result;}throw _f("undefinedModule",a1);}if(!_8(a1)){_6a(a1,0,_82);a1=a2;a2=a3;}if(_8(a1)){if(!a1.length){a2&&a2();}else{_85="require*"+uid();for(var mid,_86=[],i=0;i<a1.length;){mid=a1[i++];_86.push(_32(mid,_82));}_84=_c(_87("",_85,0,""),{injected:_22,deps:_86,def:a2||_3,require:_82?_82.require:req,gc:1});_30[_84.mid]=_84;_7b(_84);var _88=_89&&_26!=_27;_38(function(){_37(_84,_88);});if(!_84.executed){_31.push(_84);}_80();}}return _83;},_5e=function(_8a){if(!_8a){return req;}var _8b=_8a.require;if(!_8b){_8b=function(a1,a2,a3){return _16(a1,a2,a3,_8a,_8b);};_8a.require=_c(_8b,req);_8b.module=_8a;_8b.toUrl=function(_8c){return _5c(_8c,_8a);};_8b.toAbsMid=function(mid){return _ba(mid,_8a);};if(0){_8b.undef=function(mid){req.undef(mid,_8a);};}if(1){_8b.syncLoadNls=function(mid){var _8d=_5d(mid,_8a),_8e=_30[_8d.mid];if(!_8e||!_8e.executed){_8f=_53[_8d.mid]||_53[_54+_8d.url];if(_8f){_90(_8f);_8e=_30[_8d.mid];}}return _8e&&_8e.executed&&_8e.result;};}}return _8b;},_31=[],_91=[],_92={},_93=function(_94){_94.injected=_21;_92[_94.mid]=1;if(_94.url){_92[_94.url]=_94.pack||1;}_95();},_34=function(_96){_96.injected=_22;delete _92[_96.mid];if(_96.url){delete _92[_96.url];}if(_4(_92)){_97();1&&_26==xd&&(_26=_27);}},_98=req.idle=function(){return !_91.length&&_4(_92)&&!_31.length&&!_89;},_99=function(_9a,map){if(map){for(var i=0;i<map.length;i++){if(map[i][2].test(_9a)){return map[i];}}}return 0;},_9b=function(_9c){var _9d=[],_9e,_9f;_9c=_9c.replace(/\\/g,"/").split("/");while(_9c.length){_9e=_9c.shift();if(_9e==".."&&_9d.length&&_9f!=".."){_9d.pop();_9f=_9d[_9d.length-1];}else{if(_9e!="."){_9d.push(_9f=_9e);}}}return _9d.join("/");},_87=function(pid,mid,_a0,url){if(1){var xd=req.isXdUrl(url);return {pid:pid,mid:mid,pack:_a0,url:url,executed:0,def:0,isXd:xd,isAmd:!!(xd||(_50[pid]&&_50[pid].isAmd))};}else{return {pid:pid,mid:mid,pack:_a0,url:url,executed:0,def:0};}},_a1=function(mid,_a2,_a3,_a4,_a5,_a6,_a7,_a8,_a9){var pid,_aa,_ab,_ac,url,_ad,_ae,_af;_af=mid;_ae=/^\./.test(mid);if(/(^\/)|(\:)|(\.js$)/.test(mid)||(_ae&&!_a2)){return _87(0,mid,0,mid);}else{mid=_9b(_ae?(_a2.mid+"/../"+mid):mid);if(/^\./.test(mid)){throw _f("irrationalPath",mid);}if(_a2){_ac=_99(_a2.mid,_a6);}_ac=_ac||_a6.star;_ac=_ac&&_99(mid,_ac[1]);if(_ac){mid=_ac[1]+mid.substring(_ac[3]);}_77=mid.match(/^([^\/]+)(\/(.+))?$/);pid=_77?_77[1]:"";if((_aa=_a3[pid])){mid=pid+"/"+(_ab=(_77[3]||_aa.main));}else{pid="";}var _b0=0,_b1=0;_9(_a8,function(_b2){var _b3=mid.match(_b2[0]);if(_b3&&_b3.length>_b0){_b1=_6(_b2[1])?mid.replace(_b2[0],_b2[1]):_b2[1];}});if(_b1){return _a1(_b1,0,_a3,_a4,_a5,_a6,_a7,_a8,_a9);}_ad=_a4[mid];if(_ad){return _a9?_87(_ad.pid,_ad.mid,_ad.pack,_ad.url):_a4[mid];}}_ac=_99(mid,_a7);if(_ac){url=_ac[1]+mid.substring(_ac[3]);}else{if(pid){url=_aa.location+"/"+_ab;}else{if(has("config-tlmSiblingOfDojo")){url="../"+mid;}else{url=mid;}}}if(!(/(^\/)|(\:)/.test(url))){url=_a5+url;}url+=".js";return _87(pid,mid,_aa,_9b(url));},_5d=function(mid,_b4,_b5){return _a1(mid,_b4,_50,_30,req.baseUrl,_b5?[]:_51,_b5?[]:_4f,_b5?[]:_4d);},_b6=function(_b7,_b8,_b9){return _b7.normalize?_b7.normalize(_b8,function(mid){return _ba(mid,_b9);}):_ba(_b8,_b9);},_bb=0,_32=function(mid,_bc,_bd){var _be,_bf,_c0,_c1;_be=mid.match(/^(.+?)\!(.*)$/);if(_be){_bf=_32(_be[1],_bc,_bd);if(1&&_26==_27&&!_bf.executed){_33(_bf);if(_bf.injected===_22&&!_bf.executed){_38(function(){_37(_bf);});}if(_bf.executed){_c2(_bf);}else{_31.unshift(_bf);}}if(_bf.executed===_25&&!_bf.load){_c2(_bf);}if(_bf.load){_c0=_b6(_bf,_be[2],_bc);mid=(_bf.mid+"!"+(_bf.dynamic?++_bb+"!":"")+_c0);}else{_c0=_be[2];mid=_bf.mid+"!"+(++_bb)+"!waitingForPlugin";}_c1={plugin:_bf,mid:mid,req:_5e(_bc),prid:_c0};}else{_c1=_5d(mid,_bc);}return _30[_c1.mid]||(!_bd&&(_30[_c1.mid]=_c1));},_ba=req.toAbsMid=function(mid,_c3){return _5d(mid,_c3).mid;},_5c=req.toUrl=function(_c4,_c5){var _c6=_5d(_c4+"/x",_c5),url=_c6.url;return _40(_c6.pid===0?_c4:url.substring(0,url.length-5));},_c7={injected:_22,executed:_25,def:_23,result:_23},_c8=function(mid){return _30[mid]=_c({mid:mid},_c7);},_c9=_c8("require"),_ca=_c8("exports"),_cb=_c8("module"),_cc=function(_cd,_ce){req.trace("loader-run-factory",[_cd.mid]);var _cf=_cd.def,_d0;1&&_28.unshift(_cd);if(has("config-dojo-loader-catches")){try{_d0=_6(_cf)?_cf.apply(null,_ce):_cf;}catch(e){_35(_45,_cd.result=_f("factoryThrew",[_cd,e]));}}else{_d0=_6(_cf)?_cf.apply(null,_ce):_cf;}_cd.result=_d0===undefined&&_cd.cjs?_cd.cjs.exports:_d0;1&&_28.shift(_cd);},_d1={},_d2=0,_c2=function(_d3){var _d4=_d3.result;_d3.dynamic=_d4.dynamic;_d3.normalize=_d4.normalize;_d3.load=_d4.load;return _d3;},_d5=function(_d6){var map={};_9(_d6.loadQ,function(_d7){var _d8=_b6(_d6,_d7.prid,_d7.req.module),mid=_d6.dynamic?_d7.mid.replace(/waitingForPlugin$/,_d8):(_d6.mid+"!"+_d8),_d9=_c(_c({},_d7),{mid:mid,prid:_d8,injected:0});if(!_30[mid]){_eb(_30[mid]=_d9);}map[_d7.mid]=_30[mid];_34(_d7);delete _30[_d7.mid];});_d6.loadQ=0;var _da=function(_db){for(var _dc,_dd=_db.deps||[],i=0;i<_dd.length;i++){_dc=map[_dd[i].mid];if(_dc){_dd[i]=_dc;}}};for(var p in _30){_da(_30[p]);}_9(_31,_da);},_36=function(_de){req.trace("loader-finish-exec",[_de.mid]);_de.executed=_25;_de.defOrder=_d2++;1&&_9(_de.provides,function(cb){cb();});if(_de.loadQ){_c2(_de);_d5(_de);}for(i=0;i<_31.length;){if(_31[i]===_de){_31.splice(i,1);}else{i++;}}if(/^require\*/.test(_de.mid)){delete _30[_de.mid];}},_df=[],_37=function(_e0,_e1){if(_e0.executed===_24){req.trace("loader-circular-dependency",[_df.concat(_e0.mid).join("->")]);return (!_e0.def||_e1)?_d1:(_e0.cjs&&_e0.cjs.exports);}if(!_e0.executed){if(!_e0.def){return _d1;}var mid=_e0.mid,_e2=_e0.deps||[],arg,_e3,_e4=[],i=0;if(0){_df.push(mid);req.trace("loader-exec-module",["exec",_df.length,mid]);}_e0.executed=_24;while((arg=_e2[i++])){_e3=((arg===_c9)?_5e(_e0):((arg===_ca)?_e0.cjs.exports:((arg===_cb)?_e0.cjs:_37(arg,_e1))));if(_e3===_d1){_e0.executed=0;req.trace("loader-exec-module",["abort",mid]);0&&_df.pop();return _d1;}_e4.push(_e3);}_cc(_e0,_e4);_36(_e0);0&&_df.pop();}return _e0.result;},_89=0,_38=function(_e5){try{_89++;_e5();}finally{_89--;}if(_98()){_35("idle",[]);}},_80=function(){if(_89){return;}_38(function(){_2a();for(var _e6,_e7,i=0;i<_31.length;){_e6=_d2;_e7=_31[i];_37(_e7);if(_e6!=_d2){_2a();i=0;}else{i++;}}});};if(0){req.undef=function(_e8,_e9){var _ea=_32(_e8,_e9);_34(_ea);_c(_ea,{def:0,executed:0,injected:0,node:0});};}if(1){if(has("dojo-loader-eval-hint-url")===undefined){has.add("dojo-loader-eval-hint-url",1);}var _40=typeof _1.fixupUrl=="function"?_1.fixupUrl:function(url){url+="";return url+(_52?((/\?/.test(url)?"&":"?")+_52):"");},_eb=function(_ec){var _ed=_ec.plugin;if(_ed.executed===_25&&!_ed.load){_c2(_ed);}var _ee=function(def){_ec.result=def;_34(_ec);_36(_ec);_80();};if(_ed.load){_ed.load(_ec.prid,_ec.req,_ee);}else{if(_ed.loadQ){_ed.loadQ.push(_ec);}else{_ed.loadQ=[_ec];_31.unshift(_ed);_33(_ed);}}},_8f=0,_81=0,_ef=0,_90=function(_f0,_f1){if(has("config-stripStrict")){_f0=_f0.replace(/"use strict"/g,"");}_ef=1;if(has("config-dojo-loader-catches")){try{if(_f0===_8f){_8f.call(null);}else{req.eval(_f0,has("dojo-loader-eval-hint-url")?_f1.url:_f1.mid);}}catch(e){_35(_45,_f("evalModuleThrew",_f1));}}else{if(_f0===_8f){_8f.call(null);}else{req.eval(_f0,has("dojo-loader-eval-hint-url")?_f1.url:_f1.mid);}}_ef=0;},_33=function(_f2){var mid=_f2.mid,url=_f2.url;if(_f2.executed||_f2.injected||_92[mid]||(_f2.url&&((_f2.pack&&_92[_f2.url]===_f2.pack)||_92[_f2.url]==1))){return;}_93(_f2);if(0){var _f3=0;if(_f2.plugin&&_f2.plugin.isCombo){req.combo.add(_f2.plugin.mid,_f2.prid,0,req);_f3=1;}else{if(!_f2.plugin){_f3=req.combo.add(0,_f2.mid,_f2.url,req);}}if(_f3){_78=1;return;}}if(_f2.plugin){_eb(_f2);return;}var _f4=function(){_7f(_f2);if(_f2.injected!==_22){if(has("dojo-enforceDefine")){_35(_45,_f("noDefine",_f2));return;}_34(_f2);_c(_f2,_c7);req.trace("loader-define-nonmodule",[_f2.url]);}if(1&&_26){!_28.length&&_80();}else{_80();}};_8f=_53[mid]||_53[_54+_f2.url];if(_8f){req.trace("loader-inject",["cache",_f2.mid,url]);_90(_8f,_f2);_f4();return;}if(1&&_26){if(_f2.isXd){_26==_27&&(_26=xd);}else{if(_f2.isAmd&&_26!=_27){}else{var _f5=function(_f6){if(_26==_27){_28.unshift(_f2);_90(_f6,_f2);_28.shift();_7f(_f2);if(!_f2.cjs){_34(_f2);_36(_f2);}if(_f2.finish){var _f7=mid+"*finish",_f8=_f2.finish;delete _f2.finish;def(_f7,["dojo",("dojo/require!"+_f8.join(",")).replace(/\./g,"/")],function(_f9){_9(_f8,function(mid){_f9.require(mid);});});_31.unshift(_32(_f7));}_f4();}else{_f6=_2b(_f2,_f6);if(_f6){_90(_f6,_f2);_f4();}else{_81=_f2;req.injectUrl(_40(url),_f4,_f2);_81=0;}}};req.trace("loader-inject",["xhr",_f2.mid,url,_26!=_27]);if(has("config-dojo-loader-catches")){try{req.getText(url,_26!=_27,_f5);}catch(e){_35(_45,_f("xhrInjectFailed",[_f2,e]));}}else{req.getText(url,_26!=_27,_f5);}return;}}}req.trace("loader-inject",["script",_f2.mid,url]);_81=_f2;req.injectUrl(_40(url),_f4,_f2);_81=0;},_fa=function(_fb,_fc,def){req.trace("loader-define-module",[_fb.mid,_fc]);if(0&&_fb.plugin&&_fb.plugin.isCombo){_fb.result=_6(def)?def():def;_34(_fb);_36(_fb);return _fb;}var mid=_fb.mid;if(_fb.injected===_22){_35(_45,_f("multipleDefine",_fb));return _fb;}_c(_fb,{deps:_fc,def:def,cjs:{id:_fb.mid,uri:_fb.url,exports:(_fb.result={}),setExports:function(_fd){_fb.cjs.exports=_fd;},config:function(){return _fb.config;}}});for(var i=0;_fc[i];i++){_fc[i]=_32(_fc[i],_fb);}if(1&&_26&&!_92[mid]){_7b(_fb);_31.push(_fb);_80();}_34(_fb);if(!_6(def)&&!_fc.length){_fb.result=def;_36(_fb);}return _fb;},_7f=function(_fe,_ff){var _100=[],_101,args;while(_91.length){args=_91.shift();_ff&&(args[0]=_ff.shift());_101=(args[0]&&_32(args[0]))||_fe;_100.push([_101,args[1],args[2]]);}_58(_fe);_9(_100,function(args){_7b(_fa.apply(null,args));});};}var _102=0,_97=_3,_95=_3;if(1){_97=function(){_102&&clearTimeout(_102);_102=0;};_95=function(){_97();if(req.waitms){_102=_17.setTimeout(function(){_97();_35(_45,_f("timeout",_92));},req.waitms);}};}if(1){has.add("ie-event-behavior",doc.attachEvent&&typeof Windows==="undefined"&&(typeof opera==="undefined"||opera.toString()!="[object Opera]"));}if(1&&(1||1)){var _103=function(node,_104,_105,_106){if(!has("ie-event-behavior")){node.addEventListener(_104,_106,false);return function(){node.removeEventListener(_104,_106,false);};}else{node.attachEvent(_105,_106);return function(){node.detachEvent(_105,_106);};}},_107=_103(window,"load","onload",function(){req.pageLoaded=1;doc.readyState!="complete"&&(doc.readyState="complete");_107();});if(1){var _74=doc.getElementsByTagName("script"),i=0,_75;while(!_57){if(!/^dojo/.test((_75=_74[i++])&&_75.type)){_57=_75;}}req.injectUrl=function(url,_108,_109){var node=_109.node=doc.createElement("script"),_10a=function(e){e=e||window.event;var node=e.target||e.srcElement;if(e.type==="load"||/complete|loaded/.test(node.readyState)){_10b();_10c();_108&&_108();}},_10b=_103(node,"load","onreadystatechange",_10a),_10c=_103(node,"error","onerror",function(e){_10b();_10c();_35(_45,_f("scriptError",[url,e]));});node.type="text/javascript";node.charset="utf-8";node.src=url;_57.parentNode.insertBefore(node,_57);return node;};}}if(1){req.log=function(){try{for(var i=0;i<arguments.length;i++){}}catch(e){}};}else{req.log=_3;}if(0){var _10d=req.trace=function(_10e,args){if(_10d.on&&_10d.group[_10e]){_35("trace",[_10e,args]);for(var arg,dump=[],text="trace:"+_10e+(args.length?(":"+args[0]):""),i=1;i<args.length;){arg=args[i++];if(_7(arg)){text+=", "+arg;}else{dump.push(arg);}}req.log(text);dump.length&&dump.push(".");req.log.apply(req,dump);}};_c(_10d,{on:1,group:{},set:function(_10f,_110){if(_7(_10f)){_10d.group[_10f]=_110;}else{_c(_10d.group,_10f);}}});_10d.set(_c(_c(_c({},_2.trace),_1.trace),_56.trace));on("config",function(_111){_111.trace&&_10d.set(_111.trace);});}else{req.trace=_3;}var def=function(mid,_112,_113){var _114=arguments.length,_115=["require","exports","module"],args=[0,mid,_112];if(_114==1){args=[0,(_6(mid)?_115:[]),mid];}else{if(_114==2&&_7(mid)){args=[mid,(_6(_112)?_115:[]),_112];}else{if(_114==3){args=[mid,_112,_113];}}}if(0&&args[1]===_115){args[2].toString().replace(/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,"").replace(/require\(["']([\w\!\-_\.\/]+)["']\)/g,function(_116,dep){args[1].push(dep);});}req.trace("loader-define",args.slice(0,2));var _117=args[0]&&_32(args[0]),_118;if(_117&&!_92[_117.mid]){_7b(_fa(_117,args[1],args[2]));}else{if(!has("ie-event-behavior")||!1||_ef){_91.push(args);}else{_117=_117||_81;if(!_117){for(mid in _92){_118=_30[mid];if(_118&&_118.node&&_118.node.readyState==="interactive"){_117=_118;break;}}if(0&&!_117){for(var i=0;i<_79.length;i++){_117=_79[i];if(_117.node&&_117.node.readyState==="interactive"){break;}_117=0;}}}if(0&&_8(_117)){_7b(_fa(_32(_117.shift()),args[1],args[2]));if(!_117.length){_79.splice(i,1);}}else{if(_117){_58(_117);_7b(_fa(_117,args[1],args[2]));}else{_35(_45,_f("ieDefineFailed",args[0]));}}_80();}}};def.amd={vendor:"dojotoolkit.org"};if(0){req.def=def;}_c(_c(req,_2.loaderPatch),_1.loaderPatch);on(_45,function(arg){try{console.error(arg);if(arg instanceof Error){for(var p in arg){}}}catch(e){}});_c(req,{uid:uid,cache:_53,packs:_50});if(0){_c(req,{paths:_4e,aliases:_4d,modules:_30,legacyMode:_26,execQ:_31,defQ:_91,waiting:_92,packs:_50,mapProgs:_51,pathsMapProg:_4f,listenerQueues:_44,computeMapProg:_60,computeAliases:_62,runMapProg:_99,compactPath:_9b,getModuleInfo:_a1});}if(_17.define){if(1){_35(_45,_f("defineAlreadyDefined",0));}return;}else{_17.define=def;_17.require=req;if(0){require=req;}}if(0&&req.combo&&req.combo.plugins){var _119=req.combo.plugins,_11a;for(_11a in _119){_c(_c(_32(_11a),_119[_11a]),{isCombo:1,executed:"executed",load:1});}}if(1){_9(_69,function(c){_6a(c);});var _11b=_56.deps||_1.deps||_2.deps,_11c=_56.callback||_1.callback||_2.callback;req.boot=(_11b||_11c)?[_11b||[],_11c]:0;}if(!1){!req.async&&req(["dojo"]);req.boot&&req.apply(null,req.boot);}})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../esri",name:"esri"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../jquery",main:"jquery",name:"jquery"},{location:"../fastclick",main:"fastclick",name:"fastclick"},{location:"../moment",main:"moment",name:"moment"},{location:"../bootstrap",main:"bootstrap",name:"bootstrap"},{location:"../bootstrapmap",name:"bootstrapmap"},{location:"../bootstrap-datetimepicker",main:"bootstrap-datetimepicker",name:"bootstrap-datetimepicker"},{location:"../bootstrap-jasny",main:"bootstrap-jasny",name:"bootstrap-jasny"}]});require({cache:{"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(dojo,has,lang){var _11d={},u;function _11e(fn){return _11d[fn]=new Function("item","index","array",fn);};function _11f(some){var _120=!some;return function(a,fn,o){var i=0,l=a&&a.length||0,_121;if(l&&typeof a=="string"){a=a.split("");}if(typeof fn=="string"){fn=_11d[fn]||_11e(fn);}if(o){for(;i<l;++i){_121=!fn.call(o,a[i],i,a);if(some^_121){return !_121;}}}else{for(;i<l;++i){_121=!fn(a[i],i,a);if(some^_121){return !_121;}}}return _120;};};function _122(up){var _123=1,_124=0,_125=0;if(!up){_123=_124=_125=-1;}return function(a,x,from,last){if(last&&_123>0){return _126.lastIndexOf(a,x,from);}var l=a&&a.length||0,end=up?l+_125:_124,i;if(from===u){i=up?_124:l+_125;}else{if(from<0){i=l+from;if(i<0){i=_124;}}else{i=from>=l?l+_125:from;}}if(l&&typeof a=="string"){a=a.split("");}for(;i!=end;i+=_123){if(a[i]==x){return i;}}return -1;};};var _126={every:_11f(false),some:_11f(true),indexOf:_122(true),lastIndexOf:_122(false),forEach:function(arr,_127,_128){var i=0,l=arr&&arr.length||0;if(l&&typeof arr=="string"){arr=arr.split("");}if(typeof _127=="string"){_127=_11d[_127]||_11e(_127);}if(_128){for(;i<l;++i){_127.call(_128,arr[i],i,arr);}}else{for(;i<l;++i){_127(arr[i],i,arr);}}},map:function(arr,_129,_12a,Ctr){var i=0,l=arr&&arr.length||0,out=new (Ctr||Array)(l);if(l&&typeof arr=="string"){arr=arr.split("");}if(typeof _129=="string"){_129=_11d[_129]||_11e(_129);}if(_12a){for(;i<l;++i){out[i]=_129.call(_12a,arr[i],i,arr);}}else{for(;i<l;++i){out[i]=_129(arr[i],i,arr);}}return out;},filter:function(arr,_12b,_12c){var i=0,l=arr&&arr.length||0,out=[],_12d;if(l&&typeof arr=="string"){arr=arr.split("");}if(typeof _12b=="string"){_12b=_11d[_12b]||_11e(_12b);}if(_12c){for(;i<l;++i){_12d=arr[i];if(_12b.call(_12c,_12d,i,arr)){out.push(_12d);}}}else{for(;i<l;++i){_12d=arr[i];if(_12b(_12d,i,arr)){out.push(_12d);}}}return out;},clearCache:function(){_11d={};}};1&&lang.mixin(dojo,_126);return _126;});},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(has,_12e,_12f,_130){var i,p,_131=(function(){return this;})(),_132={},_133={},dojo={config:_12e,global:_131,dijit:_132,dojox:_133};var _134={dojo:["dojo",dojo],dijit:["dijit",_132],dojox:["dojox",_133]},_135=(_12f.map&&_12f.map[_130.id.match(/[^\/]+/)[0]]),item;for(p in _135){if(_134[p]){_134[p][0]=_135[p];}else{_134[p]=[_135[p],{}];}}for(p in _134){item=_134[p];item[1]._scopeName=item[0];if(!_12e.noGlobals){_131[item[0]]=item[1];}}dojo.scopeMap=_134;dojo.baseUrl=dojo.config.baseUrl=_12f.baseUrl;dojo.isAsync=!1||_12f.async;dojo.locale=_12e.locale;var rev="$Rev: ae6be82 $".match(/[0-9a-f]{7,}/);dojo.version={major:1,minor:10,patch:3,flag:"",revision:rev?rev[0]:NaN,toString:function(){var v=dojo.version;return v.major+"."+v.minor+"."+v.patch+v.flag+" ("+v.revision+")";}};1||has.add("extend-dojo",1);(Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}"))(dojo);if(0){dojo.exit=function(_136){quit(_136);};}else{dojo.exit=function(){};}1||has.add("dojo-guarantee-console",1);if(1){typeof console!="undefined"||(console={});var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var tn;i=0;while((tn=cn[i++])){if(!console[tn]){(function(){var tcn=tn+"";console[tcn]=("log" in console)?function(){var a=Array.prototype.slice.call(arguments);a.unshift(tcn+":");console["log"](a.join(" "));}:function(){};console[tcn]._fake=true;})();}}}has.add("dojo-debug-messages",!!_12e.isDebug);dojo.deprecated=dojo.experimental=function(){};if(has("dojo-debug-messages")){dojo.deprecated=function(_137,_138,_139){var _13a="DEPRECATED: "+_137;if(_138){_13a+=" "+_138;}if(_139){_13a+=" -- will be removed in version: "+_139;}console.warn(_13a);};dojo.experimental=function(_13b,_13c){var _13d="EXPERIMENTAL: "+_13b+" -- APIs subject to change without notice.";if(_13c){_13d+=" "+_13c;}console.warn(_13d);};}1||has.add("dojo-modulePaths",1);if(1){if(_12e.modulePaths){dojo.deprecated("dojo.modulePaths","use paths configuration");var _13e={};for(p in _12e.modulePaths){_13e[p.replace(/\./g,"/")]=_12e.modulePaths[p];}_12f({paths:_13e});}}1||has.add("dojo-moduleUrl",1);if(1){dojo.moduleUrl=function(_13f,url){dojo.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var _140=null;if(_13f){_140=_12f.toUrl(_13f.replace(/\./g,"/")+(url?("/"+url):"")+"/*.*").replace(/\/\*\.\*/,"")+(url?"":"/");}return _140;};}dojo._hasResource={};return dojo;});},"dojo/has":function(){define(["require","module"],function(_141,_142){var has=_141.has||function(){};if(!1){var _143=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location==location&&window.document==document,_144=(function(){return this;})(),doc=_143&&document,_145=doc&&doc.createElement("DiV"),_146=(_142.config&&_142.config())||{};has=function(name){return typeof _146[name]=="function"?(_146[name]=_146[name](_144,doc,_145)):_146[name];};has.cache=_146;has.add=function(name,test,now,_147){(typeof _146[name]=="undefined"||_147)&&(_146[name]=test);return now&&has(name);};1||has.add("host-browser",_143);0&&has.add("host-node",(typeof process=="object"&&process.versions&&process.versions.node&&process.versions.v8));0&&has.add("host-rhino",(typeof load=="function"&&(typeof Packages=="function"||typeof Packages=="object")));1||has.add("dom",_143);1||has.add("dojo-dom-ready-api",1);1||has.add("dojo-sniff",1);}if(1){has.add("dom-addeventlistener",!!document.addEventListener);has.add("touch","ontouchstart" in document||("onpointerdown" in document&&navigator.maxTouchPoints>0)||window.navigator.msMaxTouchPoints);has.add("touch-events","ontouchstart" in document);has.add("pointer-events","onpointerdown" in document);has.add("MSPointer","msMaxTouchPoints" in navigator);has.add("device-width",screen.availWidth||innerWidth);var form=document.createElement("form");has.add("dom-attributes-explicit",form.attributes.length==0);has.add("dom-attributes-specified-flag",form.attributes.length>0&&form.attributes.length<40);}has.clearElement=function(_148){_148.innerHTML="";return _148;};has.normalize=function(id,_149){var _14a=id.match(/[\?:]|[^:\?]*/g),i=0,get=function(skip){var term=_14a[i++];if(term==":"){return 0;}else{if(_14a[i++]=="?"){if(!skip&&has(term)){return get();}else{get(true);return get(skip);}}return term||0;}};id=get();return id&&_149(id);};has.load=function(id,_14b,_14c){if(id){_14b([id],_14c);}else{_14c();}};return has;});},"dojo/_base/config":function(){define(["../has","require"],function(has,_14d){var _14e={};if(1){var src=_14d.rawConfig,p;for(p in src){_14e[p]=src[p];}}else{var _14f=function(_150,_151,_152){for(p in _150){p!="has"&&has.add(_151+p,_150[p],0,_152);}};var _153=(function(){return this;})();_14e=1?_14d.rawConfig:_153.dojoConfig||_153.djConfig||{};_14f(_14e,"config",1);_14f(_14e.has,"",1);}if(!_14e.locale&&typeof navigator!="undefined"){var _154=(navigator.language||navigator.userLanguage);if(_154){_14e.locale=_154.toLowerCase();}}return _14e;});},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(dojo,has){has.add("bug-for-in-skips-shadowed",function(){for(var i in {toString:1}){return 0;}return 1;});var _155=has("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],_156=_155.length,_157=function(_158,_159,_15a){if(!_15a){if(_158[0]&&dojo.scopeMap[_158[0]]){_15a=dojo.scopeMap[_158.shift()][1];}else{_15a=dojo.global;}}try{for(var i=0;i<_158.length;i++){var p=_158[i];if(!(p in _15a)){if(_159){_15a[p]={};}else{return;}}_15a=_15a[p];}return _15a;}catch(e){}},opts=Object.prototype.toString,_15b=function(obj,_15c,_15d){return (_15d||[]).concat(Array.prototype.slice.call(obj,_15c||0));},_15e=/\{([^\}]+)\}/g;var lang={_extraNames:_155,_mixin:function(dest,_15f,_160){var name,s,i,_161={};for(name in _15f){s=_15f[name];if(!(name in dest)||(dest[name]!==s&&(!(name in _161)||_161[name]!==s))){dest[name]=_160?_160(s):s;}}if(has("bug-for-in-skips-shadowed")){if(_15f){for(i=0;i<_156;++i){name=_155[i];s=_15f[name];if(!(name in dest)||(dest[name]!==s&&(!(name in _161)||_161[name]!==s))){dest[name]=_160?_160(s):s;}}}}return dest;},mixin:function(dest,_162){if(!dest){dest={};}for(var i=1,l=arguments.length;i<l;i++){lang._mixin(dest,arguments[i]);}return dest;},setObject:function(name,_163,_164){var _165=name.split("."),p=_165.pop(),obj=_157(_165,true,_164);return obj&&p?(obj[p]=_163):undefined;},getObject:function(name,_166,_167){return _157(name?name.split("."):[],_166,_167);},exists:function(name,obj){return lang.getObject(name,false,obj)!==undefined;},isString:function(it){return (typeof it=="string"||it instanceof String);},isArray:function(it){return it&&(it instanceof Array||typeof it=="array");},isFunction:function(it){return opts.call(it)==="[object Function]";},isObject:function(it){return it!==undefined&&(it===null||typeof it=="object"||lang.isArray(it)||lang.isFunction(it));},isArrayLike:function(it){return it&&it!==undefined&&!lang.isString(it)&&!lang.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(lang.isArray(it)||isFinite(it.length));},isAlien:function(it){return it&&!lang.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it));},extend:function(ctor,_168){for(var i=1,l=arguments.length;i<l;i++){lang._mixin(ctor.prototype,arguments[i]);}return ctor;},_hitchArgs:function(_169,_16a){var pre=lang._toArray(arguments,2);var _16b=lang.isString(_16a);return function(){var args=lang._toArray(arguments);var f=_16b?(_169||dojo.global)[_16a]:_16a;return f&&f.apply(_169||this,pre.concat(args));};},hitch:function(_16c,_16d){if(arguments.length>2){return lang._hitchArgs.apply(dojo,arguments);}if(!_16d){_16d=_16c;_16c=null;}if(lang.isString(_16d)){_16c=_16c||dojo.global;if(!_16c[_16d]){throw (["lang.hitch: scope[\"",_16d,"\"] is null (scope=\"",_16c,"\")"].join(""));}return function(){return _16c[_16d].apply(_16c,arguments||[]);};}return !_16c?_16d:function(){return _16d.apply(_16c,arguments||[]);};},delegate:(function(){function TMP(){};return function(obj,_16e){TMP.prototype=obj;var tmp=new TMP();TMP.prototype=null;if(_16e){lang._mixin(tmp,_16e);}return tmp;};})(),_toArray:has("ie")?(function(){function slow(obj,_16f,_170){var arr=_170||[];for(var x=_16f||0;x<obj.length;x++){arr.push(obj[x]);}return arr;};return function(obj){return ((obj.item)?slow:_15b).apply(this,arguments);};})():_15b,partial:function(_171){var arr=[null];return lang.hitch.apply(dojo,arr.concat(lang._toArray(arguments)));},clone:function(src){if(!src||typeof src!="object"||lang.isFunction(src)){return src;}if(src.nodeType&&"cloneNode" in src){return src.cloneNode(true);}if(src instanceof Date){return new Date(src.getTime());}if(src instanceof RegExp){return new RegExp(src);}var r,i,l;if(lang.isArray(src)){r=[];for(i=0,l=src.length;i<l;++i){if(i in src){r.push(lang.clone(src[i]));}}}else{r=src.constructor?new src.constructor():{};}return lang._mixin(r,src,lang.clone);},trim:String.prototype.trim?function(str){return str.trim();}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");},replace:function(tmpl,map,_172){return tmpl.replace(_172||_15e,lang.isFunction(map)?map:function(_173,k){return lang.getObject(k,false,map);});}};1&&lang.mixin(dojo,lang);return lang;});},"dojo/sniff":function(){define(["./has"],function(has){if(1){var n=navigator,dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);has.add("air",dua.indexOf("AdobeAIR")>=0);has.add("msapp",parseFloat(dua.split("MSAppHost/")[1])||undefined);has.add("khtml",dav.indexOf("Konqueror")>=0?tv:undefined);has.add("webkit",parseFloat(dua.split("WebKit/")[1])||undefined);has.add("chrome",parseFloat(dua.split("Chrome/")[1])||undefined);has.add("safari",dav.indexOf("Safari")>=0&&!has("chrome")?parseFloat(dav.split("Version/")[1]):undefined);has.add("mac",dav.indexOf("Macintosh")>=0);has.add("quirks",document.compatMode=="BackCompat");if(dua.match(/(iPhone|iPod|iPad)/)){var p=RegExp.$1.replace(/P/,"p");var v=dua.match(/OS ([\d_]+)/)?RegExp.$1:"1";var os=parseFloat(v.replace(/_/,".").replace(/_/g,""));has.add(p,os);has.add("ios",os);}has.add("android",parseFloat(dua.split("Android ")[1])||undefined);has.add("bb",(dua.indexOf("BlackBerry")>=0||dua.indexOf("BB10")>=0)&&parseFloat(dua.split("Version/")[1])||undefined);has.add("trident",parseFloat(dav.split("Trident/")[1])||undefined);has.add("svg",typeof SVGAngle!=="undefined");if(!has("webkit")){if(dua.indexOf("Opera")>=0){has.add("opera",tv>=9.8?parseFloat(dua.split("Version/")[1])||tv:tv);}if(dua.indexOf("Gecko")>=0&&!has("khtml")&&!has("webkit")&&!has("trident")){has.add("mozilla",tv);}if(has("mozilla")){has.add("ff",parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||undefined);}if(document.all&&!has("opera")){var isIE=parseFloat(dav.split("MSIE ")[1])||undefined;var mode=document.documentMode;if(mode&&mode!=5&&Math.floor(isIE)!=mode){isIE=mode;}has.add("ie",isIE);}has.add("wii",typeof opera!="undefined"&&opera.wiiremote);}}return has;});},"dojo/_base/browser":function(){if(require.has){require.has.add("config-selectorEngine","acme");}define(["../ready","./kernel","./connect","./unload","./window","./event","./html","./NodeList","../query","./xhr","./fx"],function(dojo){return dojo;});},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(dojo,has,_174,_175,lang){var _176=0,_177=[],_178=0,_179=function(){_176=1;dojo._postLoad=dojo.config.afterOnLoad=true;_17a();},_17a=function(){if(_178){return;}_178=1;while(_176&&(!_175||_175._Q.length==0)&&(_174.idle?_174.idle():true)&&_177.length){var f=_177.shift();try{f();}catch(e){e.info=e.message;if(_174.signal){_174.signal("error",e);}else{throw e;}}}_178=0;};_174.on&&_174.on("idle",_17a);if(_175){_175._onQEmpty=_17a;}var _17b=dojo.ready=dojo.addOnLoad=function(_17c,_17d,_17e){var _17f=lang._toArray(arguments);if(typeof _17c!="number"){_17e=_17d;_17d=_17c;_17c=1000;}else{_17f.shift();}_17e=_17e?lang.hitch.apply(dojo,_17f):function(){_17d();};_17e.priority=_17c;for(var i=0;i<_177.length&&_17c>=_177[i].priority;i++){}_177.splice(i,0,_17e);_17a();};1||has.add("dojo-config-addOnLoad",1);if(1){var dca=dojo.config.addOnLoad;if(dca){_17b[(lang.isArray(dca)?"apply":"call")](dojo,dca);}}if(1&&dojo.config.parseOnLoad&&!dojo.isAsync){_17b(99,function(){if(!dojo.parser){dojo.deprecated("Add explicit require(['dojo/parser']);","","2.0");_174(["dojo/parser"]);}});}if(_175){_175(_179);}else{_179();}return _17b;});},"dojo/domReady":function(){define(["./has"],function(has){var _180=(function(){return this;})(),doc=document,_181={"loaded":1,"complete":1},_182=typeof doc.readyState!="string",_183=!!_181[doc.readyState],_184=[],_185;function _186(_187){_184.push(_187);if(_183){_188();}};_186.load=function(id,req,load){_186(load);};_186._Q=_184;_186._onQEmpty=function(){};if(_182){doc.readyState="loading";}function _188(){if(_185){return;}_185=true;while(_184.length){try{(_184.shift())(doc);}catch(err){console.error(err,"in domReady callback",err.stack);}}_185=false;_186._onQEmpty();};if(!_183){var _189=[],_18a=function(evt){evt=evt||_180.event;if(_183||(evt.type=="readystatechange"&&!_181[doc.readyState])){return;}if(_182){doc.readyState="complete";}_183=1;_188();},on=function(node,_18b){node.addEventListener(_18b,_18a,false);_184.push(function(){node.removeEventListener(_18b,_18a,false);});};if(!has("dom-addeventlistener")){on=function(node,_18c){_18c="on"+_18c;node.attachEvent(_18c,_18a);_184.push(function(){node.detachEvent(_18c,_18a);});};var div=doc.createElement("div");try{if(div.doScroll&&_180.frameElement===null){_189.push(function(){try{div.doScroll("left");return 1;}catch(e){}});}}catch(e){}}on(doc,"DOMContentLoaded");on(_180,"load");if("onreadystatechange" in doc){on(doc,"readystatechange");}else{if(!_182){_189.push(function(){return _181[doc.readyState];});}}if(_189.length){var _18d=function(){if(_183){return;}var i=_189.length;while(i--){if(_189[i]()){_18a("poller");return;}}setTimeout(_18d,30);};_18d();}}return _186;});},"dojo/_base/connect":function(){define(["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(dojo,on,hub,_18e,_18f,_190,has,lang){has.add("events-keypress-typed",function(){var _191={charCode:0};try{_191=document.createEvent("KeyboardEvent");(_191.initKeyboardEvent||_191.initKeyEvent).call(_191,"keypress",true,true,null,false,false,false,false,9,3);}catch(e){}return _191.charCode==0&&!has("opera");});function _192(obj,_193,_194,_195,_196){_195=lang.hitch(_194,_195);if(!obj||!(obj.addEventListener||obj.attachEvent)){return _18e.after(obj||dojo.global,_193,_195,true);}if(typeof _193=="string"&&_193.substring(0,2)=="on"){_193=_193.substring(2);}if(!obj){obj=dojo.global;}if(!_196){switch(_193){case "keypress":_193=_197;break;case "mouseenter":_193=_190.enter;break;case "mouseleave":_193=_190.leave;break;}}return on(obj,_193,_195,_196);};var _198={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113};var _199=has("mac")?"metaKey":"ctrlKey";var _19a=function(evt,_19b){var faux=lang.mixin({},evt,_19b);_19c(faux);faux.preventDefault=function(){evt.preventDefault();};faux.stopPropagation=function(){evt.stopPropagation();};return faux;};function _19c(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode;};var _197;if(has("events-keypress-typed")){var _19d=function(e,code){try{return (e.keyCode=code);}catch(e){return 0;}};_197=function(_19e,_19f){var _1a0=on(_19e,"keydown",function(evt){var k=evt.keyCode;var _1a1=(k!=13)&&k!=32&&(k!=27||!has("ie"))&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222)&&k!=229;if(_1a1||evt.ctrlKey){var c=_1a1?0:k;if(evt.ctrlKey){if(k==3||k==13){return _19f.call(evt.currentTarget,evt);}else{if(c>95&&c<106){c-=48;}else{if((!evt.shiftKey)&&(c>=65&&c<=90)){c+=32;}else{c=_198[c]||c;}}}}var faux=_19a(evt,{type:"keypress",faux:true,charCode:c});_19f.call(evt.currentTarget,faux);if(has("ie")){_19d(evt,faux.keyCode);}}});var _1a2=on(_19e,"keypress",function(evt){var c=evt.charCode;c=c>=32?c:0;evt=_19a(evt,{charCode:c,faux:true});return _19f.call(this,evt);});return {remove:function(){_1a0.remove();_1a2.remove();}};};}else{if(has("opera")){_197=function(_1a3,_1a4){return on(_1a3,"keypress",function(evt){var c=evt.which;if(c==3){c=99;}c=c<32&&!evt.shiftKey?0:c;if(evt.ctrlKey&&!evt.shiftKey&&c>=65&&c<=90){c+=32;}return _1a4.call(this,_19a(evt,{charCode:c}));});};}else{_197=function(_1a5,_1a6){return on(_1a5,"keypress",function(evt){_19c(evt);return _1a6.call(this,evt);});};}}var _1a7={_keypress:_197,connect:function(obj,_1a8,_1a9,_1aa,_1ab){var a=arguments,args=[],i=0;args.push(typeof a[0]=="string"?null:a[i++],a[i++]);var a1=a[i+1];args.push(typeof a1=="string"||typeof a1=="function"?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++){args.push(a[i]);}return _192.apply(this,args);},disconnect:function(_1ac){if(_1ac){_1ac.remove();}},subscribe:function(_1ad,_1ae,_1af){return hub.subscribe(_1ad,lang.hitch(_1ae,_1af));},publish:function(_1b0,args){return hub.publish.apply(hub,[_1b0].concat(args));},connectPublisher:function(_1b1,obj,_1b2){var pf=function(){_1a7.publish(_1b1,arguments);};return _1b2?_1a7.connect(obj,_1b2,pf):_1a7.connect(obj,pf);},isCopyKey:function(e){return e[_199];}};_1a7.unsubscribe=_1a7.disconnect;1&&lang.mixin(dojo,_1a7);return _1a7;});},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(_1b3,dojo,has){"use strict";if(1){var _1b4=window.ScriptEngineMajorVersion;has.add("jscript",_1b4&&(_1b4()+ScriptEngineMinorVersion()/10));has.add("event-orientationchange",has("touch")&&!has("android"));has.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);has.add("event-focusin",function(_1b5,doc,_1b6){return "onfocusin" in _1b6;});if(has("touch")){has.add("touch-can-modify-event-delegate",function(){var _1b7=function(){};_1b7.prototype=document.createEvent("MouseEvents");try{var _1b8=new _1b7;_1b8.target=null;return _1b8.target===null;}catch(e){return false;}});}}var on=function(_1b9,type,_1ba,_1bb){if(typeof _1b9.on=="function"&&typeof type!="function"&&!_1b9.nodeType){return _1b9.on(type,_1ba);}return on.parse(_1b9,type,_1ba,_1bc,_1bb,this);};on.pausable=function(_1bd,type,_1be,_1bf){var _1c0;var _1c1=on(_1bd,type,function(){if(!_1c0){return _1be.apply(this,arguments);}},_1bf);_1c1.pause=function(){_1c0=true;};_1c1.resume=function(){_1c0=false;};return _1c1;};on.once=function(_1c2,type,_1c3,_1c4){var _1c5=on(_1c2,type,function(){_1c5.remove();return _1c3.apply(this,arguments);});return _1c5;};on.parse=function(_1c6,type,_1c7,_1c8,_1c9,_1ca){if(type.call){return type.call(_1ca,_1c6,_1c7);}if(type instanceof Array){_1cb=type;}else{if(type.indexOf(",")>-1){var _1cb=type.split(/\s*,\s*/);}}if(_1cb){var _1cc=[];var i=0;var _1cd;while(_1cd=_1cb[i++]){_1cc.push(on.parse(_1c6,_1cd,_1c7,_1c8,_1c9,_1ca));}_1cc.remove=function(){for(var i=0;i<_1cc.length;i++){_1cc[i].remove();}};return _1cc;}return _1c8(_1c6,type,_1c7,_1c9,_1ca);};var _1ce=/^touch/;function _1bc(_1cf,type,_1d0,_1d1,_1d2){var _1d3=type.match(/(.*):(.*)/);if(_1d3){type=_1d3[2];_1d3=_1d3[1];return on.selector(_1d3,type).call(_1d2,_1cf,_1d0);}if(has("touch")){if(_1ce.test(type)){_1d0=_1d4(_1d0);}if(!has("event-orientationchange")&&(type=="orientationchange")){type="resize";_1cf=window;_1d0=_1d4(_1d0);}}if(_1d5){_1d0=_1d5(_1d0);}if(_1cf.addEventListener){var _1d6=type in _1d7,_1d8=_1d6?_1d7[type]:type;_1cf.addEventListener(_1d8,_1d0,_1d6);return {remove:function(){_1cf.removeEventListener(_1d8,_1d0,_1d6);}};}type="on"+type;if(_1d9&&_1cf.attachEvent){return _1d9(_1cf,type,_1d0);}throw new Error("Target must be an event emitter");};on.matches=function(node,_1da,_1db,_1dc,_1dd){_1dd=_1dd&&_1dd.matches?_1dd:dojo.query;_1dc=_1dc!==false;if(node.nodeType!=1){node=node.parentNode;}while(!_1dd.matches(node,_1da,_1db)){if(node==_1db||_1dc===false||!(node=node.parentNode)||node.nodeType!=1){return false;}}return node;};on.selector=function(_1de,_1df,_1e0){return function(_1e1,_1e2){var _1e3=typeof _1de=="function"?{matches:_1de}:this,_1e4=_1df.bubble;function _1e5(_1e6){return on.matches(_1e6,_1de,_1e1,_1e0,_1e3);};if(_1e4){return on(_1e1,_1e4(_1e5),_1e2);}return on(_1e1,_1df,function(_1e7){var _1e8=_1e5(_1e7.target);if(_1e8){return _1e2.call(_1e8,_1e7);}});};};function _1e9(){this.cancelable=false;this.defaultPrevented=true;};function _1ea(){this.bubbles=false;};var _1eb=[].slice,_1ec=on.emit=function(_1ed,type,_1ee){var args=_1eb.call(arguments,2);var _1ef="on"+type;if("parentNode" in _1ed){var _1f0=args[0]={};for(var i in _1ee){_1f0[i]=_1ee[i];}_1f0.preventDefault=_1e9;_1f0.stopPropagation=_1ea;_1f0.target=_1ed;_1f0.type=type;_1ee=_1f0;}do{_1ed[_1ef]&&_1ed[_1ef].apply(_1ed,args);}while(_1ee&&_1ee.bubbles&&(_1ed=_1ed.parentNode));return _1ee&&_1ee.cancelable&&_1ee;};var _1d7=has("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!has("event-stopimmediatepropagation")){var _1f1=function(){this.immediatelyStopped=true;this.modified=true;};var _1d5=function(_1f2){return function(_1f3){if(!_1f3.immediatelyStopped){_1f3.stopImmediatePropagation=_1f1;return _1f2.apply(this,arguments);}};};}if(has("dom-addeventlistener")){on.emit=function(_1f4,type,_1f5){if(_1f4.dispatchEvent&&document.createEvent){var _1f6=_1f4.ownerDocument||document;var _1f7=_1f6.createEvent("HTMLEvents");_1f7.initEvent(type,!!_1f5.bubbles,!!_1f5.cancelable);for(var i in _1f5){if(!(i in _1f7)){_1f7[i]=_1f5[i];}}return _1f4.dispatchEvent(_1f7)&&_1f7;}return _1ec.apply(on,arguments);};}else{on._fixEvent=function(evt,_1f8){if(!evt){var w=_1f8&&(_1f8.ownerDocument||_1f8.document||_1f8).parentWindow||window;evt=w.event;}if(!evt){return evt;}try{if(_1f9&&evt.type==_1f9.type&&evt.srcElement==_1f9.target){evt=_1f9;}}catch(e){}if(!evt.target){evt.target=evt.srcElement;evt.currentTarget=(_1f8||evt.srcElement);if(evt.type=="mouseover"){evt.relatedTarget=evt.fromElement;}if(evt.type=="mouseout"){evt.relatedTarget=evt.toElement;}if(!evt.stopPropagation){evt.stopPropagation=_1fa;evt.preventDefault=_1fb;}switch(evt.type){case "keypress":var c=("charCode" in evt?evt.charCode:evt.keyCode);if(c==10){c=0;evt.keyCode=13;}else{if(c==13||c==27){c=0;}else{if(c==3){c=99;}}}evt.charCode=c;_1fc(evt);break;}}return evt;};var _1f9,_1fd=function(_1fe){this.handle=_1fe;};_1fd.prototype.remove=function(){delete _dojoIEListeners_[this.handle];};var _1ff=function(_200){return function(evt){evt=on._fixEvent(evt,this);var _201=_200.call(this,evt);if(evt.modified){if(!_1f9){setTimeout(function(){_1f9=null;});}_1f9=evt;}return _201;};};var _1d9=function(_202,type,_203){_203=_1ff(_203);if(((_202.ownerDocument?_202.ownerDocument.parentWindow:_202.parentWindow||_202.window||window)!=top||has("jscript")<5.8)&&!has("config-_allow_leaks")){if(typeof _dojoIEListeners_=="undefined"){_dojoIEListeners_=[];}var _204=_202[type];if(!_204||!_204.listeners){var _205=_204;_204=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");_204.listeners=[];_202[type]=_204;_204.global=this;if(_205){_204.listeners.push(_dojoIEListeners_.push(_205)-1);}}var _206;_204.listeners.push(_206=(_204.global._dojoIEListeners_.push(_203)-1));return new _1fd(_206);}return _1b3.after(_202,type,_203,true);};var _1fc=function(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode;};var _1fa=function(){this.cancelBubble=true;};var _1fb=on._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey){try{this.keyCode=0;}catch(e){}}this.defaultPrevented=true;this.returnValue=false;this.modified=true;};}if(has("touch")){var _207=function(){};var _208=window.orientation;var _1d4=function(_209){return function(_20a){var _20b=_20a.corrected;if(!_20b){var type=_20a.type;try{delete _20a.type;}catch(e){}if(_20a.type){if(has("touch-can-modify-event-delegate")){_207.prototype=_20a;_20b=new _207;}else{_20b={};for(var name in _20a){_20b[name]=_20a[name];}}_20b.preventDefault=function(){_20a.preventDefault();};_20b.stopPropagation=function(){_20a.stopPropagation();};}else{_20b=_20a;_20b.type=type;}_20a.corrected=_20b;if(type=="resize"){if(_208==window.orientation){return null;}_208=window.orientation;_20b.type="orientationchange";return _209.call(this,_20b);}if(!("rotation" in _20b)){_20b.rotation=0;_20b.scale=1;}var _20c=_20b.changedTouches[0];for(var i in _20c){delete _20b[i];_20b[i]=_20c[i];}}return _209.call(this,_20b);};};}return on;});},"dojo/topic":function(){define(["./Evented"],function(_20d){var hub=new _20d;return {publish:function(_20e,_20f){return hub.emit.apply(hub,arguments);},subscribe:function(_210,_211){return hub.on.apply(hub,arguments);}};});},"dojo/Evented":function(){define(["./aspect","./on"],function(_212,on){"use strict";var _213=_212.after;function _214(){};_214.prototype={on:function(type,_215){return on.parse(this,type,_215,function(_216,type){return _213(_216,"on"+type,_215,true);});},emit:function(type,_217){var args=[this];args.push.apply(args,arguments);return on.emit.apply(on,args);}};return _214;});},"dojo/aspect":function(){define([],function(){"use strict";var _218,_219=0;function _21a(_21b,type,_21c,_21d){var _21e=_21b[type];var _21f=type=="around";var _220;if(_21f){var _221=_21c(function(){return _21e.advice(this,arguments);});_220={remove:function(){if(_221){_221=_21b=_21c=null;}},advice:function(_222,args){return _221?_221.apply(_222,args):_21e.advice(_222,args);}};}else{_220={remove:function(){if(_220.advice){var _223=_220.previous;var next=_220.next;if(!next&&!_223){delete _21b[type];}else{if(_223){_223.next=next;}else{_21b[type]=next;}if(next){next.previous=_223;}}_21b=_21c=_220.advice=null;}},id:_219++,advice:_21c,receiveArguments:_21d};}if(_21e&&!_21f){if(type=="after"){while(_21e.next&&(_21e=_21e.next)){}_21e.next=_220;_220.previous=_21e;}else{if(type=="before"){_21b[type]=_220;_220.next=_21e;_21e.previous=_220;}}}else{_21b[type]=_220;}return _220;};function _224(type){return function(_225,_226,_227,_228){var _229=_225[_226],_22a;if(!_229||_229.target!=_225){_225[_226]=_22a=function(){var _22b=_219;var args=arguments;var _22c=_22a.before;while(_22c){args=_22c.advice.apply(this,args)||args;_22c=_22c.next;}if(_22a.around){var _22d=_22a.around.advice(this,args);}var _22e=_22a.after;while(_22e&&_22e.id<_22b){if(_22e.receiveArguments){var _22f=_22e.advice.apply(this,args);_22d=_22f===_218?_22d:_22f;}else{_22d=_22e.advice.call(this,_22d,args);}_22e=_22e.next;}return _22d;};if(_229){_22a.around={advice:function(_230,args){return _229.apply(_230,args);}};}_22a.target=_225;}var _231=_21a((_22a||_229),type,_227,_228);_227=null;return _231;};};var _232=_224("after");var _233=_224("before");var _234=_224("around");return {before:_233,around:_234,after:_232};});},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(dojo,on,has,dom){if(on._fixEvent){var _235=on._fixEvent;on._fixEvent=function(evt,se){evt=_235(evt,se);if(evt){dom.normalizeEvent(evt);}return evt;};}var ret={fix:function(evt,_236){if(on._fixEvent){return on._fixEvent(evt,_236);}return evt;},stop:function(evt){if(has("dom-addeventlistener")||(evt&&evt.preventDefault)){evt.preventDefault();evt.stopPropagation();}else{evt=evt||window.event;evt.cancelBubble=true;on._preventDefault.call(evt);}}};if(1){dojo.fixEvent=ret.fix;dojo.stopEvent=ret.stop;}return ret;});},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(has,win,dom,_237){var geom={};geom.boxModel="content-box";if(has("ie")){geom.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box";}geom.getPadExtents=function getPadExtents(node,_238){node=dom.byId(node);var s=_238||_237.getComputedStyle(node),px=_237.toPixelValue,l=px(node,s.paddingLeft),t=px(node,s.paddingTop),r=px(node,s.paddingRight),b=px(node,s.paddingBottom);return {l:l,t:t,r:r,b:b,w:l+r,h:t+b};};var none="none";geom.getBorderExtents=function getBorderExtents(node,_239){node=dom.byId(node);var px=_237.toPixelValue,s=_239||_237.getComputedStyle(node),l=s.borderLeftStyle!=none?px(node,s.borderLeftWidth):0,t=s.borderTopStyle!=none?px(node,s.borderTopWidth):0,r=s.borderRightStyle!=none?px(node,s.borderRightWidth):0,b=s.borderBottomStyle!=none?px(node,s.borderBottomWidth):0;return {l:l,t:t,r:r,b:b,w:l+r,h:t+b};};geom.getPadBorderExtents=function getPadBorderExtents(node,_23a){node=dom.byId(node);var s=_23a||_237.getComputedStyle(node),p=geom.getPadExtents(node,s),b=geom.getBorderExtents(node,s);return {l:p.l+b.l,t:p.t+b.t,r:p.r+b.r,b:p.b+b.b,w:p.w+b.w,h:p.h+b.h};};geom.getMarginExtents=function getMarginExtents(node,_23b){node=dom.byId(node);var s=_23b||_237.getComputedStyle(node),px=_237.toPixelValue,l=px(node,s.marginLeft),t=px(node,s.marginTop),r=px(node,s.marginRight),b=px(node,s.marginBottom);return {l:l,t:t,r:r,b:b,w:l+r,h:t+b};};geom.getMarginBox=function getMarginBox(node,_23c){node=dom.byId(node);var s=_23c||_237.getComputedStyle(node),me=geom.getMarginExtents(node,s),l=node.offsetLeft-me.l,t=node.offsetTop-me.t,p=node.parentNode,px=_237.toPixelValue,pcs;if(has("mozilla")){var sl=parseFloat(s.left),st=parseFloat(s.top);if(!isNaN(sl)&&!isNaN(st)){l=sl;t=st;}else{if(p&&p.style){pcs=_237.getComputedStyle(p);if(pcs.overflow!="visible"){l+=pcs.borderLeftStyle!=none?px(node,pcs.borderLeftWidth):0;t+=pcs.borderTopStyle!=none?px(node,pcs.borderTopWidth):0;}}}}else{if(has("opera")||(has("ie")==8&&!has("quirks"))){if(p){pcs=_237.getComputedStyle(p);l-=pcs.borderLeftStyle!=none?px(node,pcs.borderLeftWidth):0;t-=pcs.borderTopStyle!=none?px(node,pcs.borderTopWidth):0;}}}return {l:l,t:t,w:node.offsetWidth+me.w,h:node.offsetHeight+me.h};};geom.getContentBox=function getContentBox(node,_23d){node=dom.byId(node);var s=_23d||_237.getComputedStyle(node),w=node.clientWidth,h,pe=geom.getPadExtents(node,s),be=geom.getBorderExtents(node,s);if(!w){w=node.offsetWidth;h=node.offsetHeight;}else{h=node.clientHeight;be.w=be.h=0;}if(has("opera")){pe.l+=be.l;pe.t+=be.t;}return {l:pe.l,t:pe.t,w:w-pe.w-be.w,h:h-pe.h-be.h};};function _23e(node,l,t,w,h,u){u=u||"px";var s=node.style;if(!isNaN(l)){s.left=l+u;}if(!isNaN(t)){s.top=t+u;}if(w>=0){s.width=w+u;}if(h>=0){s.height=h+u;}};function _23f(node){return node.tagName.toLowerCase()=="button"||node.tagName.toLowerCase()=="input"&&(node.getAttribute("type")||"").toLowerCase()=="button";};function _240(node){return geom.boxModel=="border-box"||node.tagName.toLowerCase()=="table"||_23f(node);};geom.setContentSize=function setContentSize(node,box,_241){node=dom.byId(node);var w=box.w,h=box.h;if(_240(node)){var pb=geom.getPadBorderExtents(node,_241);if(w>=0){w+=pb.w;}if(h>=0){h+=pb.h;}}_23e(node,NaN,NaN,w,h);};var _242={l:0,t:0,w:0,h:0};geom.setMarginBox=function setMarginBox(node,box,_243){node=dom.byId(node);var s=_243||_237.getComputedStyle(node),w=box.w,h=box.h,pb=_240(node)?_242:geom.getPadBorderExtents(node,s),mb=geom.getMarginExtents(node,s);if(has("webkit")){if(_23f(node)){var ns=node.style;if(w>=0&&!ns.width){ns.width="4px";}if(h>=0&&!ns.height){ns.height="4px";}}}if(w>=0){w=Math.max(w-pb.w-mb.w,0);}if(h>=0){h=Math.max(h-pb.h-mb.h,0);}_23e(node,box.l,box.t,w,h);};geom.isBodyLtr=function isBodyLtr(doc){doc=doc||win.doc;return (win.body(doc).dir||doc.documentElement.dir||"ltr").toLowerCase()=="ltr";};geom.docScroll=function docScroll(doc){doc=doc||win.doc;var node=win.doc.parentWindow||win.doc.defaultView;return "pageXOffset" in node?{x:node.pageXOffset,y:node.pageYOffset}:(node=has("quirks")?win.body(doc):doc.documentElement)&&{x:geom.fixIeBiDiScrollLeft(node.scrollLeft||0,doc),y:node.scrollTop||0};};if(has("ie")){geom.getIeDocumentElementOffset=function getIeDocumentElementOffset(doc){doc=doc||win.doc;var de=doc.documentElement;if(has("ie")<8){var r=de.getBoundingClientRect(),l=r.left,t=r.top;if(has("ie")<7){l+=de.clientLeft;t+=de.clientTop;}return {x:l<0?0:l,y:t<0?0:t};}else{return {x:0,y:0};}};}geom.fixIeBiDiScrollLeft=function fixIeBiDiScrollLeft(_244,doc){doc=doc||win.doc;var ie=has("ie");if(ie&&!geom.isBodyLtr(doc)){var qk=has("quirks"),de=qk?win.body(doc):doc.documentElement,pwin=win.global;if(ie==6&&!qk&&pwin.frameElement&&de.scrollHeight>de.clientHeight){_244+=de.clientLeft;}return (ie<8||qk)?(_244+de.clientWidth-de.scrollWidth):-_244;}return _244;};geom.position=function(node,_245){node=dom.byId(node);var db=win.body(node.ownerDocument),ret=node.getBoundingClientRect();ret={x:ret.left,y:ret.top,w:ret.right-ret.left,h:ret.bottom-ret.top};if(has("ie")<9){var _246=geom.getIeDocumentElementOffset(node.ownerDocument);ret.x-=_246.x+(has("quirks")?db.clientLeft+db.offsetLeft:0);ret.y-=_246.y+(has("quirks")?db.clientTop+db.offsetTop:0);}if(_245){var _247=geom.docScroll(node.ownerDocument);ret.x+=_247.x;ret.y+=_247.y;}return ret;};geom.getMarginSize=function getMarginSize(node,_248){node=dom.byId(node);var me=geom.getMarginExtents(node,_248||_237.getComputedStyle(node));var size=node.getBoundingClientRect();return {w:(size.right-size.left)+me.w,h:(size.bottom-size.top)+me.h};};geom.normalizeEvent=function(_249){if(!("layerX" in _249)){_249.layerX=_249.offsetX;_249.layerY=_249.offsetY;}if(!has("dom-addeventlistener")){var se=_249.target;var doc=(se&&se.ownerDocument)||document;var _24a=has("quirks")?doc.body:doc.documentElement;var _24b=geom.getIeDocumentElementOffset(doc);_249.pageX=_249.clientX+geom.fixIeBiDiScrollLeft(_24a.scrollLeft||0,doc)-_24b.x;_249.pageY=_249.clientY+(_24a.scrollTop||0)-_24b.y;}};return geom;});},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(dojo,lang,has){var ret={global:dojo.global,doc:dojo.global["document"]||null,body:function(doc){doc=doc||dojo.doc;return doc.body||doc.getElementsByTagName("body")[0];},setContext:function(_24c,_24d){dojo.global=ret.global=_24c;dojo.doc=ret.doc=_24d;},withGlobal:function(_24e,_24f,_250,_251){var _252=dojo.global;try{dojo.global=ret.global=_24e;return ret.withDoc.call(null,_24e.document,_24f,_250,_251);}finally{dojo.global=ret.global=_252;}},withDoc:function(_253,_254,_255,_256){var _257=ret.doc,oldQ=has("quirks"),_258=has("ie"),isIE,mode,pwin;try{dojo.doc=ret.doc=_253;dojo.isQuirks=has.add("quirks",dojo.doc.compatMode=="BackCompat",true,true);if(has("ie")){if((pwin=_253.parentWindow)&&pwin.navigator){isIE=parseFloat(pwin.navigator.appVersion.split("MSIE ")[1])||undefined;mode=_253.documentMode;if(mode&&mode!=5&&Math.floor(isIE)!=mode){isIE=mode;}dojo.isIE=has.add("ie",isIE,true,true);}}if(_255&&typeof _254=="string"){_254=_255[_254];}return _254.apply(_255,_256||[]);}finally{dojo.doc=ret.doc=_257;dojo.isQuirks=has.add("quirks",oldQ,true,true);dojo.isIE=has.add("ie",_258,true,true);}}};1&&lang.mixin(dojo,ret);return ret;});},"dojo/dom":function(){define(["./sniff","./_base/window"],function(has,win){if(has("ie")<=7){try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}}var dom={};if(has("ie")){dom.byId=function(id,doc){if(typeof id!="string"){return id;}var _259=doc||win.doc,te=id&&_259.getElementById(id);if(te&&(te.attributes.id.value==id||te.id==id)){return te;}else{var eles=_259.all[id];if(!eles||eles.nodeName){eles=[eles];}var i=0;while((te=eles[i++])){if((te.attributes&&te.attributes.id&&te.attributes.id.value==id)||te.id==id){return te;}}}};}else{dom.byId=function(id,doc){return ((typeof id=="string")?(doc||win.doc).getElementById(id):id)||null;};}dom.isDescendant=function(node,_25a){try{node=dom.byId(node);_25a=dom.byId(_25a);while(node){if(node==_25a){return true;}node=node.parentNode;}}catch(e){}return false;};has.add("css-user-select",function(_25b,doc,_25c){if(!_25c){return false;}var _25d=_25c.style;var _25e=["Khtml","O","Moz","Webkit"],i=_25e.length,name="userSelect",_25f;do{if(typeof _25d[name]!=="undefined"){return name;}}while(i--&&(name=_25e[i]+"UserSelect"));return false;});var _260=has("css-user-select");dom.setSelectable=_260?function(node,_261){dom.byId(node).style[_260]=_261?"":"none";}:function(node,_262){node=dom.byId(node);var _263=node.getElementsByTagName("*"),i=_263.length;if(_262){node.removeAttribute("unselectable");while(i--){_263[i].removeAttribute("unselectable");}}else{node.setAttribute("unselectable","on");while(i--){_263[i].setAttribute("unselectable","on");}}};return dom;});},"dojo/dom-style":function(){define(["./sniff","./dom"],function(has,dom){var _264,_265={};if(has("webkit")){_264=function(node){var s;if(node.nodeType==1){var dv=node.ownerDocument.defaultView;s=dv.getComputedStyle(node,null);if(!s&&node.style){node.style.display="";s=dv.getComputedStyle(node,null);}}return s||{};};}else{if(has("ie")&&(has("ie")<9||has("quirks"))){_264=function(node){return node.nodeType==1&&node.currentStyle?node.currentStyle:{};};}else{_264=function(node){return node.nodeType==1?node.ownerDocument.defaultView.getComputedStyle(node,null):{};};}}_265.getComputedStyle=_264;var _266;if(!has("ie")){_266=function(_267,_268){return parseFloat(_268)||0;};}else{_266=function(_269,_26a){if(!_26a){return 0;}if(_26a=="medium"){return 4;}if(_26a.slice&&_26a.slice(-2)=="px"){return parseFloat(_26a);}var s=_269.style,rs=_269.runtimeStyle,cs=_269.currentStyle,_26b=s.left,_26c=rs.left;rs.left=cs.left;try{s.left=_26a;_26a=s.pixelLeft;}catch(e){_26a=0;}s.left=_26b;rs.left=_26c;return _26a;};}_265.toPixelValue=_266;var astr="DXImageTransform.Microsoft.Alpha";var af=function(n,f){try{return n.filters.item(astr);}catch(e){return f?{}:null;}};var _26d=has("ie")<9||(has("ie")<10&&has("quirks"))?function(node){try{return af(node).Opacity/100;}catch(e){return 1;}}:function(node){return _264(node).opacity;};var _26e=has("ie")<9||(has("ie")<10&&has("quirks"))?function(node,_26f){if(_26f===""){_26f=1;}var ov=_26f*100,_270=_26f===1;if(_270){node.style.zoom="";if(af(node)){node.style.filter=node.style.filter.replace(new RegExp("\\s*progid:"+astr+"\\([^\\)]+?\\)","i"),"");}}else{node.style.zoom=1;if(af(node)){af(node,1).Opacity=ov;}else{node.style.filter+=" progid:"+astr+"(Opacity="+ov+")";}af(node,1).Enabled=true;}if(node.tagName.toLowerCase()=="tr"){for(var td=node.firstChild;td;td=td.nextSibling){if(td.tagName.toLowerCase()=="td"){_26e(td,_26f);}}}return _26f;}:function(node,_271){return node.style.opacity=_271;};var _272={left:true,top:true};var _273=/margin|padding|width|height|max|min|offset/;function _274(node,type,_275){type=type.toLowerCase();if(has("ie")||has("trident")){if(_275=="auto"){if(type=="height"){return node.offsetHeight;}if(type=="width"){return node.offsetWidth;}}if(type=="fontweight"){switch(_275){case 700:return "bold";case 400:default:return "normal";}}}if(!(type in _272)){_272[type]=_273.test(type);}return _272[type]?_266(node,_275):_275;};var _276={cssFloat:1,styleFloat:1,"float":1};_265.get=function getStyle(node,name){var n=dom.byId(node),l=arguments.length,op=(name=="opacity");if(l==2&&op){return _26d(n);}name=_276[name]?"cssFloat" in n.style?"cssFloat":"styleFloat":name;var s=_265.getComputedStyle(n);return (l==1)?s:_274(n,name,s[name]||n.style[name]);};_265.set=function setStyle(node,name,_277){var n=dom.byId(node),l=arguments.length,op=(name=="opacity");name=_276[name]?"cssFloat" in n.style?"cssFloat":"styleFloat":name;if(l==3){return op?_26e(n,_277):n.style[name]=_277;}for(var x in name){_265.set(node,x,name[x]);}return _265.getComputedStyle(n);};return _265;});},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(dojo,on,has,dom,win){has.add("dom-quirks",win.doc&&win.doc.compatMode=="BackCompat");has.add("events-mouseenter",win.doc&&"onmouseenter" in win.doc.createElement("div"));has.add("events-mousewheel",win.doc&&"onmousewheel" in win.doc);var _278;if((has("dom-quirks")&&has("ie"))||!has("dom-addeventlistener")){_278={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,_279){return e.button&_279;},isLeft:function(e){return e.button&1;},isMiddle:function(e){return e.button&4;},isRight:function(e){return e.button&2;}};}else{_278={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,_27a){return e.button==_27a;},isLeft:function(e){return e.button==0;},isMiddle:function(e){return e.button==1;},isRight:function(e){return e.button==2;}};}dojo.mouseButtons=_278;function _27b(type,_27c){var _27d=function(node,_27e){return on(node,type,function(evt){if(_27c){return _27c(evt,_27e);}if(!dom.isDescendant(evt.relatedTarget,node)){return _27e.call(this,evt);}});};_27d.bubble=function(_27f){return _27b(type,function(evt,_280){var _281=_27f(evt.target);var _282=evt.relatedTarget;if(_281&&(_281!=(_282&&_282.nodeType==1&&_27f(_282)))){return _280.call(_281,evt);}});};return _27d;};var _283;if(has("events-mousewheel")){_283="mousewheel";}else{_283=function(node,_284){return on(node,"DOMMouseScroll",function(evt){evt.wheelDelta=-evt.detail;_284.call(this,evt);});};}return {_eventHandler:_27b,enter:_27b("mouseover"),leave:_27b("mouseout"),wheel:_283,isLeft:_278.isLeft,isMiddle:_278.isMiddle,isRight:_278.isRight};});},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(dojo,lang,has){if(!1){return has;}dojo._name="browser";lang.mixin(dojo,{isBrowser:true,isFF:has("ff"),isIE:has("ie"),isKhtml:has("khtml"),isWebKit:has("webkit"),isMozilla:has("mozilla"),isMoz:has("mozilla"),isOpera:has("opera"),isSafari:has("safari"),isChrome:has("chrome"),isMac:has("mac"),isIos:has("ios"),isAndroid:has("android"),isWii:has("wii"),isQuirks:has("quirks"),isAir:has("air")});return has;});},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(dojo,has){return dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:has("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:has("mac")&&!has("air")?(has("safari")?91:224):17};});},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(dojo,lang,on){var win=window;var _285={addOnWindowUnload:function(obj,_286){if(!dojo.windowUnloaded){on(win,"unload",(dojo.windowUnloaded=function(){}));}on(win,"unload",lang.hitch(obj,_286));},addOnUnload:function(obj,_287){on(win,"beforeunload",lang.hitch(obj,_287));}};dojo.addOnWindowUnload=_285.addOnWindowUnload;dojo.addOnUnload=_285.addOnUnload;return _285;});},"dojo/_base/html":function(){define(["./kernel","../dom","../dom-style","../dom-attr","../dom-prop","../dom-class","../dom-construct","../dom-geometry"],function(dojo,dom,_288,attr,prop,cls,ctr,geom){dojo.byId=dom.byId;dojo.isDescendant=dom.isDescendant;dojo.setSelectable=dom.setSelectable;dojo.getAttr=attr.get;dojo.setAttr=attr.set;dojo.hasAttr=attr.has;dojo.removeAttr=attr.remove;dojo.getNodeProp=attr.getNodeProp;dojo.attr=function(node,name,_289){if(arguments.length==2){return attr[typeof name=="string"?"get":"set"](node,name);}return attr.set(node,name,_289);};dojo.hasClass=cls.contains;dojo.addClass=cls.add;dojo.removeClass=cls.remove;dojo.toggleClass=cls.toggle;dojo.replaceClass=cls.replace;dojo._toDom=dojo.toDom=ctr.toDom;dojo.place=ctr.place;dojo.create=ctr.create;dojo.empty=function(node){ctr.empty(node);};dojo._destroyElement=dojo.destroy=function(node){ctr.destroy(node);};dojo._getPadExtents=dojo.getPadExtents=geom.getPadExtents;dojo._getBorderExtents=dojo.getBorderExtents=geom.getBorderExtents;dojo._getPadBorderExtents=dojo.getPadBorderExtents=geom.getPadBorderExtents;dojo._getMarginExtents=dojo.getMarginExtents=geom.getMarginExtents;dojo._getMarginSize=dojo.getMarginSize=geom.getMarginSize;dojo._getMarginBox=dojo.getMarginBox=geom.getMarginBox;dojo.setMarginBox=geom.setMarginBox;dojo._getContentBox=dojo.getContentBox=geom.getContentBox;dojo.setContentSize=geom.setContentSize;dojo._isBodyLtr=dojo.isBodyLtr=geom.isBodyLtr;dojo._docScroll=dojo.docScroll=geom.docScroll;dojo._getIeDocumentElementOffset=dojo.getIeDocumentElementOffset=geom.getIeDocumentElementOffset;dojo._fixIeBiDiScrollLeft=dojo.fixIeBiDiScrollLeft=geom.fixIeBiDiScrollLeft;dojo.position=geom.position;dojo.marginBox=function marginBox(node,box){return box?geom.setMarginBox(node,box):geom.getMarginBox(node);};dojo.contentBox=function contentBox(node,box){return box?geom.setContentSize(node,box):geom.getContentBox(node);};dojo.coords=function(node,_28a){dojo.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");node=dom.byId(node);var s=_288.getComputedStyle(node),mb=geom.getMarginBox(node,s);var abs=geom.position(node,_28a);mb.x=abs.x;mb.y=abs.y;return mb;};dojo.getProp=prop.get;dojo.setProp=prop.set;dojo.prop=function(node,name,_28b){if(arguments.length==2){return prop[typeof name=="string"?"get":"set"](node,name);}return prop.set(node,name,_28b);};dojo.getStyle=_288.get;dojo.setStyle=_288.set;dojo.getComputedStyle=_288.getComputedStyle;dojo.__toPixelValue=dojo.toPixelValue=_288.toPixelValue;dojo.style=function(node,name,_28c){switch(arguments.length){case 1:return _288.get(node);case 2:return _288[typeof name=="string"?"get":"set"](node,name);}return _288.set(node,name,_28c);};return dojo;});},"dojo/dom-attr":function(){define(["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(_28d,has,lang,dom,_28e,prop){var _28f={innerHTML:1,textContent:1,className:1,htmlFor:has("ie"),value:1},_290={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};function _291(node,name){var attr=node.getAttributeNode&&node.getAttributeNode(name);return !!attr&&attr.specified;};_28d.has=function hasAttr(node,name){var lc=name.toLowerCase();return _28f[prop.names[lc]||name]||_291(dom.byId(node),_290[lc]||name);};_28d.get=function getAttr(node,name){node=dom.byId(node);var lc=name.toLowerCase(),_292=prop.names[lc]||name,_293=_28f[_292],_294=node[_292];if(_293&&typeof _294!="undefined"){return _294;}if(_292=="textContent"){return prop.get(node,_292);}if(_292!="href"&&(typeof _294=="boolean"||lang.isFunction(_294))){return _294;}var _295=_290[lc]||name;return _291(node,_295)?node.getAttribute(_295):null;};_28d.set=function setAttr(node,name,_296){node=dom.byId(node);if(arguments.length==2){for(var x in name){_28d.set(node,x,name[x]);}return node;}var lc=name.toLowerCase(),_297=prop.names[lc]||name,_298=_28f[_297];if(_297=="style"&&typeof _296!="string"){_28e.set(node,_296);return node;}if(_298||typeof _296=="boolean"||lang.isFunction(_296)){return prop.set(node,name,_296);}node.setAttribute(_290[lc]||name,_296);return node;};_28d.remove=function removeAttr(node,name){dom.byId(node).removeAttribute(_290[name.toLowerCase()]||name);};_28d.getNodeProp=function getNodeProp(node,name){node=dom.byId(node);var lc=name.toLowerCase(),_299=prop.names[lc]||name;if((_299 in node)&&_299!="href"){return node[_299];}var _29a=_290[lc]||name;return _291(node,_29a)?node.getAttribute(_29a):null;};});},"dojo/dom-prop":function(){define(["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(_29b,dojo,has,lang,dom,_29c,ctr,conn){var _29d={},_29e=0,_29f=dojo._scopeName+"attrid";has.add("dom-textContent",function(_2a0,doc,_2a1){return "textContent" in _2a1;});_29b.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};function _2a2(node){var text="",ch=node.childNodes;for(var i=0,n;n=ch[i];i++){if(n.nodeType!=8){if(n.nodeType==1){text+=_2a2(n);}else{text+=n.nodeValue;}}}return text;};_29b.get=function getProp(node,name){node=dom.byId(node);var lc=name.toLowerCase(),_2a3=_29b.names[lc]||name;if(_2a3=="textContent"&&!has("dom-textContent")){return _2a2(node);}return node[_2a3];};_29b.set=function setProp(node,name,_2a4){node=dom.byId(node);var l=arguments.length;if(l==2&&typeof name!="string"){for(var x in name){_29b.set(node,x,name[x]);}return node;}var lc=name.toLowerCase(),_2a5=_29b.names[lc]||name;if(_2a5=="style"&&typeof _2a4!="string"){_29c.set(node,_2a4);return node;}if(_2a5=="innerHTML"){if(has("ie")&&node.tagName.toLowerCase() in {col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}){ctr.empty(node);node.appendChild(ctr.toDom(_2a4,node.ownerDocument));}else{node[_2a5]=_2a4;}return node;}if(_2a5=="textContent"&&!has("dom-textContent")){ctr.empty(node);node.appendChild(node.ownerDocument.createTextNode(_2a4));return node;}if(lang.isFunction(_2a4)){var _2a6=node[_29f];if(!_2a6){_2a6=_29e++;node[_29f]=_2a6;}if(!_29d[_2a6]){_29d[_2a6]={};}var h=_29d[_2a6][_2a5];if(h){conn.disconnect(h);}else{try{delete node[_2a5];}catch(e){}}if(_2a4){_29d[_2a6][_2a5]=conn.connect(node,_2a5,_2a4);}else{node[_2a5]=null;}return node;}node[_2a5]=_2a4;return node;};});},"dojo/dom-construct":function(){define(["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(_2a7,dojo,has,win,dom,attr){var _2a8={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},_2a9=/<\s*([\w\:]+)/,_2aa={},_2ab=0,_2ac="__"+dojo._scopeName+"ToDomId";for(var _2ad in _2a8){if(_2a8.hasOwnProperty(_2ad)){var tw=_2a8[_2ad];tw.pre=_2ad=="option"?"<select multiple=\"multiple\">":"<"+tw.join("><")+">";tw.post="</"+tw.reverse().join("></")+">";}}var _2ae;if(has("ie")<=8){_2ae=function(doc){doc.__dojo_html5_tested="yes";var div=_2af("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},doc.body);if(div.childNodes.length!==1){("abbr article aside audio canvas details figcaption figure footer header "+"hgroup mark meter nav output progress section summary time video").replace(/\b\w+\b/g,function(n){doc.createElement(n);});}_2b0(div);};}function _2b1(node,ref){var _2b2=ref.parentNode;if(_2b2){_2b2.insertBefore(node,ref);}};function _2b3(node,ref){var _2b4=ref.parentNode;if(_2b4){if(_2b4.lastChild==ref){_2b4.appendChild(node);}else{_2b4.insertBefore(node,ref.nextSibling);}}};_2a7.toDom=function toDom(frag,doc){doc=doc||win.doc;var _2b5=doc[_2ac];if(!_2b5){doc[_2ac]=_2b5=++_2ab+"";_2aa[_2b5]=doc.createElement("div");}if(has("ie")<=8){if(!doc.__dojo_html5_tested&&doc.body){_2ae(doc);}}frag+="";var _2b6=frag.match(_2a9),tag=_2b6?_2b6[1].toLowerCase():"",_2b7=_2aa[_2b5],wrap,i,fc,df;if(_2b6&&_2a8[tag]){wrap=_2a8[tag];_2b7.innerHTML=wrap.pre+frag+wrap.post;for(i=wrap.length;i;--i){_2b7=_2b7.firstChild;}}else{_2b7.innerHTML=frag;}if(_2b7.childNodes.length==1){return _2b7.removeChild(_2b7.firstChild);}df=doc.createDocumentFragment();while((fc=_2b7.firstChild)){df.appendChild(fc);}return df;};_2a7.place=function place(node,_2b8,_2b9){_2b8=dom.byId(_2b8);if(typeof node=="string"){node=/^\s*</.test(node)?_2a7.toDom(node,_2b8.ownerDocument):dom.byId(node);}if(typeof _2b9=="number"){var cn=_2b8.childNodes;if(!cn.length||cn.length<=_2b9){_2b8.appendChild(node);}else{_2b1(node,cn[_2b9<0?0:_2b9]);}}else{switch(_2b9){case "before":_2b1(node,_2b8);break;case "after":_2b3(node,_2b8);break;case "replace":_2b8.parentNode.replaceChild(node,_2b8);break;case "only":_2a7.empty(_2b8);_2b8.appendChild(node);break;case "first":if(_2b8.firstChild){_2b1(node,_2b8.firstChild);break;}default:_2b8.appendChild(node);}}return node;};var _2af=_2a7.create=function _2af(tag,_2ba,_2bb,pos){var doc=win.doc;if(_2bb){_2bb=dom.byId(_2bb);doc=_2bb.ownerDocument;}if(typeof tag=="string"){tag=doc.createElement(tag);}if(_2ba){attr.set(tag,_2ba);}if(_2bb){_2a7.place(tag,_2bb,pos);}return tag;};function _2bc(node){if("innerHTML" in node){try{node.innerHTML="";return;}catch(e){}}for(var c;c=node.lastChild;){node.removeChild(c);}};_2a7.empty=function empty(node){_2bc(dom.byId(node));};function _2bd(node,_2be){if(node.firstChild){_2bc(node);}if(_2be){has("ie")&&_2be.canHaveChildren&&"removeNode" in node?node.removeNode(false):_2be.removeChild(node);}};var _2b0=_2a7.destroy=function _2b0(node){node=dom.byId(node);if(!node){return;}_2bd(node,node.parentNode);};});},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(lang,_2bf,dom){var _2c0="className";var cls,_2c1=/\s+/,a1=[""];function _2c2(s){if(typeof s=="string"||s instanceof String){if(s&&!_2c1.test(s)){a1[0]=s;return a1;}var a=s.split(_2c1);if(a.length&&!a[0]){a.shift();}if(a.length&&!a[a.length-1]){a.pop();}return a;}if(!s){return [];}return _2bf.filter(s,function(x){return x;});};var _2c3={};cls={contains:function containsClass(node,_2c4){return ((" "+dom.byId(node)[_2c0]+" ").indexOf(" "+_2c4+" ")>=0);},add:function addClass(node,_2c5){node=dom.byId(node);_2c5=_2c2(_2c5);var cls=node[_2c0],_2c6;cls=cls?" "+cls+" ":" ";_2c6=cls.length;for(var i=0,len=_2c5.length,c;i<len;++i){c=_2c5[i];if(c&&cls.indexOf(" "+c+" ")<0){cls+=c+" ";}}if(_2c6<cls.length){node[_2c0]=cls.substr(1,cls.length-2);}},remove:function removeClass(node,_2c7){node=dom.byId(node);var cls;if(_2c7!==undefined){_2c7=_2c2(_2c7);cls=" "+node[_2c0]+" ";for(var i=0,len=_2c7.length;i<len;++i){cls=cls.replace(" "+_2c7[i]+" "," ");}cls=lang.trim(cls);}else{cls="";}if(node[_2c0]!=cls){node[_2c0]=cls;}},replace:function replaceClass(node,_2c8,_2c9){node=dom.byId(node);_2c3[_2c0]=node[_2c0];cls.remove(_2c3,_2c9);cls.add(_2c3,_2c8);if(node[_2c0]!==_2c3[_2c0]){node[_2c0]=_2c3[_2c0];}},toggle:function toggleClass(node,_2ca,_2cb){node=dom.byId(node);if(_2cb===undefined){_2ca=_2c2(_2ca);for(var i=0,len=_2ca.length,c;i<len;++i){c=_2ca[i];cls[cls.contains(node,c)?"remove":"add"](node,c);}}else{cls[_2cb?"add":"remove"](node,_2ca);}return _2cb;}};return cls;});},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(dojo,_2cc,_2cd){var _2ce=_2cc.NodeList,nlp=_2ce.prototype;nlp.connect=_2ce._adaptAsForEach(function(){return dojo.connect.apply(this,arguments);});nlp.coords=_2ce._adaptAsMap(dojo.coords);_2ce.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];_2cd.forEach(_2ce.events,function(evt){var _2cf="on"+evt;nlp[_2cf]=function(a,b){return this.connect(_2cf,a,b);};});dojo.NodeList=_2ce;return _2ce;});},"dojo/query":function(){define(["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],function(dojo,has,dom,on,_2d0,lang,_2d1,_2d2){"use strict";has.add("array-extensible",function(){return lang.delegate([],{length:1}).length==1&&!has("bug-for-in-skips-shadowed");});var ap=Array.prototype,aps=ap.slice,apc=ap.concat,_2d3=_2d0.forEach;var tnl=function(a,_2d4,_2d5){var _2d6=new (_2d5||this._NodeListCtor||nl)(a);return _2d4?_2d6._stash(_2d4):_2d6;};var _2d7=function(f,a,o){a=[0].concat(aps.call(a,0));o=o||dojo.global;return function(node){a[0]=node;return f.apply(o,a);};};var _2d8=function(f,o){return function(){this.forEach(_2d7(f,arguments,o));return this;};};var _2d9=function(f,o){return function(){return this.map(_2d7(f,arguments,o));};};var _2da=function(f,o){return function(){return this.filter(_2d7(f,arguments,o));};};var _2db=function(f,g,o){return function(){var a=arguments,body=_2d7(f,a,o);if(g.call(o||dojo.global,a)){return this.map(body);}this.forEach(body);return this;};};var _2dc=function(_2dd){var _2de=this instanceof nl&&has("array-extensible");if(typeof _2dd=="number"){_2dd=Array(_2dd);}var _2df=(_2dd&&"length" in _2dd)?_2dd:arguments;if(_2de||!_2df.sort){var _2e0=_2de?this:[],l=_2e0.length=_2df.length;for(var i=0;i<l;i++){_2e0[i]=_2df[i];}if(_2de){return _2e0;}_2df=_2e0;}lang._mixin(_2df,nlp);_2df._NodeListCtor=function(_2e1){return nl(_2e1);};return _2df;};var nl=_2dc,nlp=nl.prototype=has("array-extensible")?[]:{};nl._wrap=nlp._wrap=tnl;nl._adaptAsMap=_2d9;nl._adaptAsForEach=_2d8;nl._adaptAsFilter=_2da;nl._adaptWithCondition=_2db;_2d3(["slice","splice"],function(name){var f=ap[name];nlp[name]=function(){return this._wrap(f.apply(this,arguments),name=="slice"?this:null);};});_2d3(["indexOf","lastIndexOf","every","some"],function(name){var f=_2d0[name];nlp[name]=function(){return f.apply(dojo,[this].concat(aps.call(arguments,0)));};});lang.extend(_2dc,{constructor:nl,_NodeListCtor:nl,toString:function(){return this.join(",");},_stash:function(_2e2){this._parent=_2e2;return this;},on:function(_2e3,_2e4){var _2e5=this.map(function(node){return on(node,_2e3,_2e4);});_2e5.remove=function(){for(var i=0;i<_2e5.length;i++){_2e5[i].remove();}};return _2e5;},end:function(){if(this._parent){return this._parent;}else{return new this._NodeListCtor(0);}},concat:function(item){var t=aps.call(this,0),m=_2d0.map(arguments,function(a){return aps.call(a,0);});return this._wrap(apc.apply(t,m),this);},map:function(func,obj){return this._wrap(_2d0.map(this,func,obj),this);},forEach:function(_2e6,_2e7){_2d3(this,_2e6,_2e7);return this;},filter:function(_2e8){var a=arguments,_2e9=this,_2ea=0;if(typeof _2e8=="string"){_2e9=_2eb._filterResult(this,a[0]);if(a.length==1){return _2e9._stash(this);}_2ea=1;}return this._wrap(_2d0.filter(_2e9,a[_2ea],a[_2ea+1]),this);},instantiate:function(_2ec,_2ed){var c=lang.isFunction(_2ec)?_2ec:lang.getObject(_2ec);_2ed=_2ed||{};return this.forEach(function(node){new c(_2ed,node);});},at:function(){var t=new this._NodeListCtor(0);_2d3(arguments,function(i){if(i<0){i=this.length+i;}if(this[i]){t.push(this[i]);}},this);return t._stash(this);}});function _2ee(_2ef,_2f0){var _2f1=function(_2f2,root){if(typeof root=="string"){root=dom.byId(root);if(!root){return new _2f0([]);}}var _2f3=typeof _2f2=="string"?_2ef(_2f2,root):_2f2?(_2f2.end&&_2f2.on)?_2f2:[_2f2]:[];if(_2f3.end&&_2f3.on){return _2f3;}return new _2f0(_2f3);};_2f1.matches=_2ef.match||function(node,_2f4,root){return _2f1.filter([node],_2f4,root).length>0;};_2f1.filter=_2ef.filter||function(_2f5,_2f6,root){return _2f1(_2f6,root).filter(function(node){return _2d0.indexOf(_2f5,node)>-1;});};if(typeof _2ef!="function"){var _2f7=_2ef.search;_2ef=function(_2f8,root){return _2f7(root||document,_2f8);};}return _2f1;};var _2eb=_2ee(_2d2,_2dc);dojo.query=_2ee(_2d2,function(_2f9){return _2dc(_2f9);});_2eb.load=function(id,_2fa,_2fb){_2d1.load(id,_2fa,function(_2fc){_2fb(_2ee(_2fc,_2dc));});};dojo._filterQueryResult=_2eb._filterResult=function(_2fd,_2fe,root){return new _2dc(_2eb.filter(_2fd,_2fe,root));};dojo.NodeList=_2eb.NodeList=_2dc;return _2eb;});},"dojo/selector/_loader":function(){define(["../has","require"],function(has,_2ff){"use strict";var _300=document.createElement("div");has.add("dom-qsa2.1",!!_300.querySelectorAll);has.add("dom-qsa3",function(){try{_300.innerHTML="<p class='TEST'></p>";return _300.querySelectorAll(".TEST:empty").length==1;}catch(e){}});var _301;var acme="./acme",lite="./lite";return {load:function(id,_302,_303,_304){var req=_2ff;id=id=="default"?has("config-selectorEngine")||"css3":id;id=id=="css2"||id=="lite"?lite:id=="css2.1"?has("dom-qsa2.1")?lite:acme:id=="css3"?has("dom-qsa3")?lite:acme:id=="acme"?acme:(req=_302)&&id;if(id.charAt(id.length-1)=="?"){id=id.substring(0,id.length-1);var _305=true;}if(_305&&(has("dom-compliant-qsa")||_301)){return _303(_301);}req([id],function(_306){if(id!="./lite"){_301=_306;}_303(_306);});}};});},"dojo/NodeList-dom":function(){define(["./_base/kernel","./query","./_base/array","./_base/lang","./dom-class","./dom-construct","./dom-geometry","./dom-attr","./dom-style"],function(dojo,_307,_308,lang,_309,_30a,_30b,_30c,_30d){var _30e=function(a){return a.length==1&&(typeof a[0]=="string");};var _30f=function(node){var p=node.parentNode;if(p){p.removeChild(node);}};var _310=_307.NodeList,awc=_310._adaptWithCondition,aafe=_310._adaptAsForEach,aam=_310._adaptAsMap;function _311(_312){return function(node,name,_313){if(arguments.length==2){return _312[typeof name=="string"?"get":"set"](node,name);}return _312.set(node,name,_313);};};lang.extend(_310,{_normalize:function(_314,_315){var _316=_314.parse===true;if(typeof _314.template=="string"){var _317=_314.templateFunc||(dojo.string&&dojo.string.substitute);_314=_317?_317(_314.template,_314):_314;}var type=(typeof _314);if(type=="string"||type=="number"){_314=_30a.toDom(_314,(_315&&_315.ownerDocument));if(_314.nodeType==11){_314=lang._toArray(_314.childNodes);}else{_314=[_314];}}else{if(!lang.isArrayLike(_314)){_314=[_314];}else{if(!lang.isArray(_314)){_314=lang._toArray(_314);}}}if(_316){_314._runParse=true;}return _314;},_cloneNode:function(node){return node.cloneNode(true);},_place:function(ary,_318,_319,_31a){if(_318.nodeType!=1&&_319=="only"){return;}var _31b=_318,_31c;var _31d=ary.length;for(var i=_31d-1;i>=0;i--){var node=(_31a?this._cloneNode(ary[i]):ary[i]);if(ary._runParse&&dojo.parser&&dojo.parser.parse){if(!_31c){_31c=_31b.ownerDocument.createElement("div");}_31c.appendChild(node);dojo.parser.parse(_31c);node=_31c.firstChild;while(_31c.firstChild){_31c.removeChild(_31c.firstChild);}}if(i==_31d-1){_30a.place(node,_31b,_319);}else{_31b.parentNode.insertBefore(node,_31b);}_31b=node;}},position:aam(_30b.position),attr:awc(_311(_30c),_30e),style:awc(_311(_30d),_30e),addClass:aafe(_309.add),removeClass:aafe(_309.remove),toggleClass:aafe(_309.toggle),replaceClass:aafe(_309.replace),empty:aafe(_30a.empty),removeAttr:aafe(_30c.remove),marginBox:aam(_30b.getMarginBox),place:function(_31e,_31f){var item=_307(_31e)[0];return this.forEach(function(node){_30a.place(node,item,_31f);});},orphan:function(_320){return (_320?_307._filterResult(this,_320):this).forEach(_30f);},adopt:function(_321,_322){return _307(_321).place(this[0],_322)._stash(this);},query:function(_323){if(!_323){return this;}var ret=new _310;this.map(function(node){_307(_323,node).forEach(function(_324){if(_324!==undefined){ret.push(_324);}});});return ret._stash(this);},filter:function(_325){var a=arguments,_326=this,_327=0;if(typeof _325=="string"){_326=_307._filterResult(this,a[0]);if(a.length==1){return _326._stash(this);}_327=1;}return this._wrap(_308.filter(_326,a[_327],a[_327+1]),this);},addContent:function(_328,_329){_328=this._normalize(_328,this[0]);for(var i=0,node;(node=this[i]);i++){if(_328.length){this._place(_328,node,_329,i>0);}else{_30a.empty(node);}}return this;}});return _310;});},"dojo/_base/xhr":function(){define(["./kernel","./sniff","require","../io-query","../dom","../dom-form","./Deferred","./config","./json","./lang","./array","../on","../aspect","../request/watch","../request/xhr","../request/util"],function(dojo,has,_32a,ioq,dom,_32b,_32c,_32d,json,lang,_32e,on,_32f,_330,_331,util){dojo._xhrObj=_331._create;var cfg=dojo.config;dojo.objectToQuery=ioq.objectToQuery;dojo.queryToObject=ioq.queryToObject;dojo.fieldToObject=_32b.fieldToObject;dojo.formToObject=_32b.toObject;dojo.formToQuery=_32b.toQuery;dojo.formToJson=_32b.toJson;dojo._blockAsync=false;var _332=dojo._contentHandlers=dojo.contentHandlers={"text":function(xhr){return xhr.responseText;},"json":function(xhr){return json.fromJson(xhr.responseText||null);},"json-comment-filtered":function(xhr){if(!_32d.useCommentedJson){console.warn("Consider using the standard mimetype:application/json."+" json-commenting can introduce security issues. To"+" decrease the chances of hijacking, use the standard the 'json' handler and"+" prefix your json with: {}&&\n"+"Use djConfig.useCommentedJson=true to turn off this message.");}var _333=xhr.responseText;var _334=_333.indexOf("/*");var _335=_333.lastIndexOf("*/");if(_334==-1||_335==-1){throw new Error("JSON was not comment filtered");}return json.fromJson(_333.substring(_334+2,_335));},"javascript":function(xhr){return dojo.eval(xhr.responseText);},"xml":function(xhr){var _336=xhr.responseXML;if(_336&&has("dom-qsa2.1")&&!_336.querySelectorAll&&has("dom-parser")){_336=new DOMParser().parseFromString(xhr.responseText,"application/xml");}if(has("ie")){if((!_336||!_336.documentElement)){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];_32e.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(xhr.responseText);_336=dom;}catch(e){return false;}return true;});}}return _336;},"json-comment-optional":function(xhr){if(xhr.responseText&&/^[^{\[]*\/\*/.test(xhr.responseText)){return _332["json-comment-filtered"](xhr);}else{return _332["json"](xhr);}}};dojo._ioSetArgs=function(args,_337,_338,_339){var _33a={args:args,url:args.url};var _33b=null;if(args.form){var form=dom.byId(args.form);var _33c=form.getAttributeNode("action");_33a.url=_33a.url||(_33c?_33c.value:null);_33b=_32b.toObject(form);}var _33d=[{}];if(_33b){_33d.push(_33b);}if(args.content){_33d.push(args.content);}if(args.preventCache){_33d.push({"dojo.preventCache":new Date().valueOf()});}_33a.query=ioq.objectToQuery(lang.mixin.apply(null,_33d));_33a.handleAs=args.handleAs||"text";var d=new _32c(function(dfd){dfd.canceled=true;_337&&_337(dfd);var err=dfd.ioArgs.error;if(!err){err=new Error("request cancelled");err.dojoType="cancel";dfd.ioArgs.error=err;}return err;});d.addCallback(_338);var ld=args.load;if(ld&&lang.isFunction(ld)){d.addCallback(function(_33e){return ld.call(args,_33e,_33a);});}var err=args.error;if(err&&lang.isFunction(err)){d.addErrback(function(_33f){return err.call(args,_33f,_33a);});}var _340=args.handle;if(_340&&lang.isFunction(_340)){d.addBoth(function(_341){return _340.call(args,_341,_33a);});}d.addErrback(function(_342){return _339(_342,d);});if(cfg.ioPublish&&dojo.publish&&_33a.args.ioPublish!==false){d.addCallbacks(function(res){dojo.publish("/dojo/io/load",[d,res]);return res;},function(res){dojo.publish("/dojo/io/error",[d,res]);return res;});d.addBoth(function(res){dojo.publish("/dojo/io/done",[d,res]);return res;});}d.ioArgs=_33a;return d;};var _343=function(dfd){var ret=_332[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);return ret===undefined?null:ret;};var _344=function(_345,dfd){if(!dfd.ioArgs.args.failOk){console.error(_345);}return _345;};var _346=function(dfd){if(_347<=0){_347=0;if(cfg.ioPublish&&dojo.publish&&(!dfd||dfd&&dfd.ioArgs.args.ioPublish!==false)){dojo.publish("/dojo/io/stop");}}};var _347=0;_32f.after(_330,"_onAction",function(){_347-=1;});_32f.after(_330,"_onInFlight",_346);dojo._ioCancelAll=_330.cancelAll;dojo._ioNotifyStart=function(dfd){if(cfg.ioPublish&&dojo.publish&&dfd.ioArgs.args.ioPublish!==false){if(!_347){dojo.publish("/dojo/io/start");}_347+=1;dojo.publish("/dojo/io/send",[dfd]);}};dojo._ioWatch=function(dfd,_348,_349,_34a){var args=dfd.ioArgs.options=dfd.ioArgs.args;lang.mixin(dfd,{response:dfd.ioArgs,isValid:function(_34b){return _348(dfd);},isReady:function(_34c){return _349(dfd);},handleResponse:function(_34d){return _34a(dfd);}});_330(dfd);_346(dfd);};var _34e="application/x-www-form-urlencoded";dojo._ioAddQueryToUrl=function(_34f){if(_34f.query.length){_34f.url+=(_34f.url.indexOf("?")==-1?"?":"&")+_34f.query;_34f.query=null;}};dojo.xhr=function(_350,args,_351){var rDfd;var dfd=dojo._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},_343,_344);var _352=dfd.ioArgs;if("postData" in args){_352.query=args.postData;}else{if("putData" in args){_352.query=args.putData;}else{if("rawBody" in args){_352.query=args.rawBody;}else{if((arguments.length>2&&!_351)||"POST|PUT".indexOf(_350.toUpperCase())===-1){dojo._ioAddQueryToUrl(_352);}}}}var _353={method:_350,handleAs:"text",timeout:args.timeout,withCredentials:args.withCredentials,ioArgs:_352};if(typeof args.headers!=="undefined"){_353.headers=args.headers;}if(typeof args.contentType!=="undefined"){if(!_353.headers){_353.headers={};}_353.headers["Content-Type"]=args.contentType;}if(typeof _352.query!=="undefined"){_353.data=_352.query;}if(typeof args.sync!=="undefined"){_353.sync=args.sync;}dojo._ioNotifyStart(dfd);try{rDfd=_331(_352.url,_353,true);}catch(e){dfd.cancel();return dfd;}dfd.ioArgs.xhr=rDfd.response.xhr;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_354){_352.error=_354;if(_354.response){_354.status=_354.response.status;_354.responseText=_354.response.text;_354.xhr=_354.response.xhr;}dfd.reject(_354);});return dfd;};dojo.xhrGet=function(args){return dojo.xhr("GET",args);};dojo.rawXhrPost=dojo.xhrPost=function(args){return dojo.xhr("POST",args,true);};dojo.rawXhrPut=dojo.xhrPut=function(args){return dojo.xhr("PUT",args,true);};dojo.xhrDelete=function(args){return dojo.xhr("DELETE",args);};dojo._isDocumentOk=function(x){return util.checkStatus(x.status);};dojo._getText=function(url){var _355;dojo.xhrGet({url:url,sync:true,load:function(text){_355=text;}});return _355;};lang.mixin(dojo.xhr,{_xhrObj:dojo._xhrObj,fieldToObject:_32b.fieldToObject,formToObject:_32b.toObject,objectToQuery:ioq.objectToQuery,formToQuery:_32b.toQuery,formToJson:_32b.toJson,queryToObject:ioq.queryToObject,contentHandlers:_332,_ioSetArgs:dojo._ioSetArgs,_ioCancelAll:dojo._ioCancelAll,_ioNotifyStart:dojo._ioNotifyStart,_ioWatch:dojo._ioWatch,_ioAddQueryToUrl:dojo._ioAddQueryToUrl,_isDocumentOk:dojo._isDocumentOk,_getText:dojo._getText,get:dojo.xhrGet,post:dojo.xhrPost,put:dojo.xhrPut,del:dojo.xhrDelete});return dojo.xhr;});},"dojo/io-query":function(){define(["./_base/lang"],function(lang){var _356={};return {objectToQuery:function objectToQuery(map){var enc=encodeURIComponent,_357=[];for(var name in map){var _358=map[name];if(_358!=_356[name]){var _359=enc(name)+"=";if(lang.isArray(_358)){for(var i=0,l=_358.length;i<l;++i){_357.push(_359+enc(_358[i]));}}else{_357.push(_359+enc(_358));}}}return _357.join("&");},queryToObject:function queryToObject(str){var dec=decodeURIComponent,qp=str.split("&"),ret={},name,val;for(var i=0,l=qp.length,item;i<l;++i){item=qp[i];if(item.length){var s=item.indexOf("=");if(s<0){name=dec(item);val="";}else{name=dec(item.slice(0,s));val=dec(item.slice(s+1));}if(typeof ret[name]=="string"){ret[name]=[ret[name]];}if(lang.isArray(ret[name])){ret[name].push(val);}else{ret[name]=val;}}}return ret;}};});},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(lang,dom,ioq,json){function _35a(obj,name,_35b){if(_35b===null){return;}var val=obj[name];if(typeof val=="string"){obj[name]=[val,_35b];}else{if(lang.isArray(val)){val.push(_35b);}else{obj[name]=_35b;}}};var _35c="file|submit|image|reset|button";var form={fieldToObject:function fieldToObject(_35d){var ret=null;_35d=dom.byId(_35d);if(_35d){var _35e=_35d.name,type=(_35d.type||"").toLowerCase();if(_35e&&type&&!_35d.disabled){if(type=="radio"||type=="checkbox"){if(_35d.checked){ret=_35d.value;}}else{if(_35d.multiple){ret=[];var _35f=[_35d.firstChild];while(_35f.length){for(var node=_35f.pop();node;node=node.nextSibling){if(node.nodeType==1&&node.tagName.toLowerCase()=="option"){if(node.selected){ret.push(node.value);}}else{if(node.nextSibling){_35f.push(node.nextSibling);}if(node.firstChild){_35f.push(node.firstChild);}break;}}}}else{ret=_35d.value;}}}}return ret;},toObject:function formToObject(_360){var ret={},_361=dom.byId(_360).elements;for(var i=0,l=_361.length;i<l;++i){var item=_361[i],_362=item.name,type=(item.type||"").toLowerCase();if(_362&&type&&_35c.indexOf(type)<0&&!item.disabled){_35a(ret,_362,form.fieldToObject(item));if(type=="image"){ret[_362+".x"]=ret[_362+".y"]=ret[_362].x=ret[_362].y=0;}}}return ret;},toQuery:function formToQuery(_363){return ioq.objectToQuery(form.toObject(_363));},toJson:function formToJson(_364,_365){return json.stringify(form.toObject(_364),null,_365?4:0);}};return form;});},"dojo/json":function(){define(["./has"],function(has){"use strict";var _366=typeof JSON!="undefined";has.add("json-parse",_366);has.add("json-stringify",_366&&JSON.stringify({a:0},function(k,v){return v||1;})=="{\"a\":1}");if(has("json-stringify")){return JSON;}else{var _367=function(str){return ("\""+str.replace(/(["\\])/g,"\\$1")+"\"").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r");};return {parse:has("json-parse")?JSON.parse:function(str,_368){if(_368&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str)){throw new SyntaxError("Invalid characters in JSON");}return eval("("+str+")");},stringify:function(_369,_36a,_36b){var _36c;if(typeof _36a=="string"){_36b=_36a;_36a=null;}function _36d(it,_36e,key){if(_36a){it=_36a(key,it);}var val,_36f=typeof it;if(_36f=="number"){return isFinite(it)?it+"":"null";}if(_36f=="boolean"){return it+"";}if(it===null){return "null";}if(typeof it=="string"){return _367(it);}if(_36f=="function"||_36f=="undefined"){return _36c;}if(typeof it.toJSON=="function"){return _36d(it.toJSON(key),_36e,key);}if(it instanceof Date){return "\"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z\"".replace(/\{(\w+)(\+)?\}/g,function(t,prop,plus){var num=it["getUTC"+prop]()+(plus?1:0);return num<10?"0"+num:num;});}if(it.valueOf()!==it){return _36d(it.valueOf(),_36e,key);}var _370=_36b?(_36e+_36b):"";var sep=_36b?" ":"";var _371=_36b?"\n":"";if(it instanceof Array){var itl=it.length,res=[];for(key=0;key<itl;key++){var obj=it[key];val=_36d(obj,_370,key);if(typeof val!="string"){val="null";}res.push(_371+_370+val);}return "["+res.join(",")+_371+_36e+"]";}var _372=[];for(key in it){var _373;if(it.hasOwnProperty(key)){if(typeof key=="number"){_373="\""+key+"\"";}else{if(typeof key=="string"){_373=_367(key);}else{continue;}}val=_36d(it[key],_370,key);if(typeof val!="string"){continue;}_372.push(_371+_370+_373+":"+sep+val);}}return "{"+_372.join(",")+_371+_36e+"}";};return _36d(_369,"","");}};}});},"dojo/_base/Deferred":function(){define(["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(dojo,_374,_375,_376,has,lang,when){var _377=function(){};var _378=Object.freeze||function(){};var _379=dojo.Deferred=function(_37a){var _37b,_37c,_37d,_37e,_37f,head,_380;var _381=(this.promise=new _375());function _382(_383){if(_37c){throw new Error("This deferred has already been resolved");}_37b=_383;_37c=true;_384();};function _384(){var _385;while(!_385&&_380){var _386=_380;_380=_380.next;if((_385=(_386.progress==_377))){_37c=false;}var func=(_37f?_386.error:_386.resolved);if(has("config-useDeferredInstrumentation")){if(_37f&&_374.instrumentRejected){_374.instrumentRejected(_37b,!!func);}}if(func){try{var _387=func(_37b);if(_387&&typeof _387.then==="function"){_387.then(lang.hitch(_386.deferred,"resolve"),lang.hitch(_386.deferred,"reject"),lang.hitch(_386.deferred,"progress"));continue;}var _388=_385&&_387===undefined;if(_385&&!_388){_37f=_387 instanceof Error;}_386.deferred[_388&&_37f?"reject":"resolve"](_388?_37b:_387);}catch(e){_386.deferred.reject(e);}}else{if(_37f){_386.deferred.reject(_37b);}else{_386.deferred.resolve(_37b);}}}};this.isResolved=_381.isResolved=function(){return _37e==0;};this.isRejected=_381.isRejected=function(){return _37e==1;};this.isFulfilled=_381.isFulfilled=function(){return _37e>=0;};this.isCanceled=_381.isCanceled=function(){return _37d;};this.resolve=this.callback=function(_389){this.fired=_37e=0;this.results=[_389,null];_382(_389);};this.reject=this.errback=function(_38a){_37f=true;this.fired=_37e=1;if(has("config-useDeferredInstrumentation")){if(_374.instrumentRejected){_374.instrumentRejected(_38a,!!_380);}}_382(_38a);this.results=[null,_38a];};this.progress=function(_38b){var _38c=_380;while(_38c){var _38d=_38c.progress;_38d&&_38d(_38b);_38c=_38c.next;}};this.addCallbacks=function(_38e,_38f){this.then(_38e,_38f,_377);return this;};_381.then=this.then=function(_390,_391,_392){var _393=_392==_377?this:new _379(_381.cancel);var _394={resolved:_390,error:_391,progress:_392,deferred:_393};if(_380){head=head.next=_394;}else{_380=head=_394;}if(_37c){_384();}return _393.promise;};var _395=this;_381.cancel=this.cancel=function(){if(!_37c){var _396=_37a&&_37a(_395);if(!_37c){if(!(_396 instanceof Error)){_396=new _376(_396);}_396.log=false;_395.reject(_396);}}_37d=true;};_378(_381);};lang.extend(_379,{addCallback:function(_397){return this.addCallbacks(lang.hitch.apply(dojo,arguments));},addErrback:function(_398){return this.addCallbacks(null,lang.hitch.apply(dojo,arguments));},addBoth:function(_399){var _39a=lang.hitch.apply(dojo,arguments);return this.addCallbacks(_39a,_39a);},fired:-1});_379.when=dojo.when=when;return _379;});},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(has,lang,_39b,_39c,_39d){"use strict";var _39e=0,_39f=1,_3a0=2;var _3a1="This deferred has already been fulfilled.";var _3a2=Object.freeze||function(){};var _3a3=function(_3a4,type,_3a5,_3a6,_3a7){if(1){if(type===_3a0&&_3a8.instrumentRejected&&_3a4.length===0){_3a8.instrumentRejected(_3a5,false,_3a6,_3a7);}}for(var i=0;i<_3a4.length;i++){_3a9(_3a4[i],type,_3a5,_3a6);}};var _3a9=function(_3aa,type,_3ab,_3ac){var func=_3aa[type];var _3ad=_3aa.deferred;if(func){try{var _3ae=func(_3ab);if(type===_39e){if(typeof _3ae!=="undefined"){_3af(_3ad,type,_3ae);}}else{if(_3ae&&typeof _3ae.then==="function"){_3aa.cancel=_3ae.cancel;_3ae.then(_3b0(_3ad,_39f),_3b0(_3ad,_3a0),_3b0(_3ad,_39e));return;}_3af(_3ad,_39f,_3ae);}}catch(error){_3af(_3ad,_3a0,error);}}else{_3af(_3ad,type,_3ab);}if(1){if(type===_3a0&&_3a8.instrumentRejected){_3a8.instrumentRejected(_3ab,!!func,_3ac,_3ad.promise);}}};var _3b0=function(_3b1,type){return function(_3b2){_3af(_3b1,type,_3b2);};};var _3af=function(_3b3,type,_3b4){if(!_3b3.isCanceled()){switch(type){case _39e:_3b3.progress(_3b4);break;case _39f:_3b3.resolve(_3b4);break;case _3a0:_3b3.reject(_3b4);break;}}};var _3a8=function(_3b5){var _3b6=this.promise=new _39c();var _3b7=this;var _3b8,_3b9,_3ba;var _3bb=false;var _3bc=[];if(1&&Error.captureStackTrace){Error.captureStackTrace(_3b7,_3a8);Error.captureStackTrace(_3b6,_3a8);}this.isResolved=_3b6.isResolved=function(){return _3b8===_39f;};this.isRejected=_3b6.isRejected=function(){return _3b8===_3a0;};this.isFulfilled=_3b6.isFulfilled=function(){return !!_3b8;};this.isCanceled=_3b6.isCanceled=function(){return _3bb;};this.progress=function(_3bd,_3be){if(!_3b8){_3a3(_3bc,_39e,_3bd,null,_3b7);return _3b6;}else{if(_3be===true){throw new Error(_3a1);}else{return _3b6;}}};this.resolve=function(_3bf,_3c0){if(!_3b8){_3a3(_3bc,_3b8=_39f,_3b9=_3bf,null,_3b7);_3bc=null;return _3b6;}else{if(_3c0===true){throw new Error(_3a1);}else{return _3b6;}}};var _3c1=this.reject=function(_3c2,_3c3){if(!_3b8){if(1&&Error.captureStackTrace){Error.captureStackTrace(_3ba={},_3c1);}_3a3(_3bc,_3b8=_3a0,_3b9=_3c2,_3ba,_3b7);_3bc=null;return _3b6;}else{if(_3c3===true){throw new Error(_3a1);}else{return _3b6;}}};this.then=_3b6.then=function(_3c4,_3c5,_3c6){var _3c7=[_3c6,_3c4,_3c5];_3c7.cancel=_3b6.cancel;_3c7.deferred=new _3a8(function(_3c8){return _3c7.cancel&&_3c7.cancel(_3c8);});if(_3b8&&!_3bc){_3a9(_3c7,_3b8,_3b9,_3ba);}else{_3bc.push(_3c7);}return _3c7.deferred.promise;};this.cancel=_3b6.cancel=function(_3c9,_3ca){if(!_3b8){if(_3b5){var _3cb=_3b5(_3c9);_3c9=typeof _3cb==="undefined"?_3c9:_3cb;}_3bb=true;if(!_3b8){if(typeof _3c9==="undefined"){_3c9=new _39b();}_3c1(_3c9);return _3c9;}else{if(_3b8===_3a0&&_3b9===_3c9){return _3c9;}}}else{if(_3ca===true){throw new Error(_3a1);}}};_3a2(_3b6);};_3a8.prototype.toString=function(){return "[object Deferred]";};if(_39d){_39d(_3a8);}return _3a8;});},"dojo/errors/CancelError":function(){define(["./create"],function(_3cc){return _3cc("CancelError",null,null,{dojoType:"cancel"});});},"dojo/errors/create":function(){define(["../_base/lang"],function(lang){return function(name,ctor,base,_3cd){base=base||Error;var _3ce=function(_3cf){if(base===Error){if(Error.captureStackTrace){Error.captureStackTrace(this,_3ce);}var err=Error.call(this,_3cf),prop;for(prop in err){if(err.hasOwnProperty(prop)){this[prop]=err[prop];}}this.message=_3cf;this.stack=err.stack;}else{base.apply(this,arguments);}if(ctor){ctor.apply(this,arguments);}};_3ce.prototype=lang.delegate(base.prototype,_3cd);_3ce.prototype.name=name;_3ce.prototype.constructor=_3ce;return _3ce;};});},"dojo/promise/Promise":function(){define(["../_base/lang"],function(lang){"use strict";function _3d0(){throw new TypeError("abstract");};return lang.extend(function Promise(){},{then:function(_3d1,_3d2,_3d3){_3d0();},cancel:function(_3d4,_3d5){_3d0();},isResolved:function(){_3d0();},isRejected:function(){_3d0();},isFulfilled:function(){_3d0();},isCanceled:function(){_3d0();},always:function(_3d6){return this.then(_3d6,_3d6);},otherwise:function(_3d7){return this.then(null,_3d7);},trace:function(){return this;},traceRejected:function(){return this;},toString:function(){return "[object Promise]";}});});},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(_3d8,has,lang,_3d9){has.add("config-useDeferredInstrumentation","report-unhandled-rejections");function _3da(_3db,_3dc,_3dd){var _3de="";if(_3db&&_3db.stack){_3de+=_3db.stack;}if(_3dc&&_3dc.stack){_3de+="\n    ----------------------------------------\n    rejected"+_3dc.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ");}if(_3dd&&_3dd.stack){_3de+="\n    ----------------------------------------\n"+_3dd.stack;}console.error(_3db,_3de);};function _3df(_3e0,_3e1,_3e2,_3e3){if(!_3e1){_3da(_3e0,_3e2,_3e3);}};var _3e4=[];var _3e5=false;var _3e6=1000;function _3e7(_3e8,_3e9,_3ea,_3eb){if(!_3d9.some(_3e4,function(obj){if(obj.error===_3e8){if(_3e9){obj.handled=true;}return true;}})){_3e4.push({error:_3e8,rejection:_3ea,handled:_3e9,deferred:_3eb,timestamp:new Date().getTime()});}if(!_3e5){_3e5=setTimeout(_3ec,_3e6);}};function _3ec(){var now=new Date().getTime();var _3ed=now-_3e6;_3e4=_3d9.filter(_3e4,function(obj){if(obj.timestamp<_3ed){if(!obj.handled){_3da(obj.error,obj.rejection,obj.deferred);}return false;}return true;});if(_3e4.length){_3e5=setTimeout(_3ec,_3e4[0].timestamp+_3e6-now);}else{_3e5=false;}};return function(_3ee){var _3ef=has("config-useDeferredInstrumentation");if(_3ef){_3d8.on("resolved",lang.hitch(console,"log","resolved"));_3d8.on("rejected",lang.hitch(console,"log","rejected"));_3d8.on("progress",lang.hitch(console,"log","progress"));var args=[];if(typeof _3ef==="string"){args=_3ef.split(",");_3ef=args.shift();}if(_3ef==="report-rejections"){_3ee.instrumentRejected=_3df;}else{if(_3ef==="report-unhandled-rejections"||_3ef===true||_3ef===1){_3ee.instrumentRejected=_3e7;_3e6=parseInt(args[0],10)||_3e6;}else{throw new Error("Unsupported instrumentation usage <"+_3ef+">");}}}};});},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(lang,_3f0,_3f1){"use strict";var _3f2=new _3f1;var emit=_3f2.emit;_3f2.emit=null;function _3f3(args){setTimeout(function(){emit.apply(_3f2,args);},0);};_3f0.prototype.trace=function(){var args=lang._toArray(arguments);this.then(function(_3f4){_3f3(["resolved",_3f4].concat(args));},function(_3f5){_3f3(["rejected",_3f5].concat(args));},function(_3f6){_3f3(["progress",_3f6].concat(args));});return this;};_3f0.prototype.traceRejected=function(){var args=lang._toArray(arguments);this.otherwise(function(_3f7){_3f3(["rejected",_3f7].concat(args));});return this;};return _3f2;});},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(_3f8,_3f9){"use strict";return function when(_3fa,_3fb,_3fc,_3fd){var _3fe=_3fa&&typeof _3fa.then==="function";var _3ff=_3fe&&_3fa instanceof _3f9;if(!_3fe){if(arguments.length>1){return _3fb?_3fb(_3fa):_3fa;}else{return new _3f8().resolve(_3fa);}}else{if(!_3ff){var _400=new _3f8(_3fa.cancel);_3fa.then(_400.resolve,_400.reject,_400.progress);_3fa=_400.promise;}}if(_3fb||_3fc||_3fd){return _3fa.then(_3fb,_3fc,_3fd);}return _3fa;};});},"dojo/_base/json":function(){define(["./kernel","../json"],function(dojo,json){dojo.fromJson=function(js){return eval("("+js+")");};dojo._escapeString=json.stringify;dojo.toJsonIndentStr="\t";dojo.toJson=function(it,_401){return json.stringify(it,function(key,_402){if(_402){var tf=_402.__json__||_402.json;if(typeof tf=="function"){return tf.call(_402);}}return _402;},_401&&dojo.toJsonIndentStr);};return dojo;});},"dojo/request/watch":function(){define(["./util","../errors/RequestTimeoutError","../errors/CancelError","../_base/array","../_base/window","../has!host-browser?dom-addeventlistener?:../on:"],function(util,_403,_404,_405,win,on){var _406=null,_407=[];function _408(){var now=+(new Date);for(var i=0,dfd;i<_407.length&&(dfd=_407[i]);i++){var _409=dfd.response,_40a=_409.options;if((dfd.isCanceled&&dfd.isCanceled())||(dfd.isValid&&!dfd.isValid(_409))){_407.splice(i--,1);_40b._onAction&&_40b._onAction();}else{if(dfd.isReady&&dfd.isReady(_409)){_407.splice(i--,1);dfd.handleResponse(_409);_40b._onAction&&_40b._onAction();}else{if(dfd.startTime){if(dfd.startTime+(_40a.timeout||0)<now){_407.splice(i--,1);dfd.cancel(new _403("Timeout exceeded",_409));_40b._onAction&&_40b._onAction();}}}}}_40b._onInFlight&&_40b._onInFlight(dfd);if(!_407.length){clearInterval(_406);_406=null;}};function _40b(dfd){if(dfd.response.options.timeout){dfd.startTime=+(new Date);}if(dfd.isFulfilled()){return;}_407.push(dfd);if(!_406){_406=setInterval(_408,50);}if(dfd.response.options.sync){_408();}};_40b.cancelAll=function cancelAll(){try{_405.forEach(_407,function(dfd){try{dfd.cancel(new _404("All requests canceled."));}catch(e){}});}catch(e){}};if(win&&on&&win.doc.attachEvent){on(win.global,"unload",function(){_40b.cancelAll();});}return _40b;});},"dojo/request/util":function(){define(["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang","../promise/Promise"],function(_40c,_40d,_40e,_40f,_410,_411,lang,_412){_40c.deepCopy=function deepCopy(_413,_414){for(var name in _414){var tval=_413[name],sval=_414[name];if(tval!==sval){if(tval&&typeof tval==="object"&&sval&&typeof sval==="object"){_40c.deepCopy(tval,sval);}else{_413[name]=sval;}}}return _413;};_40c.deepCreate=function deepCreate(_415,_416){_416=_416||{};var _417=lang.delegate(_415),name,_418;for(name in _415){_418=_415[name];if(_418&&typeof _418==="object"){_417[name]=_40c.deepCreate(_418,_416[name]);}}return _40c.deepCopy(_417,_416);};var _419=Object.freeze||function(obj){return obj;};function _41a(_41b){return _419(_41b);};function _41c(_41d){return _41d.data||_41d.text;};_40c.deferred=function deferred(_41e,_41f,_420,_421,_422,last){var def=new _40f(function(_423){_41f&&_41f(def,_41e);if(!_423||!(_423 instanceof _40d)&&!(_423 instanceof _40e)){return new _40e("Request canceled",_41e);}return _423;});def.response=_41e;def.isValid=_420;def.isReady=_421;def.handleResponse=_422;function _424(_425){_425.response=_41e;throw _425;};var _426=def.then(_41a).otherwise(_424);if(_40c.notify){_426.then(lang.hitch(_40c.notify,"emit","load"),lang.hitch(_40c.notify,"emit","error"));}var _427=_426.then(_41c);var _428=new _412();for(var prop in _427){if(_427.hasOwnProperty(prop)){_428[prop]=_427[prop];}}_428.response=_426;_419(_428);if(last){def.then(function(_429){last.call(def,_429);},function(_42a){last.call(def,_41e,_42a);});}def.promise=_428;def.then=_428.then;return def;};_40c.addCommonMethods=function addCommonMethods(_42b,_42c){_411.forEach(_42c||["GET","POST","PUT","DELETE"],function(_42d){_42b[(_42d==="DELETE"?"DEL":_42d).toLowerCase()]=function(url,_42e){_42e=lang.delegate(_42e||{});_42e.method=_42d;return _42b(url,_42e);};});};_40c.parseArgs=function parseArgs(url,_42f,_430){var data=_42f.data,_431=_42f.query;if(data&&!_430){if(typeof data==="object"){_42f.data=_410.objectToQuery(data);}}if(_431){if(typeof _431==="object"){_431=_410.objectToQuery(_431);}if(_42f.preventCache){_431+=(_431?"&":"")+"request.preventCache="+(+(new Date));}}else{if(_42f.preventCache){_431="request.preventCache="+(+(new Date));}}if(url&&_431){url+=(~url.indexOf("?")?"&":"?")+_431;}return {url:url,options:_42f,getHeader:function(_432){return null;}};};_40c.checkStatus=function(stat){stat=stat||0;return (stat>=200&&stat<300)||stat===304||stat===1223||!stat;};});},"dojo/errors/RequestError":function(){define(["./create"],function(_433){return _433("RequestError",function(_434,_435){this.response=_435;});});},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(_436,_437){return _436("RequestTimeoutError",null,_437,{dojoType:"timeout"});});},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(_438,_439,_43a,util,has){has.add("native-xhr",function(){return typeof XMLHttpRequest!=="undefined";});has.add("dojo-force-activex-xhr",function(){return has("activex")&&!document.addEventListener&&window.location.protocol==="file:";});has.add("native-xhr2",function(){if(!has("native-xhr")){return;}var x=new XMLHttpRequest();return typeof x["addEventListener"]!=="undefined"&&(typeof opera==="undefined"||typeof x["upload"]!=="undefined");});has.add("native-formdata",function(){return typeof FormData!=="undefined";});has.add("native-response-type",function(){return has("native-xhr")&&typeof new XMLHttpRequest().responseType!=="undefined";});has.add("native-xhr2-blob",function(){if(!has("native-response-type")){return;}var x=new XMLHttpRequest();x.open("GET","/",true);x.responseType="blob";var _43b=x.responseType;x.abort();return _43b==="blob";});var _43c={"blob":has("native-xhr2-blob")?"blob":"arraybuffer","document":"document","arraybuffer":"arraybuffer"};function _43d(_43e,_43f){var _440=_43e.xhr;_43e.status=_43e.xhr.status;try{_43e.text=_440.responseText;}catch(e){}if(_43e.options.handleAs==="xml"){_43e.data=_440.responseXML;}if(!_43f){try{_43a(_43e);}catch(e){_43f=e;}}if(_43f){this.reject(_43f);}else{if(util.checkStatus(_440.status)){this.resolve(_43e);}else{_43f=new _438("Unable to load "+_43e.url+" status: "+_440.status,_43e);this.reject(_43f);}}};var _441,_442,_443,_444;if(has("native-xhr2")){_441=function(_445){return !this.isFulfilled();};_444=function(dfd,_446){_446.xhr.abort();};_443=function(_447,dfd,_448){function _449(evt){dfd.handleResponse(_448);};function _44a(evt){var _44b=evt.target;var _44c=new _438("Unable to load "+_448.url+" status: "+_44b.status,_448);dfd.handleResponse(_448,_44c);};function _44d(evt){if(evt.lengthComputable){_448.loaded=evt.loaded;_448.total=evt.total;dfd.progress(_448);}else{if(_448.xhr.readyState===3){_448.loaded=evt.position;dfd.progress(_448);}}};_447.addEventListener("load",_449,false);_447.addEventListener("error",_44a,false);_447.addEventListener("progress",_44d,false);return function(){_447.removeEventListener("load",_449,false);_447.removeEventListener("error",_44a,false);_447.removeEventListener("progress",_44d,false);_447=null;};};}else{_441=function(_44e){return _44e.xhr.readyState;};_442=function(_44f){return 4===_44f.xhr.readyState;};_444=function(dfd,_450){var xhr=_450.xhr;var _451=typeof xhr.abort;if(_451==="function"||_451==="object"||_451==="unknown"){xhr.abort();}};}function _452(_453){return this.xhr.getResponseHeader(_453);};var _454,_455={data:null,query:null,sync:false,method:"GET"};function xhr(url,_456,_457){var _458=has("native-formdata")&&_456&&_456.data&&_456.data instanceof FormData;var _459=util.parseArgs(url,util.deepCreate(_455,_456),_458);url=_459.url;_456=_459.options;var _45a,last=function(){_45a&&_45a();};var dfd=util.deferred(_459,_444,_441,_442,_43d,last);var _45b=_459.xhr=xhr._create();if(!_45b){dfd.cancel(new _438("XHR was not created"));return _457?dfd:dfd.promise;}_459.getHeader=_452;if(_443){_45a=_443(_45b,dfd,_459);}var data=_456.data,_45c=!_456.sync,_45d=_456.method;try{_45b.open(_45d,url,_45c,_456.user||_454,_456.password||_454);if(_456.withCredentials){_45b.withCredentials=_456.withCredentials;}if(has("native-response-type")&&_456.handleAs in _43c){_45b.responseType=_43c[_456.handleAs];}var _45e=_456.headers,_45f=_458?false:"application/x-www-form-urlencoded";if(_45e){for(var hdr in _45e){if(hdr.toLowerCase()==="content-type"){_45f=_45e[hdr];}else{if(_45e[hdr]){_45b.setRequestHeader(hdr,_45e[hdr]);}}}}if(_45f&&_45f!==false){_45b.setRequestHeader("Content-Type",_45f);}if(!_45e||!("X-Requested-With" in _45e)){_45b.setRequestHeader("X-Requested-With","XMLHttpRequest");}if(util.notify){util.notify.emit("send",_459,dfd.promise.cancel);}_45b.send(data);}catch(e){dfd.reject(e);}_439(dfd);_45b=null;return _457?dfd:dfd.promise;};xhr._create=function(){throw new Error("XMLHTTP not available");};if(has("native-xhr")&&!has("dojo-force-activex-xhr")){xhr._create=function(){return new XMLHttpRequest();};}else{if(has("activex")){try{new ActiveXObject("Msxml2.XMLHTTP");xhr._create=function(){return new ActiveXObject("Msxml2.XMLHTTP");};}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP");xhr._create=function(){return new ActiveXObject("Microsoft.XMLHTTP");};}catch(e){}}}}util.addCommonMethods(xhr);return xhr;});},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(JSON,_460,_461,has){has.add("activex",typeof ActiveXObject!=="undefined");has.add("dom-parser",function(_462){return "DOMParser" in _462;});var _463;if(has("activex")){var dp=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];var _464;_463=function(_465){var _466=_465.data;var text=_465.text;if(_466&&has("dom-qsa2.1")&&!_466.querySelectorAll&&has("dom-parser")){_466=new DOMParser().parseFromString(text,"application/xml");}function _467(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(text);_466=dom;_464=p;}catch(e){return false;}return true;};if(!_466||!_466.documentElement){if(!_464||!_467(_464)){_461.some(dp,_467);}}return _466;};}var _468=function(_469){if(!has("native-xhr2-blob")&&_469.options.handleAs==="blob"&&typeof Blob!=="undefined"){return new Blob([_469.xhr.response],{type:_469.xhr.getResponseHeader("Content-Type")});}return _469.xhr.response;};var _46a={"javascript":function(_46b){return _460.eval(_46b.text||"");},"json":function(_46c){return JSON.parse(_46c.text||null);},"xml":_463,"blob":_468,"arraybuffer":_468,"document":_468};function _46d(_46e){var _46f=_46a[_46e.options.handleAs];_46e.data=_46f?_46f(_46e):(_46e.data||_46e.text);return _46e;};_46d.register=function(name,_470){_46a[name]=_470;};return _46d;});},"dojo/_base/fx":function(){define(["./kernel","./config","./lang","../Evented","./Color","../aspect","../sniff","../dom","../dom-style"],function(dojo,_471,lang,_472,_473,_474,has,dom,_475){var _476=lang.mixin;var _477={};var _478=_477._Line=function(_479,end){this.start=_479;this.end=end;};_478.prototype.getValue=function(n){return ((this.end-this.start)*n)+this.start;};var _47a=_477.Animation=function(args){_476(this,args);if(lang.isArray(this.curve)){this.curve=new _478(this.curve[0],this.curve[1]);}};_47a.prototype=new _472();lang.extend(_47a,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var _47b=this._percent,_47c=this.easing;return _47c?_47c(_47b):_47b;},_fire:function(evt,args){var a=args||[];if(this[evt]){if(_471.debugAtAllCosts){this[evt].apply(this,a);}else{try{this[evt].apply(this,a);}catch(e){console.error("exception in animation handler for:",evt);console.error(e);}}}return this;},play:function(_47d,_47e){var _47f=this;if(_47f._delayTimer){_47f._clearTimer();}if(_47e){_47f._stopTimer();_47f._active=_47f._paused=false;_47f._percent=0;}else{if(_47f._active&&!_47f._paused){return _47f;}}_47f._fire("beforeBegin",[_47f.node]);var de=_47d||_47f.delay,_480=lang.hitch(_47f,"_play",_47e);if(de>0){_47f._delayTimer=setTimeout(_480,de);return _47f;}_480();return _47f;},_play:function(_481){var _482=this;if(_482._delayTimer){_482._clearTimer();}_482._startTime=new Date().valueOf();if(_482._paused){_482._startTime-=_482.duration*_482._percent;}_482._active=true;_482._paused=false;var _483=_482.curve.getValue(_482._getStep());if(!_482._percent){if(!_482._startRepeatCount){_482._startRepeatCount=_482.repeat;}_482._fire("onBegin",[_483]);}_482._fire("onPlay",[_483]);_482._cycle();return _482;},pause:function(){var _484=this;if(_484._delayTimer){_484._clearTimer();}_484._stopTimer();if(!_484._active){return _484;}_484._paused=true;_484._fire("onPause",[_484.curve.getValue(_484._getStep())]);return _484;},gotoPercent:function(_485,_486){var _487=this;_487._stopTimer();_487._active=_487._paused=true;_487._percent=_485;if(_486){_487.play();}return _487;},stop:function(_488){var _489=this;if(_489._delayTimer){_489._clearTimer();}if(!_489._timer){return _489;}_489._stopTimer();if(_488){_489._percent=1;}_489._fire("onStop",[_489.curve.getValue(_489._getStep())]);_489._active=_489._paused=false;return _489;},destroy:function(){this.stop();},status:function(){if(this._active){return this._paused?"paused":"playing";}return "stopped";},_cycle:function(){var _48a=this;if(_48a._active){var curr=new Date().valueOf();var step=_48a.duration===0?1:(curr-_48a._startTime)/(_48a.duration);if(step>=1){step=1;}_48a._percent=step;if(_48a.easing){step=_48a.easing(step);}_48a._fire("onAnimate",[_48a.curve.getValue(step)]);if(_48a._percent<1){_48a._startTimer();}else{_48a._active=false;if(_48a.repeat>0){_48a.repeat--;_48a.play(null,true);}else{if(_48a.repeat==-1){_48a.play(null,true);}else{if(_48a._startRepeatCount){_48a.repeat=_48a._startRepeatCount;_48a._startRepeatCount=0;}}}_48a._percent=0;_48a._fire("onEnd",[_48a.node]);!_48a.repeat&&_48a._stopTimer();}}return _48a;},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer;}});var ctr=0,_48b=null,_48c={run:function(){}};lang.extend(_47a,{_startTimer:function(){if(!this._timer){this._timer=_474.after(_48c,"run",lang.hitch(this,"_cycle"),true);ctr++;}if(!_48b){_48b=setInterval(lang.hitch(_48c,"run"),this.rate);}},_stopTimer:function(){if(this._timer){this._timer.remove();this._timer=null;ctr--;}if(ctr<=0){clearInterval(_48b);_48b=null;ctr=0;}}});var _48d=has("ie")?function(node){var ns=node.style;if(!ns.width.length&&_475.get(node,"width")=="auto"){ns.width="auto";}}:function(){};_477._fade=function(args){args.node=dom.byId(args.node);var _48e=_476({properties:{}},args),_48f=(_48e.properties.opacity={});_48f.start=!("start" in _48e)?function(){return +_475.get(_48e.node,"opacity")||0;}:_48e.start;_48f.end=_48e.end;var anim=_477.animateProperty(_48e);_474.after(anim,"beforeBegin",lang.partial(_48d,_48e.node),true);return anim;};_477.fadeIn=function(args){return _477._fade(_476({end:1},args));};_477.fadeOut=function(args){return _477._fade(_476({end:0},args));};_477._defaultEasing=function(n){return 0.5+((Math.sin((n+1.5)*Math.PI))/2);};var _490=function(_491){this._properties=_491;for(var p in _491){var prop=_491[p];if(prop.start instanceof _473){prop.tempColor=new _473();}}};_490.prototype.getValue=function(r){var ret={};for(var p in this._properties){var prop=this._properties[p],_492=prop.start;if(_492 instanceof _473){ret[p]=_473.blendColors(_492,prop.end,r,prop.tempColor).toCss();}else{if(!lang.isArray(_492)){ret[p]=((prop.end-_492)*r)+_492+(p!="opacity"?prop.units||"px":0);}}}return ret;};_477.animateProperty=function(args){var n=args.node=dom.byId(args.node);if(!args.easing){args.easing=dojo._defaultEasing;}var anim=new _47a(args);_474.after(anim,"beforeBegin",lang.hitch(anim,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height"){this.node.display="block";}var prop=this.properties[p];if(lang.isFunction(prop)){prop=prop(n);}prop=pm[p]=_476({},(lang.isObject(prop)?prop:{end:prop}));if(lang.isFunction(prop.start)){prop.start=prop.start(n);}if(lang.isFunction(prop.end)){prop.end=prop.end(n);}var _493=(p.toLowerCase().indexOf("color")>=0);function _494(node,p){var v={height:node.offsetHeight,width:node.offsetWidth}[p];if(v!==undefined){return v;}v=_475.get(node,p);return (p=="opacity")?+v:(_493?v:parseFloat(v));};if(!("end" in prop)){prop.end=_494(n,p);}else{if(!("start" in prop)){prop.start=_494(n,p);}}if(_493){prop.start=new _473(prop.start);prop.end=new _473(prop.end);}else{prop.start=(p=="opacity")?+prop.start:parseFloat(prop.start);}}this.curve=new _490(pm);}),true);_474.after(anim,"onAnimate",lang.hitch(_475,"set",anim.node),true);return anim;};_477.anim=function(node,_495,_496,_497,_498,_499){return _477.animateProperty({node:node,duration:_496||_47a.prototype.duration,properties:_495,easing:_497,onEnd:_498}).play(_499||0);};if(1){_476(dojo,_477);dojo._Animation=_47a;}return _477;});},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(dojo,lang,_49a,_49b){var _49c=dojo.Color=function(_49d){if(_49d){this.setColor(_49d);}};_49c.named={"black":[0,0,0],"silver":[192,192,192],"gray":[128,128,128],"white":[255,255,255],"maroon":[128,0,0],"red":[255,0,0],"purple":[128,0,128],"fuchsia":[255,0,255],"green":[0,128,0],"lime":[0,255,0],"olive":[128,128,0],"yellow":[255,255,0],"navy":[0,0,128],"blue":[0,0,255],"teal":[0,128,128],"aqua":[0,255,255],"transparent":_49b.transparentColor||[0,0,0,0]};lang.extend(_49c,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a;},setColor:function(_49e){if(lang.isString(_49e)){_49c.fromString(_49e,this);}else{if(lang.isArray(_49e)){_49c.fromArray(_49e,this);}else{this._set(_49e.r,_49e.g,_49e.b,_49e.a);if(!(_49e instanceof _49c)){this.sanitize();}}}return this;},sanitize:function(){return this;},toRgb:function(){var t=this;return [t.r,t.g,t.b];},toRgba:function(){var t=this;return [t.r,t.g,t.b,t.a];},toHex:function(){var arr=_49a.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s;},this);return "#"+arr.join("");},toCss:function(_49f){var t=this,rgb=t.r+", "+t.g+", "+t.b;return (_49f?"rgba("+rgb+", "+t.a:"rgb("+rgb)+")";},toString:function(){return this.toCss(true);}});_49c.blendColors=dojo.blendColors=function(_4a0,end,_4a1,obj){var t=obj||new _49c();_49a.forEach(["r","g","b","a"],function(x){t[x]=_4a0[x]+(end[x]-_4a0[x])*_4a1;if(x!="a"){t[x]=Math.round(t[x]);}});return t.sanitize();};_49c.fromRgb=dojo.colorFromRgb=function(_4a2,obj){var m=_4a2.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&_49c.fromArray(m[1].split(/\s*,\s*/),obj);};_49c.fromHex=dojo.colorFromHex=function(_4a3,obj){var t=obj||new _49c(),bits=(_4a3.length==4)?4:8,mask=(1<<bits)-1;_4a3=Number("0x"+_4a3.substr(1));if(isNaN(_4a3)){return null;}_49a.forEach(["b","g","r"],function(x){var c=_4a3&mask;_4a3>>=bits;t[x]=bits==4?17*c:c;});t.a=1;return t;};_49c.fromArray=dojo.colorFromArray=function(a,obj){var t=obj||new _49c();t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a)){t.a=1;}return t.sanitize();};_49c.fromString=dojo.colorFromString=function(str,obj){var a=_49c.named[str];return a&&_49c.fromArray(a,obj)||_49c.fromRgb(str,obj)||_49c.fromHex(str,obj);};return _49c;});},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(dojo,has,lang){var mix=lang.mixin,op=Object.prototype,opts=op.toString,xtor=new Function,_4a4=0,_4a5="constructor";function err(msg,cls){throw new Error("declare"+(cls?" "+cls:"")+": "+msg);};function _4a6(_4a7,_4a8){var _4a9=[],_4aa=[{cls:0,refs:[]}],_4ab={},_4ac=1,l=_4a7.length,i=0,j,lin,base,top,_4ad,rec,name,refs;for(;i<l;++i){base=_4a7[i];if(!base){err("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?",_4a8);}else{if(opts.call(base)!="[object Function]"){err("mixin #"+i+" is not a callable constructor.",_4a8);}}lin=base._meta?base._meta.bases:[base];top=0;for(j=lin.length-1;j>=0;--j){_4ad=lin[j].prototype;if(!_4ad.hasOwnProperty("declaredClass")){_4ad.declaredClass="uniqName_"+(_4a4++);}name=_4ad.declaredClass;if(!_4ab.hasOwnProperty(name)){_4ab[name]={count:0,refs:[],cls:lin[j]};++_4ac;}rec=_4ab[name];if(top&&top!==rec){rec.refs.push(top);++top.count;}top=rec;}++top.count;_4aa[0].refs.push(top);}while(_4aa.length){top=_4aa.pop();_4a9.push(top.cls);--_4ac;while(refs=top.refs,refs.length==1){top=refs[0];if(!top||--top.count){top=0;break;}_4a9.push(top.cls);--_4ac;}if(top){for(i=0,l=refs.length;i<l;++i){top=refs[i];if(!--top.count){_4aa.push(top);}}}}if(_4ac){err("can't build consistent linearization",_4a8);}base=_4a7[0];_4a9[0]=base?base._meta&&base===_4a9[_4a9.length-base._meta.bases.length]?base._meta.bases.length:1:0;return _4a9;};function _4ae(args,a,f){var name,_4af,_4b0,_4b1,meta,base,_4b2,opf,pos,_4b3=this._inherited=this._inherited||{};if(typeof args=="string"){name=args;args=a;a=f;}f=0;_4b1=args.callee;name=name||_4b1.nom;if(!name){err("can't deduce a name to call inherited()",this.declaredClass);}meta=this.constructor._meta;_4b0=meta.bases;pos=_4b3.p;if(name!=_4a5){if(_4b3.c!==_4b1){pos=0;base=_4b0[0];meta=base._meta;if(meta.hidden[name]!==_4b1){_4af=meta.chains;if(_4af&&typeof _4af[name]=="string"){err("calling chained method with inherited: "+name,this.declaredClass);}do{meta=base._meta;_4b2=base.prototype;if(meta&&(_4b2[name]===_4b1&&_4b2.hasOwnProperty(name)||meta.hidden[name]===_4b1)){break;}}while(base=_4b0[++pos]);pos=base?pos:-1;}}base=_4b0[++pos];if(base){_4b2=base.prototype;if(base._meta&&_4b2.hasOwnProperty(name)){f=_4b2[name];}else{opf=op[name];do{_4b2=base.prototype;f=_4b2[name];if(f&&(base._meta?_4b2.hasOwnProperty(name):f!==opf)){break;}}while(base=_4b0[++pos]);}}f=base&&f||op[name];}else{if(_4b3.c!==_4b1){pos=0;meta=_4b0[0]._meta;if(meta&&meta.ctor!==_4b1){_4af=meta.chains;if(!_4af||_4af.constructor!=="manual"){err("calling chained constructor with inherited",this.declaredClass);}while(base=_4b0[++pos]){meta=base._meta;if(meta&&meta.ctor===_4b1){break;}}pos=base?pos:-1;}}while(base=_4b0[++pos]){meta=base._meta;f=meta?meta.ctor:base;if(f){break;}}f=base&&f;}_4b3.c=f;_4b3.p=pos;if(f){return a===true?f:f.apply(this,a||args);}};function _4b4(name,args){if(typeof name=="string"){return this.__inherited(name,args,true);}return this.__inherited(name,true);};function _4b5(args,a1,a2){var f=this.getInherited(args,a1);if(f){return f.apply(this,a2||a1||args);}};var _4b6=dojo.config.isDebug?_4b5:_4ae;function _4b7(cls){var _4b8=this.constructor._meta.bases;for(var i=0,l=_4b8.length;i<l;++i){if(_4b8[i]===cls){return true;}}return this instanceof cls;};function _4b9(_4ba,_4bb){for(var name in _4bb){if(name!=_4a5&&_4bb.hasOwnProperty(name)){_4ba[name]=_4bb[name];}}if(has("bug-for-in-skips-shadowed")){for(var _4bc=lang._extraNames,i=_4bc.length;i;){name=_4bc[--i];if(name!=_4a5&&_4bb.hasOwnProperty(name)){_4ba[name]=_4bb[name];}}}};function _4bd(_4be,_4bf){var name,t;for(name in _4bf){t=_4bf[name];if((t!==op[name]||!(name in op))&&name!=_4a5){if(opts.call(t)=="[object Function]"){t.nom=name;}_4be[name]=t;}}if(has("bug-for-in-skips-shadowed")){for(var _4c0=lang._extraNames,i=_4c0.length;i;){name=_4c0[--i];t=_4bf[name];if((t!==op[name]||!(name in op))&&name!=_4a5){if(opts.call(t)=="[object Function]"){t.nom=name;}_4be[name]=t;}}}return _4be;};function _4c1(_4c2){_4c3.safeMixin(this.prototype,_4c2);return this;};function _4c4(_4c5,_4c6){if(!(_4c5 instanceof Array||typeof _4c5=="function")){_4c6=_4c5;_4c5=undefined;}_4c6=_4c6||{};_4c5=_4c5||[];return _4c3([this].concat(_4c5),_4c6);};function _4c7(_4c8,_4c9){return function(){var a=arguments,args=a,a0=a[0],f,i,m,l=_4c8.length,_4ca;if(!(this instanceof a.callee)){return _4cb(a);}if(_4c9&&(a0&&a0.preamble||this.preamble)){_4ca=new Array(_4c8.length);_4ca[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f){a=f.apply(this,a)||a;}}f=_4c8[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f){a=f.apply(this,a)||a;}if(++i==l){break;}_4ca[i]=a;}}for(i=l-1;i>=0;--i){f=_4c8[i];m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,_4ca?_4ca[i]:a);}}f=this.postscript;if(f){f.apply(this,args);}};};function _4cc(ctor,_4cd){return function(){var a=arguments,t=a,a0=a[0],f;if(!(this instanceof a.callee)){return _4cb(a);}if(_4cd){if(a0){f=a0.preamble;if(f){t=f.apply(this,t)||t;}}f=this.preamble;if(f){f.apply(this,t);}}if(ctor){ctor.apply(this,a);}f=this.postscript;if(f){f.apply(this,a);}};};function _4ce(_4cf){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee)){return _4cb(a);}for(;f=_4cf[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break;}}f=this.postscript;if(f){f.apply(this,a);}};};function _4d0(name,_4d1,_4d2){return function(){var b,m,f,i=0,step=1;if(_4d2){i=_4d1.length-1;step=-1;}for(;b=_4d1[i];i+=step){m=b._meta;f=(m?m.hidden:b.prototype)[name];if(f){f.apply(this,arguments);}}};};function _4d3(ctor){xtor.prototype=ctor.prototype;var t=new xtor;xtor.prototype=null;return t;};function _4cb(args){var ctor=args.callee,t=_4d3(ctor);ctor.apply(t,args);return t;};function _4c3(_4d4,_4d5,_4d6){if(typeof _4d4!="string"){_4d6=_4d5;_4d5=_4d4;_4d4="";}_4d6=_4d6||{};var _4d7,i,t,ctor,name,_4d8,_4d9,_4da=1,_4db=_4d5;if(opts.call(_4d5)=="[object Array]"){_4d8=_4a6(_4d5,_4d4);t=_4d8[0];_4da=_4d8.length-t;_4d5=_4d8[_4da];}else{_4d8=[0];if(_4d5){if(opts.call(_4d5)=="[object Function]"){t=_4d5._meta;_4d8=_4d8.concat(t?t.bases:_4d5);}else{err("base class is not a callable constructor.",_4d4);}}else{if(_4d5!==null){err("unknown base class. Did you use dojo.require to pull it in?",_4d4);}}}if(_4d5){for(i=_4da-1;;--i){_4d7=_4d3(_4d5);if(!i){break;}t=_4d8[i];(t._meta?_4b9:mix)(_4d7,t.prototype);ctor=new Function;ctor.superclass=_4d5;ctor.prototype=_4d7;_4d5=_4d7.constructor=ctor;}}else{_4d7={};}_4c3.safeMixin(_4d7,_4d6);t=_4d6.constructor;if(t!==op.constructor){t.nom=_4a5;_4d7.constructor=t;}for(i=_4da-1;i;--i){t=_4d8[i]._meta;if(t&&t.chains){_4d9=mix(_4d9||{},t.chains);}}if(_4d7["-chains-"]){_4d9=mix(_4d9||{},_4d7["-chains-"]);}t=!_4d9||!_4d9.hasOwnProperty(_4a5);_4d8[0]=ctor=(_4d9&&_4d9.constructor==="manual")?_4ce(_4d8):(_4d8.length==1?_4cc(_4d6.constructor,t):_4c7(_4d8,t));ctor._meta={bases:_4d8,hidden:_4d6,chains:_4d9,parents:_4db,ctor:_4d6.constructor};ctor.superclass=_4d5&&_4d5.prototype;ctor.extend=_4c1;ctor.createSubclass=_4c4;ctor.prototype=_4d7;_4d7.constructor=ctor;_4d7.getInherited=_4b4;_4d7.isInstanceOf=_4b7;_4d7.inherited=_4b6;_4d7.__inherited=_4ae;if(_4d4){_4d7.declaredClass=_4d4;lang.setObject(_4d4,ctor);}if(_4d9){for(name in _4d9){if(_4d7[name]&&typeof _4d9[name]=="string"&&name!=_4a5){t=_4d7[name]=_4d0(name,_4d8,_4d9[name]==="after");t.nom=name;}}}return ctor;};dojo.safeMixin=_4c3.safeMixin=_4bd;dojo.declare=_4c3;return _4c3;});},"dojo/_base/loader":function(){define(["./kernel","../has","require","module","../json","./lang","./array"],function(dojo,has,_4dc,_4dd,json,lang,_4de){if(!1){console.error("cannot load the Dojo v1.x loader with a foreign loader");return 0;}1||has.add("dojo-fast-sync-require",1);var _4df=function(id){return {src:_4dd.id,id:id};},_4e0=function(name){return name.replace(/\./g,"/");},_4e1=/\/\/>>built/,_4e2=[],_4e3=[],_4e4=function(mid,_4e5,_4e6){_4e2.push(_4e6);_4de.forEach(mid.split(","),function(mid){var _4e7=_4e8(mid,_4e5.module);_4e3.push(_4e7);_4e9(_4e7);});_4ea();},_4ea=(1?function(){var _4eb,mid;for(mid in _4ec){_4eb=_4ec[mid];if(_4eb.noReqPluginCheck===undefined){_4eb.noReqPluginCheck=/loadInit\!/.test(mid)||/require\!/.test(mid)?1:0;}if(!_4eb.executed&&!_4eb.noReqPluginCheck&&_4eb.injected==_4ed){return;}}_4ee(function(){var _4ef=_4e2;_4e2=[];_4de.forEach(_4ef,function(cb){cb(1);});});}:(function(){var _4f0,_4f1=function(m){_4f0[m.mid]=1;for(var t,_4f2,deps=m.deps||[],i=0;i<deps.length;i++){_4f2=deps[i];if(!(t=_4f0[_4f2.mid])){if(t===0||!_4f1(_4f2)){_4f0[m.mid]=0;return false;}}}return true;};return function(){var _4f3,mid;_4f0={};for(mid in _4ec){_4f3=_4ec[mid];if(_4f3.executed||_4f3.noReqPluginCheck){_4f0[mid]=1;}else{if(_4f3.noReqPluginCheck!==0){_4f3.noReqPluginCheck=/loadInit\!/.test(mid)||/require\!/.test(mid)?1:0;}if(_4f3.noReqPluginCheck){_4f0[mid]=1;}else{if(_4f3.injected!==_51f){_4f0[mid]=0;}}}}for(var t,i=0,end=_4e3.length;i<end;i++){_4f3=_4e3[i];if(!(t=_4f0[_4f3.mid])){if(t===0||!_4f1(_4f3)){return;}}}_4ee(function(){var _4f4=_4e2;_4e2=[];_4de.forEach(_4f4,function(cb){cb(1);});});};})()),_4f5=function(mid,_4f6,_4f7){_4f6([mid],function(_4f8){_4f6(_4f8.names,function(){for(var _4f9="",args=[],i=0;i<arguments.length;i++){_4f9+="var "+_4f8.names[i]+"= arguments["+i+"]; ";args.push(arguments[i]);}eval(_4f9);var _4fa=_4f6.module,_4fb=[],_4fc,_4fd={provide:function(_4fe){_4fe=_4e0(_4fe);var _4ff=_4e8(_4fe,_4fa);if(_4ff!==_4fa){_525(_4ff);}},require:function(_500,_501){_500=_4e0(_500);_501&&(_4e8(_500,_4fa).result=_520);_4fb.push(_500);},requireLocalization:function(_502,_503,_504){if(!_4fc){_4fc=["dojo/i18n"];}_504=(_504||dojo.locale).toLowerCase();_502=_4e0(_502)+"/nls/"+(/root/i.test(_504)?"":_504+"/")+_4e0(_503);if(_4e8(_502,_4fa).isXd){_4fc.push("dojo/i18n!"+_502);}},loadInit:function(f){f();}},hold={},p;try{for(p in _4fd){hold[p]=dojo[p];dojo[p]=_4fd[p];}_4f8.def.apply(null,args);}catch(e){_505("error",[_4df("failedDojoLoadInit"),e]);}finally{for(p in _4fd){dojo[p]=hold[p];}}if(_4fc){_4fb=_4fb.concat(_4fc);}if(_4fb.length){_4e4(_4fb.join(","),_4f6,_4f7);}else{_4f7();}});});},_506=function(text,_507,_508){var _509=/\(|\)/g,_50a=1,_50b;_509.lastIndex=_507;while((_50b=_509.exec(text))){if(_50b[0]==")"){_50a-=1;}else{_50a+=1;}if(_50a==0){break;}}if(_50a!=0){throw "unmatched paren around character "+_509.lastIndex+" in: "+text;}return [dojo.trim(text.substring(_508,_509.lastIndex))+";\n",_509.lastIndex];},_50c=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,_50d=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,_50e=/(^|\s)(require|define)\s*\(/m,_50f=function(text,_510){var _511,_512,_513,_514,_515=[],_516=[],_517=[];_510=_510||text.replace(_50c,function(_518){_50d.lastIndex=_50e.lastIndex=0;return (_50d.test(_518)||_50e.test(_518))?"":_518;});while((_511=_50d.exec(_510))){_512=_50d.lastIndex;_513=_512-_511[0].length;_514=_506(_510,_512,_513);if(_511[2]=="loadInit"){_515.push(_514[0]);}else{_516.push(_514[0]);}_50d.lastIndex=_514[1];}_517=_515.concat(_516);if(_517.length||!_50e.test(_510)){return [text.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),_517.join(""),_517];}else{return 0;}},_519=function(_51a,text){var _51b,id,_51c=[],_51d=[];if(_4e1.test(text)||!(_51b=_50f(text))){return 0;}id=_51a.mid+"-*loadInit";for(var p in _4e8("dojo",_51a).result.scopeMap){_51c.push(p);_51d.push("\""+p+"\"");}return "// xdomain rewrite of "+_51a.mid+"\n"+"define('"+id+"',{\n"+"\tnames:"+json.stringify(_51c)+",\n"+"\tdef:function("+_51c.join(",")+"){"+_51b[1]+"}"+"});\n\n"+"define("+json.stringify(_51c.concat(["dojo/loadInit!"+id]))+", function("+_51c.join(",")+"){\n"+_51b[0]+"});";},_51e=_4dc.initSyncLoader(_4e4,_4ea,_519),sync=_51e.sync,_4ed=_51e.requested,_51f=_51e.arrived,_520=_51e.nonmodule,_521=_51e.executing,_522=_51e.executed,_523=_51e.syncExecStack,_4ec=_51e.modules,_524=_51e.execQ,_4e8=_51e.getModule,_4e9=_51e.injectModule,_525=_51e.setArrived,_505=_51e.signal,_526=_51e.finishExec,_527=_51e.execModule,_528=_51e.getLegacyMode,_4ee=_51e.guardCheckComplete;_4e4=_51e.dojoRequirePlugin;dojo.provide=function(mid){var _529=_523[0],_52a=lang.mixin(_4e8(_4e0(mid),_4dc.module),{executed:_521,result:lang.getObject(mid,true)});_525(_52a);if(_529){(_529.provides||(_529.provides=[])).push(function(){_52a.result=lang.getObject(mid);delete _52a.provides;_52a.executed!==_522&&_526(_52a);});}return _52a.result;};has.add("config-publishRequireResult",1,0,0);dojo.require=function(_52b,_52c){function _52d(mid,_52e){var _52f=_4e8(_4e0(mid),_4dc.module);if(_523.length&&_523[0].finish){_523[0].finish.push(mid);return undefined;}if(_52f.executed){return _52f.result;}_52e&&(_52f.result=_520);var _530=_528();_4e9(_52f);_530=_528();if(_52f.executed!==_522&&_52f.injected===_51f){_51e.guardCheckComplete(function(){_527(_52f);});}if(_52f.executed){return _52f.result;}if(_530==sync){if(_52f.cjs){_524.unshift(_52f);}else{_523.length&&(_523[0].finish=[mid]);}}else{_524.push(_52f);}return undefined;};var _531=_52d(_52b,_52c);if(has("config-publishRequireResult")&&!lang.exists(_52b)&&_531!==undefined){lang.setObject(_52b,_531);}return _531;};dojo.loadInit=function(f){f();};dojo.registerModulePath=function(_532,_533){var _534={};_534[_532.replace(/\./g,"/")]=_533;_4dc({paths:_534});};dojo.platformRequire=function(_535){var _536=(_535.common||[]).concat(_535[dojo._name]||_535["default"]||[]),temp;while(_536.length){if(lang.isArray(temp=_536.shift())){dojo.require.apply(dojo,temp);}else{dojo.require(temp);}}};dojo.requireIf=dojo.requireAfterIf=function(_537,_538,_539){if(_537){dojo.require(_538,_539);}};dojo.requireLocalization=function(_53a,_53b,_53c){_4dc(["../i18n"],function(i18n){i18n.getLocalization(_53a,_53b,_53c);});};return {extractLegacyApiApplications:_50f,require:_4e4,loadInit:_4f5};});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_53d){return _53d;});},"dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_53e=function(){var n=null,_53f=arguments,uri=[_53f[0]];for(var i=1;i<_53f.length;i++){if(!_53f[i]){continue;}var _540=new _53e(_53f[i]+""),_541=new _53e(uri[0]+"");if(_540.path==""&&!_540.scheme&&!_540.authority&&!_540.query){if(_540.fragment!=n){_541.fragment=_540.fragment;}_540=_541;}else{if(!_540.scheme){_540.scheme=_541.scheme;if(!_540.authority){_540.authority=_541.authority;if(_540.path.charAt(0)!="/"){var path=_541.path.substring(0,_541.path.lastIndexOf("/")+1)+_540.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_540.path=segs.join("/");}}}}uri=[];if(_540.scheme){uri.push(_540.scheme,":");}if(_540.authority){uri.push("//",_540.authority);}uri.push(_540.path);if(_540.query){uri.push("?",_540.query);}if(_540.fragment){uri.push("#",_540.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_53e.prototype.toString=function(){return this.uri;};return dojo._Url=_53e;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(dojo,_542,has,_543){var _544;if(1){_544=function(url,sync,load){_543(url,{sync:!!sync,headers:{"X-Requested-With":null}}).then(load);};}else{if(_542.getText){_544=_542.getText;}else{console.error("dojo/text plugin failed to load because loader does not support getText");}}var _545={},_546=function(text){if(text){text=text.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _547=text.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_547){text=_547[1];}}else{text="";}return text;},_548={},_549={};dojo.cache=function(_54a,url,_54b){var key;if(typeof _54a=="string"){if(/\//.test(_54a)){key=_54a;_54b=url;}else{key=_542.toUrl(_54a.replace(/\./g,"/")+(url?("/"+url):""));}}else{key=_54a+"";_54b=url;}var val=(_54b!=undefined&&typeof _54b!="string")?_54b.value:_54b,_54c=_54b&&_54b.sanitize;if(typeof val=="string"){_545[key]=val;return _54c?_546(val):val;}else{if(val===null){delete _545[key];return null;}else{if(!(key in _545)){_544(key,true,function(text){_545[key]=text;});}return _54c?_546(_545[key]):_545[key];}}};return {dynamic:true,normalize:function(id,_54d){var _54e=id.split("!"),url=_54e[0];return (/^\./.test(url)?_54d(url):url)+(_54e[1]?"!"+_54e[1]:"");},load:function(id,_54f,load){var _550=id.split("!"),_551=_550.length>1,_552=_550[0],url=_54f.toUrl(_550[0]),_553="url:"+url,text=_548,_554=function(text){load(_551?_546(text):text);};if(_552 in _545){text=_545[_552];}else{if(_54f.cache&&_553 in _54f.cache){text=_54f.cache[_553];}else{if(url in _545){text=_545[url];}}}if(text===_548){if(_549[url]){_549[url].push(_554);}else{var _555=_549[url]=[_554];_544(url,!_54f.async,function(text){_545[_552]=_545[url]=text;for(var i=0;i<_555.length;){_555[i++](text);}delete _549[url];});}}else{_554(text);}}};});},"dojo/request":function(){define(["./request/default!"],function(_556){return _556;});},"dojo/request/default":function(){define(["exports","require","../has"],function(_557,_558,has){var _559=has("config-requestProvider"),_55a;if(1||has("host-webworker")){_55a="./xhr";}else{if(0){_55a="./node";}}if(!_559){_559=_55a;}_557.getPlatformDefaultId=function(){return _55a;};_557.load=function(id,_55b,_55c,_55d){_558([id=="platform"?_55a:_559],function(_55e){_55c(_55e);});};});},"dojo/cldr/monetary":function(){define(["../_base/kernel","../_base/lang"],function(dojo,lang){var _55f={};lang.setObject("dojo.cldr.monetary",_55f);_55f.getData=function(code){var _560={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:0,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};var _561={};var _562=_560[code],_563=_561[code];if(typeof _562=="undefined"){_562=2;}if(typeof _563=="undefined"){_563=0;}return {places:_562,round:_563};};return _55f;});},"dojo/cldr/nls/currency":function(){define({root:{"USD_symbol":"US$","CAD_symbol":"CA$","GBP_symbol":"£","HKD_symbol":"HK$","JPY_symbol":"JP¥","AUD_symbol":"A$","CNY_symbol":"CN¥","EUR_symbol":"€"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-ca":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true,"zh-tw":true});},"dojo/cldr/nls/en/currency":function(){define({"HKD_displayName":"Hong Kong Dollar","CHF_displayName":"Swiss Franc","JPY_symbol":"¥","CAD_displayName":"Canadian Dollar","CNY_displayName":"Chinese Yuan","USD_symbol":"$","AUD_displayName":"Australian Dollar","JPY_displayName":"Japanese Yen","USD_displayName":"US Dollar","GBP_displayName":"British Pound Sterling","EUR_displayName":"Euro"});},"dojo/cldr/nls/gregorian":function(){define({root:{"dateFormatItem-Ehm":"E h:mm a","days-standAlone-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E","eraNarrow":["BCE","CE"],"field-tue-relative+-1":"last Tuesday","days-format-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"y-MM-dd","field-era":"Era","dateFormatItem-yM":"y-MM","months-standAlone-wide":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L","days-standAlone-wide":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayPeriods-format-abbr-noon":"noon","timeFormat-medium":"HH:mm:ss","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraAbbr":["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"yesterday","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-h":"h a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"field-zone":"Zone","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-y":"y","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateTimeFormats-appendItem-Year":"{1} {0}","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"eraNames":["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":["S","M","T","W","T","F","S"],"field-month":"Month","days-standAlone-narrow":["S","M","T","W","T","F","S"],"dateFormatItem-MMM":"LLL","field-tue-relative+0":"this Tuesday","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"y-MM-dd","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday","dateFormatItem-yMMMEd":"y MMM d, E","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateFormatItem-Ed":"d, E","field-week":"Week","dateFormat-medium":"y MMM d","field-week-relative+-1":"last week","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-GyMMM":"G y MMM","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-ca":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true,"zh-tw":true});},"dojo/cldr/nls/en/gregorian":function(){define({"dateFormatItem-Ehm":"E h:mm a","days-standAlone-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"E, M/d/y","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"E, MMM d, y G","dateFormatItem-MMMEd":"E, MMM d","eraNarrow":["B","A","AD","CE"],"field-tue-relative+-1":"last Tuesday","days-format-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"MMMM d, y","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"dateTimeFormat-medium":"{1}, {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, MMMM d, y","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"M/d","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"M/d/y","field-era":"Era","dateFormatItem-yM":"M/y","months-standAlone-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"timeFormat-short":"h:mm a","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-yQQQQ":"QQQQ y","timeFormat-long":"h:mm:ss a z","field-year":"Year","dateFormatItem-yMMM":"MMM y","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"h:mm:ss a zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"MMM d, y G","dateFormatItem-H":"HH","months-standAlone-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-Gy":"y G","dateFormatItem-M":"L","days-standAlone-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"timeFormat-medium":"h:mm:ss a","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","eraAbbr":["BC","BCE","AD","CE"],"field-minute":"Minute","field-dayperiod":"AM/PM","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","field-day-relative+-1":"yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} 'at' {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M/d","dateTimeFormat-full":"{1} 'at' {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"field-zone":"Time Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateFormatItem-yMMMd":"MMM d, y","eraNames":["Before Christ","Before Common Era","Anno Domini","Common Era"],"days-standAlone-narrow":["S","M","T","W","T","F","S"],"dateFormatItem-MMM":"LLL","field-month":"Month","field-tue-relative+0":"this Tuesday","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"M/d/yy","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday","dateFormatItem-yMMMEd":"E, MMM d, y","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateFormatItem-Ed":"d E","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"MMM d, y","field-year-relative+0":"this year","field-week-relative+-1":"last week","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1}, {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-GyMMM":"MMM y G","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"});},"dojo/cldr/nls/number":function(){define({root:{"scientificFormat":"#E0","currencySpacing-afterCurrency-currencyMatch":"[:^S:]","infinity":"∞","superscriptingExponent":"×","list":";","percentSign":"%","minusSign":"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":" ","nan":"NaN","plusSign":"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]","currencyFormat":"¤ #,##0.00","perMille":"‰","group":",","percentFormat":"#,##0%","decimalFormat-long":"000T","decimalFormat":"#,##0.###","decimal":".","currencySpacing-beforeCurrency-insertBetween":" ","exponential":"E"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true,"zh-tw":true});},"dojo/cldr/nls/en/number":function(){define({"group":",","percentSign":"%","exponential":"E","scientificFormat":"#E0","percentFormat":"#,##0%","list":";","infinity":"∞","minusSign":"-","decimal":".","superscriptingExponent":"×","nan":"NaN","perMille":"‰","decimalFormat":"#,##0.###","currencyFormat":"¤#,##0.00;(¤#,##0.00)","plusSign":"+","decimalFormat-long":"000 trillion","decimalFormat-short":"000T"});},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(lang,i18n){var _564={};lang.setObject("dojo.cldr.supplemental",_564);_564.getFirstDayOfWeek=function(_565){var _566={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};var _567=_564._region(_565);var dow=_566[_567];return (dow===undefined)?1:dow;};_564._region=function(_568){_568=i18n.normalizeLocale(_568);var tags=_568.split("-");var _569=tags[1];if(!_569){_569={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[tags[0]];}else{if(_569.length==4){_569=tags[2];}}return _569;};_564.getWeekend=function(_56a){var _56b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_56c={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_56d=_564._region(_56a),_56e=_56b[_56d],end=_56c[_56d];if(_56e===undefined){_56e=6;}if(end===undefined){end=0;}return {start:_56e,end:end};};return _564;});},"dojo/i18n":function(){define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr","./json","module"],function(dojo,_56f,has,_570,_571,lang,xhr,json,_572){has.add("dojo-preload-i18n-Api",1);1||has.add("dojo-v1x-i18n-Api",1);var _573=dojo.i18n={},_574=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,_575=function(root,_576,_577,_578){for(var _579=[_577+_578],_57a=_576.split("-"),_57b="",i=0;i<_57a.length;i++){_57b+=(_57b?"-":"")+_57a[i];if(!root||root[_57b]){_579.push(_577+_57b+"/"+_578);_579.specificity=_57b;}}return _579;},_57c={},_57d=function(_57e,_57f,_580){_580=_580?_580.toLowerCase():dojo.locale;_57e=_57e.replace(/\./g,"/");_57f=_57f.replace(/\./g,"/");return (/root/i.test(_580))?(_57e+"/nls/"+_57f):(_57e+"/nls/"+_580+"/"+_57f);},_581=dojo.getL10nName=function(_582,_583,_584){return _582=_572.id+"!"+_57d(_582,_583,_584);},_585=function(_586,_587,_588,_589,_58a,load){_586([_587],function(root){var _58b=lang.clone(root.root||root.ROOT),_58c=_575(!root._v1x&&root,_58a,_588,_589);_586(_58c,function(){for(var i=1;i<_58c.length;i++){_58b=lang.mixin(lang.clone(_58b),arguments[i]);}var _58d=_587+"/"+_58a;_57c[_58d]=_58b;_58b.$locale=_58c.specificity;load();});});},_58e=function(id,_58f){return /^\./.test(id)?_58f(id):id;},_590=function(_591){var list=_571.extraLocale||[];list=lang.isArray(list)?list:[list];list.push(_591);return list;},load=function(id,_592,load){if(has("dojo-preload-i18n-Api")){var _593=id.split("*"),_594=_593[1]=="preload";if(_594){if(!_57c[id]){_57c[id]=1;_595(_593[2],json.parse(_593[3]),1,_592);}load(1);}if(_594||_596(id,_592,load)){return;}}var _597=_574.exec(id),_598=_597[1]+"/",_599=_597[5]||_597[4],_59a=_598+_599,_59b=(_597[5]&&_597[4]),_59c=_59b||dojo.locale||"",_59d=_59a+"/"+_59c,_59e=_59b?[_59c]:_590(_59c),_59f=_59e.length,_5a0=function(){if(!--_59f){load(lang.delegate(_57c[_59d]));}};_570.forEach(_59e,function(_5a1){var _5a2=_59a+"/"+_5a1;if(has("dojo-preload-i18n-Api")){_5a3(_5a2);}if(!_57c[_5a2]){_585(_592,_59a,_598,_599,_5a1,_5a0);}else{_5a0();}});};if(has("dojo-unit-tests")){var _5a4=_573.unitTests=[];}if(has("dojo-preload-i18n-Api")||1){var _5a5=_573.normalizeLocale=function(_5a6){var _5a7=_5a6?_5a6.toLowerCase():dojo.locale;return _5a7=="root"?"ROOT":_5a7;},isXd=function(mid,_5a8){return (1&&1)?_5a8.isXdUrl(_56f.toUrl(mid+".js")):true;},_5a9=0,_5aa=[],_595=_573._preloadLocalizations=function(_5ab,_5ac,_5ad,_5ae){_5ae=_5ae||_56f;function _5af(mid,_5b0){if(isXd(mid,_5ae)||_5ad){_5ae([mid],_5b0);}else{_5ca([mid],_5b0,_5ae);}};function _5b1(_5b2,func){var _5b3=_5b2.split("-");while(_5b3.length){if(func(_5b3.join("-"))){return;}_5b3.pop();}func("ROOT");};function _5b4(){_5a9++;};function _5b5(){--_5a9;while(!_5a9&&_5aa.length){load.apply(null,_5aa.shift());}};function _5b6(path,name,loc,_5b7){return _5b7.toAbsMid(path+name+"/"+loc);};function _5b8(_5b9){_5b9=_5a5(_5b9);_5b1(_5b9,function(loc){if(_570.indexOf(_5ac,loc)>=0){var mid=_5ab.replace(/\./g,"/")+"_"+loc;_5b4();_5af(mid,function(_5ba){for(var p in _5ba){var _5bb=_5ba[p],_5bc=p.match(/(.+)\/([^\/]+)$/),_5bd,_5be;if(!_5bc){continue;}_5bd=_5bc[2];_5be=_5bc[1]+"/";_5bb._localized=_5bb._localized||{};var _5bf;if(loc==="ROOT"){var root=_5bf=_5bb._localized;delete _5bb._localized;root.root=_5bb;_57c[_56f.toAbsMid(p)]=root;}else{_5bf=_5bb._localized;_57c[_5b6(_5be,_5bd,loc,_56f)]=_5bb;}if(loc!==_5b9){function _5c0(_5c1,_5c2,_5c3,_5c4){var _5c5=[],_5c6=[];_5b1(_5b9,function(loc){if(_5c4[loc]){_5c5.push(_56f.toAbsMid(_5c1+loc+"/"+_5c2));_5c6.push(_5b6(_5c1,_5c2,loc,_56f));}});if(_5c5.length){_5b4();_5ae(_5c5,function(){for(var i=0;i<_5c5.length;i++){_5c3=lang.mixin(lang.clone(_5c3),arguments[i]);_57c[_5c6[i]]=_5c3;}_57c[_5b6(_5c1,_5c2,_5b9,_56f)]=lang.clone(_5c3);_5b5();});}else{_57c[_5b6(_5c1,_5c2,_5b9,_56f)]=_5c3;}};_5c0(_5be,_5bd,_5bb,_5bf);}}_5b5();});return true;}return false;});};_5b8();_570.forEach(dojo.config.extraLocale,_5b8);},_596=function(id,_5c7,load){if(_5a9){_5aa.push([id,_5c7,load]);}return _5a9;},_5a3=function(){};}if(1){var _5c8={},_5c9=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},"+"\t   require = function(){define.called = 1;};"+"try{"+"define.called = 0;"+"eval(__bundle);"+"if(define.called==1)"+"return __amdValue;"+"if((__checkForLegacyModules = __checkForLegacyModules(__mid)))"+"return __checkForLegacyModules;"+"}catch(e){}"+"try{"+"return eval('('+__bundle+')');"+"}catch(e){"+"return e;"+"}"),_5ca=function(deps,_5cb,_5cc){var _5cd=[];_570.forEach(deps,function(mid){var url=_5cc.toUrl(mid+".js");function load(text){var _5ce=_5c9(text,_5a3,mid,_5c8);if(_5ce===_5c8){_5cd.push(_57c[url]=_5c8.result);}else{if(_5ce instanceof Error){console.error("failed to evaluate i18n bundle; url="+url,_5ce);_5ce={};}_5cd.push(_57c[url]=(/nls\/[^\/]+\/[^\/]+$/.test(url)?_5ce:{root:_5ce,_v1x:1}));}};if(_57c[url]){_5cd.push(_57c[url]);}else{var _5cf=_5cc.syncLoadNls(mid);if(_5cf){_5cd.push(_5cf);}else{if(!xhr){try{_5cc.getText(url,true,load);}catch(e){_5cd.push(_57c[url]={});}}else{xhr.get({url:url,sync:true,load:load,error:function(){_5cd.push(_57c[url]={});}});}}}});_5cb&&_5cb.apply(null,_5cd);};_5a3=function(_5d0){for(var _5d1,_5d2=_5d0.split("/"),_5d3=dojo.global[_5d2[0]],i=1;_5d3&&i<_5d2.length-1;_5d3=_5d3[_5d2[i++]]){}if(_5d3){_5d1=_5d3[_5d2[i]];if(!_5d1){_5d1=_5d3[_5d2[i].replace(/-/g,"_")];}if(_5d1){_57c[_5d0]=_5d1;}}return _5d1;};_573.getLocalization=function(_5d4,_5d5,_5d6){var _5d7,_5d8=_57d(_5d4,_5d5,_5d6);load(_5d8,(!isXd(_5d8,_56f)?function(deps,_5d9){_5ca(deps,_5d9,_56f);}:_56f),function(_5da){_5d7=_5da;});return _5d7;};if(has("dojo-unit-tests")){_5a4.push(function(doh){doh.register("tests.i18n.unit",function(t){var _5db;_5db=_5c9("{prop:1}",_5a3,"nonsense",_5c8);t.is({prop:1},_5db);t.is(undefined,_5db[1]);_5db=_5c9("({prop:1})",_5a3,"nonsense",_5c8);t.is({prop:1},_5db);t.is(undefined,_5db[1]);_5db=_5c9("{'prop-x':1}",_5a3,"nonsense",_5c8);t.is({"prop-x":1},_5db);t.is(undefined,_5db[1]);_5db=_5c9("({'prop-x':1})",_5a3,"nonsense",_5c8);t.is({"prop-x":1},_5db);t.is(undefined,_5db[1]);_5db=_5c9("define({'prop-x':1})",_5a3,"nonsense",_5c8);t.is(_5c8,_5db);t.is({"prop-x":1},_5c8.result);_5db=_5c9("define('some/module', {'prop-x':1})",_5a3,"nonsense",_5c8);t.is(_5c8,_5db);t.is({"prop-x":1},_5c8.result);_5db=_5c9("this is total nonsense and should throw an error",_5a3,"nonsense",_5c8);t.is(_5db instanceof Error,true);});});}}return lang.mixin(_573,{dynamic:true,normalize:_58e,load:load,cache:_57c,getL10nName:_581});});},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(dojo,_5dc){dojo.cookie=function(name,_5dd,_5de){var c=document.cookie,ret;if(arguments.length==1){var _5df=c.match(new RegExp("(?:^|; )"+_5dc.escapeString(name)+"=([^;]*)"));ret=_5df?decodeURIComponent(_5df[1]):undefined;}else{_5de=_5de||{};var exp=_5de.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_5de.expires=d;}if(exp&&exp.toUTCString){_5de.expires=exp.toUTCString();}_5dd=encodeURIComponent(_5dd);var _5e0=name+"="+_5dd,_5e1;for(_5e1 in _5de){_5e0+="; "+_5e1;var _5e2=_5de[_5e1];if(_5e2!==true){_5e0+="="+_5e2;}}document.cookie=_5e0;}return ret;};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};return dojo.cookie;});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var _5e3={};lang.setObject("dojo.regexp",_5e3);_5e3.escapeString=function(str,_5e4){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(ch){if(_5e4&&_5e4.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_5e3.buildGroupRE=function(arr,re,_5e5){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _5e3.group(b.join("|"),_5e5);};_5e3.group=function(_5e6,_5e7){return "("+(_5e7?"?:":"")+_5e6+")";};return _5e3;});},"dojo/currency":function(){define(["./_base/array","./_base/lang","./number","./i18n","./i18n!./cldr/nls/currency","./cldr/monetary"],function(_5e8,lang,_5e9,i18n,_5ea,_5eb){var _5ec={};lang.setObject("dojo.currency",_5ec);_5ec._mixInDefaults=function(_5ed){_5ed=_5ed||{};_5ed.type="currency";var _5ee=i18n.getLocalization("dojo.cldr","currency",_5ed.locale)||{};var iso=_5ed.currency;var data=_5eb.getData(iso);_5e8.forEach(["displayName","symbol","group","decimal"],function(prop){data[prop]=_5ee[iso+"_"+prop];});data.fractional=[true,false];return lang.mixin(data,_5ed);};_5ec.format=function(_5ef,_5f0){return _5e9.format(_5ef,_5ec._mixInDefaults(_5f0));};_5ec.regexp=function(_5f1){return _5e9.regexp(_5ec._mixInDefaults(_5f1));};_5ec.parse=function(_5f2,_5f3){return _5e9.parse(_5f2,_5ec._mixInDefaults(_5f3));};return _5ec;});},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,_5f4,_5f5,_5f6){var _5f7={};lang.setObject("dojo.number",_5f7);_5f7.format=function(_5f8,_5f9){_5f9=lang.mixin({},_5f9||{});var _5fa=i18n.normalizeLocale(_5f9.locale),_5fb=i18n.getLocalization("dojo.cldr","number",_5fa);_5f9.customs=_5fb;var _5fc=_5f9.pattern||_5fb[(_5f9.type||"decimal")+"Format"];if(isNaN(_5f8)||Math.abs(_5f8)==Infinity){return null;}return _5f7._applyPattern(_5f8,_5fc,_5f9);};_5f7._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_5f7._applyPattern=function(_5fd,_5fe,_5ff){_5ff=_5ff||{};var _600=_5ff.customs.group,_601=_5ff.customs.decimal,_602=_5fe.split(";"),_603=_602[0];_5fe=_602[(_5fd<0)?1:0]||("-"+_603);if(_5fe.indexOf("%")!=-1){_5fd*=100;}else{if(_5fe.indexOf("‰")!=-1){_5fd*=1000;}else{if(_5fe.indexOf("¤")!=-1){_600=_5ff.customs.currencyGroup||_600;_601=_5ff.customs.currencyDecimal||_601;_5fe=_5fe.replace(/\u00a4{1,3}/,function(_604){var prop=["symbol","currency","displayName"][_604.length-1];return _5ff[prop]||_5ff.currency||"";});}else{if(_5fe.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _605=_5f7._numberPatternRE;var _606=_603.match(_605);if(!_606){throw new Error("unable to find a number expression in pattern: "+_5fe);}if(_5ff.fractional===false){_5ff.places=0;}return _5fe.replace(_605,_5f7._formatAbsolute(_5fd,_606[0],{decimal:_601,group:_600,places:_5ff.places,round:_5ff.round}));};_5f7.round=function(_607,_608,_609){var _60a=10/(_609||10);return (_60a*+_607).toFixed(_608)/_60a;};if((0.9).toFixed()==0){var _60b=_5f7.round;_5f7.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d){d=0;}else{a/=d;if(a<0.5||a>=0.95){d=0;}}return _60b(v,p,m)+(v>0?d:-d);};}_5f7._formatAbsolute=function(_60c,_60d,_60e){_60e=_60e||{};if(_60e.places===true){_60e.places=0;}if(_60e.places===Infinity){_60e.places=6;}var _60f=_60d.split("."),_610=typeof _60e.places=="string"&&_60e.places.indexOf(","),_611=_60e.places;if(_610){_611=_60e.places.substring(_610+1);}else{if(!(_611>=0)){_611=(_60f[1]||[]).length;}}if(!(_60e.round<0)){_60c=_5f7.round(_60c,_611,_60e.round);}var _612=String(Math.abs(_60c)).split("."),_613=_612[1]||"";if(_60f[1]||_60e.places){if(_610){_60e.places=_60e.places.substring(0,_610);}var pad=_60e.places!==undefined?_60e.places:(_60f[1]&&_60f[1].lastIndexOf("0")+1);if(pad>_613.length){_612[1]=_5f5.pad(_613,pad,"0",true);}if(_611<_613.length){_612[1]=_613.substr(0,_611);}}else{if(_612[1]){_612.pop();}}var _614=_60f[0].replace(",","");pad=_614.indexOf("0");if(pad!=-1){pad=_614.length-pad;if(pad>_612[0].length){_612[0]=_5f5.pad(_612[0],pad);}if(_614.indexOf("#")==-1){_612[0]=_612[0].substr(_612[0].length-pad);}}var _615=_60f[0].lastIndexOf(","),_616,_617;if(_615!=-1){_616=_60f[0].length-_615-1;var _618=_60f[0].substr(0,_615);_615=_618.lastIndexOf(",");if(_615!=-1){_617=_618.length-_615-1;}}var _619=[];for(var _61a=_612[0];_61a;){var off=_61a.length-_616;_619.push((off>0)?_61a.substr(off):_61a);_61a=(off>0)?_61a.slice(0,off):"";if(_617){_616=_617;delete _617;}}_612[0]=_619.reverse().join(_60e.group||",");return _612.join(_60e.decimal||".");};_5f7.regexp=function(_61b){return _5f7._parseInfo(_61b).regexp;};_5f7._parseInfo=function(_61c){_61c=_61c||{};var _61d=i18n.normalizeLocale(_61c.locale),_61e=i18n.getLocalization("dojo.cldr","number",_61d),_61f=_61c.pattern||_61e[(_61c.type||"decimal")+"Format"],_620=_61e.group,_621=_61e.decimal,_622=1;if(_61f.indexOf("%")!=-1){_622/=100;}else{if(_61f.indexOf("‰")!=-1){_622/=1000;}else{var _623=_61f.indexOf("¤")!=-1;if(_623){_620=_61e.currencyGroup||_620;_621=_61e.currencyDecimal||_621;}}}var _624=_61f.split(";");if(_624.length==1){_624.push("-"+_624[0]);}var re=_5f6.buildGroupRE(_624,function(_625){_625="(?:"+_5f6.escapeString(_625,".")+")";return _625.replace(_5f7._numberPatternRE,function(_626){var _627={signed:false,separator:_61c.strict?_620:[_620,""],fractional:_61c.fractional,decimal:_621,exponent:false},_628=_626.split("."),_629=_61c.places;if(_628.length==1&&_622!=1){_628[1]="###";}if(_628.length==1||_629===0){_627.fractional=false;}else{if(_629===undefined){_629=_61c.pattern?_628[1].lastIndexOf("0")+1:Infinity;}if(_629&&_61c.fractional==undefined){_627.fractional=true;}if(!_61c.places&&(_629<_628[1].length)){_629+=","+_628[1].length;}_627.places=_629;}var _62a=_628[0].split(",");if(_62a.length>1){_627.groupSize=_62a.pop().length;if(_62a.length>1){_627.groupSize2=_62a.pop().length;}}return "("+_5f7._realNumberRegexp(_627)+")";});},true);if(_623){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_62b,_62c,_62d,_62e){var prop=["symbol","currency","displayName"][_62d.length-1],_62f=_5f6.escapeString(_61c[prop]||_61c.currency||"");_62c=_62c?"[\\s\\xa0]":"";_62e=_62e?"[\\s\\xa0]":"";if(!_61c.strict){if(_62c){_62c+="*";}if(_62e){_62e+="*";}return "(?:"+_62c+_62f+_62e+")?";}return _62c+_62f+_62e;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_620,decimal:_621,factor:_622};};_5f7.parse=function(_630,_631){var info=_5f7._parseInfo(_631),_632=(new RegExp("^"+info.regexp+"$")).exec(_630);if(!_632){return NaN;}var _633=_632[1];if(!_632[1]){if(!_632[2]){return NaN;}_633=_632[2];info.factor*=-1;}_633=_633.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _633*info.factor;};_5f7._realNumberRegexp=function(_634){_634=_634||{};if(!("places" in _634)){_634.places=Infinity;}if(typeof _634.decimal!="string"){_634.decimal=".";}if(!("fractional" in _634)||/^0/.test(_634.places)){_634.fractional=[true,false];}if(!("exponent" in _634)){_634.exponent=[true,false];}if(!("eSigned" in _634)){_634.eSigned=[true,false];}var _635=_5f7._integerRegexp(_634),_636=_5f6.buildGroupRE(_634.fractional,function(q){var re="";if(q&&(_634.places!==0)){re="\\"+_634.decimal;if(_634.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_634.places+"}";}}return re;},true);var _637=_5f6.buildGroupRE(_634.exponent,function(q){if(q){return "([eE]"+_5f7._integerRegexp({signed:_634.eSigned})+")";}return "";});var _638=_635+_636;if(_636){_638="(?:(?:"+_638+")|(?:"+_636+"))";}return _638+_637;};_5f7._integerRegexp=function(_639){_639=_639||{};if(!("signed" in _639)){_639.signed=[true,false];}if(!("separator" in _639)){_639.separator="";}else{if(!("groupSize" in _639)){_639.groupSize=3;}}var _63a=_5f6.buildGroupRE(_639.signed,function(q){return q?"[-+]":"";},true);var _63b=_5f6.buildGroupRE(_639.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_5f6.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_639.groupSize,grp2=_639.groupSize2;if(grp2){var _63c="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_63c+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_63c;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _63a+_63b;};return _5f7;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_63d,lang){var _63e=/[&<>'"\/]/g;var _63f={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#x27;","/":"&#x2F;"};var _640={};lang.setObject("dojo.string",_640);_640.escape=function(str){if(!str){return "";}return str.replace(_63e,function(c){return _63f[c];});};_640.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_640.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_640.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_640.substitute=function(_641,map,_642,_643){_643=_643||_63d.global;_642=_642?lang.hitch(_643,_642):function(v){return v;};return _641.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_644,key,_645){var _646=lang.getObject(key,false,map);if(_645){_646=lang.getObject(_645,false,_643).call(_643,_646,key);}return _642(_646,key).toString();});};_640.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _640;});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _647={};lang.setObject("dojo.data.util.filter",_647);_647.patternToRegExp=function(_648,_649){var rxp="^";var c=null;for(var i=0;i<_648.length;i++){c=_648.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_648.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_649){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _647;});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_64a,_64b){var _64c={};lang.setObject("dojo.data.util.simpleFetch",_64c);_64c.errorHandler=function(_64d,_64e){if(_64e.onError){var _64f=_64e.scope||_64a.global;_64e.onError.call(_64f,_64d,_64e);}};_64c.fetchHandler=function(_650,_651){var _652=_651.abort||null,_653=false,_654=_651.start?_651.start:0,_655=(_651.count&&(_651.count!==Infinity))?(_654+_651.count):_650.length;_651.abort=function(){_653=true;if(_652){_652.call(_651);}};var _656=_651.scope||_64a.global;if(!_651.store){_651.store=this;}if(_651.onBegin){_651.onBegin.call(_656,_650.length,_651);}if(_651.sort){_650.sort(_64b.createSortFunction(_651.sort,this));}if(_651.onItem){for(var i=_654;(i<_650.length)&&(i<_655);++i){var item=_650[i];if(!_653){_651.onItem.call(_656,item,_651);}}}if(_651.onComplete&&!_653){var _657=null;if(!_651.onItem){_657=_650.slice(_654,_655);}_651.onComplete.call(_656,_657,_651);}};_64c.fetch=function(_658){_658=_658||{};if(!_658.store){_658.store=this;}this._fetchItems(_658,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _658;};return _64c;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _659={};lang.setObject("dojo.data.util.sorter",_659);_659.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_659.createSortFunction=function(_65a,_65b){var _65c=[];function _65d(attr,dir,comp,s){return function(_65e,_65f){var a=s.getValue(_65e,attr);var b=s.getValue(_65f,attr);return dir*comp(a,b);};};var _660;var map=_65b.comparatorMap;var bc=_659.basicComparator;for(var i=0;i<_65a.length;i++){_660=_65a[i];var attr=_660.attribute;if(attr){var dir=(_660.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_65c.push(_65d(attr,dir,comp,_65b));}}return function(rowA,rowB){var i=0;while(i<_65c.length){var ret=_65c[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _659;});},"dojo/date":function(){define(["./has","./_base/lang"],function(has,lang){var date={};date.getDaysInMonth=function(_661){var _662=_661.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_662==1&&date.isLeapYear(_661)){return 29;}return days[_662];};date.isLeapYear=function(_663){var year=_663.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};date.getTimezoneName=function(_664){var str=_664.toString();var tz="";var _665;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_665=str.match(pat))){tz=_665[1];}else{str=_664.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_665=str.match(pat))){tz=_665[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};date.compare=function(_666,_667,_668){_666=new Date(+_666);_667=new Date(+(_667||new Date()));if(_668=="date"){_666.setHours(0,0,0,0);_667.setHours(0,0,0,0);}else{if(_668=="time"){_666.setFullYear(0,0,0);_667.setFullYear(0,0,0);}}if(_666>_667){return 1;}if(_666<_667){return -1;}return 0;};date.add=function(date,_669,_66a){var sum=new Date(+date);var _66b=false;var _66c="Date";switch(_669){case "day":break;case "weekday":var days,_66d;var mod=_66a%5;if(!mod){days=(_66a>0)?5:-5;_66d=(_66a>0)?((_66a-5)/5):((_66a+5)/5);}else{days=mod;_66d=parseInt(_66a/5);}var strt=date.getDay();var adj=0;if(strt==6&&_66a>0){adj=1;}else{if(strt==0&&_66a<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_66a>0)?2:-2;}_66a=(7*_66d)+days+adj;break;case "year":_66c="FullYear";_66b=true;break;case "week":_66a*=7;break;case "quarter":_66a*=3;case "month":_66b=true;_66c="Month";break;default:_66c="UTC"+_669.charAt(0).toUpperCase()+_669.substring(1)+"s";}if(_66c){sum["set"+_66c](sum["get"+_66c]()+_66a);}if(_66b&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};date.difference=function(_66e,_66f,_670){_66f=_66f||new Date();_670=_670||"day";var _671=_66f.getFullYear()-_66e.getFullYear();var _672=1;switch(_670){case "quarter":var m1=_66e.getMonth();var m2=_66f.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_671*4);_672=q2-q1;break;case "weekday":var days=Math.round(date.difference(_66e,_66f,"day"));var _673=parseInt(date.difference(_66e,_66f,"week"));var mod=days%7;if(mod==0){days=_673*5;}else{var adj=0;var aDay=_66e.getDay();var bDay=_66f.getDay();_673=parseInt(days/7);mod=days%7;var _674=new Date(_66e);_674.setDate(_674.getDate()+(_673*7));var _675=_674.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_675+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_675+mod)<0:adj=2;}}}days+=adj;days-=(_673*2);}_672=days;break;case "year":_672=_671;break;case "month":_672=(_66f.getMonth()-_66e.getMonth())+(_671*12);break;case "week":_672=parseInt(date.difference(_66e,_66f,"day")/7);break;case "day":_672/=24;case "hour":_672/=60;case "minute":_672/=60;case "second":_672/=1000;case "millisecond":_672*=_66f.getTime()-_66e.getTime();}return Math.round(_672);};1&&lang.mixin(lang.getObject("dojo.date",true),date);return date;});},"dojo/date/locale":function(){define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,_676,date,_677,i18n,_678,_679,_67a,_67b){var _67c={};lang.setObject(_67b.id.replace(/\//g,"."),_67c);function _67d(_67e,_67f,_680,_681){return _681.replace(/([a-z])\1*/ig,function(_682){var s,pad,c=_682.charAt(0),l=_682.length,_683=["abbr","wide","narrow"];switch(c){case "G":s=_67f[(l<4)?"eraAbbr":"eraNames"][_67e.getFullYear()<0?0:1];break;case "y":s=_67e.getFullYear();switch(l){case 1:break;case 2:if(!_680.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_67e.getMonth()+1)/3);pad=true;break;case "M":case "L":var m=_67e.getMonth();if(l<3){s=m+1;pad=true;}else{var _684=["months",c=="L"?"standAlone":"format",_683[l-3]].join("-");s=_67f[_684][m];}break;case "w":var _685=0;s=_67c._getWeekOfYear(_67e,_685);pad=true;break;case "d":s=_67e.getDate();pad=true;break;case "D":s=_67c._getDayOfYear(_67e);pad=true;break;case "e":case "c":var d=_67e.getDay();if(l<2){s=(d-_677.getFirstDayOfWeek(_680.locale)+8)%7;break;}case "E":d=_67e.getDay();if(l<3){s=d+1;pad=true;}else{var _686=["days",c=="c"?"standAlone":"format",_683[l-3]].join("-");s=_67f[_686][d];}break;case "a":var _687=_67e.getHours()<12?"am":"pm";s=_680[_687]||_67f["dayPeriods-format-wide-"+_687];break;case "h":case "H":case "K":case "k":var h=_67e.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_67e.getMinutes();pad=true;break;case "s":s=_67e.getSeconds();pad=true;break;case "S":s=Math.round(_67e.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_67c._getZone(_67e,true,_680);if(s){break;}l=4;case "Z":var _688=_67c._getZone(_67e,false,_680);var tz=[(_688<=0?"+":"-"),_679.pad(Math.floor(Math.abs(_688)/60),2),_679.pad(Math.abs(_688)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_681);}if(pad){s=_679.pad(s,l);}return s;});};_67c._getZone=function(_689,_68a,_68b){if(_68a){return date.getTimezoneName(_689);}else{return _689.getTimezoneOffset();}};_67c.format=function(_68c,_68d){_68d=_68d||{};var _68e=i18n.normalizeLocale(_68d.locale),_68f=_68d.formatLength||"short",_690=_67c._getGregorianBundle(_68e),str=[],_691=lang.hitch(this,_67d,_68c,_690,_68d);if(_68d.selector=="year"){return _692(_690["dateFormatItem-yyyy"]||"yyyy",_691);}var _693;if(_68d.selector!="date"){_693=_68d.timePattern||_690["timeFormat-"+_68f];if(_693){str.push(_692(_693,_691));}}if(_68d.selector!="time"){_693=_68d.datePattern||_690["dateFormat-"+_68f];if(_693){str.push(_692(_693,_691));}}return str.length==1?str[0]:_690["dateTimeFormat-"+_68f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(_694,key){return str[key];});};_67c.regexp=function(_695){return _67c._parseInfo(_695).regexp;};_67c._parseInfo=function(_696){_696=_696||{};var _697=i18n.normalizeLocale(_696.locale),_698=_67c._getGregorianBundle(_697),_699=_696.formatLength||"short",_69a=_696.datePattern||_698["dateFormat-"+_699],_69b=_696.timePattern||_698["timeFormat-"+_699],_69c;if(_696.selector=="date"){_69c=_69a;}else{if(_696.selector=="time"){_69c=_69b;}else{_69c=_698["dateTimeFormat-"+_699].replace(/\{(\d+)\}/g,function(_69d,key){return [_69b,_69a][key];});}}var _69e=[],re=_692(_69c,lang.hitch(this,_69f,_69e,_698,_696));return {regexp:re,tokens:_69e,bundle:_698};};_67c.parse=function(_6a0,_6a1){var _6a2=/[\u200E\u200F\u202A\u202E]/g,info=_67c._parseInfo(_6a1),_6a3=info.tokens,_6a4=info.bundle,re=new RegExp("^"+info.regexp.replace(_6a2,"")+"$",info.strict?"":"i"),_6a5=re.exec(_6a0&&_6a0.replace(_6a2,""));if(!_6a5){return null;}var _6a6=["abbr","wide","narrow"],_6a7=[1970,0,1,0,0,0,0],amPm="",_6a8=_676.every(_6a5,function(v,i){if(!i){return true;}var _6a9=_6a3[i-1],l=_6a9.length,c=_6a9.charAt(0);switch(c){case "y":if(l!=2&&_6a1.strict){_6a7[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_6aa=year.substring(0,2)*100,_6ab=Math.min(Number(year.substring(2,4))+20,99);_6a7[0]=(v<_6ab)?_6aa+v:_6aa-100+v;}else{if(_6a1.strict){return false;}_6a7[0]=v;}}break;case "M":case "L":if(l>2){var _6ac=_6a4["months-"+(c=="L"?"standAlone":"format")+"-"+_6a6[l-3]].concat();if(!_6a1.strict){v=v.replace(".","").toLowerCase();_6ac=_676.map(_6ac,function(s){return s.replace(".","").toLowerCase();});}v=_676.indexOf(_6ac,v);if(v==-1){return false;}}else{v--;}_6a7[1]=v;break;case "E":case "e":case "c":var days=_6a4["days-"+(c=="c"?"standAlone":"format")+"-"+_6a6[l-3]].concat();if(!_6a1.strict){v=v.toLowerCase();days=_676.map(days,function(d){return d.toLowerCase();});}v=_676.indexOf(days,v);if(v==-1){return false;}break;case "D":_6a7[1]=0;case "d":_6a7[2]=v;break;case "a":var am=_6a1.am||_6a4["dayPeriods-format-wide-am"],pm=_6a1.pm||_6a4["dayPeriods-format-wide-pm"];if(!_6a1.strict){var _6ad=/\./g;v=v.replace(_6ad,"").toLowerCase();am=am.replace(_6ad,"").toLowerCase();pm=pm.replace(_6ad,"").toLowerCase();}if(_6a1.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_6a7[3]=v;break;case "m":_6a7[4]=v;break;case "s":_6a7[5]=v;break;case "S":_6a7[6]=v;}return true;});var _6ae=+_6a7[3];if(amPm==="p"&&_6ae<12){_6a7[3]=_6ae+12;}else{if(amPm==="a"&&_6ae==12){_6a7[3]=0;}}var _6af=new Date(_6a7[0],_6a7[1],_6a7[2],_6a7[3],_6a7[4],_6a7[5],_6a7[6]);if(_6a1.strict){_6af.setFullYear(_6a7[0]);}var _6b0=_6a3.join(""),_6b1=_6b0.indexOf("d")!=-1,_6b2=_6b0.indexOf("M")!=-1;if(!_6a8||(_6b2&&_6af.getMonth()>_6a7[1])||(_6b1&&_6af.getDate()>_6a7[2])){return null;}if((_6b2&&_6af.getMonth()<_6a7[1])||(_6b1&&_6af.getDate()<_6a7[2])){_6af=date.add(_6af,"hour",1);}return _6af;};function _692(_6b3,_6b4,_6b5,_6b6){var _6b7=function(x){return x;};_6b4=_6b4||_6b7;_6b5=_6b5||_6b7;_6b6=_6b6||_6b7;var _6b8=_6b3.match(/(''|[^'])+/g),_6b9=_6b3.charAt(0)=="'";_676.forEach(_6b8,function(_6ba,i){if(!_6ba){_6b8[i]="";}else{_6b8[i]=(_6b9?_6b5:_6b4)(_6ba.replace(/''/g,"'"));_6b9=!_6b9;}});return _6b6(_6b8.join(""));};function _69f(_6bb,_6bc,_6bd,_6be){_6be=_678.escapeString(_6be);if(!_6bd.strict){_6be=_6be.replace(" a"," ?a");}return _6be.replace(/([a-z])\1*/ig,function(_6bf){var s,c=_6bf.charAt(0),l=_6bf.length,p2="",p3="";if(_6bd.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":case "L":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":case "e":case "c":s=".+?";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_6bd.am||_6bc["dayPeriods-format-wide-am"],pm=_6bd.pm||_6bc["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_6bd.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_6bb){_6bb.push(_6bf);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _6c0=[];_67c.addCustomFormats=function(_6c1,_6c2){_6c0.push({pkg:_6c1,name:_6c2});};_67c._getGregorianBundle=function(_6c3){var _6c4={};_676.forEach(_6c0,function(desc){var _6c5=i18n.getLocalization(desc.pkg,desc.name,_6c3);_6c4=lang.mixin(_6c4,_6c5);},this);return _6c4;};_67c.addCustomFormats(_67b.id.replace(/\/date\/locale$/,".cldr"),"gregorian");_67c.getNames=function(item,type,_6c6,_6c7){var _6c8,_6c9=_67c._getGregorianBundle(_6c7),_6ca=[item,_6c6,type];if(_6c6=="standAlone"){var key=_6ca.join("-");_6c8=_6c9[key];if(_6c8[0]==1){_6c8=undefined;}}_6ca[1]="format";return (_6c8||_6c9[_6ca.join("-")]).concat();};_67c.isWeekend=function(_6cb,_6cc){var _6cd=_677.getWeekend(_6cc),day=(_6cb||new Date()).getDay();if(_6cd.end<_6cd.start){_6cd.end+=7;if(day<_6cd.start){day+=7;}}return day>=_6cd.start&&day<=_6cd.end;};_67c._getDayOfYear=function(_6ce){return date.difference(new Date(_6ce.getFullYear(),0,1,_6ce.getHours()),_6ce)+1;};_67c._getWeekOfYear=function(_6cf,_6d0){if(arguments.length==1){_6d0=0;}var _6d1=new Date(_6cf.getFullYear(),0,1).getDay(),adj=(_6d1-_6d0+7)%7,week=Math.floor((_67c._getDayOfYear(_6cf)+adj-1)/7);if(_6d1==_6d0){week++;}return week;};return _67c;});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_6d2){var _6d3={};lang.setObject("dojo.date.stamp",_6d3);_6d3.fromISOString=function(_6d4,_6d5){if(!_6d3._isoRegExp){_6d3._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _6d6=_6d3._isoRegExp.exec(_6d4),_6d7=null;if(_6d6){_6d6.shift();if(_6d6[1]){_6d6[1]--;}if(_6d6[6]){_6d6[6]*=1000;}if(_6d5){_6d5=new Date(_6d5);_6d2.forEach(_6d2.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _6d5["get"+prop]();}),function(_6d8,_6d9){_6d6[_6d9]=_6d6[_6d9]||_6d8;});}_6d7=new Date(_6d6[0]||1970,_6d6[1]||0,_6d6[2]||1,_6d6[3]||0,_6d6[4]||0,_6d6[5]||0,_6d6[6]||0);if(_6d6[0]<100){_6d7.setFullYear(_6d6[0]||1970);}var _6da=0,_6db=_6d6[7]&&_6d6[7].charAt(0);if(_6db!="Z"){_6da=((_6d6[8]||0)*60)+(Number(_6d6[9])||0);if(_6db!="-"){_6da*=-1;}}if(_6db){_6da-=_6d7.getTimezoneOffset();}if(_6da){_6d7.setTime(_6d7.getTime()+_6da*60000);}}return _6d7;};_6d3.toISOString=function(_6dc,_6dd){var _6de=function(n){return (n<10)?"0"+n:n;};_6dd=_6dd||{};var _6df=[],_6e0=_6dd.zulu?"getUTC":"get",date="";if(_6dd.selector!="time"){var year=_6dc[_6e0+"FullYear"]();date=["0000".substr((year+"").length)+year,_6de(_6dc[_6e0+"Month"]()+1),_6de(_6dc[_6e0+"Date"]())].join("-");}_6df.push(date);if(_6dd.selector!="date"){var time=[_6de(_6dc[_6e0+"Hours"]()),_6de(_6dc[_6e0+"Minutes"]()),_6de(_6dc[_6e0+"Seconds"]())].join(":");var _6e1=_6dc[_6e0+"Milliseconds"]();if(_6dd.milliseconds){time+="."+(_6e1<100?"0":"")+_6de(_6e1);}if(_6dd.zulu){time+="Z";}else{if(_6dd.selector!="time"){var _6e2=_6dc.getTimezoneOffset();var _6e3=Math.abs(_6e2);time+=(_6e2>0?"-":"+")+_6de(Math.floor(_6e3/60))+":"+_6de(_6e3%60);}}_6df.push(time);}return _6df.join("T");};return _6d3;});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_6e4,_6e5){dojo.DeferredList=function(list,_6e6,_6e7,_6e8,_6e9){var _6ea=[];_6e4.call(this);var self=this;if(list.length===0&&!_6e6){this.resolve([0,[]]);}var _6eb=0;_6e5.forEach(list,function(item,i){item.then(function(_6ec){if(_6e6){self.resolve([i,_6ec]);}else{_6ed(true,_6ec);}},function(_6ee){if(_6e7){self.reject(_6ee);}else{_6ed(false,_6ee);}if(_6e8){return null;}throw _6ee;});function _6ed(_6ef,_6f0){_6ea[i]=[_6ef,_6f0];_6eb++;if(_6eb===list.length){self.resolve(_6ea);}};});};dojo.DeferredList.prototype=new _6e4();dojo.DeferredList.prototype.gatherResults=function(_6f1){var d=new dojo.DeferredList(_6f1,false,true,false);d.addCallback(function(_6f2){var ret=[];_6e5.forEach(_6f2,function(_6f3){ret.push(_6f3[1]);});return ret;});return d;};return dojo.DeferredList;});},"dojo/_firebug/firebug":function(){define(["../_base/kernel","require","../_base/html","../sniff","../_base/array","../_base/lang","../_base/event","../_base/unload"],function(dojo,_6f4,html,has){var _6f5=(/Trident/.test(window.navigator.userAgent));if(_6f5){var _6f6=["log","info","debug","warn","error"];for(var i=0;i<_6f6.length;i++){var m=_6f6[i];if(!console[m]||console[m]._fake){continue;}var n="_"+_6f6[i];console[n]=console[m];console[m]=(function(){var type=n;return function(){console[type](Array.prototype.join.call(arguments," "));};})();}try{console.clear();}catch(e){}}if(has("ff")||has("chrome")||has("safari")||_6f5||window.firebug||(typeof console!="undefined"&&console.firebug)||dojo.config.useCustomLogger||has("air")){return;}try{if(window!=window.parent){if(window.parent["console"]){window.console=window.parent.console;}return;}}catch(e){}var _6f7=document;var _6f8=window;var _6f9=0;var _6fa=null;var _6fb=null;var _6fc=null;var _6fd=null;var _6fe=null;var _6ff=null;var _700=false;var _701=[];var _702=[];var _703={};var _704={};var _705=null;var _706;var _707;var _708=false;var _709=null;var _70a=document.createElement("div");var _70b;var _70c;window.console={_connects:[],log:function(){_70d(arguments,"");},debug:function(){_70d(arguments,"debug");},info:function(){_70d(arguments,"info");},warn:function(){_70d(arguments,"warning");},error:function(){_70d(arguments,"error");},assert:function(_70e,_70f){if(!_70e){var args=[];for(var i=1;i<arguments.length;++i){args.push(arguments[i]);}_70d(args.length?args:["Assertion Failure"],"error");throw _70f?_70f:"Assertion Failure";}},dir:function(obj){var str=_710(obj);str=str.replace(/\n/g,"<br />");str=str.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");_711([str],"dir");},dirxml:function(node){var html=[];_712(node,html);_711(html,"dirxml");},group:function(){_711(arguments,"group",_713);},groupEnd:function(){_711(arguments,"",_714);},time:function(name){_703[name]=new Date().getTime();},timeEnd:function(name){if(name in _703){var _715=(new Date()).getTime()-_703[name];_70d([name+":",_715+"ms"]);delete _703[name];}},count:function(name){if(!_704[name]){_704[name]=0;}_704[name]++;_70d([name+": "+_704[name]]);},trace:function(_716){var _717=_716||3;var f=console.trace.caller;for(var i=0;i<_717;i++){var func=f.toString();var args=[];for(var a=0;a<f.arguments.length;a++){args.push(f.arguments[a]);}if(f.arguments.length){}else{}f=f.caller;}},profile:function(){this.warn(["profile() not supported."]);},profileEnd:function(){},clear:function(){if(_6fb){while(_6fb.childNodes.length){dojo.destroy(_6fb.firstChild);}}dojo.forEach(this._connects,dojo.disconnect);},open:function(){_718(true);},close:function(){if(_700){_718();}},_restoreBorder:function(){if(_70b){_70b.style.border=_70c;}},openDomInspector:function(){_708=true;_6fb.style.display="none";_705.style.display="block";_6fc.style.display="none";document.body.style.cursor="pointer";_706=dojo.connect(document,"mousemove",function(evt){if(!_708){return;}if(!_709){_709=setTimeout(function(){_709=null;},50);}else{return;}var node=evt.target;if(node&&(_70b!==node)){var _719=true;console._restoreBorder();var html=[];_712(node,html);_705.innerHTML=html.join("");_70b=node;_70c=_70b.style.border;_70b.style.border="#0000FF 1px solid";}});setTimeout(function(){_707=dojo.connect(document,"click",function(evt){document.body.style.cursor="";_708=!_708;dojo.disconnect(_707);});},30);},_closeDomInspector:function(){document.body.style.cursor="";dojo.disconnect(_706);dojo.disconnect(_707);_708=false;console._restoreBorder();},openConsole:function(){_6fb.style.display="block";_705.style.display="none";_6fc.style.display="none";console._closeDomInspector();},openObjectInspector:function(){_6fb.style.display="none";_705.style.display="none";_6fc.style.display="block";console._closeDomInspector();},recss:function(){var i,a,s;a=document.getElementsByTagName("link");for(i=0;i<a.length;i++){s=a[i];if(s.rel.toLowerCase().indexOf("stylesheet")>=0&&s.href){var h=s.href.replace(/(&|%5C?)forceReload=\d+/,"");s.href=h+(h.indexOf("?")>=0?"&":"?")+"forceReload="+new Date().valueOf();}}}};function _718(_71a){_700=_71a||!_700;if(_6fa){_6fa.style.display=_700?"block":"none";}};function _71b(){_718(true);if(_6fe){_6fe.focus();}};function _71c(x,y,w,h){var win=window.open("","_firebug","status=0,menubar=0,resizable=1,top="+y+",left="+x+",width="+w+",height="+h+",scrollbars=1,addressbar=0");if(!win){var msg="Firebug Lite could not open a pop-up window, most likely because of a blocker.\n"+"Either enable pop-ups for this domain, or change the djConfig to popup=false.";alert(msg);}_71d(win);var _71e=win.document;var _71f="<html style=\"height:100%;\"><head><title>Firebug Lite</title></head>\n"+"<body bgColor=\"#ccc\" style=\"height:97%;\" onresize=\"opener.onFirebugResize()\">\n"+"<div id=\"fb\"></div>"+"</body></html>";_71e.write(_71f);_71e.close();return win;};function _71d(wn){var d=new Date();d.setTime(d.getTime()+(60*24*60*60*1000));d=d.toUTCString();var dc=wn.document,_720;if(wn.innerWidth){_720=function(){return {w:wn.innerWidth,h:wn.innerHeight};};}else{if(dc.documentElement&&dc.documentElement.clientWidth){_720=function(){return {w:dc.documentElement.clientWidth,h:dc.documentElement.clientHeight};};}else{if(dc.body){_720=function(){return {w:dc.body.clientWidth,h:dc.body.clientHeight};};}}}window.onFirebugResize=function(){_72e(_720().h);clearInterval(wn._firebugWin_resize);wn._firebugWin_resize=setTimeout(function(){var x=wn.screenLeft,y=wn.screenTop,w=wn.outerWidth||wn.document.body.offsetWidth,h=wn.outerHeight||wn.document.body.offsetHeight;document.cookie="_firebugPosition="+[x,y,w,h].join(",")+"; expires="+d+"; path=/";},5000);};};function _721(){if(_6fa){return;}_718(true);if(dojo.config.popup){var _722="100%";var _723=document.cookie.match(/(?:^|; )_firebugPosition=([^;]*)/);var p=_723?_723[1].split(","):[2,2,320,480];_6f8=_71c(p[0],p[1],p[2],p[3]);_6f7=_6f8.document;dojo.config.debugContainerId="fb";_6f8.console=window.console;_6f8.dojo=window.dojo;}else{_6f7=document;_722=(dojo.config.debugHeight||300)+"px";}var _724=_6f7.createElement("link");_724.href=_6f4.toUrl("./firebug.css");_724.rel="stylesheet";_724.type="text/css";var _725=_6f7.getElementsByTagName("head");if(_725){_725=_725[0];}if(!_725){_725=_6f7.getElementsByTagName("html")[0];}if(has("ie")){window.setTimeout(function(){_725.appendChild(_724);},0);}else{_725.appendChild(_724);}if(dojo.config.debugContainerId){_6fa=_6f7.getElementById(dojo.config.debugContainerId);}if(!_6fa){_6fa=_6f7.createElement("div");_6f7.body.appendChild(_6fa);}_6fa.className+=" firebug";_6fa.id="firebug";_6fa.style.height=_722;_6fa.style.display=(_700?"block":"none");var _726=function(_727,_728,_729,_72a){return "<li class=\""+_72a+"\"><a href=\"javascript:void(0);\" onclick=\"console."+_729+"(); return false;\" title=\""+_728+"\">"+_727+"</a></li>";};_6fa.innerHTML="<div id=\"firebugToolbar\">"+"  <ul id=\"fireBugTabs\" class=\"tabs\">"+_726("Clear","Remove All Console Logs","clear","")+_726("ReCSS","Refresh CSS without reloading page","recss","")+_726("Console","Show Console Logs","openConsole","gap")+_726("DOM","Show DOM Inspector","openDomInspector","")+_726("Object","Show Object Inspector","openObjectInspector","")+((dojo.config.popup)?"":_726("Close","Close the console","close","gap"))+"\t</ul>"+"</div>"+"<input type=\"text\" id=\"firebugCommandLine\" />"+"<div id=\"firebugLog\"></div>"+"<div id=\"objectLog\" style=\"display:none;\">Click on an object in the Log display</div>"+"<div id=\"domInspect\" style=\"display:none;\">Hover over HTML elements in the main page. Click to hold selection.</div>";_6ff=_6f7.getElementById("firebugToolbar");_6fe=_6f7.getElementById("firebugCommandLine");_72b(_6fe,"keydown",_72c);_72b(_6f7,has("ie")||has("safari")?"keydown":"keypress",_72d);_6fb=_6f7.getElementById("firebugLog");_6fc=_6f7.getElementById("objectLog");_705=_6f7.getElementById("domInspect");_6fd=_6f7.getElementById("fireBugTabs");_72e();_72f();};dojo.addOnLoad(_721);function _730(){_6f7=null;if(_6f8.console){_6f8.console.clear();}_6f8=null;_6fa=null;_6fb=null;_6fc=null;_705=null;_6fe=null;_701=[];_702=[];_703={};};function _731(){var text=_6fe.value;_6fe.value="";_711([">  ",text],"command");var _732;try{_732=eval(text);}catch(e){}};function _72e(h){var _733=25;var _734=h?h-(_733+_6fe.offsetHeight+25+(h*0.01))+"px":(_6fa.offsetHeight-_733-_6fe.offsetHeight)+"px";_6fb.style.top=_733+"px";_6fb.style.height=_734;_6fc.style.height=_734;_6fc.style.top=_733+"px";_705.style.height=_734;_705.style.top=_733+"px";_6fe.style.bottom=0;dojo.addOnWindowUnload(_730);};function _711(_735,_736,_737){if(_6fb){_738(_735,_736,_737);}else{_701.push([_735,_736,_737]);}};function _72f(){var _739=_701;_701=[];for(var i=0;i<_739.length;++i){_738(_739[i][0],_739[i][1],_739[i][2]);}};function _738(_73a,_73b,_73c){var _73d=_6fb.scrollTop+_6fb.offsetHeight>=_6fb.scrollHeight;_73c=_73c||_73e;_73c(_73a,_73b);if(_73d){_6fb.scrollTop=_6fb.scrollHeight-_6fb.offsetHeight;}};function _73f(row){var _740=_702.length?_702[_702.length-1]:_6fb;_740.appendChild(row);};function _73e(_741,_742){var row=_6fb.ownerDocument.createElement("div");row.className="logRow"+(_742?" logRow-"+_742:"");row.innerHTML=_741.join("");_73f(row);};function _713(_743,_744){_70d(_743,_744);var _745=_6fb.ownerDocument.createElement("div");_745.className="logGroupBox";_73f(_745);_702.push(_745);};function _714(){_702.pop();};function _70d(_746,_747){var html=[];var _748=_746[0];var _749=0;if(typeof (_748)!="string"){_748="";_749=-1;}var _74a=_74b(_748);for(var i=0;i<_74a.length;++i){var part=_74a[i];if(part&&typeof part=="object"){part.appender(_746[++_749],html);}else{_74c(part,html);}}var ids=[];var obs=[];for(i=_749+1;i<_746.length;++i){_74c(" ",html);var _74d=_746[i];if(_74d===undefined||_74d===null){_74e(_74d,html);}else{if(typeof (_74d)=="string"){_74c(_74d,html);}else{if(_74d instanceof Date){_74c(_74d.toString(),html);}else{if(_74d.nodeType==9){_74c("[ XmlDoc ]",html);}else{var id="_a"+_6f9++;ids.push(id);obs.push(_74d);var str="<a id=\""+id+"\" href=\"javascript:void(0);\">"+_74f(_74d)+"</a>";_750(str,html);}}}}}_711(html,_747);for(i=0;i<ids.length;i++){var btn=_6f7.getElementById(ids[i]);if(!btn){continue;}btn.obj=obs[i];_6f8.console._connects.push(dojo.connect(btn,"onclick",function(){console.openObjectInspector();try{_710(this.obj);}catch(e){this.obj=e;}_6fc.innerHTML="<pre>"+_710(this.obj)+"</pre>";}));}};function _74b(_751){var _752=[];var reg=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;var _753={s:_74c,d:_754,i:_754,f:_755};for(var m=reg.exec(_751);m;m=reg.exec(_751)){var type=m[8]?m[8]:m[5];var _756=type in _753?_753[type]:_757;var _758=m[3]?parseInt(m[3]):(m[4]=="."?-1:0);_752.push(_751.substr(0,m[0][0]=="%"?m.index:m.index+1));_752.push({appender:_756,precision:_758});_751=_751.substr(m.index+m[0].length);}_752.push(_751);return _752;};function _759(_75a){function _75b(ch){switch(ch){case "<":return "&lt;";case ">":return "&gt;";case "&":return "&amp;";case "'":return "&#39;";case "\"":return "&quot;";}return "?";};return String(_75a).replace(/[<>&"']/g,_75b);};function _75c(_75d){try{return _75d+"";}catch(e){return null;}};function _750(_75e,html){html.push(_75c(_75e));};function _74c(_75f,html){html.push(_759(_75c(_75f)));};function _74e(_760,html){html.push("<span class=\"objectBox-null\">",_759(_75c(_760)),"</span>");};function _761(_762,html){html.push("<span class=\"objectBox-string\">&quot;",_759(_75c(_762)),"&quot;</span>");};function _754(_763,html){html.push("<span class=\"objectBox-number\">",_759(_75c(_763)),"</span>");};function _755(_764,html){html.push("<span class=\"objectBox-number\">",_759(_75c(_764)),"</span>");};function _765(_766,html){html.push("<span class=\"objectBox-function\">",_74f(_766),"</span>");};function _757(_767,html){try{if(_767===undefined){_74e("undefined",html);}else{if(_767===null){_74e("null",html);}else{if(typeof _767=="string"){_761(_767,html);}else{if(typeof _767=="number"){_754(_767,html);}else{if(typeof _767=="function"){_765(_767,html);}else{if(_767.nodeType==1){_768(_767,html);}else{if(typeof _767=="object"){_769(_767,html);}else{_74c(_767,html);}}}}}}}}catch(e){}};function _769(_76a,html){var text=_75c(_76a);var _76b=/\[object (.*?)\]/;var m=_76b.exec(text);html.push("<span class=\"objectBox-object\">",m?m[1]:text,"</span>");};function _768(_76c,html){html.push("<span class=\"objectBox-selector\">");html.push("<span class=\"selectorTag\">",_759(_76c.nodeName.toLowerCase()),"</span>");if(_76c.id){html.push("<span class=\"selectorId\">#",_759(_76c.id),"</span>");}if(_76c.className){html.push("<span class=\"selectorClass\">.",_759(_76c.className),"</span>");}html.push("</span>");};function _712(node,html){if(node.nodeType==1){html.push("<div class=\"objectBox-element\">","&lt;<span class=\"nodeTag\">",node.nodeName.toLowerCase(),"</span>");for(var i=0;i<node.attributes.length;++i){var attr=node.attributes[i];if(!attr.specified){continue;}html.push("&nbsp;<span class=\"nodeName\">",attr.nodeName.toLowerCase(),"</span>=&quot;<span class=\"nodeValue\">",_759(attr.nodeValue),"</span>&quot;");}if(node.firstChild){html.push("&gt;</div><div class=\"nodeChildren\">");for(var _76d=node.firstChild;_76d;_76d=_76d.nextSibling){_712(_76d,html);}html.push("</div><div class=\"objectBox-element\">&lt;/<span class=\"nodeTag\">",node.nodeName.toLowerCase(),"&gt;</span></div>");}else{html.push("/&gt;</div>");}}else{if(node.nodeType==3){html.push("<div class=\"nodeText\">",_759(node.nodeValue),"</div>");}}};function _72b(_76e,name,_76f){if(document.all){_76e.attachEvent("on"+name,_76f);}else{_76e.addEventListener(name,_76f,false);}};function _770(_771,name,_772){if(document.all){_771.detachEvent("on"+name,_772);}else{_771.removeEventListener(name,_772,false);}};function _773(_774){if(document.all){_774.cancelBubble=true;}else{_774.stopPropagation();}};function _775(msg,href,_776){var _777=href.lastIndexOf("/");var _778=_777==-1?href:href.substr(_777+1);var html=["<span class=\"errorMessage\">",msg,"</span>","<div class=\"objectBox-sourceLink\">",_778," (line ",_776,")</div>"];_711(html,"error");};var _779=new Date().getTime();function _72d(_77a){var _77b=(new Date()).getTime();if(_77b>_779+200){_77a=dojo.fixEvent(_77a);var keys=dojo.keys;var ekc=_77a.keyCode;_779=_77b;if(ekc==keys.F12){_718();}else{if((ekc==keys.NUMPAD_ENTER||ekc==76)&&_77a.shiftKey&&(_77a.metaKey||_77a.ctrlKey)){_71b();}else{return;}}_773(_77a);}};function _72c(e){var dk=dojo.keys;if(e.keyCode==13&&_6fe.value){_77c(_6fe.value);_731();}else{if(e.keyCode==27){_6fe.value="";}else{if(e.keyCode==dk.UP_ARROW||e.charCode==dk.UP_ARROW){_77d("older");}else{if(e.keyCode==dk.DOWN_ARROW||e.charCode==dk.DOWN_ARROW){_77d("newer");}else{if(e.keyCode==dk.HOME||e.charCode==dk.HOME){_77e=1;_77d("older");}else{if(e.keyCode==dk.END||e.charCode==dk.END){_77e=999999;_77d("newer");}}}}}}};var _77e=-1;var _77f=null;function _77c(_780){var _781=_782("firebug_history");_781=(_781)?dojo.fromJson(_781):[];var pos=dojo.indexOf(_781,_780);if(pos!=-1){_781.splice(pos,1);}_781.push(_780);_782("firebug_history",dojo.toJson(_781),30);while(_781.length&&!_782("firebug_history")){_781.shift();_782("firebug_history",dojo.toJson(_781),30);}_77f=null;_77e=-1;};function _77d(_783){var _784=_782("firebug_history");_784=(_784)?dojo.fromJson(_784):[];if(!_784.length){return;}if(_77f===null){_77f=_6fe.value;}if(_77e==-1){_77e=_784.length;}if(_783=="older"){--_77e;if(_77e<0){_77e=0;}}else{if(_783=="newer"){++_77e;if(_77e>_784.length){_77e=_784.length;}}}if(_77e==_784.length){_6fe.value=_77f;_77f=null;}else{_6fe.value=_784[_77e];}};function _782(name,_785){var c=document.cookie;if(arguments.length==1){var _786=c.match(new RegExp("(?:^|; )"+name+"=([^;]*)"));return _786?decodeURIComponent(_786[1]):undefined;}else{var d=new Date();d.setMonth(d.getMonth()+1);document.cookie=name+"="+encodeURIComponent(_785)+((d.toUtcString)?"; expires="+d.toUTCString():"");}};function _787(it){return it&&it instanceof Array||typeof it=="array";};function _788(o){var cnt=0;for(var nm in o){cnt++;}return cnt;};function _710(o,i,txt,used){var ind=" \t";txt=txt||"";i=i||ind;used=used||[];var _789;if(o&&o.nodeType==1){var html=[];_712(o,html);return html.join("");}var br=",\n",cnt=0,_78a=_788(o);if(o instanceof Date){return i+o.toString()+br;}looking:for(var nm in o){cnt++;if(cnt==_78a){br="\n";}if(o[nm]===window||o[nm]===document){}else{if(o[nm]===null){txt+=i+nm+" : NULL"+br;}else{if(o[nm]&&o[nm].nodeType){if(o[nm].nodeType==1){}else{if(o[nm].nodeType==3){txt+=i+nm+" : [ TextNode "+o[nm].data+" ]"+br;}}}else{if(typeof o[nm]=="object"&&(o[nm] instanceof String||o[nm] instanceof Number||o[nm] instanceof Boolean)){txt+=i+nm+" : "+o[nm]+","+br;}else{if(o[nm] instanceof Date){txt+=i+nm+" : "+o[nm].toString()+br;}else{if(typeof (o[nm])=="object"&&o[nm]){for(var j=0,seen;seen=used[j];j++){if(o[nm]===seen){txt+=i+nm+" : RECURSION"+br;continue looking;}}used.push(o[nm]);_789=(_787(o[nm]))?["[","]"]:["{","}"];txt+=i+nm+" : "+_789[0]+"\n";txt+=_710(o[nm],i+ind,"",used);txt+=i+_789[1]+br;}else{if(typeof o[nm]=="undefined"){txt+=i+nm+" : undefined"+br;}else{if(nm=="toString"&&typeof o[nm]=="function"){var _78b=o[nm]();if(typeof _78b=="string"&&_78b.match(/function ?(.*?)\(/)){_78b=_759(_74f(o[nm]));}txt+=i+nm+" : "+_78b+br;}else{txt+=i+nm+" : "+_759(_74f(o[nm]))+br;}}}}}}}}}return txt;};function _74f(obj){var _78c=(obj instanceof Error);if(obj.nodeType==1){return _759("< "+obj.tagName.toLowerCase()+" id=\""+obj.id+"\" />");}if(obj.nodeType==3){return _759("[TextNode: \""+obj.nodeValue+"\"]");}var nm=(obj&&(obj.id||obj.name||obj.ObjectID||obj.widgetId));if(!_78c&&nm){return "{"+nm+"}";}var _78d=2;var _78e=4;var cnt=0;if(_78c){nm="[ Error: "+(obj.message||obj.description||obj)+" ]";}else{if(_787(obj)){nm="["+obj.slice(0,_78e).join(",");if(obj.length>_78e){nm+=" ... ("+obj.length+" items)";}nm+="]";}else{if(typeof obj=="function"){nm=obj+"";var reg=/function\s*([^\(]*)(\([^\)]*\))[^\{]*\{/;var m=reg.exec(nm);if(m){if(!m[1]){m[1]="function";}nm=m[1]+m[2];}else{nm="function()";}}else{if(typeof obj!="object"||typeof obj=="string"){nm=obj+"";}else{nm="{";for(var i in obj){cnt++;if(cnt>_78d){break;}nm+=i+":"+_759(obj[i])+"  ";}nm+="}";}}}}return nm;};_72b(document,has("ie")||has("safari")?"keydown":"keypress",_72d);if((document.documentElement.getAttribute("debug")=="true")||(dojo.config.isDebug)){_718(true);}dojo.addOnWindowUnload(function(){_770(document,has("ie")||has("safari")?"keydown":"keypress",_72d);window.onFirebugResize=null;window.console=null;});});},"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var _78f={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_78f.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _78f.bounceIn(n*2)/2;}return (_78f.bounceOut(n*2-1)/2)+0.5;}};lang.setObject("dojo.fx.easing",_78f);return _78f;});},"dojo/hash":function(){define(["./_base/kernel","require","./_base/config","./aspect","./_base/lang","./topic","./domReady","./sniff"],function(dojo,_790,_791,_792,lang,_793,_794,has){dojo.hash=function(hash,_795){if(!arguments.length){return _796();}if(hash.charAt(0)=="#"){hash=hash.substring(1);}if(_795){_797(hash);}else{location.href="#"+hash;}return hash;};var _798,_799,_79a,_79b=_791.hashPollFrequency||100;function _79c(str,_79d){var i=str.indexOf(_79d);return (i>=0)?str.substring(i+1):"";};function _796(){return _79c(location.href,"#");};function _79e(){_793.publish("/dojo/hashchange",_796());};function _79f(){if(_796()===_798){return;}_798=_796();_79e();};function _797(hash){if(_799){if(_799.isTransitioning()){setTimeout(lang.hitch(null,_797,hash),_79b);return;}var href=_799.iframe.location.href;var _7a0=href.indexOf("?");_799.iframe.location.replace(href.substring(0,_7a0)+"?"+hash);return;}location.replace("#"+hash);!_79a&&_79f();};function _7a1(){var ifr=document.createElement("iframe"),_7a2="dojo-hash-iframe",_7a3=_791.dojoBlankHtmlUrl||_790.toUrl("./resources/blank.html");if(_791.useXDomain&&!_791.dojoBlankHtmlUrl){console.warn("dojo/hash: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}ifr.id=_7a2;ifr.src=_7a3+"?"+_796();ifr.style.display="none";document.body.appendChild(ifr);this.iframe=dojo.global[_7a2];var _7a4,_7a5,_7a6,_7a7,_7a8,_7a9=this.iframe.location;function _7aa(){_798=_796();_7a4=_7a8?_798:_79c(_7a9.href,"?");_7a5=false;_7a6=null;};this.isTransitioning=function(){return _7a5;};this.pollLocation=function(){if(!_7a8){try{var _7ab=_79c(_7a9.href,"?");if(document.title!=_7a7){_7a7=this.iframe.document.title=document.title;}}catch(e){_7a8=true;console.error("dojo/hash: Error adding history entry. Server unreachable.");}}var hash=_796();if(_7a5&&_798===hash){if(_7a8||_7ab===_7a6){_7aa();_79e();}else{setTimeout(lang.hitch(this,this.pollLocation),0);return;}}else{if(_798===hash&&(_7a8||_7a4===_7ab)){}else{if(_798!==hash){_798=hash;_7a5=true;_7a6=hash;ifr.src=_7a3+"?"+_7a6;_7a8=false;setTimeout(lang.hitch(this,this.pollLocation),0);return;}else{if(!_7a8){location.href="#"+_7a9.search.substring(1);_7aa();_79e();}}}}setTimeout(lang.hitch(this,this.pollLocation),_79b);};_7aa();setTimeout(lang.hitch(this,this.pollLocation),_79b);};_794(function(){if("onhashchange" in dojo.global&&(!has("ie")||(has("ie")>=8&&document.compatMode!="BackCompat"))){_79a=_792.after(dojo.global,"onhashchange",_79e,true);}else{if(document.addEventListener){_798=_796();setInterval(_79f,_79b);}else{if(document.attachEvent){_799=new _7a1();}}}});return dojo.hash;});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_7ac,json,_7ad,lang,xhr,has,win,dom,_7ae,_7af,_7b0,_7b1,_7b2){_7ad.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_7b2._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _7b3=lang.delegate(_7b2,{create:function(){return _7b3._frame=_7b2.create.apply(_7b2,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var _7b4=null,_7b5=dfd.ioArgs;try{var _7b6=_7b5.handleAs;if(_7b6==="xml"||_7b6==="html"){_7b4=rDfd.response.data;}else{_7b4=rDfd.response.text;if(_7b6==="json"){_7b4=json.fromJson(_7b4);}else{if(_7b6==="javascript"){_7b4=_7ad.eval(_7b4);}}}}catch(e){_7b4=e;}return _7b4;},function(_7b7,dfd){dfd.ioArgs._hasError=true;return _7b7;});var _7b8=dfd.ioArgs;var _7b9="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_7b9="POST";}var _7ba={method:_7b9,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_7b8};if(_7ba.method){_7ba.method=_7ba.method.toUpperCase();}if(_7ac.ioPublish&&_7ad.publish&&_7b8.args.ioPublish!==false){var _7bb=_7b1.after(_7b2,"_notifyStart",function(data){if(data.options.ioArgs===_7b8){_7bb.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_7b2(_7b8.url,_7ba,true);_7b8._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_7bc){dfd.ioArgs.error=_7bc;dfd.reject(_7bc);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_7b3);return _7b3;});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(_7bd,_7be,_7bf,util,_7c0,lang,_7c1,_7c2,has,dom,_7c3,win){var mid=_7bd.id.replace(/[\/\.\-]/g,"_"),_7c4=mid+"_onload";if(!win.global[_7c4]){win.global[_7c4]=function(){var dfd=_7c5._currentDfd;if(!dfd){_7c5._fireNextRequest();return;}var _7c6=dfd.response,_7c7=_7c6.options,_7c8=dom.byId(_7c7.form)||dfd._tmpForm;if(_7c8){var _7c9=dfd._contentToClean;for(var i=0;i<_7c9.length;i++){var key=_7c9[i];for(var j=0;j<_7c8.childNodes.length;j++){var _7ca=_7c8.childNodes[j];if(_7ca.name===key){_7c3.destroy(_7ca);break;}}}dfd._originalAction&&_7c8.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_7c8.setAttribute("method",dfd._originalMethod);_7c8.method=dfd._originalMethod;}if(dfd._originalTarget){_7c8.setAttribute("target",dfd._originalTarget);_7c8.target=dfd._originalTarget;}}if(dfd._tmpForm){_7c3.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _7cb(name,_7cc,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}uri=(has("config-dojoBlankHtmlUrl")||_7be.toUrl("dojo/resources/blank.html"));}var _7cd=_7c3.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_7cc+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_7cd;return _7cd;};function _7ce(_7cf,src,_7d0){var _7d1=win.global.frames[_7cf.name];if(_7d1.contentWindow){_7d1=_7d1.contentWindow;}try{if(!_7d0){_7d1.location=src;}else{_7d1.location.replace(src);}}catch(e){}};function doc(_7d2){if(_7d2.contentDocument){return _7d2.contentDocument;}var name=_7d2.name;if(name){var _7d3=win.doc.getElementsByTagName("iframe");if(_7d2.document&&_7d3[name].contentWindow&&_7d3[name].contentWindow.document){return _7d3[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _7d4(){return _7c3.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _7d5(){var dfd;try{if(_7c5._currentDfd||!_7c5._dfdQueue.length){return;}do{dfd=_7c5._currentDfd=_7c5._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_7c5._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_7c5._currentDfd=null;return;}var _7d6=dfd.response,_7d7=_7d6.options,c2c=dfd._contentToClean=[],_7d8=dom.byId(_7d7.form),_7d9=util.notify,data=_7d7.data||null,_7da;if(!dfd._legacy&&_7d7.method==="POST"&&!_7d8){_7d8=dfd._tmpForm=_7d4();}else{if(_7d7.method==="GET"&&_7d8&&_7d6.url.indexOf("?")>-1){_7da=_7d6.url.slice(_7d6.url.indexOf("?")+1);data=lang.mixin(_7c1.queryToObject(_7da),data);}}if(_7d8){if(!dfd._legacy){var _7db=_7d8;do{_7db=_7db.parentNode;}while(_7db&&_7db!==win.doc.documentElement);if(!_7db){_7d8.style.position="absolute";_7d8.style.left="-1000px";_7d8.style.top="-1000px";win.body().appendChild(_7d8);}if(!_7d8.name){_7d8.name=mid+"_form";}}if(data){var _7dc=function(name,_7dd){_7c3.create("input",{type:"hidden",name:name,value:_7dd},_7d8);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_7dc(x,val[i]);}}else{if(!_7d8[x]){_7dc(x,val);}else{_7d8[x].value=val;}}}}var _7de=_7d8.getAttributeNode("action"),_7df=_7d8.getAttributeNode("method"),_7e0=_7d8.getAttributeNode("target");if(_7d6.url){dfd._originalAction=_7de?_7de.value:null;if(_7de){_7de.value=_7d6.url;}else{_7d8.setAttribute("action",_7d6.url);}}if(!dfd._legacy){dfd._originalMethod=_7df?_7df.value:null;if(_7df){_7df.value=_7d7.method;}else{_7d8.setAttribute("method",_7d7.method);}}else{if(!_7df||!_7df.value){if(_7df){_7df.value=_7d7.method;}else{_7d8.setAttribute("method",_7d7.method);}}}dfd._originalTarget=_7e0?_7e0.value:null;if(_7e0){_7e0.value=_7c5._iframeName;}else{_7d8.setAttribute("target",_7c5._iframeName);}_7d8.target=_7c5._iframeName;_7d9&&_7d9.emit("send",_7d6,dfd.promise.cancel);_7c5._notifyStart(_7d6);_7d8.submit();}else{var _7e1="";if(_7d6.options.data){_7e1=_7d6.options.data;if(typeof _7e1!=="string"){_7e1=_7c1.objectToQuery(_7e1);}}var _7e2=_7d6.url+(_7d6.url.indexOf("?")>-1?"&":"?")+_7e1;_7d9&&_7d9.emit("send",_7d6,dfd.promise.cancel);_7c5._notifyStart(_7d6);_7c5.setSrc(_7c5._frame,_7e2,true);}}catch(e){dfd.reject(e);}};function _7e3(_7e4){return !this.isFulfilled();};function _7e5(_7e6){return !!this._finished;};function _7e7(_7e8,_7e9){if(!_7e9){try{var _7ea=_7e8.options,doc=_7c5.doc(_7c5._frame),_7eb=_7ea.handleAs;if(_7eb!=="html"){if(_7eb==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_7c2("a",doc.documentElement).orphan();var _7ec=doc.documentElement.innerText;_7ec=_7ec.replace(/>\s+</g,"><");_7e8.text=lang.trim(_7ec);}else{_7e8.data=doc;}}else{_7e8.text=doc.getElementsByTagName("textarea")[0].value;}_7c0(_7e8);}else{_7e8.data=doc;}}catch(e){_7e9=e;}}if(_7e9){this.reject(_7e9);}else{if(this._finished){this.resolve(_7e8);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_7ed){this._callNext();};var _7ee={method:"POST"};function _7c5(url,_7ef,_7f0){var _7f1=util.parseArgs(url,util.deepCreate(_7ee,_7ef),true);url=_7f1.url;_7ef=_7f1.options;if(_7ef.method!=="GET"&&_7ef.method!=="POST"){throw new Error(_7ef.method+" not supported by dojo/request/iframe");}if(!_7c5._frame){_7c5._frame=_7c5.create(_7c5._iframeName,_7c4+"();");}var dfd=util.deferred(_7f1,null,_7e3,_7e5,_7e7,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_7c5._currentDfd=null;_7c5._fireNextRequest();}};dfd._legacy=_7f0;_7c5._dfdQueue.push(dfd);_7c5._fireNextRequest();_7bf(dfd);return _7f0?dfd:dfd.promise;};_7c5.create=_7cb;_7c5.doc=doc;_7c5.setSrc=_7ce;_7c5._iframeName=mid+"_IoIframe";_7c5._notifyStart=function(){};_7c5._dfdQueue=[];_7c5._currentDfd=null;_7c5._fireNextRequest=_7d5;util.addCommonMethods(_7c5,["GET","POST"]);return _7c5;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script","../aspect"],function(_7f2,_7f3,lang,has,win,xhr,dom,_7f4,_7f5,_7f6){_7f3.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _7f7={get:function(args){var rDfd;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _7f8=dfd.ioArgs;xhr._ioAddQueryToUrl(_7f8);xhr._ioNotifyStart(dfd);rDfd=_7f5.get(_7f8.url,{timeout:args.timeout,jsonp:_7f8.jsonp,checkString:args.checkString,ioArgs:_7f8,frameDoc:args.frameDoc,canAttach:function(rDfd){_7f8.requestId=rDfd.id;_7f8.scriptId=rDfd.scriptId;_7f8.canDelete=rDfd.canDelete;return _7f7._canAttach(_7f8);}},true);_7f6.around(rDfd,"isValid",function(_7f9){return function(_7fa){_7f7._validCheck(dfd);return _7f9.call(this,_7fa);};});rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_7fb){dfd.ioArgs.error=_7fb;dfd.reject(_7fb);});return dfd;},attach:_7f5._attach,remove:_7f5._remove,_makeScriptDeferred:function(args,_7fc){var dfd=xhr._ioSetArgs(args,_7fc||this._deferredCancel,this._deferredOk,this._deferredError);var _7fd=dfd.ioArgs;_7fd.id=_7f3._scopeName+"IoScript"+(this._counter++);_7fd.canDelete=false;_7fd.jsonp=args.callbackParamName||args.jsonp;if(_7fd.jsonp){_7fd.query=_7fd.query||"";if(_7fd.query.length>0){_7fd.query+="&";}_7fd.query+=_7fd.jsonp+"="+(args.frameDoc?"parent.":"")+_7f3._scopeName+".io.script.jsonp_"+_7fd.id+"._jsonpCallback";_7fd.frameDoc=args.frameDoc;_7fd.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_7fd.id]=dfd;}dfd.addBoth(function(_7fe){if(_7fd.canDelete){if(_7fe instanceof Error){_7f7["jsonp_"+_7fd.id]._jsonpCallback=function(){delete _7f7["jsonp_"+_7fd.id];if(_7fd.requestId){_7f3.global[_7f5._callbacksProperty][_7fd.requestId]();}};}else{_7f7._addDeadScript(_7fd);}}});return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _7ff=dfd.ioArgs;return _7ff.json||_7ff.scriptLoaded||_7ff;},_deferredError:function(_800,dfd){return _800;},_deadScripts:[],_counter:1,_addDeadScript:function(_801){_7f7._deadScripts.push({id:_801.id,frameDoc:_801.frameDoc});_801.frameDoc=null;},_validCheck:function(dfd){var _802=_7f7._deadScripts;if(_802&&_802.length>0){for(var i=0;i<_802.length;i++){_7f7.remove(_802[i].id,_802[i].frameDoc);delete _7f7["jsonp_"+_802[i].id];_802[i].frameDoc=null;}_7f7._deadScripts=[];}return true;},_ioCheck:function(dfd){var _803=dfd.ioArgs;if(_803.json||(_803.scriptLoaded&&!_803.args.checkString)){return true;}var _804=_803.args.checkString;return _804&&eval("typeof("+_804+") != 'undefined'");},_resHandle:function(dfd){if(_7f7._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;if(this.ioArgs.requestId){_7f3.global[_7f5._callbacksProperty][this.ioArgs.requestId](json);}}};lang.setObject("dojo.io.script",_7f7);return _7f7;});},"dojo/request/script":function(){define(["module","./watch","./util","../_base/kernel","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_805,_806,util,_807,_808,lang,on,dom,_809,has,win){has.add("script-readystatechange",function(_80a,_80b){var _80c=_80b.createElement("script");return typeof _80c["onreadystatechange"]!=="undefined"&&(typeof _80a["opera"]==="undefined"||_80a["opera"].toString()!=="[object Opera]");});var mid=_805.id.replace(/[\/\.\-]/g,"_"),_80d=0,_80e=has("script-readystatechange")?"readystatechange":"load",_80f=/complete|loaded/,_810=_807.global[mid+"_callbacks"]={},_811=[];function _812(id,url,_813){var doc=(_813||win.doc),_814=doc.createElement("script");_814.type="text/javascript";_814.src=url;_814.id=id;_814.async=true;_814.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_814);};function _815(id,_816,_817){_809.destroy(dom.byId(id,_816));if(_810[id]){if(_817){_810[id]=function(){delete _810[id];};}else{delete _810[id];}}};function _818(dfd){var _819=dfd.response.options,_81a=_819.ioArgs?_819.ioArgs.frameDoc:_819.frameDoc;_811.push({id:dfd.id,frameDoc:_81a});if(_819.ioArgs){_819.ioArgs.frameDoc=null;}_819.frameDoc=null;};function _81b(dfd,_81c){if(dfd.canDelete){_81d._remove(dfd.id,_81c.options.frameDoc,true);}};function _81e(_81f){if(_811&&_811.length){_808.forEach(_811,function(_820){_81d._remove(_820.id,_820.frameDoc);_820.frameDoc=null;});_811=[];}return _81f.options.jsonp?!_81f.data:true;};function _821(_822){return !!this.scriptLoaded;};function _823(_824){var _825=_824.options.checkString;return _825&&eval("typeof("+_825+") !== \"undefined\"");};function _826(_827,_828){if(this.canDelete){_818(this);}if(_828){this.reject(_828);}else{this.resolve(_827);}};function _81d(url,_829,_82a){var _82b=util.parseArgs(url,util.deepCopy({},_829));url=_82b.url;_829=_82b.options;var dfd=util.deferred(_82b,_81b,_81e,_829.jsonp?null:(_829.checkString?_823:_821),_826);lang.mixin(dfd,{id:mid+(_80d++),canDelete:false});if(_829.jsonp){var _82c=new RegExp("[?&]"+_829.jsonp+"=");if(!_82c.test(url)){url+=(~url.indexOf("?")?"&":"?")+_829.jsonp+"="+(_829.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_810[dfd.id]=function(json){_82b.data=json;dfd.handleResponse(_82b);};}if(util.notify){util.notify.emit("send",_82b,dfd.promise.cancel);}if(!_829.canAttach||_829.canAttach(dfd)){var node=_81d._attach(dfd.id,url,_829.frameDoc);if(!_829.jsonp&&!_829.checkString){var _82d=on(node,_80e,function(evt){if(evt.type==="load"||_80f.test(node.readyState)){_82d.remove();dfd.scriptLoaded=evt;}});}}_806(dfd);return _82a?dfd:dfd.promise;};_81d.get=_81d;_81d._attach=_812;_81d._remove=_815;_81d._callbacksProperty=mid+"_callbacks";return _81d;});},"dojo/main":function(){define(["./_base/kernel","./has","require","./sniff","./_base/lang","./_base/array","./_base/config","./ready","./_base/declare","./_base/connect","./_base/Deferred","./_base/json","./_base/Color","./has!dojo-firebug?./_firebug/firebug","./_base/browser","./_base/loader"],function(_82e,has,_82f,_830,lang,_831,_832,_833){if(_832.isDebug){_82f(["./_firebug/firebug"]);}1||has.add("dojo-config-require",1);if(1){var deps=_832.require;if(deps){deps=_831.map(lang.isArray(deps)?deps:[deps],function(item){return item.replace(/\./g,"/");});if(_82e.isAsync){_82f(deps);}else{_833(1,function(){_82f(deps);});}}}return _82e;});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./dom","./_base/window","./_base/url","./aspect","./promise/all","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_834,dojo,_835,_836,_837,dom,_838,_839,_83a,all,_83b,_83c,has,_83d,don,_83e){new Date("X");function _83f(text){return eval("("+text+")");};var _840=0;_83a.after(_835,"extend",function(){_840++;},true);function _841(ctor){var map=ctor._nameCaseMap,_842=ctor.prototype;if(!map||map._extendCnt<_840){map=ctor._nameCaseMap={};for(var name in _842){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_840;}return map;};var _843={};function _844(_845,_846){var ts=_845.join();if(!_843[ts]){var _847=[];for(var i=0,l=_845.length;i<l;i++){var t=_845[i];_847[_847.length]=(_843[t]=_843[t]||(_835.getObject(t)||(~t.indexOf("/")&&(_846?_846(t):_834(t)))));}var ctor=_847.shift();_843[ts]=_847.length?(ctor.createSubclass?ctor.createSubclass(_847):ctor.extend.apply(ctor,_847)):ctor;}return _843[ts];};var _848={_clearCache:function(){_840++;_843={};},_functionFromScript:function(_849,_84a){var _84b="",_84c="",_84d=(_849.getAttribute(_84a+"args")||_849.getAttribute("args")),_84e=_849.getAttribute("with");var _84f=(_84d||"").split(/\s*,\s*/);if(_84e&&_84e.length){_836.forEach(_84e.split(/\s*,\s*/),function(part){_84b+="with("+part+"){";_84c+="}";});}return new Function(_84f,_84b+_849.innerHTML+_84c);},instantiate:function(_850,_851,_852){_851=_851||{};_852=_852||{};var _853=(_852.scope||dojo._scopeName)+"Type",_854="data-"+(_852.scope||dojo._scopeName)+"-",_855=_854+"type",_856=_854+"mixins";var list=[];_836.forEach(_850,function(node){var type=_853 in _851?_851[_853]:node.getAttribute(_855)||node.getAttribute(_853);if(type){var _857=node.getAttribute(_856),_858=_857?[type].concat(_857.split(/\s*,\s*/)):[type];list.push({node:node,types:_858});}});return this._instantiate(list,_851,_852);},_instantiate:function(_859,_85a,_85b,_85c){var _85d=_836.map(_859,function(obj){var ctor=obj.ctor||_844(obj.types,_85b.contextRequire);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_85a,_85b,obj.scripts,obj.inherited);},this);function _85e(_85f){if(!_85a._started&&!_85b.noStart){_836.forEach(_85f,function(_860){if(typeof _860.startup==="function"&&!_860._started){_860.startup();}});}return _85f;};if(_85c){return all(_85d).then(_85e);}else{return _85e(_85d);}},construct:function(ctor,node,_861,_862,_863,_864){var _865=ctor&&ctor.prototype;_862=_862||{};var _866={};if(_862.defaults){_835.mixin(_866,_862.defaults);}if(_864){_835.mixin(_866,_864);}var _867;if(has("dom-attributes-explicit")){_867=node.attributes;}else{if(has("dom-attributes-specified-flag")){_867=_836.filter(node.attributes,function(a){return a.specified;});}else{var _868=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_869=_868.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_867=_836.map(_869.split(/\s+/),function(name){var _86a=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_86a=="enctype"?node.getAttribute(_86a):node.getAttributeNode(_86a).value};});}}var _86b=_862.scope||dojo._scopeName,_86c="data-"+_86b+"-",hash={};if(_86b!=="dojo"){hash[_86c+"props"]="data-dojo-props";hash[_86c+"type"]="data-dojo-type";hash[_86c+"mixins"]="data-dojo-mixins";hash[_86b+"type"]="dojoType";hash[_86c+"id"]="data-dojo-id";}var i=0,item,_86d=[],_86e,_86f;while(item=_867[i++]){var name=item.name,_870=name.toLowerCase(),_871=item.value;switch(hash[_870]||_870){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_86f=_871;break;case "data-dojo-id":case "jsid":_86e=_871;break;case "data-dojo-attach-point":case "dojoattachpoint":_866.dojoAttachPoint=_871;break;case "data-dojo-attach-event":case "dojoattachevent":_866.dojoAttachEvent=_871;break;case "class":_866["class"]=node.className;break;case "style":_866["style"]=node.style&&node.style.cssText;break;default:if(!(name in _865)){var map=_841(ctor);name=map[_870]||name;}if(name in _865){switch(typeof _865[name]){case "string":_866[name]=_871;break;case "number":_866[name]=_871.length?Number(_871):NaN;break;case "boolean":_866[name]=_871.toLowerCase()!="false";break;case "function":if(_871===""||_871.search(/[^\w\.]+/i)!=-1){_866[name]=new Function(_871);}else{_866[name]=_835.getObject(_871,false)||new Function(_871);}_86d.push(name);break;default:var pVal=_865[name];_866[name]=(pVal&&"length" in pVal)?(_871?_871.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_871==""?new Date(""):_871=="now"?new Date():_83b.fromISOString(_871)):(pVal instanceof _839)?(dojo.baseUrl+_871):_83f(_871);}}else{_866[name]=_871;}}}for(var j=0;j<_86d.length;j++){var _872=_86d[j].toLowerCase();node.removeAttribute(_872);node[_872]=null;}if(_86f){try{_86f=_83f.call(_862.propsThis,"{"+_86f+"}");_835.mixin(_866,_86f);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_86f+"'");}}_835.mixin(_866,_861);if(!_863){_863=(ctor&&(ctor._noScript||_865._noScript)?[]:_83d("> script[type^='dojo/']",node));}var _873=[],_874=[],_875=[],ons=[];if(_863){for(i=0;i<_863.length;i++){var _876=_863[i];node.removeChild(_876);var _877=(_876.getAttribute(_86c+"event")||_876.getAttribute("event")),prop=_876.getAttribute(_86c+"prop"),_878=_876.getAttribute(_86c+"method"),_879=_876.getAttribute(_86c+"advice"),_87a=_876.getAttribute("type"),nf=this._functionFromScript(_876,_86c);if(_877){if(_87a=="dojo/connect"){_873.push({method:_877,func:nf});}else{if(_87a=="dojo/on"){ons.push({event:_877,func:nf});}else{_866[_877]=nf;}}}else{if(_87a=="dojo/aspect"){_873.push({method:_878,advice:_879,func:nf});}else{if(_87a=="dojo/watch"){_875.push({prop:prop,func:nf});}else{_874.push(nf);}}}}}var _87b=ctor.markupFactory||_865.markupFactory;var _87c=_87b?_87b(_866,node,ctor):new ctor(_866,node);function _87d(_87e){if(_86e){_835.setObject(_86e,_87e);}for(i=0;i<_873.length;i++){_83a[_873[i].advice||"after"](_87e,_873[i].method,_835.hitch(_87e,_873[i].func),true);}for(i=0;i<_874.length;i++){_874[i].call(_87e);}for(i=0;i<_875.length;i++){_87e.watch(_875[i].prop,_875[i].func);}for(i=0;i<ons.length;i++){don(_87e,ons[i].event,ons[i].func);}return _87e;};if(_87c.then){return _87c.then(_87d);}else{return _87d(_87c);}},scan:function(root,_87f){var list=[],mids=[],_880={};var _881=(_87f.scope||dojo._scopeName)+"Type",_882="data-"+(_87f.scope||dojo._scopeName)+"-",_883=_882+"type",_884=_882+"textdir",_885=_882+"mixins";var node=root.firstChild;var _886=_87f.inherited;if(!_886){function _887(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_887(node.parentNode,attr));};_886={dir:_887(root,"dir"),lang:_887(root,"lang"),textDir:_887(root,_884)};for(var key in _886){if(!_886[key]){delete _886[key];}}}var _888={inherited:_886};var _889;var _88a;function _88b(_88c){if(!_88c.inherited){_88c.inherited={};var node=_88c.node,_88d=_88b(_88c.parent);var _88e={dir:node.getAttribute("dir")||_88d.dir,lang:node.getAttribute("lang")||_88d.lang,textDir:node.getAttribute(_884)||_88d.textDir};for(var key in _88e){if(_88e[key]){_88c.inherited[key]=_88e[key];}}}return _88c.inherited;};while(true){if(!node){if(!_888||!_888.node){break;}node=_888.node.nextSibling;_88a=false;_888=_888.parent;_889=_888.scripts;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_889&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_889.push(node);}node=node.nextSibling;continue;}if(_88a){node=node.nextSibling;continue;}var type=node.getAttribute(_883)||node.getAttribute(_881);var _88f=node.firstChild;if(!type&&(!_88f||(_88f.nodeType==3&&!_88f.nextSibling))){node=node.nextSibling;continue;}var _890;var ctor=null;if(type){var _891=node.getAttribute(_885),_892=_891?[type].concat(_891.split(/\s*,\s*/)):[type];try{ctor=_844(_892,_87f.contextRequire);}catch(e){}if(!ctor){_836.forEach(_892,function(t){if(~t.indexOf("/")&&!_880[t]){_880[t]=true;mids[mids.length]=t;}});}var _893=ctor&&!ctor.prototype._noScript?[]:null;_890={types:_892,ctor:ctor,parent:_888,node:node,scripts:_893};_890.inherited=_88b(_890);list.push(_890);}else{_890={node:node,scripts:_889,parent:_888};}_889=_893;_88a=node.stopParser||(ctor&&ctor.prototype.stopParser&&!(_87f.template));_888=_890;node=_88f;}var d=new _83c();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}var r=_87f.contextRequire||_834;r(mids,function(){d.resolve(_836.filter(list,function(_894){if(!_894.ctor){try{_894.ctor=_844(_894.types,_87f.contextRequire);}catch(e){}}var _895=_894.parent;while(_895&&!_895.types){_895=_895.parent;}var _896=_894.ctor&&_894.ctor.prototype;_894.instantiateChildren=!(_896&&_896.stopParser&&!(_87f.template));_894.instantiate=!_895||(_895.instantiate&&_895.instantiateChildren);return _894.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_897,_898){var hash=_83f("{"+_897.innerHTML+"}"),vars=[],mids=[],d=new _83c();var _899=(_898&&_898.contextRequire)||_834;for(var name in hash){vars.push(name);mids.push(hash[name]);}_899(mids,function(){for(var i=0;i<vars.length;i++){_835.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root,_89a){var _89b=new _83c(),_89c=_89b.promise;_89b.resolve(true);var self=this;_83d("script[type='dojo/require']",root).forEach(function(node){_89c=_89c.then(function(){return self._require(node,_89a);});node.parentNode.removeChild(node);});return _89c;},parse:function(_89d,_89e){var root;if(!_89e&&_89d&&_89d.rootNode){_89e=_89d;root=_89e.rootNode;}else{if(_89d&&_835.isObject(_89d)&&!("nodeType" in _89d)){_89e=_89d;}else{root=_89d;}}root=root?dom.byId(root):_838.body();_89e=_89e||{};var _89f=_89e.template?{template:true}:{},_8a0=[],self=this;var p=this._scanAmd(root,_89e).then(function(){return self.scan(root,_89e);}).then(function(_8a1){return self._instantiate(_8a1,_89f,_89e,true);}).then(function(_8a2){return _8a0=_8a0.concat(_8a2);}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_835.mixin(_8a0,p);return _8a0;}};if(1){dojo.parser=_848;}if(_837.parseOnLoad){_83e(100,_848,"parse");}return _848;});},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(_8a3,_8a4,when){"use strict";var some=_8a3.some;return function all(_8a5){var _8a6,_8a3;if(_8a5 instanceof Array){_8a3=_8a5;}else{if(_8a5&&typeof _8a5==="object"){_8a6=_8a5;}}var _8a7;var _8a8=[];if(_8a6){_8a3=[];for(var key in _8a6){if(Object.hasOwnProperty.call(_8a6,key)){_8a8.push(key);_8a3.push(_8a6[key]);}}_8a7={};}else{if(_8a3){_8a7=[];}}if(!_8a3||!_8a3.length){return new _8a4().resolve(_8a7);}var _8a9=new _8a4();_8a9.promise.always(function(){_8a7=_8a8=null;});var _8aa=_8a3.length;some(_8a3,function(_8ab,_8ac){if(!_8a6){_8a8.push(_8ac);}when(_8ab,function(_8ad){if(!_8a9.isFulfilled()){_8a7[_8a8[_8ac]]=_8ad;if(--_8aa===0){_8a9.resolve(_8a7);}}},_8a9.reject);return _8a9.isFulfilled();});return _8a9.promise;};});},"dojo/request/notify":function(){define(["../Evented","../_base/lang","./util"],function(_8ae,lang,util){var _8af=0,_8b0=[].slice;var hub=lang.mixin(new _8ae,{onsend:function(data){if(!_8af){this.emit("start");}_8af++;},_onload:function(data){this.emit("done",data);},_onerror:function(data){this.emit("done",data);},_ondone:function(data){if(--_8af<=0){_8af=0;this.emit("stop");}},emit:function(type,_8b1){var _8b2=_8ae.prototype.emit.apply(this,arguments);if(this["_on"+type]){this["_on"+type].apply(this,_8b0.call(arguments,1));}return _8b2;}});function _8b3(type,_8b4){return hub.on(type,_8b4);};_8b3.emit=function(type,_8b5,_8b6){return hub.emit(type,_8b5,_8b6);};return util.notify=_8b3;});},"dojo/router":function(){define(["./router/RouterBase"],function(_8b7){return new _8b7({});});},"dojo/router/RouterBase":function(){define(["dojo/_base/declare","dojo/hash","dojo/topic"],function(_8b8,hash,_8b9){var trim;if(String.prototype.trim){trim=function(str){return str.trim();};}else{trim=function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");};}function _8ba(_8bb,_8bc,_8bd){var _8be,_8bf,_8c0,_8c1,_8c2,i,l;_8be=this.callbackQueue;_8bf=false;_8c0=false;_8c1={stopImmediatePropagation:function(){_8bf=true;},preventDefault:function(){_8c0=true;},oldPath:_8bc,newPath:_8bd,params:_8bb};_8c2=[_8c1];if(_8bb instanceof Array){_8c2=_8c2.concat(_8bb);}else{for(var key in _8bb){_8c2.push(_8bb[key]);}}for(i=0,l=_8be.length;i<l;++i){if(!_8bf){_8be[i].apply(null,_8c2);}}return !_8c0;};var _8c3=_8b8(null,{_routes:null,_routeIndex:null,_started:false,_currentPath:"",idMatch:/:(\w[\w\d]*)/g,idReplacement:"([^\\/]+)",globMatch:/\*(\w[\w\d]*)/,globReplacement:"(.+)",constructor:function(_8c4){this._routes=[];this._routeIndex={};for(var i in _8c4){if(_8c4.hasOwnProperty(i)){this[i]=_8c4[i];}}},register:function(_8c5,_8c6){return this._registerRoute(_8c5,_8c6);},registerBefore:function(_8c7,_8c8){return this._registerRoute(_8c7,_8c8,true);},go:function(path,_8c9){var _8ca;if(typeof path!=="string"){return false;}path=trim(path);_8ca=this._handlePathChange(path);if(_8ca){hash(path,_8c9);}return _8ca;},startup:function(_8cb){if(this._started){return;}var self=this,_8cc=hash();this._started=true;this._hashchangeHandle=_8b9.subscribe("/dojo/hashchange",function(){self._handlePathChange.apply(self,arguments);});if(!_8cc){this.go(_8cb,true);}else{this._handlePathChange(_8cc);}},destroy:function(){if(this._hashchangeHandle){this._hashchangeHandle.remove();}this._routes=null;this._routeIndex=null;},_handlePathChange:function(_8cd){var i,j,li,lj,_8ce,_8cf,_8d0,_8d1,_8d2,_8d3=this._routes,_8d4=this._currentPath;if(!this._started||_8cd===_8d4){return _8d0;}_8d0=true;for(i=0,li=_8d3.length;i<li;++i){_8ce=_8d3[i];_8cf=_8ce.route.exec(_8cd);if(_8cf){if(_8ce.parameterNames){_8d1=_8ce.parameterNames;_8d2={};for(j=0,lj=_8d1.length;j<lj;++j){_8d2[_8d1[j]]=_8cf[j+1];}}else{_8d2=_8cf.slice(1);}_8d0=_8ce.fire(_8d2,_8d4,_8cd);}}if(_8d0){this._currentPath=_8cd;}return _8d0;},_convertRouteToRegExp:function(_8d5){_8d5=_8d5.replace(this.idMatch,this.idReplacement);_8d5=_8d5.replace(this.globMatch,this.globReplacement);_8d5="^"+_8d5+"$";return new RegExp(_8d5);},_getParameterNames:function(_8d6){var _8d7=this.idMatch,_8d8=this.globMatch,_8d9=[],_8da;_8d7.lastIndex=0;while((_8da=_8d7.exec(_8d6))!==null){_8d9.push(_8da[1]);}if((_8da=_8d8.exec(_8d6))!==null){_8d9.push(_8da[1]);}return _8d9.length>0?_8d9:null;},_indexRoutes:function(){var i,l,_8db,_8dc,_8dd=this._routes;_8dc=this._routeIndex={};for(i=0,l=_8dd.length;i<l;++i){_8db=_8dd[i];_8dc[_8db.route]=i;}},_registerRoute:function(_8de,_8df,_8e0){var _8e1,_8e2,_8e3,_8e4,_8e5,self=this,_8e6=this._routes,_8e7=this._routeIndex;_8e1=this._routeIndex[_8de];_8e2=typeof _8e1!=="undefined";if(_8e2){_8e3=_8e6[_8e1];}if(!_8e3){_8e3={route:_8de,callbackQueue:[],fire:_8ba};}_8e4=_8e3.callbackQueue;if(typeof _8de=="string"){_8e3.parameterNames=this._getParameterNames(_8de);_8e3.route=this._convertRouteToRegExp(_8de);}if(_8e0){_8e4.unshift(_8df);}else{_8e4.push(_8df);}if(!_8e2){_8e1=_8e6.length;_8e7[_8de]=_8e1;_8e6.push(_8e3);}_8e5=false;return {remove:function(){var i,l;if(_8e5){return;}for(i=0,l=_8e4.length;i<l;++i){if(_8e4[i]===_8df){_8e4.splice(i,1);}}if(_8e4.length===0){_8e6.splice(_8e1,1);self._indexRoutes();}_8e5=true;},register:function(_8e8,_8e9){return self.register(_8de,_8e8,_8e9);}};}});return _8c3;});},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(has,dojo){"use strict";var _8ea=document.createElement("div");var _8eb=_8ea.matches||_8ea.webkitMatchesSelector||_8ea.mozMatchesSelector||_8ea.msMatchesSelector||_8ea.oMatchesSelector;var _8ec=_8ea.querySelectorAll;var _8ed=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;has.add("dom-matches-selector",!!_8eb);has.add("dom-qsa",!!_8ec);var _8ee=function(_8ef,root){if(_8f0&&_8ef.indexOf(",")>-1){return _8f0(_8ef,root);}var doc=root?root.ownerDocument||root:dojo.doc||document,_8f1=(_8ec?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(_8ef);root=root||doc;if(_8f1){if(_8f1[2]){var _8f2=dojo.byId?dojo.byId(_8f1[2],doc):doc.getElementById(_8f1[2]);if(!_8f2||(_8f1[1]&&_8f1[1]!=_8f2.tagName.toLowerCase())){return [];}if(root!=doc){var _8f3=_8f2;while(_8f3!=root){_8f3=_8f3.parentNode;if(!_8f3){return [];}}}return _8f1[3]?_8ee(_8f1[3],_8f2):[_8f2];}if(_8f1[3]&&root.getElementsByClassName){return root.getElementsByClassName(_8f1[4]);}var _8f2;if(_8f1[5]){_8f2=root.getElementsByTagName(_8f1[5]);if(_8f1[4]||_8f1[6]){_8ef=(_8f1[4]||"")+_8f1[6];}else{return _8f2;}}}if(_8ec){if(root.nodeType===1&&root.nodeName.toLowerCase()!=="object"){return _8f4(root,_8ef,root.querySelectorAll);}else{return root.querySelectorAll(_8ef);}}else{if(!_8f2){_8f2=root.getElementsByTagName("*");}}var _8f5=[];for(var i=0,l=_8f2.length;i<l;i++){var node=_8f2[i];if(node.nodeType==1&&_8f6(node,_8ef,root)){_8f5.push(node);}}return _8f5;};var _8f4=function(_8f7,_8f8,_8f9){var _8fa=_8f7,old=_8f7.getAttribute("id"),nid=old||"__dojo__",_8fb=_8f7.parentNode,_8fc=/^\s*[+~]/.test(_8f8);if(_8fc&&!_8fb){return [];}if(!old){_8f7.setAttribute("id",nid);}else{nid=nid.replace(/'/g,"\\$&");}if(_8fc&&_8fb){_8f7=_8f7.parentNode;}var _8fd=_8f8.match(_8ed);for(var i=0;i<_8fd.length;i++){_8fd[i]="[id='"+nid+"'] "+_8fd[i];}_8f8=_8fd.join(",");try{return _8f9.call(_8f7,_8f8);}finally{if(!old){_8fa.removeAttribute("id");}}};if(!has("dom-matches-selector")){var _8f6=(function(){var _8fe=_8ea.tagName=="div"?"toLowerCase":"toUpperCase";var _8ff={"":function(_900){_900=_900[_8fe]();return function(node){return node.tagName==_900;};},".":function(_901){var _902=" "+_901+" ";return function(node){return node.className.indexOf(_901)>-1&&(" "+node.className+" ").indexOf(_902)>-1;};},"#":function(id){return function(node){return node.id==id;};}};var _903={"^=":function(_904,_905){return _904.indexOf(_905)==0;},"*=":function(_906,_907){return _906.indexOf(_907)>-1;},"$=":function(_908,_909){return _908.substring(_908.length-_909.length,_908.length)==_909;},"~=":function(_90a,_90b){return (" "+_90a+" ").indexOf(" "+_90b+" ")>-1;},"|=":function(_90c,_90d){return (_90c+"-").indexOf(_90d+"-")==0;},"=":function(_90e,_90f){return _90e==_90f;},"":function(_910,_911){return true;}};function attr(name,_912,type){var _913=_912.charAt(0);if(_913=="\""||_913=="'"){_912=_912.slice(1,-1);}_912=_912.replace(/\\/g,"");var _914=_903[type||""];return function(node){var _915=node.getAttribute(name);return _915&&_914(_915,_912);};};function _916(_917){return function(node,root){while((node=node.parentNode)!=root){if(_917(node,root)){return true;}}};};function _918(_919){return function(node,root){node=node.parentNode;return _919?node!=root&&_919(node,root):node==root;};};var _91a={};function and(_91b,next){return _91b?function(node,root){return next(node)&&_91b(node,root);}:next;};return function(node,_91c,root){var _91d=_91a[_91c];if(!_91d){if(_91c.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(t,_91e,type,_91f,_920,_921,_922){if(_91f){_91d=and(_91d,_8ff[type||""](_91f.replace(/\\/g,"")));}else{if(_91e){_91d=(_91e==" "?_916:_918)(_91d);}else{if(_920){_91d=and(_91d,attr(_920,_922,_921));}}}return "";})){throw new Error("Syntax error in query");}if(!_91d){return true;}_91a[_91c]=_91d;}return _91d(node,root);};})();}if(!has("dom-qsa")){var _8f0=function(_923,root){var _924=_923.match(_8ed);var _925=[];for(var i=0;i<_924.length;i++){_923=new String(_924[i].replace(/\s*$/,""));_923.indexOf=escape;var _926=_8ee(_923,root);for(var j=0,l=_926.length;j<l;j++){var node=_926[j];_925[node.sourceIndex]=node;}}var _927=[];for(i in _925){_927.push(_925[i]);}return _927;};}_8ee.match=_8eb?function(node,_928,root){if(root&&root.nodeType!=9){return _8f4(root,_928,function(_929){return _8eb.call(node,_929);});}return _8eb.call(node,_928);}:_8f6;return _8ee;});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_92a,_92b,_92c){var base=null;return _92a("dojo.store.Memory",base,{constructor:function(_92d){for(var i in _92d){this[i]=_92d[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_92c,get:function(id){return this.data[this.index[id]];},getIdentity:function(_92e){return _92e[this.idProperty];},put:function(_92f,_930){var data=this.data,_931=this.index,_932=this.idProperty;var id=_92f[_932]=(_930&&"id" in _930)?_930.id:_932 in _92f?_92f[_932]:Math.random();if(id in _931){if(_930&&_930.overwrite===false){throw new Error("Object already exists");}data[_931[id]]=_92f;}else{_931[id]=data.push(_92f)-1;}return id;},add:function(_933,_934){(_934=_934||{}).overwrite=false;return this.put(_933,_934);},remove:function(id){var _935=this.index;var data=this.data;if(id in _935){data.splice(_935[id],1);this.setData(data);return true;}},query:function(_936,_937){return _92b(this.queryEngine(_936,_937)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier||this.idProperty;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_938,lang,when){var _939=function(_93a){if(!_93a){return _93a;}var _93b=!!_93a.then;if(_93b){_93a=lang.delegate(_93a);}function _93c(_93d){_93a[_93d]=function(){var args=arguments;var _93e=when(_93a,function(_93f){Array.prototype.unshift.call(args,_93f);return _939(_938[_93d].apply(_938,args));});if(_93d!=="forEach"||_93b){return _93e;}};};_93c("forEach");_93c("filter");_93c("map");if(_93a.total==null){_93a.total=when(_93a,function(_940){return _940.length;});}return _93a;};lang.setObject("dojo.store.util.QueryResults",_939);return _939;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_941){return function(_942,_943){switch(typeof _942){default:throw new Error("Can not query with a "+typeof _942);case "object":case "undefined":var _944=_942;_942=function(_945){for(var key in _944){var _946=_944[key];if(_946&&_946.test){if(!_946.test(_945[key],_945)){return false;}}else{if(_946!=_945[key]){return false;}}}return true;};break;case "string":if(!this[_942]){throw new Error("No filter function "+_942+" was found in store");}_942=this[_942];case "function":}function _947(_948){var _949=_941.filter(_948,_942);var _94a=_943&&_943.sort;if(_94a){_949.sort(typeof _94a=="function"?_94a:function(a,b){for(var sort,i=0;sort=_94a[i];i++){var _94b=a[sort.attribute];var _94c=b[sort.attribute];_94b=_94b!=null?_94b.valueOf():_94b;_94c=_94c!=null?_94c.valueOf():_94c;if(_94b!=_94c){return !!sort.descending==(_94b==null||_94b>_94c)?-1:1;}}return 0;});}if(_943&&(_943.start||_943.count)){var _94d=_949.length;_949=_949.slice(_943.start||0,(_943.start||0)+(_943.count||Infinity));_949.total=_94d;}return _949;};_947.matches=_942;return _947;};});},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(_94e,lang,when,_94f){var _950=function(_951){var _952,_953=[],_954=0;_951=lang.delegate(_951);_951.notify=function(_955,_956){_954++;var _957=_953.slice();for(var i=0,l=_957.length;i<l;i++){_957[i](_955,_956);}};var _958=_951.query;_951.query=function(_959,_95a){_95a=_95a||{};var _95b=_958.apply(this,arguments);if(_95b&&_95b.forEach){var _95c=lang.mixin({},_95a);delete _95c.start;delete _95c.count;var _95d=_951.queryEngine&&_951.queryEngine(_959,_95c);var _95e=_954;var _95f=[],_960;_95b.observe=function(_961,_962){if(_95f.push(_961)==1){_953.push(_960=function(_963,_964){when(_95b,function(_965){var _966=_965.length!=_95a.count;var i,l,_961;if(++_95e!=_954){throw new Error("Query is out of date, you must observe() the query prior to any data modifications");}var _967,_968=-1,_969=-1;if(_964!==_952){for(i=0,l=_965.length;i<l;i++){var _96a=_965[i];if(_951.getIdentity(_96a)==_964){_967=_96a;_968=i;if(_95d||!_963){_965.splice(i,1);}break;}}}if(_95d){if(_963&&(_95d.matches?_95d.matches(_963):_95d([_963]).length)){var _96b=_968>-1?_968:_965.length;_965.splice(_96b,0,_963);_969=_94f.indexOf(_95d(_965),_963);_965.splice(_96b,1);if((_95a.start&&_969==0)||(!_966&&_969==_965.length)){_969=-1;}else{_965.splice(_969,0,_963);}}}else{if(_963){if(_964!==_952){_969=_968;}else{if(!_95a.start){_969=_951.defaultIndex||0;_965.splice(_969,0,_963);}}}}if((_968>-1||_969>-1)&&(_962||!_95d||(_968!=_969))){var _96c=_95f.slice();for(i=0;_961=_96c[i];i++){_961(_963||_967,_968,_969);}}});});}var _96d={};_96d.remove=_96d.cancel=function(){var _96e=_94f.indexOf(_95f,_961);if(_96e>-1){_95f.splice(_96e,1);if(!_95f.length){_953.splice(_94f.indexOf(_953,_960),1);}}};return _96d;};}return _95b;};var _96f;function _970(_971,_972){var _973=_951[_971];if(_973){_951[_971]=function(_974){var _975;if(_971==="put"){_975=_951.getIdentity(_974);}if(_96f){return _973.apply(this,arguments);}_96f=true;try{var _976=_973.apply(this,arguments);when(_976,function(_977){_972((typeof _977=="object"&&_977)||_974,_975);});return _976;}finally{_96f=false;}};}};_970("put",function(_978,_979){_951.notify(_978,_979);});_970("add",function(_97a){_951.notify(_97a);});_970("remove",function(id){_951.notify(undefined,id);});return _951;};lang.setObject("dojo.store.Observable",_950);return _950;});},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],function(xhr,lang,JSON,_97b,_97c){var base=null;return _97b("dojo.store.JsonRest",base,{constructor:function(_97d){this.headers={};_97b.safeMixin(this,_97d);},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",_getTarget:function(id){var _97e=this.target;if(typeof id!="undefined"){if(_97e.charAt(_97e.length-1)=="/"){_97e+=id;}else{_97e+="/"+id;}}return _97e;},get:function(id,_97f){_97f=_97f||{};var _980=lang.mixin({Accept:this.accepts},this.headers,_97f.headers||_97f);return xhr("GET",{url:this._getTarget(id),handleAs:"json",headers:_980});},accepts:"application/javascript, application/json",getIdentity:function(_981){return _981[this.idProperty];},put:function(_982,_983){_983=_983||{};var id=("id" in _983)?_983.id:this.getIdentity(_982);var _984=typeof id!="undefined";return xhr(_984&&!_983.incremental?"PUT":"POST",{url:this._getTarget(id),postData:JSON.stringify(_982),handleAs:"json",headers:lang.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":_983.overwrite===true?"*":null,"If-None-Match":_983.overwrite===false?"*":null},this.headers,_983.headers)});},add:function(_985,_986){_986=_986||{};_986.overwrite=false;return this.put(_985,_986);},remove:function(id,_987){_987=_987||{};return xhr("DELETE",{url:this._getTarget(id),headers:lang.mixin({},this.headers,_987.headers)});},query:function(_988,_989){_989=_989||{};var _98a=lang.mixin({Accept:this.accepts},this.headers,_989.headers);var _98b=this.target.indexOf("?")>-1;if(_988&&typeof _988=="object"){_988=xhr.objectToQuery(_988);_988=_988?(_98b?"&":"?")+_988:"";}if(_989.start>=0||_989.count>=0){_98a["X-Range"]="items="+(_989.start||"0")+"-"+(("count" in _989&&_989.count!=Infinity)?(_989.count+(_989.start||0)-1):"");if(this.rangeParam){_988+=(_988||_98b?"&":"?")+this.rangeParam+"="+_98a["X-Range"];_98b=true;}else{_98a.Range=_98a["X-Range"];}}if(_989&&_989.sort){var _98c=this.sortParam;_988+=(_988||_98b?"&":"?")+(_98c?_98c+"=":"sort(");for(var i=0;i<_989.sort.length;i++){var sort=_989.sort[i];_988+=(i>0?",":"")+(sort.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(sort.attribute);}if(!_98c){_988+=")";}}var _98d=xhr("GET",{url:this.target+(_988||""),handleAs:"json",headers:_98a});_98d.total=_98d.then(function(){var _98e=_98d.ioArgs.xhr.getResponseHeader("Content-Range");if(!_98e){_98e=_98d.ioArgs.xhr.getResponseHeader("X-Content-Range");}return _98e&&(_98e=_98e.match(/\/(.*)/))&&+_98e[1];});return _97c(_98d);}});});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(_98f,lang,_990,has,_991){var html=_991.doc.documentElement,ie=has("ie"),_992=has("opera"),maj=Math.floor,ff=has("ff"),_993=_98f.boxModel.replace(/-/,""),_994={"dj_quirks":has("quirks"),"dj_opera":_992,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla"),"dj_ios":has("ios"),"dj_android":has("android")};if(ie){_994["dj_ie"]=true;_994["dj_ie"+maj(ie)]=true;_994["dj_iequirks"]=has("quirks");}if(ff){_994["dj_ff"+maj(ff)]=true;}_994["dj_"+_993]=true;var _995="";for(var clz in _994){if(_994[clz]){_995+=clz+" ";}}html.className=lang.trim(html.className+" "+_995);_990(function(){if(!_98f.isBodyLtr()){var _996="dj_rtl dijitRtl "+_995.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_996+"dj_rtl dijitRtl "+_995.replace(/ /g,"-rtl "));}});return has;});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(lang,has,_997,dom,geom,_998,_999){has.add("rtl-adjust-position-for-verticalScrollBar",function(win,doc){var body=_997.body(doc),_99a=_999.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},body,"last"),div=_999.create("div",{style:{overflow:"hidden",direction:"ltr"}},_99a,"last"),ret=geom.position(div).x!=0;_99a.removeChild(div);body.removeChild(_99a);return ret;});has.add("position-fixed-support",function(win,doc){var body=_997.body(doc),_99b=_999.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},body,"last"),_99c=_999.create("span",{style:{position:"fixed",left:"0",top:"0"}},_99b,"last"),ret=geom.position(_99c).x!=geom.position(_99b).x;_99b.removeChild(_99c);body.removeChild(_99b);return ret;});var _99d={getBox:function(doc){doc=doc||_997.doc;var _99e=(doc.compatMode=="BackCompat")?_997.body(doc):doc.documentElement,_99f=geom.docScroll(doc),w,h;if(has("touch")){var _9a0=_99d.get(doc);w=_9a0.innerWidth||_99e.clientWidth;h=_9a0.innerHeight||_99e.clientHeight;}else{w=_99e.clientWidth;h=_99e.clientHeight;}return {l:_99f.x,t:_99f.y,w:w,h:h};},get:function(doc){if(has("ie")&&_99d!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_997.doc,body=_997.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if(node==body||node==html){return;}if(!(has("mozilla")||isIE||isWK||has("opera")||has("trident"))&&("scrollIntoView" in node)){node.scrollIntoView(false);return;}var _9a1=doc.compatMode=="BackCompat",_9a2=Math.min(body.clientWidth||html.clientWidth,html.clientWidth||body.clientWidth),_9a3=Math.min(body.clientHeight||html.clientHeight,html.clientHeight||body.clientHeight),_9a4=(isWK||_9a1)?body:html,_9a5=pos||geom.position(node),el=node.parentNode,_9a6=function(el){return (isIE<=6||(isIE==7&&_9a1))?false:(has("position-fixed-support")&&(_998.get(el,"position").toLowerCase()=="fixed"));},self=this,_9a7=function(el,x,y){if(el.tagName=="BODY"||el.tagName=="HTML"){self.get(el.ownerDocument).scrollBy(x,y);}else{x&&(el.scrollLeft+=x);y&&(el.scrollTop+=y);}};if(_9a6(node)){return;}while(el){if(el==body){el=_9a4;}var _9a8=geom.position(el),_9a9=_9a6(el),rtl=_998.getComputedStyle(el).direction.toLowerCase()=="rtl";if(el==_9a4){_9a8.w=_9a2;_9a8.h=_9a3;if(_9a4==html&&(isIE||has("trident"))&&rtl){_9a8.x+=_9a4.offsetWidth-_9a8.w;}if(_9a8.x<0||!isIE||isIE>=9||has("trident")){_9a8.x=0;}if(_9a8.y<0||!isIE||isIE>=9||has("trident")){_9a8.y=0;}}else{var pb=geom.getPadBorderExtents(el);_9a8.w-=pb.w;_9a8.h-=pb.h;_9a8.x+=pb.l;_9a8.y+=pb.t;var _9aa=el.clientWidth,_9ab=_9a8.w-_9aa;if(_9aa>0&&_9ab>0){if(rtl&&has("rtl-adjust-position-for-verticalScrollBar")){_9a8.x+=_9ab;}_9a8.w=_9aa;}_9aa=el.clientHeight;_9ab=_9a8.h-_9aa;if(_9aa>0&&_9ab>0){_9a8.h=_9aa;}}if(_9a9){if(_9a8.y<0){_9a8.h+=_9a8.y;_9a8.y=0;}if(_9a8.x<0){_9a8.w+=_9a8.x;_9a8.x=0;}if(_9a8.y+_9a8.h>_9a3){_9a8.h=_9a3-_9a8.y;}if(_9a8.x+_9a8.w>_9a2){_9a8.w=_9a2-_9a8.x;}}var l=_9a5.x-_9a8.x,t=_9a5.y-_9a8.y,r=l+_9a5.w-_9a8.w,bot=t+_9a5.h-_9a8.h;var s,old;if(r*l>0&&(!!el.scrollLeft||el==_9a4||el.scrollWidth>el.offsetHeight)){s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_9a1)||isIE>=9||has("trident"))){s=-s;}old=el.scrollLeft;_9a7(el,s,0);s=el.scrollLeft-old;_9a5.x-=s;}if(bot*t>0&&(!!el.scrollTop||el==_9a4||el.scrollHeight>el.offsetHeight)){s=Math.ceil(Math[t<0?"max":"min"](t,bot));old=el.scrollTop;_9a7(el,0,s);s=el.scrollTop-old;_9a5.y-=s;}el=(el!=_9a4)&&!_9a9&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_99d);return _99d;});},"dijit/_WidgetBase":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(_9ac,_9ad,_9ae,_9af,_9b0,_9b1,dom,_9b2,_9b3,_9b4,_9b5,_9b6,has,_9b7,lang,on,_9b8,_9b9,_9ba,win,_9bb,_9bc,_9bd){has.add("dijit-legacy-requires",!_9b7.isAsync);has.add("dojo-bidi",false);if(has("dijit-legacy-requires")){_9b8(0,function(){var _9be=["dijit/_base/manager"];_9ac(_9be);});}var _9bf={};function _9c0(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _9c1(attr){return function(val){_9b2[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};function _9c2(a,b){return a===b||(a!==a&&b!==b);};var _9c3=_9b1("dijit._WidgetBase",[_9b9,_9bb],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_9c1("lang"),dir:"",_setDirAttr:_9c1("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_9af.blankGif||_9ac.toUrl("dojo/resources/blank.gif"),_introspect:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var _9c4=ctor.prototype,_9c5=ctor._setterAttrs=[],_9c6=(ctor._onMap={});for(var name in _9c4.attributeMap){_9c5.push(name);}for(name in _9c4){if(/^on/.test(name)){_9c6[name.substring(2).toLowerCase()]=name;}if(/^_set[A-Z](.*)Attr$/.test(name)){name=name.charAt(4).toLowerCase()+name.substr(5,name.length-9);if(!_9c4.attributeMap||!(name in _9c4.attributeMap)){_9c5.push(name);}}}}},postscript:function(_9c7,_9c8){this.create(_9c7,_9c8);},create:function(_9c9,_9ca){this._introspect();this.srcNodeRef=dom.byId(_9ca);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_9c9){this.params=_9c9;lang.mixin(this,_9c9);}this.postMixInProperties();if(!this.id){this.id=_9bd.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=win.body(this.ownerDocument);_9bd.add(this);this.buildRendering();var _9cb;if(this.domNode){this._applyAttributes();var _9cc=this.srcNodeRef;if(_9cc&&_9cc.parentNode&&this.domNode!==_9cc){_9cc.parentNode.replaceChild(this.domNode,_9cc);_9cb=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_9cb){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _9cd={};for(var key in this.params||{}){_9cd[key]=this._get(key);}_9ad.forEach(this.constructor._setterAttrs,function(key){if(!(key in _9cd)){var val=this._get(key);if(val){this.set(key,val);}}},this);for(key in _9cd){this.set(key,_9cd[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _9ce=this.baseClass.split(" ");if(!this.isLeftToRight()){_9ce=_9ce.concat(_9ad.map(_9ce,function(name){return name+"Rtl";}));}_9b3.add(this.domNode,_9ce);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_9ad.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_9cf){this._beingDestroyed=true;this.destroyDescendants(_9cf);this.destroy(_9cf);},destroy:function(_9d0){this._beingDestroyed=true;this.uninitialize();function _9d1(w){if(w.destroyRecursive){w.destroyRecursive(_9d0);}else{if(w.destroy){w.destroy(_9d0);}}};_9ad.forEach(this._connects,lang.hitch(this,"disconnect"));_9ad.forEach(this._supportingWidgets,_9d1);if(this.domNode){_9ad.forEach(_9bd.findWidgets(this.domNode,this.containerNode),_9d1);}this.destroyRendering(_9d0);_9bd.remove(this.id);this._destroyed=true;},destroyRendering:function(_9d2){if(this.bgIframe){this.bgIframe.destroy(_9d2);delete this.bgIframe;}if(this.domNode){if(_9d2){_9b2.remove(this.domNode,"widgetId");}else{_9b4.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_9d2){_9b4.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_9d3){_9ad.forEach(this.getChildren(),function(_9d4){if(_9d4.destroyRecursive){_9d4.destroyRecursive(_9d3);}});},uninitialize:function(){return false;},_setStyleAttr:function(_9d5){var _9d6=this.domNode;if(lang.isObject(_9d5)){_9b6.set(_9d6,_9d5);}else{if(_9d6.style.cssText){_9d6.style.cssText+="; "+_9d5;}else{_9d6.style.cssText=_9d5;}}this._set("style",_9d5);},_attrToDom:function(attr,_9d7,_9d8){_9d8=arguments.length>=3?_9d8:this.attributeMap[attr];_9ad.forEach(lang.isArray(_9d8)?_9d8:[_9d8],function(_9d9){var _9da=this[_9d9.node||_9d9||"domNode"];var type=_9d9.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_9d7)){_9d7=lang.hitch(this,_9d7);}var _9db=_9d9.attribute?_9d9.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_9da.tagName){_9b2.set(_9da,_9db,_9d7);}else{_9da.set(_9db,_9d7);}break;case "innerText":_9da.innerHTML="";_9da.appendChild(this.ownerDocument.createTextNode(_9d7));break;case "innerHTML":_9da.innerHTML=_9d7;break;case "class":_9b3.replace(_9da,_9d7,this[attr]);break;}},this);},get:function(name){var _9dc=this._getAttrNames(name);return this[_9dc.g]?this[_9dc.g]():this._get(name);},set:function(name,_9dd){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _9de=this._getAttrNames(name),_9df=this[_9de.s];if(lang.isFunction(_9df)){var _9e0=_9df.apply(this,Array.prototype.slice.call(arguments,1));}else{var _9e1=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_9e1]&&this[_9e1].tagName,_9e2=tag&&(_9bf[tag]||(_9bf[tag]=_9c0(this[_9e1]))),map=name in this.attributeMap?this.attributeMap[name]:_9de.s in this?this[_9de.s]:((_9e2&&_9de.l in _9e2&&typeof _9dd!="function")||/^aria-|^data-|^role$/.test(name))?_9e1:null;if(map!=null){this._attrToDom(name,_9dd,map);}this._set(name,_9dd);}return _9e0||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_9e3){var _9e4=this[name];this[name]=_9e3;if(this._created&&!_9c2(_9e4,_9e3)){if(this._watchCallbacks){this._watchCallbacks(name,_9e4,_9e3);}this.emit("attrmodified-"+name,{detail:{prevValue:_9e4,newValue:_9e3}});}},_get:function(name){return this[name];},emit:function(type,_9e5,_9e6){_9e5=_9e5||{};if(_9e5.bubbles===undefined){_9e5.bubbles=true;}if(_9e5.cancelable===undefined){_9e5.cancelable=true;}if(!_9e5.detail){_9e5.detail={};}_9e5.detail.widget=this;var ret,_9e7=this["on"+type];if(_9e7){ret=_9e7.apply(this,_9e6?_9e6:[_9e5]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_9e5);}return ret;},on:function(type,func){var _9e8=this._onMap(type);if(_9e8){return _9ae.after(this,_9e8,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_9bd.findWidgets(this.containerNode):[];},getParent:function(){return _9bd.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_9e9,_9ea){return this.own(_9b0.connect(obj,_9e9,this,_9ea))[0];},disconnect:function(_9eb){_9eb.remove();},subscribe:function(t,_9ec){return this.own(_9ba.subscribe(t,lang.hitch(this,_9ec)))[0];},unsubscribe:function(_9ed){_9ed.remove();},isLeftToRight:function(){return this.dir?(this.dir.toLowerCase()=="ltr"):_9b5.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_9b6.get(this.domNode,"display")!="none");},placeAt:function(_9ee,_9ef){var _9f0=!_9ee.tagName&&_9bd.byId(_9ee);if(_9f0&&_9f0.addChild&&(!_9ef||typeof _9ef==="number")){_9f0.addChild(this,_9ef);}else{var ref=_9f0&&("domNode" in _9f0)?(_9f0.containerNode&&!/after|before|replace/.test(_9ef||"")?_9f0.containerNode:_9f0.domNode):dom.byId(_9ee,this.ownerDocument);_9b4.place(this.domNode,ref,_9ef);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},defer:function(fcn,_9f1){var _9f2=setTimeout(lang.hitch(this,function(){if(!_9f2){return;}_9f2=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_9f1||0);return {remove:function(){if(_9f2){clearTimeout(_9f2);_9f2=null;}return null;}};}});if(has("dojo-bidi")){_9c3.extend(_9bc);}return _9c3;});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(_9f3,lang,_9f4,when){return _9f3("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_9f5){if(_9f5){this.set(_9f5);}},_get:function(name,_9f6){return typeof this[_9f6.g]==="function"?this[_9f6.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_9f7){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _9f8=this._getAttrNames(name),_9f9=this._get(name,_9f8),_9fa=this[_9f8.s],_9fb;if(typeof _9fa==="function"){_9fb=_9fa.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_9f7;}if(this._watchCallbacks){var self=this;when(_9fb,function(){self._watchCallbacks(name,_9f9,_9f7);});}return this;},_changeAttrValue:function(name,_9fc){var _9fd=this.get(name);this[name]=_9fc;if(this._watchCallbacks){this._watchCallbacks(name,_9fd,_9fc);}return this;},watch:function(name,_9fe){var _9ff=this._watchCallbacks;if(!_9ff){var self=this;_9ff=this._watchCallbacks=function(name,_a00,_a01,_a02){var _a03=function(_a04){if(_a04){_a04=_a04.slice();for(var i=0,l=_a04.length;i<l;i++){_a04[i].call(self,name,_a00,_a01);}}};_a03(_9ff["_"+name]);if(!_a02){_a03(_9ff["*"]);}};}if(!_9fe&&typeof name==="function"){_9fe=name;name="*";}else{name="_"+name;}var _a05=_9ff[name];if(typeof _a05!=="object"){_a05=_9ff[name]=[];}_a05.push(_9fe);var _a06={};_a06.unwatch=_a06.remove=function(){var _a07=_9f4.indexOf(_a05,_9fe);if(_a07>-1){_a05.splice(_a07,1);}};return _a06;}});});},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_a08,_a09,_a0a){return _a0a("dijit.Destroyable",null,{destroy:function(_a0b){this._destroyed=true;},own:function(){var _a0c=["destroyRecursive","destroy","remove"];_a08.forEach(arguments,function(_a0d){var _a0e;var odh=_a09.before(this,"destroy",function(_a0f){_a0d[_a0e](_a0f);});var hdhs=[];function _a10(){odh.remove();_a08.forEach(hdhs,function(hdh){hdh.remove();});};if(_a0d.then){_a0e="cancel";_a0d.then(_a10,_a10);}else{_a08.forEach(_a0c,function(_a11){if(typeof _a0d[_a11]==="function"){if(!_a0e){_a0e=_a11;}hdhs.push(_a09.after(_a0d,_a11,_a10,true));}});}},this);return arguments;}});});},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(_a12,win,_a13){var _a14={},hash={};var _a15={length:0,add:function(_a16){if(hash[_a16.id]){throw new Error("Tried to register widget with id=="+_a16.id+" but that id is already registered");}hash[_a16.id]=_a16;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_a17){var id;do{id=_a17+"_"+(_a17 in _a14?++_a14[_a17]:_a14[_a17]=0);}while(hash[id]);return _a13._scopeName=="dijit"?id:_a13._scopeName+"_"+id;},findWidgets:function(root,_a18){var _a19=[];function _a1a(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _a1b=node.getAttribute("widgetId");if(_a1b){var _a1c=hash[_a1b];if(_a1c){_a19.push(_a1c);}}else{if(node!==_a18){_a1a(node);}}}}};_a1a(root);return _a19;},_destroyAll:function(){_a13._curFocus=null;_a13._prevFocus=null;_a13._activeStack=[];_a12.forEach(_a15.findWidgets(win.body()),function(_a1d){if(!_a1d._destroyed){if(_a1d.destroyRecursive){_a1d.destroyRecursive();}else{if(_a1d.destroy){_a1d.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.nodeType==1&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};_a13.registry=_a15;return _a15;});},"dijit/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"dijit/_Widget":function(){define(["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_a1e,_a1f,_a20,_a21,has,_a22,lang,_a23,_a24,_a25,_a26,_a27,_a28){function _a29(){};function _a2a(_a2b){return function(obj,_a2c,_a2d,_a2e){if(obj&&typeof _a2c=="string"&&obj[_a2c]==_a29){return obj.on(_a2c.substring(2).toLowerCase(),lang.hitch(_a2d,_a2e));}return _a2b.apply(_a20,arguments);};};_a1e.around(_a20,"connect",_a2a);if(_a22.connect){_a1e.around(_a22,"connect",_a2a);}var _a2f=_a21("dijit._Widget",[_a26,_a27,_a28],{onClick:_a29,onDblClick:_a29,onKeyDown:_a29,onKeyPress:_a29,onKeyUp:_a29,onMouseDown:_a29,onMouseMove:_a29,onMouseOut:_a29,onMouseOver:_a29,onMouseLeave:_a29,onMouseEnter:_a29,onMouseUp:_a29,constructor:function(_a30){this._toConnect={};for(var name in _a30){if(this[name]===_a29){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_a30[name];delete _a30[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_a29){return _a20.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_a31){_a22.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_a31);},attr:function(name,_a32){var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_a22.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_a23("[widgetId]",this.containerNode).map(_a25.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){_a24(0,function(){var _a33=["dijit/_base"];require(_a33);});}return _a2f;});},"dijit/_OnDijitClickMixin":function(){define(["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(on,_a34,keys,_a35,has,_a36){var ret=_a35("dijit._OnDijitClickMixin",null,{connect:function(obj,_a37,_a38){return this.inherited(arguments,[obj,_a37=="ondijitclick"?_a36:_a37,_a38]);}});ret.a11yclick=_a36;return ret;});},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(keys,_a39,on,_a3a){function _a3b(e){if((e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName)){for(var node=e.target;node;node=node.parentNode){if(node.dojoClick){return true;}}}};var _a3c;on(document,"keydown",function(e){if(_a3b(e)){_a3c=e.target;e.preventDefault();}else{_a3c=null;}});on(document,"keyup",function(e){if(_a3b(e)&&e.target==_a3c){_a3c=null;on.emit(e.target,"click",{cancelable:true,bubbles:true,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type});}});var _a3d=function(node,_a3e){node.dojoClick=true;return on(node,"click",_a3e);};_a3d.click=_a3d;_a3d.press=function(node,_a3f){var _a40=on(node,_a3a.press,function(evt){if(evt.type=="mousedown"&&!_a39.isLeft(evt)){return;}_a3f(evt);}),_a41=on(node,"keydown",function(evt){if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE){_a3f(evt);}});return {remove:function(){_a40.remove();_a41.remove();}};};_a3d.release=function(node,_a42){var _a43=on(node,_a3a.release,function(evt){if(evt.type=="mouseup"&&!_a39.isLeft(evt)){return;}_a42(evt);}),_a44=on(node,"keyup",function(evt){if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE){_a42(evt);}});return {remove:function(){_a43.remove();_a44.remove();}};};_a3d.move=_a3a.move;return _a3d;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_a45,dom,_a46,lang,on,has,_a47,_a48,win){var ios4=has("ios")<5;var _a49=has("pointer-events")||has("MSPointer"),_a4a=(function(){var _a4b={};for(var type in {down:1,move:1,up:1,cancel:1,over:1,out:1}){_a4b[type]=has("MSPointer")?"MSPointer"+type.charAt(0).toUpperCase()+type.slice(1):"pointer"+type;}return _a4b;})();var _a4c=has("touch-events");var _a4d,_a4e,_a4f=false,_a50,_a51,_a52,_a53,_a54,_a55;var _a56;function _a57(_a58,_a59,_a5a){if(_a49&&_a5a){return function(node,_a5b){return on(node,_a5a,_a5b);};}else{if(_a4c){return function(node,_a5c){var _a5d=on(node,_a59,function(evt){_a5c.call(this,evt);_a56=(new Date()).getTime();}),_a5e=on(node,_a58,function(evt){if(!_a56||(new Date()).getTime()>_a56+1000){_a5c.call(this,evt);}});return {remove:function(){_a5d.remove();_a5e.remove();}};};}else{return function(node,_a5f){return on(node,_a58,_a5f);};}}};function _a60(node){do{if(node.dojoClick!==undefined){return node;}}while(node=node.parentNode);};function _a61(e,_a62,_a63){var _a64=_a60(e.target);_a4e=!e.target.disabled&&_a64&&_a64.dojoClick;if(_a4e){_a4f=(_a4e=="useTarget");_a50=(_a4f?_a64:e.target);if(_a4f){e.preventDefault();}_a51=e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX;_a52=e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY;_a53=(typeof _a4e=="object"?_a4e.x:(typeof _a4e=="number"?_a4e:0))||4;_a54=(typeof _a4e=="object"?_a4e.y:(typeof _a4e=="number"?_a4e:0))||4;if(!_a4d){_a4d=true;function _a65(e){if(_a4f){_a4e=dom.isDescendant(win.doc.elementFromPoint((e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX),(e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY)),_a50);}else{_a4e=_a4e&&(e.changedTouches?e.changedTouches[0].target:e.target)==_a50&&Math.abs((e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX)-_a51)<=_a53&&Math.abs((e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY)-_a52)<=_a54;}};win.doc.addEventListener(_a62,function(e){_a65(e);if(_a4f){e.preventDefault();}},true);win.doc.addEventListener(_a63,function(e){_a65(e);if(_a4e){_a55=(new Date()).getTime();var _a66=(_a4f?_a50:e.target);if(_a66.tagName==="LABEL"){_a66=dom.byId(_a66.getAttribute("for"))||_a66;}var src=(e.changedTouches)?e.changedTouches[0]:e;var _a67=document.createEvent("MouseEvents");_a67._dojo_click=true;_a67.initMouseEvent("click",true,true,e.view,e.detail,src.screenX,src.screenY,src.clientX,src.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);setTimeout(function(){on.emit(_a66,"click",_a67);_a55=(new Date()).getTime();},0);}},true);function _a68(type){win.doc.addEventListener(type,function(e){if(!e._dojo_click&&(new Date()).getTime()<=_a55+1000&&!(e.target.tagName=="INPUT"&&_a46.contains(e.target,"dijitOffScreen"))){e.stopPropagation();e.stopImmediatePropagation&&e.stopImmediatePropagation();if(type=="click"&&(e.target.tagName!="INPUT"||e.target.type=="radio"||e.target.type=="checkbox")&&e.target.tagName!="TEXTAREA"&&e.target.tagName!="AUDIO"&&e.target.tagName!="VIDEO"){e.preventDefault();}}},true);};_a68("click");_a68("mousedown");_a68("mouseup");}}};var _a69;if(_a49){_a48(function(){win.doc.addEventListener(_a4a.down,function(evt){_a61(evt,_a4a.move,_a4a.up);},true);});}else{if(_a4c){_a48(function(){_a69=win.body();win.doc.addEventListener("touchstart",function(evt){_a56=(new Date()).getTime();var _a6a=_a69;_a69=evt.target;on.emit(_a6a,"dojotouchout",{relatedTarget:_a69,bubbles:true});on.emit(_a69,"dojotouchover",{relatedTarget:_a6a,bubbles:true});_a61(evt,"touchmove","touchend");},true);function _a6b(evt){var _a6c=lang.delegate(evt,{bubbles:true});if(has("ios")>=6){_a6c.touches=evt.touches;_a6c.altKey=evt.altKey;_a6c.changedTouches=evt.changedTouches;_a6c.ctrlKey=evt.ctrlKey;_a6c.metaKey=evt.metaKey;_a6c.shiftKey=evt.shiftKey;_a6c.targetTouches=evt.targetTouches;}return _a6c;};on(win.doc,"touchmove",function(evt){_a56=(new Date()).getTime();var _a6d=win.doc.elementFromPoint(evt.pageX-(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset));if(_a6d){if(_a69!==_a6d){on.emit(_a69,"dojotouchout",{relatedTarget:_a6d,bubbles:true});on.emit(_a6d,"dojotouchover",{relatedTarget:_a69,bubbles:true});_a69=_a6d;}if(!on.emit(_a6d,"dojotouchmove",_a6b(evt))){evt.preventDefault();}}});on(win.doc,"touchend",function(evt){_a56=(new Date()).getTime();var node=win.doc.elementFromPoint(evt.pageX-(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset))||win.body();on.emit(node,"dojotouchend",_a6b(evt));});});}}var _a6e={press:_a57("mousedown","touchstart",_a4a.down),move:_a57("mousemove","dojotouchmove",_a4a.move),release:_a57("mouseup","dojotouchend",_a4a.up),cancel:_a57(_a47.leave,"touchcancel",_a49?_a4a.cancel:null),over:_a57("mouseover","dojotouchover",_a4a.over),out:_a57("mouseout","dojotouchout",_a4a.out),enter:_a47._eventHandler(_a57("mouseover","dojotouchover",_a4a.over)),leave:_a47._eventHandler(_a57("mouseout","dojotouchout",_a4a.out))};1&&(dojo.touch=_a6e);return _a6e;});},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_a6f,_a70,_a71,lang){lang.extend(_a70,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _a71("dijit._FocusMixin",null,{_focusManager:_a6f});});},"dijit/focus":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_a72,_a73,dom,_a74,_a75,_a76,_a77,lang,on,_a78,has,_a79,win,_a7a,a11y,_a7b,_a7c){var _a7d;var _a7e;var _a7f=_a73([_a79,_a77],{curNode:null,activeStack:[],constructor:function(){var _a80=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_a72.before(_a76,"empty",_a80);_a72.before(_a76,"destroy",_a80);},registerIframe:function(_a81){return this.registerWin(_a81.contentWindow,_a81);},registerWin:function(_a82,_a83){var _a84=this,body=_a82.document&&_a82.document.body;if(body){var _a85=has("pointer-events")?"pointerdown":has("MSPointer")?"MSPointerDown":has("touch-events")?"mousedown, touchstart":"mousedown";var mdh=on(_a82.document,_a85,function(evt){if(evt&&evt.target&&evt.target.parentNode==null){return;}_a84._onTouchNode(_a83||evt.target,"mouse");});var fih=on(body,"focusin",function(evt){if(!evt.target.tagName){return;}var tag=evt.target.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isFocusable(evt.target)){_a84._onFocusNode(_a83||evt.target);}else{_a84._onTouchNode(_a83||evt.target);}});var foh=on(body,"focusout",function(evt){_a84._onBlurNode(_a83||evt.target);});return {remove:function(){mdh.remove();fih.remove();foh.remove();mdh=fih=foh=null;body=null;}};}},_onBlurNode:function(node){var now=(new Date()).getTime();if(now<_a7d+100){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}if(now<_a7e+100){return;}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){_a7e=(new Date()).getTime();if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}if(_a75.contains(node,"dijitPopup")){node=node.firstChild;}var _a86=[];try{while(node){var _a87=_a74.get(node,"dijitPopupParent");if(_a87){node=_a7b.byId(_a87).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_a7a.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_a88=id&&_a7b.byId(id);if(_a88&&!(by=="mouse"&&_a88.get("disabled"))){_a86.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_a86,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}_a7d=(new Date()).getTime();if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_a89,by){var _a8a=this.activeStack,_a8b=_a8a.length-1,_a8c=_a89.length-1;if(_a89[_a8c]==_a8a[_a8b]){return;}this.set("activeStack",_a89);var _a8d,i;for(i=_a8b;i>=0&&_a8a[i]!=_a89[i];i--){_a8d=_a7b.byId(_a8a[i]);if(_a8d){_a8d._hasBeenBlurred=true;_a8d.set("focused",false);if(_a8d._focusManager==this){_a8d._onBlur(by);}this.emit("widget-blur",_a8d,by);}}for(i++;i<=_a8c;i++){_a8d=_a7b.byId(_a89[i]);if(_a8d){_a8d.set("focused",true);if(_a8d._focusManager==this){_a8d._onFocus(by);}this.emit("widget-focus",_a8d,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _a8e=new _a7f();_a78(function(){var _a8f=_a8e.registerWin(_a7a.get(document));if(has("ie")){on(window,"unload",function(){if(_a8f){_a8f.remove();_a8f=null;}});}});_a7c.focus=function(node){_a8e.focus(node);};for(var attr in _a8e){if(!/^_/.test(attr)){_a7c.focus[attr]=typeof _a8e[attr]=="function"?lang.hitch(_a8e,attr):_a8e[attr];}}_a8e.watch(function(attr,_a90,_a91){_a7c.focus[attr]=_a91;});return _a8e;});},"dijit/a11y":function(){define(["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(_a92,dom,_a93,_a94,lang,has,_a95){var _a96;var a11y={_isElementShown:function(elem){var s=_a94.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_a93.get(elem,"type")!="hidden");},hasDefaultTabStop:function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _a93.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _a97=elem.contentDocument;if("designMode" in _a97&&_a97.designMode=="on"){return true;}body=_a97.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}},effectiveTabIndex:function(elem){if(_a93.get(elem,"disabled")){return _a96;}else{if(_a93.has(elem,"tabIndex")){return +_a93.get(elem,"tabIndex");}else{return a11y.hasDefaultTabStop(elem)?0:_a96;}}},isTabNavigable:function(elem){return a11y.effectiveTabIndex(elem)>=0;},isFocusable:function(elem){return a11y.effectiveTabIndex(elem)>=-1;},_getTabNavigable:function(root){var _a98,last,_a99,_a9a,_a9b,_a9c,_a9d={};function _a9e(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _a9f=a11y._isElementShown,_aa0=a11y.effectiveTabIndex;var _aa1=function(_aa2){for(var _aa3=_aa2.firstChild;_aa3;_aa3=_aa3.nextSibling){if(_aa3.nodeType!=1||(has("ie")<=9&&_aa3.scopeName!=="HTML")||!_a9f(_aa3)){continue;}var _aa4=_aa0(_aa3);if(_aa4>=0){if(_aa4==0){if(!_a98){_a98=_aa3;}last=_aa3;}else{if(_aa4>0){if(!_a99||_aa4<_a9a){_a9a=_aa4;_a99=_aa3;}if(!_a9b||_aa4>=_a9c){_a9c=_aa4;_a9b=_aa3;}}}var rn=_a9e(_aa3);if(_a93.get(_aa3,"checked")&&rn){_a9d[rn]=_aa3;}}if(_aa3.nodeName.toUpperCase()!="SELECT"){_aa1(_aa3);}}};if(_a9f(root)){_aa1(root);}function rs(node){return _a9d[_a9e(node)]||node;};return {first:rs(_a98),last:rs(last),lowest:rs(_a99),highest:rs(_a9b)};},getFirstInTabbingOrder:function(root,doc){var _aa5=a11y._getTabNavigable(dom.byId(root,doc));return _aa5.lowest?_aa5.lowest:_aa5.first;},getLastInTabbingOrder:function(root,doc){var _aa6=a11y._getTabNavigable(dom.byId(root,doc));return _aa6.last?_aa6.last:_aa6.highest;}};1&&lang.mixin(_a95,a11y);return a11y;});},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(_aa7,has,_aa8,win){_aa8(function(){if(has("highcontrast")){_aa7.add(win.body(),"dijit_a11y");}});return has;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(_aa9,_aaa,_aab,_aac,has,_aad,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url(\""+(_aaa.blankGif||_aa9.toUrl("./resources/blank.gif"))+"\");";win.body().appendChild(div);var cs=_aac.getComputedStyle(div),_aae=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_aae&&(_aae=="none"||_aae=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_aad(function(){if(has("highcontrast")){_aab.add(win.body(),"dj_a11y");}});return has;});},"dijit/_Templated":function(){define(["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_aaf,_ab0,_ab1,_ab2,_ab3,lang,_ab4){lang.extend(_aaf,{waiRole:"",waiState:""});return _ab3("dijit._Templated",[_ab0,_ab1],{widgetsInTemplate:false,constructor:function(){_ab4.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_processNode:function(_ab5,_ab6){var ret=this.inherited(arguments);var role=_ab6(_ab5,"waiRole");if(role){_ab5.setAttribute("role",role);}var _ab7=_ab6(_ab5,"waiState");if(_ab7){_ab2.forEach(_ab7.split(/\s*,\s*/),function(_ab8){if(_ab8.indexOf("-")!=-1){var pair=_ab8.split("-");_ab5.setAttribute("aria-"+pair[0],pair[1]);}});}return ret;}});});},"dijit/_TemplatedMixin":function(){define(["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(_ab9,_aba,_abb,lang,on,has,_abc,_abd){var _abe=_aba("dijit._TemplatedMixin",_abd,{templateString:null,templatePath:null,_skipNodeCache:false,searchContainerNode:true,_stringRepl:function(tmpl){var _abf=this.declaredClass,_ac0=this;return _abc.substitute(tmpl,this,function(_ac1,key){if(key.charAt(0)=="!"){_ac1=lang.getObject(key.substr(1),false,_ac0);}if(typeof _ac1=="undefined"){throw new Error(_abf+" template:"+key);}if(_ac1==null){return "";}return key.charAt(0)=="!"?_ac1:this._escapeValue(""+_ac1);},this);},_escapeValue:function(val){return val.replace(/["'<>&]/g,function(val){return {"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#x27;"}[val];});},buildRendering:function(){if(!this._rendered){if(!this.templateString){this.templateString=_ab9(this.templatePath,{sanitize:true});}var _ac2=_abe.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_ac2)){node=_abb.toDom(this._stringRepl(_ac2),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_ac2);}}else{node=_ac2.cloneNode(true);}this.domNode=node;}this.inherited(arguments);if(!this._rendered){this._fillContent(this.srcNodeRef);}this._rendered=true;},_fillContent:function(_ac3){var dest=this.containerNode;if(_ac3&&dest){while(_ac3.hasChildNodes()){dest.appendChild(_ac3.firstChild);}}}});_abe._templateCache={};_abe.getCachedTemplate=function(_ac4,_ac5,doc){var _ac6=_abe._templateCache;var key=_ac4;var _ac7=_ac6[key];if(_ac7){try{if(!_ac7.ownerDocument||_ac7.ownerDocument==(doc||document)){return _ac7;}}catch(e){}_abb.destroy(_ac7);}_ac4=_abc.trim(_ac4);if(_ac5||_ac4.match(/\$\{([^\}]+)\}/g)){return (_ac6[key]=_ac4);}else{var node=_abb.toDom(_ac4,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_ac4);}return (_ac6[key]=node);}};if(has("ie")){on(window,"unload",function(){var _ac8=_abe._templateCache;for(var key in _ac8){var _ac9=_ac8[key];if(typeof _ac9=="object"){_abb.destroy(_ac9);}delete _ac8[key];}});}return _abe;});},"dijit/_AttachMixin":function(){define(["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(_aca,_acb,_acc,_acd,lang,_ace,on,_acf,_ad0){var _ad1=lang.delegate(_acf,{"mouseenter":_ace.enter,"mouseleave":_ace.leave,"keypress":_acc._keypress});var _ad2;var _ad3=_acd("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[];},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent();},_beforeFillContent:function(){},_attachTemplateNodes:function(_ad4){var node=_ad4;while(true){if(node.nodeType==1&&(this._processTemplateNode(node,function(n,p){return n.getAttribute(p);},this._attach)||this.searchContainerNode)&&node.firstChild){node=node.firstChild;}else{if(node==_ad4){return;}while(!node.nextSibling){node=node.parentNode;if(node==_ad4){return;}}node=node.nextSibling;}}},_processTemplateNode:function(_ad5,_ad6,_ad7){var ret=true;var _ad8=this.attachScope||this,_ad9=_ad6(_ad5,"dojoAttachPoint")||_ad6(_ad5,"data-dojo-attach-point");if(_ad9){var _ada,_adb=_ad9.split(/\s*,\s*/);while((_ada=_adb.shift())){if(lang.isArray(_ad8[_ada])){_ad8[_ada].push(_ad5);}else{_ad8[_ada]=_ad5;}ret=(_ada!="containerNode");this._attachPoints.push(_ada);}}var _adc=_ad6(_ad5,"dojoAttachEvent")||_ad6(_ad5,"data-dojo-attach-event");if(_adc){var _add,_ade=_adc.split(/\s*,\s*/);var trim=lang.trim;while((_add=_ade.shift())){if(_add){var _adf=null;if(_add.indexOf(":")!=-1){var _ae0=_add.split(":");_add=trim(_ae0[0]);_adf=trim(_ae0[1]);}else{_add=trim(_add);}if(!_adf){_adf=_add;}this._attachEvents.push(_ad7(_ad5,_add,lang.hitch(_ad8,_adf)));}}}return ret;},_attach:function(node,type,func){type=type.replace(/^on/,"").toLowerCase();if(type=="dijitclick"){type=_ad2||(_ad2=_aca("./a11yclick"));}else{type=_ad1[type]||type;}return on(node,type,func);},_detachTemplateNodes:function(){var _ae1=this.attachScope||this;_acb.forEach(this._attachPoints,function(_ae2){delete _ae1[_ae2];});this._attachPoints=[];_acb.forEach(this._attachEvents,function(_ae3){_ae3.remove();});this._attachEvents=[];},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments);}});lang.extend(_ad0,{dojoAttachEvent:"",dojoAttachPoint:""});return _ad3;});},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(_ae4,_ae5,_ae6,lang,_ae7){return _ae6("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;if(this.containerNode&&!this.searchContainerNode){this.containerNode.stopParser=true;}_ae7.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(lang.hitch(this,function(_ae8){this._startupWidgets=_ae8;for(var i=0;i<_ae8.length;i++){this._processTemplateNode(_ae8[i],function(n,p){return n[p];},function(_ae9,type,_aea){if(type in _ae9){return _ae9.connect(_ae9,type,_aea);}else{return _ae9.on(type,_aea,true);}});}if(this.containerNode&&this.containerNode.stopParser){delete this.containerNode.stopParser;}}));if(!this._startupWidgets){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}}},_processTemplateNode:function(_aeb,_aec,_aed){if(_aec(_aeb,"dojoType")||_aec(_aeb,"data-dojo-type")){return true;}return this.inherited(arguments);},startup:function(){_ae4.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this._startupWidgets=null;this.inherited(arguments);}});});},"dojox/validate":function(){define(["./validate/_base"],function(_aee){return _aee;});},"dojox/validate/_base":function(){define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(lang,_aef,_af0,_af1){var _af2=lang.getObject("dojox.validate",true);_af2.isText=function(_af3,_af4){_af4=(typeof _af4=="object")?_af4:{};if(/^\s*$/.test(_af3)){return false;}if(typeof _af4.length=="number"&&_af4.length!=_af3.length){return false;}if(typeof _af4.minlength=="number"&&_af4.minlength>_af3.length){return false;}if(typeof _af4.maxlength=="number"&&_af4.maxlength<_af3.length){return false;}return true;};_af2._isInRangeCache={};_af2.isInRange=function(_af5,_af6){_af5=_af0.parse(_af5,_af6);if(isNaN(_af5)){return false;}_af6=(typeof _af6=="object")?_af6:{};var max=(typeof _af6.max=="number")?_af6.max:Infinity,min=(typeof _af6.min=="number")?_af6.min:-Infinity,dec=(typeof _af6.decimal=="string")?_af6.decimal:".",_af7=_af2._isInRangeCache,_af8=_af5+"max"+max+"min"+min+"dec"+dec;if(typeof _af7[_af8]!="undefined"){return _af7[_af8];}_af7[_af8]=!(_af5<min||_af5>max);return _af7[_af8];};_af2.isNumberFormat=function(_af9,_afa){var re=new RegExp("^"+_af1.numberFormat(_afa)+"$","i");return re.test(_af9);};_af2.isValidLuhn=function(_afb){var sum=0,_afc,_afd;if(!lang.isString(_afb)){_afb=String(_afb);}_afb=_afb.replace(/[- ]/g,"");_afc=_afb.length%2;for(var i=0;i<_afb.length;i++){_afd=parseInt(_afb.charAt(i));if(i%2==_afc){_afd*=2;}if(_afd>9){_afd-=9;}sum+=_afd;}return !(sum%10);};return _af2;});},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(lang,_afe,_aff){var _b00=lang.getObject("validate.regexp",true,_aff);_b00=_aff.validate.regexp={ipAddress:function(_b01){_b01=(typeof _b01=="object")?_b01:{};if(typeof _b01.allowDottedDecimal!="boolean"){_b01.allowDottedDecimal=true;}if(typeof _b01.allowDottedHex!="boolean"){_b01.allowDottedHex=true;}if(typeof _b01.allowDottedOctal!="boolean"){_b01.allowDottedOctal=true;}if(typeof _b01.allowDecimal!="boolean"){_b01.allowDecimal=true;}if(typeof _b01.allowHex!="boolean"){_b01.allowHex=true;}if(typeof _b01.allowIPv6!="boolean"){_b01.allowIPv6=true;}if(typeof _b01.allowHybrid!="boolean"){_b01.allowHybrid=true;}var _b02="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var _b03="(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]";var _b04="(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]";var _b05="(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|"+"4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])";var _b06="0[xX]0*[\\da-fA-F]{1,8}";var _b07="([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}";var _b08="([\\da-fA-F]{1,4}\\:){6}"+"((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var a=[];if(_b01.allowDottedDecimal){a.push(_b02);}if(_b01.allowDottedHex){a.push(_b03);}if(_b01.allowDottedOctal){a.push(_b04);}if(_b01.allowDecimal){a.push(_b05);}if(_b01.allowHex){a.push(_b06);}if(_b01.allowIPv6){a.push(_b07);}if(_b01.allowHybrid){a.push(_b08);}var _b09="";if(a.length>0){_b09="("+a.join("|")+")";}return _b09;},host:function(_b0a){_b0a=(typeof _b0a=="object")?_b0a:{};if(typeof _b0a.allowIP!="boolean"){_b0a.allowIP=true;}if(typeof _b0a.allowLocal!="boolean"){_b0a.allowLocal=false;}if(typeof _b0a.allowPort!="boolean"){_b0a.allowPort=true;}if(typeof _b0a.allowNamed!="boolean"){_b0a.allowNamed=false;}var _b0b="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)";var _b0c="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)";var _b0d=_b0a.allowPort?"(\\:\\d+)?":"";var _b0e="((?:"+_b0b+"\\.)+"+_b0c+"\\.?)";if(_b0a.allowIP){_b0e+="|"+_b00.ipAddress(_b0a);}if(_b0a.allowLocal){_b0e+="|localhost";}if(_b0a.allowNamed){_b0e+="|^[^-][a-zA-Z0-9_-]*";}return "("+_b0e+")"+_b0d;},url:function(_b0f){_b0f=(typeof _b0f=="object")?_b0f:{};if(!("scheme" in _b0f)){_b0f.scheme=[true,false];}var _b10=_afe.buildGroupRE(_b0f.scheme,function(q){if(q){return "(https?|ftps?)\\://";}return "";});var _b11="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _b10+_b00.host(_b0f)+_b11;},emailAddress:function(_b12){_b12=(typeof _b12=="object")?_b12:{};if(typeof _b12.allowCruft!="boolean"){_b12.allowCruft=false;}_b12.allowPort=false;var _b13="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+";var _b14=_b13+"@"+_b00.host(_b12);if(_b12.allowCruft){_b14="<?(mailto\\:)?"+_b14+">?";}return _b14;},emailAddressList:function(_b15){_b15=(typeof _b15=="object")?_b15:{};if(typeof _b15.listSeparator!="string"){_b15.listSeparator="\\s;,";}var _b16=_b00.emailAddress(_b15);var _b17="("+_b16+"\\s*["+_b15.listSeparator+"]\\s*)*"+_b16+"\\s*["+_b15.listSeparator+"]?\\s*";return _b17;},numberFormat:function(_b18){_b18=(typeof _b18=="object")?_b18:{};if(typeof _b18.format=="undefined"){_b18.format="###-###-####";}var _b19=function(_b1a){return _afe.escapeString(_b1a,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d");};return _afe.buildGroupRE(_b18.format,_b19);},ca:{postalCode:function(){return "([A-Z][0-9][A-Z] [0-9][A-Z][0-9])";},province:function(){return "(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)";}},us:{state:function(_b1b){_b1b=(typeof _b1b=="object")?_b1b:{};if(typeof _b1b.allowTerritories!="boolean"){_b1b.allowTerritories=true;}if(typeof _b1b.allowMilitary!="boolean"){_b1b.allowMilitary=true;}var _b1c="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|"+"NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";var _b1d="AS|FM|GU|MH|MP|PW|PR|VI";var _b1e="AA|AE|AP";if(_b1b.allowTerritories){_b1c+="|"+_b1d;}if(_b1b.allowMilitary){_b1c+="|"+_b1e;}return "("+_b1c+")";}}};return _b00;});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"dojox/validate/web":function(){define(["./_base","./regexp"],function(_b1f,_b20){_b1f.isIpAddress=function(_b21,_b22){var re=new RegExp("^"+_b20.ipAddress(_b22)+"$","i");return re.test(_b21);};_b1f.isUrl=function(_b23,_b24){var re=new RegExp("^"+_b20.url(_b24)+"$","i");return re.test(_b23);};_b1f.isEmailAddress=function(_b25,_b26){var re=new RegExp("^"+_b20.emailAddress(_b26)+"$","i");return re.test(_b25);};_b1f.isEmailAddressList=function(_b27,_b28){var re=new RegExp("^"+_b20.emailAddressList(_b28)+"$","i");return re.test(_b27);};_b1f.getEmailAddressList=function(_b29,_b2a){if(!_b2a){_b2a={};}if(!_b2a.listSeparator){_b2a.listSeparator="\\s;,";}if(_b1f.isEmailAddressList(_b29,_b2a)){return _b29.split(new RegExp("\\s*["+_b2a.listSeparator+"]\\s*"));}return [];};return _b1f;});},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(dojo){dojo.getObject("xml.parser",true,dojox);dojox.xml.parser.parse=function(str,_b2b){var _b2c=dojo.doc;var doc;_b2b=_b2b||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _b2d=new DOMParser();doc=_b2d.parseFromString(str,_b2b);var de=doc.documentElement;var _b2e="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_b2e){var _b2f=de.getElementsByTagNameNS(_b2e,"sourcetext")[0];if(_b2f){_b2f=_b2f.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_b2f);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_b2c.implementation&&_b2c.implementation.createDocument){if(str&&dojo.trim(str)&&_b2c.createElement){var tmp=_b2c.createElement("xml");tmp.innerHTML=str;var _b30=_b2c.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_b31){_b30.importNode(_b31,true);});return _b30;}else{return _b2c.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _b32=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_b32.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _b33="";if(node){dojo.forEach(node.childNodes,function(_b34){switch(_b34.nodeType){case 1:case 5:_b33+=dojox.xml.parser.textContent(_b34);break;case 3:case 2:case 4:_b33+=_b34.nodeValue;}});}return _b33;}};dojox.xml.parser.replaceChildren=function(node,_b35){var _b36=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_b37){_b36.push(_b37);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_b36,dojo.destroy);if(!dojo.isArray(_b35)){node.appendChild(_b35);}else{dojo.forEach(_b35,function(_b38){node.appendChild(_b38);});}};dojox.xml.parser.removeChildren=function(node){var _b39=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _b39;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};return dojox.xml.parser;});},"jquery/jquery":function(){(function(_b3a,_b3b){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=_b3a.document?_b3b(_b3a,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}return _b3b(w);};}else{_b3b(_b3a);}}(typeof window!=="undefined"?window:this,function(_b3c,_b3d){var arr=[];var _b3e=arr.slice;var _b3f=arr.concat;var push=arr.push;var _b40=arr.indexOf;var _b41={};var _b42=_b41.toString;var _b43=_b41.hasOwnProperty;var _b44={};var _b45=_b3c.document,_b46="2.1.1",_b47=function(_b48,_b49){return new _b47.fn.init(_b48,_b49);},_b4a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,_b4b=/^-ms-/,_b4c=/-([\da-z])/gi,_b4d=function(all,_b4e){return _b4e.toUpperCase();};_b47.fn=_b47.prototype={jquery:_b46,constructor:_b47,selector:"",length:0,toArray:function(){return _b3e.call(this);},get:function(num){return num!=null?(num<0?this[num+this.length]:this[num]):_b3e.call(this);},pushStack:function(_b4f){var ret=_b47.merge(this.constructor(),_b4f);ret.prevObject=this;ret.context=this.context;return ret;},each:function(_b50,args){return _b47.each(this,_b50,args);},map:function(_b51){return this.pushStack(_b47.map(this,function(elem,i){return _b51.call(elem,i,elem);}));},slice:function(){return this.pushStack(_b3e.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor(null);},push:push,sort:arr.sort,splice:arr.splice};_b47.extend=_b47.fn.extend=function(){var _b52,name,src,copy,_b53,_b54,_b55=arguments[0]||{},i=1,_b56=arguments.length,deep=false;if(typeof _b55==="boolean"){deep=_b55;_b55=arguments[i]||{};i++;}if(typeof _b55!=="object"&&!_b47.isFunction(_b55)){_b55={};}if(i===_b56){_b55=this;i--;}for(;i<_b56;i++){if((_b52=arguments[i])!=null){for(name in _b52){src=_b55[name];copy=_b52[name];if(_b55===copy){continue;}if(deep&&copy&&(_b47.isPlainObject(copy)||(_b53=_b47.isArray(copy)))){if(_b53){_b53=false;_b54=src&&_b47.isArray(src)?src:[];}else{_b54=src&&_b47.isPlainObject(src)?src:{};}_b55[name]=_b47.extend(deep,_b54,copy);}else{if(copy!==undefined){_b55[name]=copy;}}}}}return _b55;};_b47.extend({expando:"jQuery"+(_b46+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isFunction:function(obj){return _b47.type(obj)==="function";},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window;},isNumeric:function(obj){return !_b47.isArray(obj)&&obj-parseFloat(obj)>=0;},isPlainObject:function(obj){if(_b47.type(obj)!=="object"||obj.nodeType||_b47.isWindow(obj)){return false;}if(obj.constructor&&!_b43.call(obj.constructor.prototype,"isPrototypeOf")){return false;}return true;},isEmptyObject:function(obj){var name;for(name in obj){return false;}return true;},type:function(obj){if(obj==null){return obj+"";}return typeof obj==="object"||typeof obj==="function"?_b41[_b42.call(obj)]||"object":typeof obj;},globalEval:function(code){var _b57,_b58=eval;code=_b47.trim(code);if(code){if(code.indexOf("use strict")===1){_b57=_b45.createElement("script");_b57.text=code;_b45.head.appendChild(_b57).parentNode.removeChild(_b57);}else{_b58(code);}}},camelCase:function(_b59){return _b59.replace(_b4b,"ms-").replace(_b4c,_b4d);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,_b5a,args){var _b5b,i=0,_b5c=obj.length,_b5d=_b5e(obj);if(args){if(_b5d){for(;i<_b5c;i++){_b5b=_b5a.apply(obj[i],args);if(_b5b===false){break;}}}else{for(i in obj){_b5b=_b5a.apply(obj[i],args);if(_b5b===false){break;}}}}else{if(_b5d){for(;i<_b5c;i++){_b5b=_b5a.call(obj[i],i,obj[i]);if(_b5b===false){break;}}}else{for(i in obj){_b5b=_b5a.call(obj[i],i,obj[i]);if(_b5b===false){break;}}}}return obj;},trim:function(text){return text==null?"":(text+"").replace(_b4a,"");},makeArray:function(arr,_b5f){var ret=_b5f||[];if(arr!=null){if(_b5e(Object(arr))){_b47.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}return ret;},inArray:function(elem,arr,i){return arr==null?-1:_b40.call(arr,elem,i);},merge:function(_b60,_b61){var len=+_b61.length,j=0,i=_b60.length;for(;j<len;j++){_b60[i++]=_b61[j];}_b60.length=i;return _b60;},grep:function(_b62,_b63,_b64){var _b65,_b66=[],i=0,_b67=_b62.length,_b68=!_b64;for(;i<_b67;i++){_b65=!_b63(_b62[i],i);if(_b65!==_b68){_b66.push(_b62[i]);}}return _b66;},map:function(_b69,_b6a,arg){var _b6b,i=0,_b6c=_b69.length,_b6d=_b5e(_b69),ret=[];if(_b6d){for(;i<_b6c;i++){_b6b=_b6a(_b69[i],i,arg);if(_b6b!=null){ret.push(_b6b);}}}else{for(i in _b69){_b6b=_b6a(_b69[i],i,arg);if(_b6b!=null){ret.push(_b6b);}}}return _b3f.apply([],ret);},guid:1,proxy:function(fn,_b6e){var tmp,args,_b6f;if(typeof _b6e==="string"){tmp=fn[_b6e];_b6e=fn;fn=tmp;}if(!_b47.isFunction(fn)){return undefined;}args=_b3e.call(arguments,2);_b6f=function(){return fn.apply(_b6e||this,args.concat(_b3e.call(arguments)));};_b6f.guid=fn.guid=fn.guid||_b47.guid++;return _b6f;},now:Date.now,support:_b44});_b47.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){_b41["[object "+name+"]"]=name.toLowerCase();});function _b5e(obj){var _b70=obj.length,type=_b47.type(obj);if(type==="function"||_b47.isWindow(obj)){return false;}if(obj.nodeType===1&&_b70){return true;}return type==="array"||_b70===0||typeof _b70==="number"&&_b70>0&&(_b70-1) in obj;};var _b71=(function(_b72){var i,_b44,Expr,_b73,_b74,_b75,_b76,_b77,_b78,_b79,_b7a,_b7b,_b45,_b7c,_b7d,_b7e,_b7f,_b80,_b81,_b82="sizzle"+-(new Date()),_b83=_b72.document,_b84=0,done=0,_b85=_b86(),_b87=_b86(),_b88=_b86(),_b89=function(a,b){if(a===b){_b7a=true;}return 0;},_b8a=typeof undefined,_b8b=1<<31,_b43=({}).hasOwnProperty,arr=[],pop=arr.pop,_b8c=arr.push,push=arr.push,_b3e=arr.slice,_b40=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i;}}return -1;},_b8d="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",_b8e="[\\x20\\t\\r\\n\\f]",_b8f="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",_b90=_b8f.replace("w","w#"),_b91="\\["+_b8e+"*("+_b8f+")(?:"+_b8e+"*([*^$|!~]?=)"+_b8e+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+_b90+"))|)"+_b8e+"*\\]",_b92=":("+_b8f+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+_b91+")*)|"+".*"+")\\)|)",_b4a=new RegExp("^"+_b8e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_b8e+"+$","g"),_b93=new RegExp("^"+_b8e+"*,"+_b8e+"*"),_b94=new RegExp("^"+_b8e+"*([>+~]|"+_b8e+")"+_b8e+"*"),_b95=new RegExp("="+_b8e+"*([^\\]'\"]*?)"+_b8e+"*\\]","g"),_b96=new RegExp(_b92),_b97=new RegExp("^"+_b90+"$"),_b98={"ID":new RegExp("^#("+_b8f+")"),"CLASS":new RegExp("^\\.("+_b8f+")"),"TAG":new RegExp("^("+_b8f.replace("w","w*")+")"),"ATTR":new RegExp("^"+_b91),"PSEUDO":new RegExp("^"+_b92),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_b8e+"*(even|odd|(([+-]|)(\\d*)n|)"+_b8e+"*(?:([+-]|)"+_b8e+"*(\\d+)|))"+_b8e+"*\\)|)","i"),"bool":new RegExp("^(?:"+_b8d+")$","i"),"needsContext":new RegExp("^"+_b8e+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_b8e+"*((?:-\\d)?\\d*)"+_b8e+"*\\)|)(?=[^-]|$)","i")},_b99=/^(?:input|select|textarea|button)$/i,_b9a=/^h\d$/i,_b9b=/^[^{]+\{\s*\[native \w/,_b9c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_b9d=/[+~]/,_b9e=/'|\\/g,_b9f=new RegExp("\\\\([\\da-f]{1,6}"+_b8e+"?|("+_b8e+")|.)","ig"),_ba0=function(_ba1,_ba2,_ba3){var high="0x"+_ba2-65536;return high!==high||_ba3?_ba2:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320);};try{push.apply((arr=_b3e.call(_b83.childNodes)),_b83.childNodes);arr[_b83.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(_ba4,els){_b8c.apply(_ba4,_b3e.call(els));}:function(_ba5,els){var j=_ba5.length,i=0;while((_ba5[j++]=els[i++])){}_ba5.length=j-1;}};}function _b71(_ba6,_ba7,_ba8,seed){var _ba9,elem,m,_baa,i,_bab,old,nid,_bac,_bad;if((_ba7?_ba7.ownerDocument||_ba7:_b83)!==_b45){_b7b(_ba7);}_ba7=_ba7||_b45;_ba8=_ba8||[];if(!_ba6||typeof _ba6!=="string"){return _ba8;}if((_baa=_ba7.nodeType)!==1&&_baa!==9){return [];}if(_b7d&&!seed){if((_ba9=_b9c.exec(_ba6))){if((m=_ba9[1])){if(_baa===9){elem=_ba7.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){_ba8.push(elem);return _ba8;}}else{return _ba8;}}else{if(_ba7.ownerDocument&&(elem=_ba7.ownerDocument.getElementById(m))&&_b81(_ba7,elem)&&elem.id===m){_ba8.push(elem);return _ba8;}}}else{if(_ba9[2]){push.apply(_ba8,_ba7.getElementsByTagName(_ba6));return _ba8;}else{if((m=_ba9[3])&&_b44.getElementsByClassName&&_ba7.getElementsByClassName){push.apply(_ba8,_ba7.getElementsByClassName(m));return _ba8;}}}}if(_b44.qsa&&(!_b7e||!_b7e.test(_ba6))){nid=old=_b82;_bac=_ba7;_bad=_baa===9&&_ba6;if(_baa===1&&_ba7.nodeName.toLowerCase()!=="object"){_bab=_b75(_ba6);if((old=_ba7.getAttribute("id"))){nid=old.replace(_b9e,"\\$&");}else{_ba7.setAttribute("id",nid);}nid="[id='"+nid+"'] ";i=_bab.length;while(i--){_bab[i]=nid+_bae(_bab[i]);}_bac=_b9d.test(_ba6)&&_baf(_ba7.parentNode)||_ba7;_bad=_bab.join(",");}if(_bad){try{push.apply(_ba8,_bac.querySelectorAll(_bad));return _ba8;}catch(qsaError){}finally{if(!old){_ba7.removeAttribute("id");}}}}}return _b77(_ba6.replace(_b4a,"$1"),_ba7,_ba8,seed);};function _b86(){var keys=[];function _bb0(key,_bb1){if(keys.push(key+" ")>Expr.cacheLength){delete _bb0[keys.shift()];}return (_bb0[key+" "]=_bb1);};return _bb0;};function _bb2(fn){fn[_b82]=true;return fn;};function _bb3(fn){var div=_b45.createElement("div");try{return !!fn(div);}catch(e){return false;}finally{if(div.parentNode){div.parentNode.removeChild(div);}div=null;}};function _bb4(_bb5,_bb6){var arr=_bb5.split("|"),i=_bb5.length;while(i--){Expr.attrHandle[arr[i]]=_bb6;}};function _bb7(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||_b8b)-(~a.sourceIndex||_b8b);if(diff){return diff;}if(cur){while((cur=cur.nextSibling)){if(cur===b){return -1;}}}return a?1:-1;};function _bb8(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};};function _bb9(type){return function(elem){var name=elem.nodeName.toLowerCase();return (name==="input"||name==="button")&&elem.type===type;};};function _bba(fn){return _bb2(function(_bbb){_bbb=+_bbb;return _bb2(function(seed,_bbc){var j,_bbd=fn([],seed.length,_bbb),i=_bbd.length;while(i--){if(seed[(j=_bbd[i])]){seed[j]=!(_bbc[j]=seed[j]);}}});});};function _baf(_bbe){return _bbe&&typeof _bbe.getElementsByTagName!==_b8a&&_bbe;};_b44=_b71.support={};_b74=_b71.isXML=function(elem){var _bbf=elem&&(elem.ownerDocument||elem).documentElement;return _bbf?_bbf.nodeName!=="HTML":false;};_b7b=_b71.setDocument=function(node){var _bc0,doc=node?node.ownerDocument||node:_b83,_bc1=doc.defaultView;if(doc===_b45||doc.nodeType!==9||!doc.documentElement){return _b45;}_b45=doc;_b7c=doc.documentElement;_b7d=!_b74(doc);if(_bc1&&_bc1!==_bc1.top){if(_bc1.addEventListener){_bc1.addEventListener("unload",function(){_b7b();},false);}else{if(_bc1.attachEvent){_bc1.attachEvent("onunload",function(){_b7b();});}}}_b44.attributes=_bb3(function(div){div.className="i";return !div.getAttribute("className");});_b44.getElementsByTagName=_bb3(function(div){div.appendChild(doc.createComment(""));return !div.getElementsByTagName("*").length;});_b44.getElementsByClassName=_b9b.test(doc.getElementsByClassName)&&_bb3(function(div){div.innerHTML="<div class='a'></div><div class='a i'></div>";div.firstChild.className="i";return div.getElementsByClassName("i").length===2;});_b44.getById=_bb3(function(div){_b7c.appendChild(div).id=_b82;return !doc.getElementsByName||!doc.getElementsByName(_b82).length;});if(_b44.getById){Expr.find["ID"]=function(id,_bc2){if(typeof _bc2.getElementById!==_b8a&&_b7d){var m=_bc2.getElementById(id);return m&&m.parentNode?[m]:[];}};Expr.filter["ID"]=function(id){var _bc3=id.replace(_b9f,_ba0);return function(elem){return elem.getAttribute("id")===_bc3;};};}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var _bc4=id.replace(_b9f,_ba0);return function(elem){var node=typeof elem.getAttributeNode!==_b8a&&elem.getAttributeNode("id");return node&&node.value===_bc4;};};}Expr.find["TAG"]=_b44.getElementsByTagName?function(tag,_bc5){if(typeof _bc5.getElementsByTagName!==_b8a){return _bc5.getElementsByTagName(tag);}}:function(tag,_bc6){var elem,tmp=[],i=0,_bc7=_bc6.getElementsByTagName(tag);if(tag==="*"){while((elem=_bc7[i++])){if(elem.nodeType===1){tmp.push(elem);}}return tmp;}return _bc7;};Expr.find["CLASS"]=_b44.getElementsByClassName&&function(_bc8,_bc9){if(typeof _bc9.getElementsByClassName!==_b8a&&_b7d){return _bc9.getElementsByClassName(_bc8);}};_b7f=[];_b7e=[];if((_b44.qsa=_b9b.test(doc.querySelectorAll))){_bb3(function(div){div.innerHTML="<select msallowclip=''><option selected=''></option></select>";if(div.querySelectorAll("[msallowclip^='']").length){_b7e.push("[*^$]="+_b8e+"*(?:''|\"\")");}if(!div.querySelectorAll("[selected]").length){_b7e.push("\\["+_b8e+"*(?:value|"+_b8d+")");}if(!div.querySelectorAll(":checked").length){_b7e.push(":checked");}});_bb3(function(div){var _bca=doc.createElement("input");_bca.setAttribute("type","hidden");div.appendChild(_bca).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){_b7e.push("name"+_b8e+"*[*^$|!~]?=");}if(!div.querySelectorAll(":enabled").length){_b7e.push(":enabled",":disabled");}div.querySelectorAll("*,:x");_b7e.push(",.*:");});}if((_b44.matchesSelector=_b9b.test((_b80=_b7c.matches||_b7c.webkitMatchesSelector||_b7c.mozMatchesSelector||_b7c.oMatchesSelector||_b7c.msMatchesSelector)))){_bb3(function(div){_b44.disconnectedMatch=_b80.call(div,"div");_b80.call(div,"[s!='']:x");_b7f.push("!=",_b92);});}_b7e=_b7e.length&&new RegExp(_b7e.join("|"));_b7f=_b7f.length&&new RegExp(_b7f.join("|"));_bc0=_b9b.test(_b7c.compareDocumentPosition);_b81=_bc0||_b9b.test(_b7c.contains)?function(a,b){var _bcb=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(_bcb.contains?_bcb.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}return false;};_b89=_bc0?function(a,b){if(a===b){_b7a=true;return 0;}var _bcc=!a.compareDocumentPosition-!b.compareDocumentPosition;if(_bcc){return _bcc;}_bcc=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(_bcc&1||(!_b44.sortDetached&&b.compareDocumentPosition(a)===_bcc)){if(a===doc||a.ownerDocument===_b83&&_b81(_b83,a)){return -1;}if(b===doc||b.ownerDocument===_b83&&_b81(_b83,b)){return 1;}return _b79?(_b40.call(_b79,a)-_b40.call(_b79,b)):0;}return _bcc&4?-1:1;}:function(a,b){if(a===b){_b7a=true;return 0;}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:_b79?(_b40.call(_b79,a)-_b40.call(_b79,b)):0;}else{if(aup===bup){return _bb7(a,b);}}cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}while(ap[i]===bp[i]){i++;}return i?_bb7(ap[i],bp[i]):ap[i]===_b83?-1:bp[i]===_b83?1:0;};return doc;};_b71.matches=function(expr,_bcd){return _b71(expr,null,null,_bcd);};_b71.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==_b45){_b7b(elem);}expr=expr.replace(_b95,"='$1']");if(_b44.matchesSelector&&_b7d&&(!_b7f||!_b7f.test(expr))&&(!_b7e||!_b7e.test(expr))){try{var ret=_b80.call(elem,expr);if(ret||_b44.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}return _b71(expr,_b45,null,[elem]).length>0;};_b71.contains=function(_bce,elem){if((_bce.ownerDocument||_bce)!==_b45){_b7b(_bce);}return _b81(_bce,elem);};_b71.attr=function(elem,name){if((elem.ownerDocument||elem)!==_b45){_b7b(elem);}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&_b43.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!_b7d):undefined;return val!==undefined?val:_b44.attributes||!_b7d?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};_b71.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};_b71.uniqueSort=function(_bcf){var elem,_bd0=[],j=0,i=0;_b7a=!_b44.detectDuplicates;_b79=!_b44.sortStable&&_bcf.slice(0);_bcf.sort(_b89);if(_b7a){while((elem=_bcf[i++])){if(elem===_bcf[i]){j=_bd0.push(i);}}while(j--){_bcf.splice(_bd0[j],1);}}_b79=null;return _bcf;};_b73=_b71.getText=function(elem){var node,ret="",i=0,_bd1=elem.nodeType;if(!_bd1){while((node=elem[i++])){ret+=_b73(node);}}else{if(_bd1===1||_bd1===9||_bd1===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=_b73(elem);}}}else{if(_bd1===3||_bd1===4){return elem.nodeValue;}}}return ret;};Expr=_b71.selectors={cacheLength:50,createPseudo:_bb2,match:_b98,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(_bd2){_bd2[1]=_bd2[1].replace(_b9f,_ba0);_bd2[3]=(_bd2[3]||_bd2[4]||_bd2[5]||"").replace(_b9f,_ba0);if(_bd2[2]==="~="){_bd2[3]=" "+_bd2[3]+" ";}return _bd2.slice(0,4);},"CHILD":function(_bd3){_bd3[1]=_bd3[1].toLowerCase();if(_bd3[1].slice(0,3)==="nth"){if(!_bd3[3]){_b71.error(_bd3[0]);}_bd3[4]=+(_bd3[4]?_bd3[5]+(_bd3[6]||1):2*(_bd3[3]==="even"||_bd3[3]==="odd"));_bd3[5]=+((_bd3[7]+_bd3[8])||_bd3[3]==="odd");}else{if(_bd3[3]){_b71.error(_bd3[0]);}}return _bd3;},"PSEUDO":function(_bd4){var _bd5,_bd6=!_bd4[6]&&_bd4[2];if(_b98["CHILD"].test(_bd4[0])){return null;}if(_bd4[3]){_bd4[2]=_bd4[4]||_bd4[5]||"";}else{if(_bd6&&_b96.test(_bd6)&&(_bd5=_b75(_bd6,true))&&(_bd5=_bd6.indexOf(")",_bd6.length-_bd5)-_bd6.length)){_bd4[0]=_bd4[0].slice(0,_bd5);_bd4[2]=_bd6.slice(0,_bd5);}}return _bd4.slice(0,3);}},filter:{"TAG":function(_bd7){var _bd8=_bd7.replace(_b9f,_ba0).toLowerCase();return _bd7==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===_bd8;};},"CLASS":function(_bd9){var _bda=_b85[_bd9+" "];return _bda||(_bda=new RegExp("(^|"+_b8e+")"+_bd9+"("+_b8e+"|$)"))&&_b85(_bd9,function(elem){return _bda.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==_b8a&&elem.getAttribute("class")||"");});},"ATTR":function(name,_bdb,_bdc){return function(elem){var _bdd=_b71.attr(elem,name);if(_bdd==null){return _bdb==="!=";}if(!_bdb){return true;}_bdd+="";return _bdb==="="?_bdd===_bdc:_bdb==="!="?_bdd!==_bdc:_bdb==="^="?_bdc&&_bdd.indexOf(_bdc)===0:_bdb==="*="?_bdc&&_bdd.indexOf(_bdc)>-1:_bdb==="$="?_bdc&&_bdd.slice(-_bdc.length)===_bdc:_bdb==="~="?(" "+_bdd+" ").indexOf(_bdc)>-1:_bdb==="|="?_bdd===_bdc||_bdd.slice(0,_bdc.length+1)===_bdc+"-":false;};},"CHILD":function(type,what,_bde,_bdf,last){var _be0=type.slice(0,3)!=="nth",_be1=type.slice(-4)!=="last",_be2=what==="of-type";return _bdf===1&&last===0?function(elem){return !!elem.parentNode;}:function(elem,_be3,xml){var _be4,_be5,node,diff,_be6,_be7,dir=_be0!==_be1?"nextSibling":"previousSibling",_be8=elem.parentNode,name=_be2&&elem.nodeName.toLowerCase(),_be9=!xml&&!_be2;if(_be8){if(_be0){while(dir){node=elem;while((node=node[dir])){if(_be2?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}_be7=dir=type==="only"&&!_be7&&"nextSibling";}return true;}_be7=[_be1?_be8.firstChild:_be8.lastChild];if(_be1&&_be9){_be5=_be8[_b82]||(_be8[_b82]={});_be4=_be5[type]||[];_be6=_be4[0]===_b84&&_be4[1];diff=_be4[0]===_b84&&_be4[2];node=_be6&&_be8.childNodes[_be6];while((node=++_be6&&node&&node[dir]||(diff=_be6=0)||_be7.pop())){if(node.nodeType===1&&++diff&&node===elem){_be5[type]=[_b84,_be6,diff];break;}}}else{if(_be9&&(_be4=(elem[_b82]||(elem[_b82]={}))[type])&&_be4[0]===_b84){diff=_be4[1];}else{while((node=++_be6&&node&&node[dir]||(diff=_be6=0)||_be7.pop())){if((_be2?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(_be9){(node[_b82]||(node[_b82]={}))[type]=[_b84,diff];}if(node===elem){break;}}}}}diff-=last;return diff===_bdf||(diff%_bdf===0&&diff/_bdf>=0);}};},"PSEUDO":function(_bea,_beb){var args,fn=Expr.pseudos[_bea]||Expr.setFilters[_bea.toLowerCase()]||_b71.error("unsupported pseudo: "+_bea);if(fn[_b82]){return fn(_beb);}if(fn.length>1){args=[_bea,_bea,"",_beb];return Expr.setFilters.hasOwnProperty(_bea.toLowerCase())?_bb2(function(seed,_bec){var idx,_bed=fn(seed,_beb),i=_bed.length;while(i--){idx=_b40.call(seed,_bed[i]);seed[idx]=!(_bec[idx]=_bed[i]);}}):function(elem){return fn(elem,0,args);};}return fn;}},pseudos:{"not":_bb2(function(_bee){var _bef=[],_bf0=[],_bf1=_b76(_bee.replace(_b4a,"$1"));return _bf1[_b82]?_bb2(function(seed,_bf2,_bf3,xml){var elem,_bf4=_bf1(seed,null,xml,[]),i=seed.length;while(i--){if((elem=_bf4[i])){seed[i]=!(_bf2[i]=elem);}}}):function(elem,_bf5,xml){_bef[0]=elem;_bf1(_bef,null,xml,_bf0);return !_bf0.pop();};}),"has":_bb2(function(_bf6){return function(elem){return _b71(_bf6,elem).length>0;};}),"contains":_bb2(function(text){return function(elem){return (elem.textContent||elem.innerText||_b73(elem)).indexOf(text)>-1;};}),"lang":_bb2(function(lang){if(!_b97.test(lang||"")){_b71.error("unsupported lang: "+lang);}lang=lang.replace(_b9f,_ba0).toLowerCase();return function(elem){var _bf7;do{if((_bf7=_b7d?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){_bf7=_bf7.toLowerCase();return _bf7===lang||_bf7.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=_b72.location&&_b72.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===_b7c;},"focus":function(elem){return elem===_b45.activeElement&&(!_b45.hasFocus||_b45.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var _bf8=elem.nodeName.toLowerCase();return (_bf8==="input"&&!!elem.checked)||(_bf8==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}return true;},"parent":function(elem){return !Expr.pseudos["empty"](elem);},"header":function(elem){return _b9a.test(elem.nodeName);},"input":function(elem){return _b99.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":_bba(function(){return [0];}),"last":_bba(function(_bf9,_bfa){return [_bfa-1];}),"eq":_bba(function(_bfb,_bfc,_bfd){return [_bfd<0?_bfd+_bfc:_bfd];}),"even":_bba(function(_bfe,_bff){var i=0;for(;i<_bff;i+=2){_bfe.push(i);}return _bfe;}),"odd":_bba(function(_c00,_c01){var i=1;for(;i<_c01;i+=2){_c00.push(i);}return _c00;}),"lt":_bba(function(_c02,_c03,_c04){var i=_c04<0?_c04+_c03:_c04;for(;--i>=0;){_c02.push(i);}return _c02;}),"gt":_bba(function(_c05,_c06,_c07){var i=_c07<0?_c07+_c06:_c07;for(;++i<_c06;){_c05.push(i);}return _c05;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in {radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=_bb8(i);}for(i in {submit:true,reset:true}){Expr.pseudos[i]=_bb9(i);}function _c08(){};_c08.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new _c08();_b75=_b71.tokenize=function(_c09,_c0a){var _c0b,_c0c,_c0d,type,_c0e,_c0f,_c10,_c11=_b87[_c09+" "];if(_c11){return _c0a?0:_c11.slice(0);}_c0e=_c09;_c0f=[];_c10=Expr.preFilter;while(_c0e){if(!_c0b||(_c0c=_b93.exec(_c0e))){if(_c0c){_c0e=_c0e.slice(_c0c[0].length)||_c0e;}_c0f.push((_c0d=[]));}_c0b=false;if((_c0c=_b94.exec(_c0e))){_c0b=_c0c.shift();_c0d.push({value:_c0b,type:_c0c[0].replace(_b4a," ")});_c0e=_c0e.slice(_c0b.length);}for(type in Expr.filter){if((_c0c=_b98[type].exec(_c0e))&&(!_c10[type]||(_c0c=_c10[type](_c0c)))){_c0b=_c0c.shift();_c0d.push({value:_c0b,type:type,matches:_c0c});_c0e=_c0e.slice(_c0b.length);}}if(!_c0b){break;}}return _c0a?_c0e.length:_c0e?_b71.error(_c09):_b87(_c09,_c0f).slice(0);};function _bae(_c12){var i=0,len=_c12.length,_c13="";for(;i<len;i++){_c13+=_c12[i].value;}return _c13;};function _c14(_c15,_c16,base){var dir=_c16.dir,_c17=base&&dir==="parentNode",_c18=done++;return _c16.first?function(elem,_c19,xml){while((elem=elem[dir])){if(elem.nodeType===1||_c17){return _c15(elem,_c19,xml);}}}:function(elem,_c1a,xml){var _c1b,_c1c,_c1d=[_b84,_c18];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||_c17){if(_c15(elem,_c1a,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||_c17){_c1c=elem[_b82]||(elem[_b82]={});if((_c1b=_c1c[dir])&&_c1b[0]===_b84&&_c1b[1]===_c18){return (_c1d[2]=_c1b[2]);}else{_c1c[dir]=_c1d;if((_c1d[2]=_c15(elem,_c1a,xml))){return true;}}}}}};};function _c1e(_c1f){return _c1f.length>1?function(elem,_c20,xml){var i=_c1f.length;while(i--){if(!_c1f[i](elem,_c20,xml)){return false;}}return true;}:_c1f[0];};function _c21(_c22,_c23,_c24){var i=0,len=_c23.length;for(;i<len;i++){_b71(_c22,_c23[i],_c24);}return _c24;};function _c25(_c26,map,_c27,_c28,xml){var elem,_c29=[],i=0,len=_c26.length,_c2a=map!=null;for(;i<len;i++){if((elem=_c26[i])){if(!_c27||_c27(elem,_c28,xml)){_c29.push(elem);if(_c2a){map.push(i);}}}}return _c29;};function _c2b(_c2c,_c2d,_c2e,_c2f,_c30,_c31){if(_c2f&&!_c2f[_b82]){_c2f=_c2b(_c2f);}if(_c30&&!_c30[_b82]){_c30=_c2b(_c30,_c31);}return _bb2(function(seed,_c32,_c33,xml){var temp,i,elem,_c34=[],_c35=[],_c36=_c32.length,_c37=seed||_c21(_c2d||"*",_c33.nodeType?[_c33]:_c33,[]),_c38=_c2c&&(seed||!_c2d)?_c25(_c37,_c34,_c2c,_c33,xml):_c37,_c39=_c2e?_c30||(seed?_c2c:_c36||_c2f)?[]:_c32:_c38;if(_c2e){_c2e(_c38,_c39,_c33,xml);}if(_c2f){temp=_c25(_c39,_c35);_c2f(temp,[],_c33,xml);i=temp.length;while(i--){if((elem=temp[i])){_c39[_c35[i]]=!(_c38[_c35[i]]=elem);}}}if(seed){if(_c30||_c2c){if(_c30){temp=[];i=_c39.length;while(i--){if((elem=_c39[i])){temp.push((_c38[i]=elem));}}_c30(null,(_c39=[]),temp,xml);}i=_c39.length;while(i--){if((elem=_c39[i])&&(temp=_c30?_b40.call(seed,elem):_c34[i])>-1){seed[temp]=!(_c32[temp]=elem);}}}}else{_c39=_c25(_c39===_c32?_c39.splice(_c36,_c39.length):_c39);if(_c30){_c30(null,_c32,_c39,xml);}else{push.apply(_c32,_c39);}}});};function _c3a(_c3b){var _c3c,_c3d,j,len=_c3b.length,_c3e=Expr.relative[_c3b[0].type],_c3f=_c3e||Expr.relative[" "],i=_c3e?1:0,_c40=_c14(function(elem){return elem===_c3c;},_c3f,true),_c41=_c14(function(elem){return _b40.call(_c3c,elem)>-1;},_c3f,true),_c42=[function(elem,_c43,xml){return (!_c3e&&(xml||_c43!==_b78))||((_c3c=_c43).nodeType?_c40(elem,_c43,xml):_c41(elem,_c43,xml));}];for(;i<len;i++){if((_c3d=Expr.relative[_c3b[i].type])){_c42=[_c14(_c1e(_c42),_c3d)];}else{_c3d=Expr.filter[_c3b[i].type].apply(null,_c3b[i].matches);if(_c3d[_b82]){j=++i;for(;j<len;j++){if(Expr.relative[_c3b[j].type]){break;}}return _c2b(i>1&&_c1e(_c42),i>1&&_bae(_c3b.slice(0,i-1).concat({value:_c3b[i-2].type===" "?"*":""})).replace(_b4a,"$1"),_c3d,i<j&&_c3a(_c3b.slice(i,j)),j<len&&_c3a((_c3b=_c3b.slice(j))),j<len&&_bae(_c3b));}_c42.push(_c3d);}}return _c1e(_c42);};function _c44(_c45,_c46){var _c47=_c46.length>0,_c48=_c45.length>0,_c49=function(seed,_c4a,xml,_c4b,_c4c){var elem,j,_c4d,_c4e=0,i="0",_c4f=seed&&[],_c50=[],_c51=_b78,_c52=seed||_c48&&Expr.find["TAG"]("*",_c4c),_c53=(_b84+=_c51==null?1:Math.random()||0.1),len=_c52.length;if(_c4c){_b78=_c4a!==_b45&&_c4a;}for(;i!==len&&(elem=_c52[i])!=null;i++){if(_c48&&elem){j=0;while((_c4d=_c45[j++])){if(_c4d(elem,_c4a,xml)){_c4b.push(elem);break;}}if(_c4c){_b84=_c53;}}if(_c47){if((elem=!_c4d&&elem)){_c4e--;}if(seed){_c4f.push(elem);}}}_c4e+=i;if(_c47&&i!==_c4e){j=0;while((_c4d=_c46[j++])){_c4d(_c4f,_c50,_c4a,xml);}if(seed){if(_c4e>0){while(i--){if(!(_c4f[i]||_c50[i])){_c50[i]=pop.call(_c4b);}}}_c50=_c25(_c50);}push.apply(_c4b,_c50);if(_c4c&&!seed&&_c50.length>0&&(_c4e+_c46.length)>1){_b71.uniqueSort(_c4b);}}if(_c4c){_b84=_c53;_b78=_c51;}return _c4f;};return _c47?_bb2(_c49):_c49;};_b76=_b71.compile=function(_c54,_c55){var i,_c56=[],_c57=[],_c58=_b88[_c54+" "];if(!_c58){if(!_c55){_c55=_b75(_c54);}i=_c55.length;while(i--){_c58=_c3a(_c55[i]);if(_c58[_b82]){_c56.push(_c58);}else{_c57.push(_c58);}}_c58=_b88(_c54,_c44(_c57,_c56));_c58.selector=_c54;}return _c58;};_b77=_b71.select=function(_c59,_c5a,_c5b,seed){var i,_c5c,_c5d,type,find,_c5e=typeof _c59==="function"&&_c59,_c5f=!seed&&_b75((_c59=_c5e.selector||_c59));_c5b=_c5b||[];if(_c5f.length===1){_c5c=_c5f[0]=_c5f[0].slice(0);if(_c5c.length>2&&(_c5d=_c5c[0]).type==="ID"&&_b44.getById&&_c5a.nodeType===9&&_b7d&&Expr.relative[_c5c[1].type]){_c5a=(Expr.find["ID"](_c5d.matches[0].replace(_b9f,_ba0),_c5a)||[])[0];if(!_c5a){return _c5b;}else{if(_c5e){_c5a=_c5a.parentNode;}}_c59=_c59.slice(_c5c.shift().value.length);}i=_b98["needsContext"].test(_c59)?0:_c5c.length;while(i--){_c5d=_c5c[i];if(Expr.relative[(type=_c5d.type)]){break;}if((find=Expr.find[type])){if((seed=find(_c5d.matches[0].replace(_b9f,_ba0),_b9d.test(_c5c[0].type)&&_baf(_c5a.parentNode)||_c5a))){_c5c.splice(i,1);_c59=seed.length&&_bae(_c5c);if(!_c59){push.apply(_c5b,seed);return _c5b;}break;}}}}(_c5e||_b76(_c59,_c5f))(seed,_c5a,!_b7d,_c5b,_b9d.test(_c59)&&_baf(_c5a.parentNode)||_c5a);return _c5b;};_b44.sortStable=_b82.split("").sort(_b89).join("")===_b82;_b44.detectDuplicates=!!_b7a;_b7b();_b44.sortDetached=_bb3(function(div1){return div1.compareDocumentPosition(_b45.createElement("div"))&1;});if(!_bb3(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#";})){_bb4("type|href|height|width",function(elem,name,_c60){if(!_c60){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}if(!_b44.attributes||!_bb3(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")==="";})){_bb4("value",function(elem,name,_c61){if(!_c61&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}if(!_bb3(function(div){return div.getAttribute("disabled")==null;})){_bb4(_b8d,function(elem,name,_c62){var val;if(!_c62){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}return _b71;})(_b3c);_b47.find=_b71;_b47.expr=_b71.selectors;_b47.expr[":"]=_b47.expr.pseudos;_b47.unique=_b71.uniqueSort;_b47.text=_b71.getText;_b47.isXMLDoc=_b71.isXML;_b47.contains=_b71.contains;var _c63=_b47.expr.match.needsContext;var _c64=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);var _c65=/^.[^:#\[\.,]*$/;function _c66(_c67,_c68,not){if(_b47.isFunction(_c68)){return _b47.grep(_c67,function(elem,i){return !!_c68.call(elem,i,elem)!==not;});}if(_c68.nodeType){return _b47.grep(_c67,function(elem){return (elem===_c68)!==not;});}if(typeof _c68==="string"){if(_c65.test(_c68)){return _b47.filter(_c68,_c67,not);}_c68=_b47.filter(_c68,_c67);}return _b47.grep(_c67,function(elem){return (_b40.call(_c68,elem)>=0)!==not;});};_b47.filter=function(expr,_c69,not){var elem=_c69[0];if(not){expr=":not("+expr+")";}return _c69.length===1&&elem.nodeType===1?_b47.find.matchesSelector(elem,expr)?[elem]:[]:_b47.find.matches(expr,_b47.grep(_c69,function(elem){return elem.nodeType===1;}));};_b47.fn.extend({find:function(_c6a){var i,len=this.length,ret=[],self=this;if(typeof _c6a!=="string"){return this.pushStack(_b47(_c6a).filter(function(){for(i=0;i<len;i++){if(_b47.contains(self[i],this)){return true;}}}));}for(i=0;i<len;i++){_b47.find(_c6a,self[i],ret);}ret=this.pushStack(len>1?_b47.unique(ret):ret);ret.selector=this.selector?this.selector+" "+_c6a:_c6a;return ret;},filter:function(_c6b){return this.pushStack(_c66(this,_c6b||[],false));},not:function(_c6c){return this.pushStack(_c66(this,_c6c||[],true));},is:function(_c6d){return !!_c66(this,typeof _c6d==="string"&&_c63.test(_c6d)?_b47(_c6d):_c6d||[],false).length;}});var _c6e,_c6f=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=_b47.fn.init=function(_c70,_c71){var _c72,elem;if(!_c70){return this;}if(typeof _c70==="string"){if(_c70[0]==="<"&&_c70[_c70.length-1]===">"&&_c70.length>=3){_c72=[null,_c70,null];}else{_c72=_c6f.exec(_c70);}if(_c72&&(_c72[1]||!_c71)){if(_c72[1]){_c71=_c71 instanceof _b47?_c71[0]:_c71;_b47.merge(this,_b47.parseHTML(_c72[1],_c71&&_c71.nodeType?_c71.ownerDocument||_c71:_b45,true));if(_c64.test(_c72[1])&&_b47.isPlainObject(_c71)){for(_c72 in _c71){if(_b47.isFunction(this[_c72])){this[_c72](_c71[_c72]);}else{this.attr(_c72,_c71[_c72]);}}}return this;}else{elem=_b45.getElementById(_c72[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem;}this.context=_b45;this.selector=_c70;return this;}}else{if(!_c71||_c71.jquery){return (_c71||_c6e).find(_c70);}else{return this.constructor(_c71).find(_c70);}}}else{if(_c70.nodeType){this.context=this[0]=_c70;this.length=1;return this;}else{if(_b47.isFunction(_c70)){return typeof _c6e.ready!=="undefined"?_c6e.ready(_c70):_c70(_b47);}}}if(_c70.selector!==undefined){this.selector=_c70.selector;this.context=_c70.context;}return _b47.makeArray(_c70,this);};init.prototype=_b47.fn;_c6e=_b47(_b45);var _c73=/^(?:parents|prev(?:Until|All))/,_c74={children:true,contents:true,next:true,prev:true};_b47.extend({dir:function(elem,dir,_c75){var _c76=[],_c77=_c75!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(_c77&&_b47(elem).is(_c75)){break;}_c76.push(elem);}}return _c76;},sibling:function(n,elem){var _c78=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){_c78.push(n);}}return _c78;}});_b47.fn.extend({has:function(_c79){var _c7a=_b47(_c79,this),l=_c7a.length;return this.filter(function(){var i=0;for(;i<l;i++){if(_b47.contains(this,_c7a[i])){return true;}}});},closest:function(_c7b,_c7c){var cur,i=0,l=this.length,_c7d=[],pos=_c63.test(_c7b)||typeof _c7b!=="string"?_b47(_c7b,_c7c||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==_c7c;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&_b47.find.matchesSelector(cur,_c7b))){_c7d.push(cur);break;}}}return this.pushStack(_c7d.length>1?_b47.unique(_c7d):_c7d);},index:function(elem){if(!elem){return (this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;}if(typeof elem==="string"){return _b40.call(_b47(elem),this[0]);}return _b40.call(this,elem.jquery?elem[0]:elem);},add:function(_c7e,_c7f){return this.pushStack(_b47.unique(_b47.merge(this.get(),_b47(_c7e,_c7f))));},addBack:function(_c80){return this.add(_c80==null?this.prevObject:this.prevObject.filter(_c80));}});function _c81(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur;};_b47.each({parent:function(elem){var _c82=elem.parentNode;return _c82&&_c82.nodeType!==11?_c82:null;},parents:function(elem){return _b47.dir(elem,"parentNode");},parentsUntil:function(elem,i,_c83){return _b47.dir(elem,"parentNode",_c83);},next:function(elem){return _c81(elem,"nextSibling");},prev:function(elem){return _c81(elem,"previousSibling");},nextAll:function(elem){return _b47.dir(elem,"nextSibling");},prevAll:function(elem){return _b47.dir(elem,"previousSibling");},nextUntil:function(elem,i,_c84){return _b47.dir(elem,"nextSibling",_c84);},prevUntil:function(elem,i,_c85){return _b47.dir(elem,"previousSibling",_c85);},siblings:function(elem){return _b47.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return _b47.sibling(elem.firstChild);},contents:function(elem){return elem.contentDocument||_b47.merge([],elem.childNodes);}},function(name,fn){_b47.fn[name]=function(_c86,_c87){var _c88=_b47.map(this,fn,_c86);if(name.slice(-5)!=="Until"){_c87=_c86;}if(_c87&&typeof _c87==="string"){_c88=_b47.filter(_c87,_c88);}if(this.length>1){if(!_c74[name]){_b47.unique(_c88);}if(_c73.test(name)){_c88.reverse();}}return this.pushStack(_c88);};});var _c89=(/\S+/g);var _c8a={};function _c8b(_c8c){var _c8d=_c8a[_c8c]={};_b47.each(_c8c.match(_c89)||[],function(_c8e,flag){_c8d[flag]=true;});return _c8d;};_b47.Callbacks=function(_c8f){_c8f=typeof _c8f==="string"?(_c8a[_c8f]||_c8b(_c8f)):_b47.extend({},_c8f);var _c90,_c91,_c92,_c93,_c94,_c95,list=[],_c96=!_c8f.once&&[],fire=function(data){_c90=_c8f.memory&&data;_c91=true;_c95=_c93||0;_c93=0;_c94=list.length;_c92=true;for(;list&&_c95<_c94;_c95++){if(list[_c95].apply(data[0],data[1])===false&&_c8f.stopOnFalse){_c90=false;break;}}_c92=false;if(list){if(_c96){if(_c96.length){fire(_c96.shift());}}else{if(_c90){list=[];}else{self.disable();}}}},self={add:function(){if(list){var _c97=list.length;(function add(args){_b47.each(args,function(_c98,arg){var type=_b47.type(arg);if(type==="function"){if(!_c8f.unique||!self.has(arg)){list.push(arg);}}else{if(arg&&arg.length&&type!=="string"){add(arg);}}});})(arguments);if(_c92){_c94=list.length;}else{if(_c90){_c93=_c97;fire(_c90);}}}return this;},remove:function(){if(list){_b47.each(arguments,function(_c99,arg){var _c9a;while((_c9a=_b47.inArray(arg,list,_c9a))>-1){list.splice(_c9a,1);if(_c92){if(_c9a<=_c94){_c94--;}if(_c9a<=_c95){_c95--;}}}});}return this;},has:function(fn){return fn?_b47.inArray(fn,list)>-1:!!(list&&list.length);},empty:function(){list=[];_c94=0;return this;},disable:function(){list=_c96=_c90=undefined;return this;},disabled:function(){return !list;},lock:function(){_c96=undefined;if(!_c90){self.disable();}return this;},locked:function(){return !_c96;},fireWith:function(_c9b,args){if(list&&(!_c91||_c96)){args=args||[];args=[_c9b,args.slice?args.slice():args];if(_c92){_c96.push(args);}else{fire(args);}}return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return !!_c91;}};return self;};_b47.extend({Deferred:function(func){var _c9c=[["resolve","done",_b47.Callbacks("once memory"),"resolved"],["reject","fail",_b47.Callbacks("once memory"),"rejected"],["notify","progress",_b47.Callbacks("memory")]],_c9d="pending",_c9e={state:function(){return _c9d;},always:function(){_c9f.done(arguments).fail(arguments);return this;},then:function(){var fns=arguments;return _b47.Deferred(function(_ca0){_b47.each(_c9c,function(i,_ca1){var fn=_b47.isFunction(fns[i])&&fns[i];_c9f[_ca1[1]](function(){var _ca2=fn&&fn.apply(this,arguments);if(_ca2&&_b47.isFunction(_ca2.promise)){_ca2.promise().done(_ca0.resolve).fail(_ca0.reject).progress(_ca0.notify);}else{_ca0[_ca1[0]+"With"](this===_c9e?_ca0.promise():this,fn?[_ca2]:arguments);}});});fns=null;}).promise();},promise:function(obj){return obj!=null?_b47.extend(obj,_c9e):_c9e;}},_c9f={};_c9e.pipe=_c9e.then;_b47.each(_c9c,function(i,_ca3){var list=_ca3[2],_ca4=_ca3[3];_c9e[_ca3[1]]=list.add;if(_ca4){list.add(function(){_c9d=_ca4;},_c9c[i^1][2].disable,_c9c[2][2].lock);}_c9f[_ca3[0]]=function(){_c9f[_ca3[0]+"With"](this===_c9f?_c9e:this,arguments);return this;};_c9f[_ca3[0]+"With"]=list.fireWith;});_c9e.promise(_c9f);if(func){func.call(_c9f,_c9f);}return _c9f;},when:function(_ca5){var i=0,_ca6=_b3e.call(arguments),_ca7=_ca6.length,_ca8=_ca7!==1||(_ca5&&_b47.isFunction(_ca5.promise))?_ca7:0,_ca9=_ca8===1?_ca5:_b47.Deferred(),_caa=function(i,_cab,_cac){return function(_cad){_cab[i]=this;_cac[i]=arguments.length>1?_b3e.call(arguments):_cad;if(_cac===_cae){_ca9.notifyWith(_cab,_cac);}else{if(!(--_ca8)){_ca9.resolveWith(_cab,_cac);}}};},_cae,_caf,_cb0;if(_ca7>1){_cae=new Array(_ca7);_caf=new Array(_ca7);_cb0=new Array(_ca7);for(;i<_ca7;i++){if(_ca6[i]&&_b47.isFunction(_ca6[i].promise)){_ca6[i].promise().done(_caa(i,_cb0,_ca6)).fail(_ca9.reject).progress(_caa(i,_caf,_cae));}else{--_ca8;}}}if(!_ca8){_ca9.resolveWith(_cb0,_ca6);}return _ca9.promise();}});var _cb1;_b47.fn.ready=function(fn){_b47.ready.promise().done(fn);return this;};_b47.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){_b47.readyWait++;}else{_b47.ready(true);}},ready:function(wait){if(wait===true?--_b47.readyWait:_b47.isReady){return;}_b47.isReady=true;if(wait!==true&&--_b47.readyWait>0){return;}_cb1.resolveWith(_b45,[_b47]);if(_b47.fn.triggerHandler){_b47(_b45).triggerHandler("ready");_b47(_b45).off("ready");}}});function _cb2(){_b45.removeEventListener("DOMContentLoaded",_cb2,false);_b3c.removeEventListener("load",_cb2,false);_b47.ready();};_b47.ready.promise=function(obj){if(!_cb1){_cb1=_b47.Deferred();if(_b45.readyState==="complete"){setTimeout(_b47.ready);}else{_b45.addEventListener("DOMContentLoaded",_cb2,false);_b3c.addEventListener("load",_cb2,false);}}return _cb1.promise(obj);};_b47.ready.promise();var _cb3=_b47.access=function(_cb4,fn,key,_cb5,_cb6,_cb7,raw){var i=0,len=_cb4.length,bulk=key==null;if(_b47.type(key)==="object"){_cb6=true;for(i in key){_b47.access(_cb4,fn,i,key[i],true,_cb7,raw);}}else{if(_cb5!==undefined){_cb6=true;if(!_b47.isFunction(_cb5)){raw=true;}if(bulk){if(raw){fn.call(_cb4,_cb5);fn=null;}else{bulk=fn;fn=function(elem,key,_cb8){return bulk.call(_b47(elem),_cb8);};}}if(fn){for(;i<len;i++){fn(_cb4[i],key,raw?_cb5:_cb5.call(_cb4[i],i,fn(_cb4[i],key)));}}}}return _cb6?_cb4:bulk?fn.call(_cb4):len?fn(_cb4[0],key):_cb7;};_b47.acceptData=function(_cb9){return _cb9.nodeType===1||_cb9.nodeType===9||!(+_cb9.nodeType);};function Data(){Object.defineProperty(this.cache={},0,{get:function(){return {};}});this.expando=_b47.expando+Math.random();};Data.uid=1;Data.accepts=_b47.acceptData;Data.prototype={key:function(_cba){if(!Data.accepts(_cba)){return 0;}var _cbb={},_cbc=_cba[this.expando];if(!_cbc){_cbc=Data.uid++;try{_cbb[this.expando]={value:_cbc};Object.defineProperties(_cba,_cbb);}catch(e){_cbb[this.expando]=_cbc;_b47.extend(_cba,_cbb);}}if(!this.cache[_cbc]){this.cache[_cbc]={};}return _cbc;},set:function(_cbd,data,_cbe){var prop,_cbf=this.key(_cbd),_cc0=this.cache[_cbf];if(typeof data==="string"){_cc0[data]=_cbe;}else{if(_b47.isEmptyObject(_cc0)){_b47.extend(this.cache[_cbf],data);}else{for(prop in data){_cc0[prop]=data[prop];}}}return _cc0;},get:function(_cc1,key){var _cc2=this.cache[this.key(_cc1)];return key===undefined?_cc2:_cc2[key];},access:function(_cc3,key,_cc4){var _cc5;if(key===undefined||((key&&typeof key==="string")&&_cc4===undefined)){_cc5=this.get(_cc3,key);return _cc5!==undefined?_cc5:this.get(_cc3,_b47.camelCase(key));}this.set(_cc3,key,_cc4);return _cc4!==undefined?_cc4:key;},remove:function(_cc6,key){var i,name,_cc7,_cc8=this.key(_cc6),_cc9=this.cache[_cc8];if(key===undefined){this.cache[_cc8]={};}else{if(_b47.isArray(key)){name=key.concat(key.map(_b47.camelCase));}else{_cc7=_b47.camelCase(key);if(key in _cc9){name=[key,_cc7];}else{name=_cc7;name=name in _cc9?[name]:(name.match(_c89)||[]);}}i=name.length;while(i--){delete _cc9[name[i]];}}},hasData:function(_cca){return !_b47.isEmptyObject(this.cache[_cca[this.expando]]||{});},discard:function(_ccb){if(_ccb[this.expando]){delete this.cache[_ccb[this.expando]];}}};var _ccc=new Data();var _ccd=new Data();var _cce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_ccf=/([A-Z])/g;function _cd0(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(_ccf,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:_cce.test(data)?_b47.parseJSON(data):data;}catch(e){}_ccd.set(elem,key,data);}else{data=undefined;}}return data;};_b47.extend({hasData:function(elem){return _ccd.hasData(elem)||_ccc.hasData(elem);},data:function(elem,name,data){return _ccd.access(elem,name,data);},removeData:function(elem,name){_ccd.remove(elem,name);},_data:function(elem,name,data){return _ccc.access(elem,name,data);},_removeData:function(elem,name){_ccc.remove(elem,name);}});_b47.fn.extend({data:function(key,_cd1){var i,name,data,elem=this[0],_cd2=elem&&elem.attributes;if(key===undefined){if(this.length){data=_ccd.get(elem);if(elem.nodeType===1&&!_ccc.get(elem,"hasDataAttrs")){i=_cd2.length;while(i--){if(_cd2[i]){name=_cd2[i].name;if(name.indexOf("data-")===0){name=_b47.camelCase(name.slice(5));_cd0(elem,name,data[name]);}}}_ccc.set(elem,"hasDataAttrs",true);}}return data;}if(typeof key==="object"){return this.each(function(){_ccd.set(this,key);});}return _cb3(this,function(_cd3){var data,_cd4=_b47.camelCase(key);if(elem&&_cd3===undefined){data=_ccd.get(elem,key);if(data!==undefined){return data;}data=_ccd.get(elem,_cd4);if(data!==undefined){return data;}data=_cd0(elem,_cd4,undefined);if(data!==undefined){return data;}return;}this.each(function(){var data=_ccd.get(this,_cd4);_ccd.set(this,_cd4,_cd3);if(key.indexOf("-")!==-1&&data!==undefined){_ccd.set(this,key,_cd3);}});},null,_cd1,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){_ccd.remove(this,key);});}});_b47.extend({queue:function(elem,type,data){var _cd5;if(elem){type=(type||"fx")+"queue";_cd5=_ccc.get(elem,type);if(data){if(!_cd5||_b47.isArray(data)){_cd5=_ccc.access(elem,type,_b47.makeArray(data));}else{_cd5.push(data);}}return _cd5||[];}},dequeue:function(elem,type){type=type||"fx";var _cd6=_b47.queue(elem,type),_cd7=_cd6.length,fn=_cd6.shift(),_cd8=_b47._queueHooks(elem,type),next=function(){_b47.dequeue(elem,type);};if(fn==="inprogress"){fn=_cd6.shift();_cd7--;}if(fn){if(type==="fx"){_cd6.unshift("inprogress");}delete _cd8.stop;fn.call(elem,next,_cd8);}if(!_cd7&&_cd8){_cd8.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return _ccc.get(elem,key)||_ccc.access(elem,key,{empty:_b47.Callbacks("once memory").add(function(){_ccc.remove(elem,[type+"queue",key]);})});}});_b47.fn.extend({queue:function(type,data){var _cd9=2;if(typeof type!=="string"){data=type;type="fx";_cd9--;}if(arguments.length<_cd9){return _b47.queue(this[0],type);}return data===undefined?this:this.each(function(){var _cda=_b47.queue(this,type,data);_b47._queueHooks(this,type);if(type==="fx"&&_cda[0]!=="inprogress"){_b47.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){_b47.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,_cdb=1,_cdc=_b47.Deferred(),_cdd=this,i=this.length,_cde=function(){if(!(--_cdb)){_cdc.resolveWith(_cdd,[_cdd]);}};if(typeof type!=="string"){obj=type;type=undefined;}type=type||"fx";while(i--){tmp=_ccc.get(_cdd[i],type+"queueHooks");if(tmp&&tmp.empty){_cdb++;tmp.empty.add(_cde);}}_cde();return _cdc.promise(obj);}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var _cdf=["Top","Right","Bottom","Left"];var _ce0=function(elem,el){elem=el||elem;return _b47.css(elem,"display")==="none"||!_b47.contains(elem.ownerDocument,elem);};var _ce1=(/^(?:checkbox|radio)$/i);(function(){var _ce2=_b45.createDocumentFragment(),div=_ce2.appendChild(_b45.createElement("div")),_ce3=_b45.createElement("input");_ce3.setAttribute("type","radio");_ce3.setAttribute("checked","checked");_ce3.setAttribute("name","t");div.appendChild(_ce3);_b44.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";_b44.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;})();var _ce4=typeof undefined;_b44.focusinBubbles="onfocusin" in _b3c;var _ce5=/^key/,_ce6=/^(?:mouse|pointer|contextmenu)|click/,_ce7=/^(?:focusinfocus|focusoutblur)$/,_ce8=/^([^.]*)(?:\.(.+)|)$/;function _ce9(){return true;};function _cea(){return false;};function _ceb(){try{return _b45.activeElement;}catch(err){}};_b47.event={global:{},add:function(elem,_cec,_ced,data,_cee){var _cef,_cf0,tmp,_cf1,t,_cf2,_cf3,_cf4,type,_cf5,_cf6,_cf7=_ccc.get(elem);if(!_cf7){return;}if(_ced.handler){_cef=_ced;_ced=_cef.handler;_cee=_cef.selector;}if(!_ced.guid){_ced.guid=_b47.guid++;}if(!(_cf1=_cf7.events)){_cf1=_cf7.events={};}if(!(_cf0=_cf7.handle)){_cf0=_cf7.handle=function(e){return typeof _b47!==_ce4&&_b47.event.triggered!==e.type?_b47.event.dispatch.apply(elem,arguments):undefined;};}_cec=(_cec||"").match(_c89)||[""];t=_cec.length;while(t--){tmp=_ce8.exec(_cec[t])||[];type=_cf6=tmp[1];_cf5=(tmp[2]||"").split(".").sort();if(!type){continue;}_cf3=_b47.event.special[type]||{};type=(_cee?_cf3.delegateType:_cf3.bindType)||type;_cf3=_b47.event.special[type]||{};_cf2=_b47.extend({type:type,origType:_cf6,data:data,handler:_ced,guid:_ced.guid,selector:_cee,needsContext:_cee&&_b47.expr.match.needsContext.test(_cee),namespace:_cf5.join(".")},_cef);if(!(_cf4=_cf1[type])){_cf4=_cf1[type]=[];_cf4.delegateCount=0;if(!_cf3.setup||_cf3.setup.call(elem,data,_cf5,_cf0)===false){if(elem.addEventListener){elem.addEventListener(type,_cf0,false);}}}if(_cf3.add){_cf3.add.call(elem,_cf2);if(!_cf2.handler.guid){_cf2.handler.guid=_ced.guid;}}if(_cee){_cf4.splice(_cf4.delegateCount++,0,_cf2);}else{_cf4.push(_cf2);}_b47.event.global[type]=true;}},remove:function(elem,_cf8,_cf9,_cfa,_cfb){var j,_cfc,tmp,_cfd,t,_cfe,_cff,_d00,type,_d01,_d02,_d03=_ccc.hasData(elem)&&_ccc.get(elem);if(!_d03||!(_cfd=_d03.events)){return;}_cf8=(_cf8||"").match(_c89)||[""];t=_cf8.length;while(t--){tmp=_ce8.exec(_cf8[t])||[];type=_d02=tmp[1];_d01=(tmp[2]||"").split(".").sort();if(!type){for(type in _cfd){_b47.event.remove(elem,type+_cf8[t],_cf9,_cfa,true);}continue;}_cff=_b47.event.special[type]||{};type=(_cfa?_cff.delegateType:_cff.bindType)||type;_d00=_cfd[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+_d01.join("\\.(?:.*\\.|)")+"(\\.|$)");_cfc=j=_d00.length;while(j--){_cfe=_d00[j];if((_cfb||_d02===_cfe.origType)&&(!_cf9||_cf9.guid===_cfe.guid)&&(!tmp||tmp.test(_cfe.namespace))&&(!_cfa||_cfa===_cfe.selector||_cfa==="**"&&_cfe.selector)){_d00.splice(j,1);if(_cfe.selector){_d00.delegateCount--;}if(_cff.remove){_cff.remove.call(elem,_cfe);}}}if(_cfc&&!_d00.length){if(!_cff.teardown||_cff.teardown.call(elem,_d01,_d03.handle)===false){_b47.removeEvent(elem,type,_d03.handle);}delete _cfd[type];}}if(_b47.isEmptyObject(_cfd)){delete _d03.handle;_ccc.remove(elem,"events");}},trigger:function(_d04,data,elem,_d05){var i,cur,tmp,_d06,_d07,_d08,_d09,_d0a=[elem||_b45],type=_b43.call(_d04,"type")?_d04.type:_d04,_d0b=_b43.call(_d04,"namespace")?_d04.namespace.split("."):[];cur=tmp=elem=elem||_b45;if(elem.nodeType===3||elem.nodeType===8){return;}if(_ce7.test(type+_b47.event.triggered)){return;}if(type.indexOf(".")>=0){_d0b=type.split(".");type=_d0b.shift();_d0b.sort();}_d07=type.indexOf(":")<0&&"on"+type;_d04=_d04[_b47.expando]?_d04:new _b47.Event(type,typeof _d04==="object"&&_d04);_d04.isTrigger=_d05?2:3;_d04.namespace=_d0b.join(".");_d04.namespace_re=_d04.namespace?new RegExp("(^|\\.)"+_d0b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;_d04.result=undefined;if(!_d04.target){_d04.target=elem;}data=data==null?[_d04]:_b47.makeArray(data,[_d04]);_d09=_b47.event.special[type]||{};if(!_d05&&_d09.trigger&&_d09.trigger.apply(elem,data)===false){return;}if(!_d05&&!_d09.noBubble&&!_b47.isWindow(elem)){_d06=_d09.delegateType||type;if(!_ce7.test(_d06+type)){cur=cur.parentNode;}for(;cur;cur=cur.parentNode){_d0a.push(cur);tmp=cur;}if(tmp===(elem.ownerDocument||_b45)){_d0a.push(tmp.defaultView||tmp.parentWindow||_b3c);}}i=0;while((cur=_d0a[i++])&&!_d04.isPropagationStopped()){_d04.type=i>1?_d06:_d09.bindType||type;_d08=(_ccc.get(cur,"events")||{})[_d04.type]&&_ccc.get(cur,"handle");if(_d08){_d08.apply(cur,data);}_d08=_d07&&cur[_d07];if(_d08&&_d08.apply&&_b47.acceptData(cur)){_d04.result=_d08.apply(cur,data);if(_d04.result===false){_d04.preventDefault();}}}_d04.type=type;if(!_d05&&!_d04.isDefaultPrevented()){if((!_d09._default||_d09._default.apply(_d0a.pop(),data)===false)&&_b47.acceptData(elem)){if(_d07&&_b47.isFunction(elem[type])&&!_b47.isWindow(elem)){tmp=elem[_d07];if(tmp){elem[_d07]=null;}_b47.event.triggered=type;elem[type]();_b47.event.triggered=undefined;if(tmp){elem[_d07]=tmp;}}}}return _d04.result;},dispatch:function(_d0c){_d0c=_b47.event.fix(_d0c);var i,j,ret,_d0d,_d0e,_d0f=[],args=_b3e.call(arguments),_d10=(_ccc.get(this,"events")||{})[_d0c.type]||[],_d11=_b47.event.special[_d0c.type]||{};args[0]=_d0c;_d0c.delegateTarget=this;if(_d11.preDispatch&&_d11.preDispatch.call(this,_d0c)===false){return;}_d0f=_b47.event.handlers.call(this,_d0c,_d10);i=0;while((_d0d=_d0f[i++])&&!_d0c.isPropagationStopped()){_d0c.currentTarget=_d0d.elem;j=0;while((_d0e=_d0d.handlers[j++])&&!_d0c.isImmediatePropagationStopped()){if(!_d0c.namespace_re||_d0c.namespace_re.test(_d0e.namespace)){_d0c.handleObj=_d0e;_d0c.data=_d0e.data;ret=((_b47.event.special[_d0e.origType]||{}).handle||_d0e.handler).apply(_d0d.elem,args);if(ret!==undefined){if((_d0c.result=ret)===false){_d0c.preventDefault();_d0c.stopPropagation();}}}}}if(_d11.postDispatch){_d11.postDispatch.call(this,_d0c);}return _d0c.result;},handlers:function(_d12,_d13){var i,_d14,sel,_d15,_d16=[],_d17=_d13.delegateCount,cur=_d12.target;if(_d17&&cur.nodeType&&(!_d12.button||_d12.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||_d12.type!=="click"){_d14=[];for(i=0;i<_d17;i++){_d15=_d13[i];sel=_d15.selector+" ";if(_d14[sel]===undefined){_d14[sel]=_d15.needsContext?_b47(sel,this).index(cur)>=0:_b47.find(sel,this,null,[cur]).length;}if(_d14[sel]){_d14.push(_d15);}}if(_d14.length){_d16.push({elem:cur,handlers:_d14});}}}}if(_d17<_d13.length){_d16.push({elem:this,handlers:_d13.slice(_d17)});}return _d16;},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(_d18,_d19){if(_d18.which==null){_d18.which=_d19.charCode!=null?_d19.charCode:_d19.keyCode;}return _d18;}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(_d1a,_d1b){var _d1c,doc,body,_d1d=_d1b.button;if(_d1a.pageX==null&&_d1b.clientX!=null){_d1c=_d1a.target.ownerDocument||_b45;doc=_d1c.documentElement;body=_d1c.body;_d1a.pageX=_d1b.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);_d1a.pageY=_d1b.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}if(!_d1a.which&&_d1d!==undefined){_d1a.which=(_d1d&1?1:(_d1d&2?3:(_d1d&4?2:0)));}return _d1a;}},fix:function(_d1e){if(_d1e[_b47.expando]){return _d1e;}var i,prop,copy,type=_d1e.type,_d1f=_d1e,_d20=this.fixHooks[type];if(!_d20){this.fixHooks[type]=_d20=_ce6.test(type)?this.mouseHooks:_ce5.test(type)?this.keyHooks:{};}copy=_d20.props?this.props.concat(_d20.props):this.props;_d1e=new _b47.Event(_d1f);i=copy.length;while(i--){prop=copy[i];_d1e[prop]=_d1f[prop];}if(!_d1e.target){_d1e.target=_b45;}if(_d1e.target.nodeType===3){_d1e.target=_d1e.target.parentNode;}return _d20.filter?_d20.filter(_d1e,_d1f):_d1e;},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==_ceb()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===_ceb()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&_b47.nodeName(this,"input")){this.click();return false;}},_default:function(_d21){return _b47.nodeName(_d21.target,"a");}},beforeunload:{postDispatch:function(_d22){if(_d22.result!==undefined&&_d22.originalEvent){_d22.originalEvent.returnValue=_d22.result;}}}},simulate:function(type,elem,_d23,_d24){var e=_b47.extend(new _b47.Event(),_d23,{type:type,isSimulated:true,originalEvent:{}});if(_d24){_b47.event.trigger(e,null,elem);}else{_b47.event.dispatch.call(elem,e);}if(e.isDefaultPrevented()){_d23.preventDefault();}}};_b47.removeEvent=function(elem,type,_d25){if(elem.removeEventListener){elem.removeEventListener(type,_d25,false);}};_b47.Event=function(src,_d26){if(!(this instanceof _b47.Event)){return new _b47.Event(src,_d26);}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?_ce9:_cea;}else{this.type=src;}if(_d26){_b47.extend(this,_d26);}this.timeStamp=src&&src.timeStamp||_b47.now();this[_b47.expando]=true;};_b47.Event.prototype={isDefaultPrevented:_cea,isPropagationStopped:_cea,isImmediatePropagationStopped:_cea,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_ce9;if(e&&e.preventDefault){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_ce9;if(e&&e.stopPropagation){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_ce9;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation();}this.stopPropagation();}};_b47.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){_b47.event.special[orig]={delegateType:fix,bindType:fix,handle:function(_d27){var ret,_d28=this,_d29=_d27.relatedTarget,_d2a=_d27.handleObj;if(!_d29||(_d29!==_d28&&!_b47.contains(_d28,_d29))){_d27.type=_d2a.origType;ret=_d2a.handler.apply(this,arguments);_d27.type=fix;}return ret;}};});if(!_b44.focusinBubbles){_b47.each({focus:"focusin",blur:"focusout"},function(orig,fix){var _d2b=function(_d2c){_b47.event.simulate(fix,_d2c.target,_b47.event.fix(_d2c),true);};_b47.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,_d2d=_ccc.access(doc,fix);if(!_d2d){doc.addEventListener(orig,_d2b,true);}_ccc.access(doc,fix,(_d2d||0)+1);},teardown:function(){var doc=this.ownerDocument||this,_d2e=_ccc.access(doc,fix)-1;if(!_d2e){doc.removeEventListener(orig,_d2b,true);_ccc.remove(doc,fix);}else{_ccc.access(doc,fix,_d2e);}}};});}_b47.fn.extend({on:function(_d2f,_d30,data,fn,one){var _d31,type;if(typeof _d2f==="object"){if(typeof _d30!=="string"){data=data||_d30;_d30=undefined;}for(type in _d2f){this.on(type,_d30,data,_d2f[type],one);}return this;}if(data==null&&fn==null){fn=_d30;data=_d30=undefined;}else{if(fn==null){if(typeof _d30==="string"){fn=data;data=undefined;}else{fn=data;data=_d30;_d30=undefined;}}}if(fn===false){fn=_cea;}else{if(!fn){return this;}}if(one===1){_d31=fn;fn=function(_d32){_b47().off(_d32);return _d31.apply(this,arguments);};fn.guid=_d31.guid||(_d31.guid=_b47.guid++);}return this.each(function(){_b47.event.add(this,_d2f,fn,data,_d30);});},one:function(_d33,_d34,data,fn){return this.on(_d33,_d34,data,fn,1);},off:function(_d35,_d36,fn){var _d37,type;if(_d35&&_d35.preventDefault&&_d35.handleObj){_d37=_d35.handleObj;_b47(_d35.delegateTarget).off(_d37.namespace?_d37.origType+"."+_d37.namespace:_d37.origType,_d37.selector,_d37.handler);return this;}if(typeof _d35==="object"){for(type in _d35){this.off(type,_d36,_d35[type]);}return this;}if(_d36===false||typeof _d36==="function"){fn=_d36;_d36=undefined;}if(fn===false){fn=_cea;}return this.each(function(){_b47.event.remove(this,_d35,fn,_d36);});},trigger:function(type,data){return this.each(function(){_b47.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return _b47.event.trigger(type,data,elem,true);}}});var _d38=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_d39=/<([\w:]+)/,_d3a=/<|&#?\w+;/,_d3b=/<(?:script|style|link)/i,_d3c=/checked\s*(?:[^=]|=\s*.checked.)/i,_d3d=/^$|\/(?:java|ecma)script/i,_d3e=/^true\/(.*)/,_d3f=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,_d40={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_d40.optgroup=_d40.option;_d40.tbody=_d40.tfoot=_d40.colgroup=_d40.caption=_d40.thead;_d40.th=_d40.td;function _d41(elem,_d42){return _b47.nodeName(elem,"table")&&_b47.nodeName(_d42.nodeType!==11?_d42:_d42.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem;};function _d43(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;};function _d44(elem){var _d45=_d3e.exec(elem.type);if(_d45){elem.type=_d45[1];}else{elem.removeAttribute("type");}return elem;};function _d46(_d47,_d48){var i=0,l=_d47.length;for(;i<l;i++){_ccc.set(_d47[i],"globalEval",!_d48||_ccc.get(_d48[i],"globalEval"));}};function _d49(src,dest){var i,l,type,_d4a,_d4b,_d4c,_d4d,_d4e;if(dest.nodeType!==1){return;}if(_ccc.hasData(src)){_d4a=_ccc.access(src);_d4b=_ccc.set(dest,_d4a);_d4e=_d4a.events;if(_d4e){delete _d4b.handle;_d4b.events={};for(type in _d4e){for(i=0,l=_d4e[type].length;i<l;i++){_b47.event.add(dest,type,_d4e[type][i]);}}}}if(_ccd.hasData(src)){_d4c=_ccd.access(src);_d4d=_b47.extend({},_d4c);_ccd.set(dest,_d4d);}};function _d4f(_d50,tag){var ret=_d50.getElementsByTagName?_d50.getElementsByTagName(tag||"*"):_d50.querySelectorAll?_d50.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&_b47.nodeName(_d50,tag)?_b47.merge([_d50],ret):ret;};function _d51(src,dest){var _d52=dest.nodeName.toLowerCase();if(_d52==="input"&&_ce1.test(src.type)){dest.checked=src.checked;}else{if(_d52==="input"||_d52==="textarea"){dest.defaultValue=src.defaultValue;}}};_b47.extend({clone:function(elem,_d53,_d54){var i,l,_d55,_d56,_d57=elem.cloneNode(true),_d58=_b47.contains(elem.ownerDocument,elem);if(!_b44.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!_b47.isXMLDoc(elem)){_d56=_d4f(_d57);_d55=_d4f(elem);for(i=0,l=_d55.length;i<l;i++){_d51(_d55[i],_d56[i]);}}if(_d53){if(_d54){_d55=_d55||_d4f(elem);_d56=_d56||_d4f(_d57);for(i=0,l=_d55.length;i<l;i++){_d49(_d55[i],_d56[i]);}}else{_d49(elem,_d57);}}_d56=_d4f(_d57,"script");if(_d56.length>0){_d46(_d56,!_d58&&_d4f(elem,"script"));}return _d57;},buildFragment:function(_d59,_d5a,_d5b,_d5c){var elem,tmp,tag,wrap,_d5d,j,_d5e=_d5a.createDocumentFragment(),_d5f=[],i=0,l=_d59.length;for(;i<l;i++){elem=_d59[i];if(elem||elem===0){if(_b47.type(elem)==="object"){_b47.merge(_d5f,elem.nodeType?[elem]:elem);}else{if(!_d3a.test(elem)){_d5f.push(_d5a.createTextNode(elem));}else{tmp=tmp||_d5e.appendChild(_d5a.createElement("div"));tag=(_d39.exec(elem)||["",""])[1].toLowerCase();wrap=_d40[tag]||_d40._default;tmp.innerHTML=wrap[1]+elem.replace(_d38,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}_b47.merge(_d5f,tmp.childNodes);tmp=_d5e.firstChild;tmp.textContent="";}}}}_d5e.textContent="";i=0;while((elem=_d5f[i++])){if(_d5c&&_b47.inArray(elem,_d5c)!==-1){continue;}_d5d=_b47.contains(elem.ownerDocument,elem);tmp=_d4f(_d5e.appendChild(elem),"script");if(_d5d){_d46(tmp);}if(_d5b){j=0;while((elem=tmp[j++])){if(_d3d.test(elem.type||"")){_d5b.push(elem);}}}}return _d5e;},cleanData:function(_d60){var data,elem,type,key,_d61=_b47.event.special,i=0;for(;(elem=_d60[i])!==undefined;i++){if(_b47.acceptData(elem)){key=elem[_ccc.expando];if(key&&(data=_ccc.cache[key])){if(data.events){for(type in data.events){if(_d61[type]){_b47.event.remove(elem,type);}else{_b47.removeEvent(elem,type,data.handle);}}}if(_ccc.cache[key]){delete _ccc.cache[key];}}}delete _ccd.cache[elem[_ccd.expando]];}}});_b47.fn.extend({text:function(_d62){return _cb3(this,function(_d63){return _d63===undefined?_b47.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=_d63;}});},null,_d62,arguments.length);},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _d64=_d41(this,elem);_d64.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _d65=_d41(this,elem);_d65.insertBefore(elem,_d65.firstChild);}});},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},remove:function(_d66,_d67){var elem,_d68=_d66?_b47.filter(_d66,this):this,i=0;for(;(elem=_d68[i])!=null;i++){if(!_d67&&elem.nodeType===1){_b47.cleanData(_d4f(elem));}if(elem.parentNode){if(_d67&&_b47.contains(elem.ownerDocument,elem)){_d46(_d4f(elem,"script"));}elem.parentNode.removeChild(elem);}}return this;},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){_b47.cleanData(_d4f(elem,false));elem.textContent="";}}return this;},clone:function(_d69,_d6a){_d69=_d69==null?false:_d69;_d6a=_d6a==null?_d69:_d6a;return this.map(function(){return _b47.clone(this,_d69,_d6a);});},html:function(_d6b){return _cb3(this,function(_d6c){var elem=this[0]||{},i=0,l=this.length;if(_d6c===undefined&&elem.nodeType===1){return elem.innerHTML;}if(typeof _d6c==="string"&&!_d3b.test(_d6c)&&!_d40[(_d39.exec(_d6c)||["",""])[1].toLowerCase()]){_d6c=_d6c.replace(_d38,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){_b47.cleanData(_d4f(elem,false));elem.innerHTML=_d6c;}}elem=0;}catch(e){}}if(elem){this.empty().append(_d6c);}},null,_d6b,arguments.length);},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;_b47.cleanData(_d4f(this));if(arg){arg.replaceChild(elem,this);}});return arg&&(arg.length||arg.nodeType)?this:this.remove();},detach:function(_d6d){return this.remove(_d6d,true);},domManip:function(args,_d6e){args=_b3f.apply([],args);var _d6f,_d70,_d71,_d72,node,doc,i=0,l=this.length,set=this,_d73=l-1,_d74=args[0],_d75=_b47.isFunction(_d74);if(_d75||(l>1&&typeof _d74==="string"&&!_b44.checkClone&&_d3c.test(_d74))){return this.each(function(_d76){var self=set.eq(_d76);if(_d75){args[0]=_d74.call(this,_d76,self.html());}self.domManip(args,_d6e);});}if(l){_d6f=_b47.buildFragment(args,this[0].ownerDocument,false,this);_d70=_d6f.firstChild;if(_d6f.childNodes.length===1){_d6f=_d70;}if(_d70){_d71=_b47.map(_d4f(_d6f,"script"),_d43);_d72=_d71.length;for(;i<l;i++){node=_d6f;if(i!==_d73){node=_b47.clone(node,true,true);if(_d72){_b47.merge(_d71,_d4f(node,"script"));}}_d6e.call(this[i],node,i);}if(_d72){doc=_d71[_d71.length-1].ownerDocument;_b47.map(_d71,_d44);for(i=0;i<_d72;i++){node=_d71[i];if(_d3d.test(node.type||"")&&!_ccc.access(node,"globalEval")&&_b47.contains(doc,node)){if(node.src){if(_b47._evalUrl){_b47._evalUrl(node.src);}}else{_b47.globalEval(node.textContent.replace(_d3f,""));}}}}}}return this;}});_b47.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,_d77){_b47.fn[name]=function(_d78){var _d79,ret=[],_d7a=_b47(_d78),last=_d7a.length-1,i=0;for(;i<=last;i++){_d79=i===last?this:this.clone(true);_b47(_d7a[i])[_d77](_d79);push.apply(ret,_d79.get());}return this.pushStack(ret);};});var _d7b,_d7c={};function _d7d(name,doc){var _d7e,elem=_b47(doc.createElement(name)).appendTo(doc.body),_d7f=_b3c.getDefaultComputedStyle&&(_d7e=_b3c.getDefaultComputedStyle(elem[0]))?_d7e.display:_b47.css(elem[0],"display");elem.detach();return _d7f;};function _d80(_d81){var doc=_b45,_d82=_d7c[_d81];if(!_d82){_d82=_d7d(_d81,doc);if(_d82==="none"||!_d82){_d7b=(_d7b||_b47("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=_d7b[0].contentDocument;doc.write();doc.close();_d82=_d7d(_d81,doc);_d7b.detach();}_d7c[_d81]=_d82;}return _d82;};var _d83=(/^margin/);var _d84=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var _d85=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null);};function _d86(elem,name,_d87){var _d88,_d89,_d8a,ret,_d8b=elem.style;_d87=_d87||_d85(elem);if(_d87){ret=_d87.getPropertyValue(name)||_d87[name];}if(_d87){if(ret===""&&!_b47.contains(elem.ownerDocument,elem)){ret=_b47.style(elem,name);}if(_d84.test(ret)&&_d83.test(name)){_d88=_d8b.width;_d89=_d8b.minWidth;_d8a=_d8b.maxWidth;_d8b.minWidth=_d8b.maxWidth=_d8b.width=ret;ret=_d87.width;_d8b.width=_d88;_d8b.minWidth=_d89;_d8b.maxWidth=_d8a;}}return ret!==undefined?ret+"":ret;};function _d8c(_d8d,_d8e){return {get:function(){if(_d8d()){delete this.get;return;}return (this.get=_d8e).apply(this,arguments);}};};(function(){var _d8f,_d90,_d91=_b45.documentElement,_d92=_b45.createElement("div"),div=_b45.createElement("div");if(!div.style){return;}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";_b44.clearCloneStyle=div.style.backgroundClip==="content-box";_d92.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;"+"position:absolute";_d92.appendChild(div);function _d93(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";div.innerHTML="";_d91.appendChild(_d92);var _d94=_b3c.getComputedStyle(div,null);_d8f=_d94.top!=="1%";_d90=_d94.width==="4px";_d91.removeChild(_d92);};if(_b3c.getComputedStyle){_b47.extend(_b44,{pixelPosition:function(){_d93();return _d8f;},boxSizingReliable:function(){if(_d90==null){_d93();}return _d90;},reliableMarginRight:function(){var ret,_d95=div.appendChild(_b45.createElement("div"));_d95.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";_d95.style.marginRight=_d95.style.width="0";div.style.width="1px";_d91.appendChild(_d92);ret=!parseFloat(_b3c.getComputedStyle(_d95,null).marginRight);_d91.removeChild(_d92);return ret;}});}})();_b47.swap=function(elem,_d96,_d97,args){var ret,name,old={};for(name in _d96){old[name]=elem.style[name];elem.style[name]=_d96[name];}ret=_d97.apply(elem,args||[]);for(name in _d96){elem.style[name]=old[name];}return ret;};var _d98=/^(none|table(?!-c[ea]).+)/,_d99=new RegExp("^("+pnum+")(.*)$","i"),_d9a=new RegExp("^([+-])=("+pnum+")","i"),_d9b={position:"absolute",visibility:"hidden",display:"block"},_d9c={letterSpacing:"0",fontWeight:"400"},_d9d=["Webkit","O","Moz","ms"];function _d9e(_d9f,name){if(name in _d9f){return name;}var _da0=name[0].toUpperCase()+name.slice(1),_da1=name,i=_d9d.length;while(i--){name=_d9d[i]+_da0;if(name in _d9f){return name;}}return _da1;};function _da2(elem,_da3,_da4){var _da5=_d99.exec(_da3);return _da5?Math.max(0,_da5[1]-(_da4||0))+(_da5[2]||"px"):_da3;};function _da6(elem,name,_da7,_da8,_da9){var i=_da7===(_da8?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(_da7==="margin"){val+=_b47.css(elem,_da7+_cdf[i],true,_da9);}if(_da8){if(_da7==="content"){val-=_b47.css(elem,"padding"+_cdf[i],true,_da9);}if(_da7!=="margin"){val-=_b47.css(elem,"border"+_cdf[i]+"Width",true,_da9);}}else{val+=_b47.css(elem,"padding"+_cdf[i],true,_da9);if(_da7!=="padding"){val+=_b47.css(elem,"border"+_cdf[i]+"Width",true,_da9);}}}return val;};function _daa(elem,name,_dab){var _dac=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,_dad=_d85(elem),_dae=_b47.css(elem,"boxSizing",false,_dad)==="border-box";if(val<=0||val==null){val=_d86(elem,name,_dad);if(val<0||val==null){val=elem.style[name];}if(_d84.test(val)){return val;}_dac=_dae&&(_b44.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0;}return (val+_da6(elem,name,_dab||(_dae?"border":"content"),_dac,_dad))+"px";};function _daf(_db0,show){var _db1,elem,_db2,_db3=[],_db4=0,_db5=_db0.length;for(;_db4<_db5;_db4++){elem=_db0[_db4];if(!elem.style){continue;}_db3[_db4]=_ccc.get(elem,"olddisplay");_db1=elem.style.display;if(show){if(!_db3[_db4]&&_db1==="none"){elem.style.display="";}if(elem.style.display===""&&_ce0(elem)){_db3[_db4]=_ccc.access(elem,"olddisplay",_d80(elem.nodeName));}}else{_db2=_ce0(elem);if(_db1!=="none"||!_db2){_ccc.set(elem,"olddisplay",_db2?_db1:_b47.css(elem,"display"));}}}for(_db4=0;_db4<_db5;_db4++){elem=_db0[_db4];if(!elem.style){continue;}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?_db3[_db4]||"":"none";}}return _db0;};_b47.extend({cssHooks:{opacity:{get:function(elem,_db6){if(_db6){var ret=_d86(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":"cssFloat"},style:function(elem,name,_db7,_db8){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}var ret,type,_db9,_dba=_b47.camelCase(name),_dbb=elem.style;name=_b47.cssProps[_dba]||(_b47.cssProps[_dba]=_d9e(_dbb,_dba));_db9=_b47.cssHooks[name]||_b47.cssHooks[_dba];if(_db7!==undefined){type=typeof _db7;if(type==="string"&&(ret=_d9a.exec(_db7))){_db7=(ret[1]+1)*ret[2]+parseFloat(_b47.css(elem,name));type="number";}if(_db7==null||_db7!==_db7){return;}if(type==="number"&&!_b47.cssNumber[_dba]){_db7+="px";}if(!_b44.clearCloneStyle&&_db7===""&&name.indexOf("background")===0){_dbb[name]="inherit";}if(!_db9||!("set" in _db9)||(_db7=_db9.set(elem,_db7,_db8))!==undefined){_dbb[name]=_db7;}}else{if(_db9&&"get" in _db9&&(ret=_db9.get(elem,false,_db8))!==undefined){return ret;}return _dbb[name];}},css:function(elem,name,_dbc,_dbd){var val,num,_dbe,_dbf=_b47.camelCase(name);name=_b47.cssProps[_dbf]||(_b47.cssProps[_dbf]=_d9e(elem.style,_dbf));_dbe=_b47.cssHooks[name]||_b47.cssHooks[_dbf];if(_dbe&&"get" in _dbe){val=_dbe.get(elem,true,_dbc);}if(val===undefined){val=_d86(elem,name,_dbd);}if(val==="normal"&&name in _d9c){val=_d9c[name];}if(_dbc===""||_dbc){num=parseFloat(val);return _dbc===true||_b47.isNumeric(num)?num||0:val;}return val;}});_b47.each(["height","width"],function(i,name){_b47.cssHooks[name]={get:function(elem,_dc0,_dc1){if(_dc0){return _d98.test(_b47.css(elem,"display"))&&elem.offsetWidth===0?_b47.swap(elem,_d9b,function(){return _daa(elem,name,_dc1);}):_daa(elem,name,_dc1);}},set:function(elem,_dc2,_dc3){var _dc4=_dc3&&_d85(elem);return _da2(elem,_dc2,_dc3?_da6(elem,name,_dc3,_b47.css(elem,"boxSizing",false,_dc4)==="border-box",_dc4):0);}};});_b47.cssHooks.marginRight=_d8c(_b44.reliableMarginRight,function(elem,_dc5){if(_dc5){return _b47.swap(elem,{"display":"inline-block"},_d86,[elem,"marginRight"]);}});_b47.each({margin:"",padding:"",border:"Width"},function(_dc6,_dc7){_b47.cssHooks[_dc6+_dc7]={expand:function(_dc8){var i=0,_dc9={},_dca=typeof _dc8==="string"?_dc8.split(" "):[_dc8];for(;i<4;i++){_dc9[_dc6+_cdf[i]+_dc7]=_dca[i]||_dca[i-2]||_dca[0];}return _dc9;}};if(!_d83.test(_dc6)){_b47.cssHooks[_dc6+_dc7].set=_da2;}});_b47.fn.extend({css:function(name,_dcb){return _cb3(this,function(elem,name,_dcc){var _dcd,len,map={},i=0;if(_b47.isArray(name)){_dcd=_d85(elem);len=name.length;for(;i<len;i++){map[name[i]]=_b47.css(elem,name[i],false,_dcd);}return map;}return _dcc!==undefined?_b47.style(elem,name,_dcc):_b47.css(elem,name);},name,_dcb,arguments.length>1);},show:function(){return _daf(this,true);},hide:function(){return _daf(this);},toggle:function(_dce){if(typeof _dce==="boolean"){return _dce?this.show():this.hide();}return this.each(function(){if(_ce0(this)){_b47(this).show();}else{_b47(this).hide();}});}});function _dcf(elem,_dd0,prop,end,_dd1){return new _dcf.prototype.init(elem,_dd0,prop,end,_dd1);};_b47.Tween=_dcf;_dcf.prototype={constructor:_dcf,init:function(elem,_dd2,prop,end,_dd3,unit){this.elem=elem;this.prop=prop;this.easing=_dd3||"swing";this.options=_dd2;this.start=this.now=this.cur();this.end=end;this.unit=unit||(_b47.cssNumber[prop]?"":"px");},cur:function(){var _dd4=_dcf.propHooks[this.prop];return _dd4&&_dd4.get?_dd4.get(this):_dcf.propHooks._default.get(this);},run:function(_dd5){var _dd6,_dd7=_dcf.propHooks[this.prop];if(this.options.duration){this.pos=_dd6=_b47.easing[this.easing](_dd5,this.options.duration*_dd5,0,1,this.options.duration);}else{this.pos=_dd6=_dd5;}this.now=(this.end-this.start)*_dd6+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}if(_dd7&&_dd7.set){_dd7.set(this);}else{_dcf.propHooks._default.set(this);}return this;}};_dcf.prototype.init.prototype=_dcf.prototype;_dcf.propHooks={_default:{get:function(_dd8){var _dd9;if(_dd8.elem[_dd8.prop]!=null&&(!_dd8.elem.style||_dd8.elem.style[_dd8.prop]==null)){return _dd8.elem[_dd8.prop];}_dd9=_b47.css(_dd8.elem,_dd8.prop,"");return !_dd9||_dd9==="auto"?0:_dd9;},set:function(_dda){if(_b47.fx.step[_dda.prop]){_b47.fx.step[_dda.prop](_dda);}else{if(_dda.elem.style&&(_dda.elem.style[_b47.cssProps[_dda.prop]]!=null||_b47.cssHooks[_dda.prop])){_b47.style(_dda.elem,_dda.prop,_dda.now+_dda.unit);}else{_dda.elem[_dda.prop]=_dda.now;}}}}};_dcf.propHooks.scrollTop=_dcf.propHooks.scrollLeft={set:function(_ddb){if(_ddb.elem.nodeType&&_ddb.elem.parentNode){_ddb.elem[_ddb.prop]=_ddb.now;}}};_b47.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;}};_b47.fx=_dcf.prototype.init;_b47.fx.step={};var _ddc,_ddd,_dde=/^(?:toggle|show|hide)$/,_ddf=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,_de0=[_de1],_de2={"*":[function(prop,_de3){var _de4=this.createTween(prop,_de3),_de5=_de4.cur(),_de6=_ddf.exec(_de3),unit=_de6&&_de6[3]||(_b47.cssNumber[prop]?"":"px"),_de7=(_b47.cssNumber[prop]||unit!=="px"&&+_de5)&&_ddf.exec(_b47.css(_de4.elem,prop)),_de8=1,_de9=20;if(_de7&&_de7[3]!==unit){unit=unit||_de7[3];_de6=_de6||[];_de7=+_de5||1;do{_de8=_de8||".5";_de7=_de7/_de8;_b47.style(_de4.elem,prop,_de7+unit);}while(_de8!==(_de8=_de4.cur()/_de5)&&_de8!==1&&--_de9);}if(_de6){_de7=_de4.start=+_de7||+_de5||0;_de4.unit=unit;_de4.end=_de6[1]?_de7+(_de6[1]+1)*_de6[2]:+_de6[2];}return _de4;}]};function _dea(){setTimeout(function(){_ddc=undefined;});return (_ddc=_b47.now());};function _deb(type,_dec){var _ded,i=0,_dee={height:type};_dec=_dec?1:0;for(;i<4;i+=2-_dec){_ded=_cdf[i];_dee["margin"+_ded]=_dee["padding"+_ded]=type;}if(_dec){_dee.opacity=_dee.width=type;}return _dee;};function _def(_df0,prop,_df1){var _df2,_df3=(_de2[prop]||[]).concat(_de2["*"]),_df4=0,_df5=_df3.length;for(;_df4<_df5;_df4++){if((_df2=_df3[_df4].call(_df1,prop,_df0))){return _df2;}}};function _de1(elem,_df6,opts){var prop,_df7,_df8,_df9,_dfa,_dfb,_dfc,_dfd,anim=this,orig={},_dfe=elem.style,_dff=elem.nodeType&&_ce0(elem),_e00=_ccc.get(elem,"fxshow");if(!opts.queue){_dfa=_b47._queueHooks(elem,"fx");if(_dfa.unqueued==null){_dfa.unqueued=0;_dfb=_dfa.empty.fire;_dfa.empty.fire=function(){if(!_dfa.unqueued){_dfb();}};}_dfa.unqueued++;anim.always(function(){anim.always(function(){_dfa.unqueued--;if(!_b47.queue(elem,"fx").length){_dfa.empty.fire();}});});}if(elem.nodeType===1&&("height" in _df6||"width" in _df6)){opts.overflow=[_dfe.overflow,_dfe.overflowX,_dfe.overflowY];_dfc=_b47.css(elem,"display");_dfd=_dfc==="none"?_ccc.get(elem,"olddisplay")||_d80(elem.nodeName):_dfc;if(_dfd==="inline"&&_b47.css(elem,"float")==="none"){_dfe.display="inline-block";}}if(opts.overflow){_dfe.overflow="hidden";anim.always(function(){_dfe.overflow=opts.overflow[0];_dfe.overflowX=opts.overflow[1];_dfe.overflowY=opts.overflow[2];});}for(prop in _df6){_df7=_df6[prop];if(_dde.exec(_df7)){delete _df6[prop];_df8=_df8||_df7==="toggle";if(_df7===(_dff?"hide":"show")){if(_df7==="show"&&_e00&&_e00[prop]!==undefined){_dff=true;}else{continue;}}orig[prop]=_e00&&_e00[prop]||_b47.style(elem,prop);}else{_dfc=undefined;}}if(!_b47.isEmptyObject(orig)){if(_e00){if("hidden" in _e00){_dff=_e00.hidden;}}else{_e00=_ccc.access(elem,"fxshow",{});}if(_df8){_e00.hidden=!_dff;}if(_dff){_b47(elem).show();}else{anim.done(function(){_b47(elem).hide();});}anim.done(function(){var prop;_ccc.remove(elem,"fxshow");for(prop in orig){_b47.style(elem,prop,orig[prop]);}});for(prop in orig){_df9=_def(_dff?_e00[prop]:0,prop,anim);if(!(prop in _e00)){_e00[prop]=_df9.start;if(_dff){_df9.end=_df9.start;_df9.start=prop==="width"||prop==="height"?1:0;}}}}else{if((_dfc==="none"?_d80(elem.nodeName):_dfc)==="inline"){_dfe.display=_dfc;}}};function _e01(_e02,_e03){var _e04,name,_e05,_e06,_e07;for(_e04 in _e02){name=_b47.camelCase(_e04);_e05=_e03[name];_e06=_e02[_e04];if(_b47.isArray(_e06)){_e05=_e06[1];_e06=_e02[_e04]=_e06[0];}if(_e04!==name){_e02[name]=_e06;delete _e02[_e04];}_e07=_b47.cssHooks[name];if(_e07&&"expand" in _e07){_e06=_e07.expand(_e06);delete _e02[name];for(_e04 in _e06){if(!(_e04 in _e02)){_e02[_e04]=_e06[_e04];_e03[_e04]=_e05;}}}else{_e03[name]=_e05;}}};function _e08(elem,_e09,_e0a){var _e0b,_e0c,_e0d=0,_e0e=_de0.length,_e0f=_b47.Deferred().always(function(){delete tick.elem;}),tick=function(){if(_e0c){return false;}var _e10=_ddc||_dea(),_e11=Math.max(0,_e12.startTime+_e12.duration-_e10),temp=_e11/_e12.duration||0,_e13=1-temp,_e0d=0,_e0e=_e12.tweens.length;for(;_e0d<_e0e;_e0d++){_e12.tweens[_e0d].run(_e13);}_e0f.notifyWith(elem,[_e12,_e13,_e11]);if(_e13<1&&_e0e){return _e11;}else{_e0f.resolveWith(elem,[_e12]);return false;}},_e12=_e0f.promise({elem:elem,props:_b47.extend({},_e09),opts:_b47.extend(true,{specialEasing:{}},_e0a),originalProperties:_e09,originalOptions:_e0a,startTime:_ddc||_dea(),duration:_e0a.duration,tweens:[],createTween:function(prop,end){var _e14=_b47.Tween(elem,_e12.opts,prop,end,_e12.opts.specialEasing[prop]||_e12.opts.easing);_e12.tweens.push(_e14);return _e14;},stop:function(_e15){var _e16=0,_e0e=_e15?_e12.tweens.length:0;if(_e0c){return this;}_e0c=true;for(;_e16<_e0e;_e16++){_e12.tweens[_e16].run(1);}if(_e15){_e0f.resolveWith(elem,[_e12,_e15]);}else{_e0f.rejectWith(elem,[_e12,_e15]);}return this;}}),_e17=_e12.props;_e01(_e17,_e12.opts.specialEasing);for(;_e0d<_e0e;_e0d++){_e0b=_de0[_e0d].call(_e12,elem,_e17,_e12.opts);if(_e0b){return _e0b;}}_b47.map(_e17,_def,_e12);if(_b47.isFunction(_e12.opts.start)){_e12.opts.start.call(elem,_e12);}_b47.fx.timer(_b47.extend(tick,{elem:elem,anim:_e12,queue:_e12.opts.queue}));return _e12.progress(_e12.opts.progress).done(_e12.opts.done,_e12.opts.complete).fail(_e12.opts.fail).always(_e12.opts.always);};_b47.Animation=_b47.extend(_e08,{tweener:function(_e18,_e19){if(_b47.isFunction(_e18)){_e19=_e18;_e18=["*"];}else{_e18=_e18.split(" ");}var prop,_e1a=0,_e1b=_e18.length;for(;_e1a<_e1b;_e1a++){prop=_e18[_e1a];_de2[prop]=_de2[prop]||[];_de2[prop].unshift(_e19);}},prefilter:function(_e1c,_e1d){if(_e1d){_de0.unshift(_e1c);}else{_de0.push(_e1c);}}});_b47.speed=function(_e1e,_e1f,fn){var opt=_e1e&&typeof _e1e==="object"?_b47.extend({},_e1e):{complete:fn||!fn&&_e1f||_b47.isFunction(_e1e)&&_e1e,duration:_e1e,easing:fn&&_e1f||_e1f&&!_b47.isFunction(_e1f)&&_e1f};opt.duration=_b47.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in _b47.fx.speeds?_b47.fx.speeds[opt.duration]:_b47.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}opt.old=opt.complete;opt.complete=function(){if(_b47.isFunction(opt.old)){opt.old.call(this);}if(opt.queue){_b47.dequeue(this,opt.queue);}};return opt;};_b47.fn.extend({fadeTo:function(_e20,to,_e21,_e22){return this.filter(_ce0).css("opacity",0).show().end().animate({opacity:to},_e20,_e21,_e22);},animate:function(prop,_e23,_e24,_e25){var _e26=_b47.isEmptyObject(prop),_e27=_b47.speed(_e23,_e24,_e25),_e28=function(){var anim=_e08(this,_b47.extend({},prop),_e27);if(_e26||_ccc.get(this,"finish")){anim.stop(true);}};_e28.finish=_e28;return _e26||_e27.queue===false?this.each(_e28):this.queue(_e27.queue,_e28);},stop:function(type,_e29,_e2a){var _e2b=function(_e2c){var stop=_e2c.stop;delete _e2c.stop;stop(_e2a);};if(typeof type!=="string"){_e2a=_e29;_e29=type;type=undefined;}if(_e29&&type!==false){this.queue(type||"fx",[]);}return this.each(function(){var _e2d=true,_e2e=type!=null&&type+"queueHooks",_e2f=_b47.timers,data=_ccc.get(this);if(_e2e){if(data[_e2e]&&data[_e2e].stop){_e2b(data[_e2e]);}}else{for(_e2e in data){if(data[_e2e]&&data[_e2e].stop&&rrun.test(_e2e)){_e2b(data[_e2e]);}}}for(_e2e=_e2f.length;_e2e--;){if(_e2f[_e2e].elem===this&&(type==null||_e2f[_e2e].queue===type)){_e2f[_e2e].anim.stop(_e2a);_e2d=false;_e2f.splice(_e2e,1);}}if(_e2d||!_e2a){_b47.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}return this.each(function(){var _e30,data=_ccc.get(this),_e31=data[type+"queue"],_e32=data[type+"queueHooks"],_e33=_b47.timers,_e34=_e31?_e31.length:0;data.finish=true;_b47.queue(this,type,[]);if(_e32&&_e32.stop){_e32.stop.call(this,true);}for(_e30=_e33.length;_e30--;){if(_e33[_e30].elem===this&&_e33[_e30].queue===type){_e33[_e30].anim.stop(true);_e33.splice(_e30,1);}}for(_e30=0;_e30<_e34;_e30++){if(_e31[_e30]&&_e31[_e30].finish){_e31[_e30].finish.call(this);}}delete data.finish;});}});_b47.each(["toggle","show","hide"],function(i,name){var _e35=_b47.fn[name];_b47.fn[name]=function(_e36,_e37,_e38){return _e36==null||typeof _e36==="boolean"?_e35.apply(this,arguments):this.animate(_deb(name,true),_e36,_e37,_e38);};});_b47.each({slideDown:_deb("show"),slideUp:_deb("hide"),slideToggle:_deb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,_e39){_b47.fn[name]=function(_e3a,_e3b,_e3c){return this.animate(_e39,_e3a,_e3b,_e3c);};});_b47.timers=[];_b47.fx.tick=function(){var _e3d,i=0,_e3e=_b47.timers;_ddc=_b47.now();for(;i<_e3e.length;i++){_e3d=_e3e[i];if(!_e3d()&&_e3e[i]===_e3d){_e3e.splice(i--,1);}}if(!_e3e.length){_b47.fx.stop();}_ddc=undefined;};_b47.fx.timer=function(_e3f){_b47.timers.push(_e3f);if(_e3f()){_b47.fx.start();}else{_b47.timers.pop();}};_b47.fx.interval=13;_b47.fx.start=function(){if(!_ddd){_ddd=setInterval(_b47.fx.tick,_b47.fx.interval);}};_b47.fx.stop=function(){clearInterval(_ddd);_ddd=null;};_b47.fx.speeds={slow:600,fast:200,_default:400};_b47.fn.delay=function(time,type){time=_b47.fx?_b47.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,_e40){var _e41=setTimeout(next,time);_e40.stop=function(){clearTimeout(_e41);};});};(function(){var _e42=_b45.createElement("input"),_e43=_b45.createElement("select"),opt=_e43.appendChild(_b45.createElement("option"));_e42.type="checkbox";_b44.checkOn=_e42.value!=="";_b44.optSelected=opt.selected;_e43.disabled=true;_b44.optDisabled=!opt.disabled;_e42=_b45.createElement("input");_e42.value="t";_e42.type="radio";_b44.radioValue=_e42.value==="t";})();var _e44,_e45,_e46=_b47.expr.attrHandle;_b47.fn.extend({attr:function(name,_e47){return _cb3(this,_b47.attr,name,_e47,arguments.length>1);},removeAttr:function(name){return this.each(function(){_b47.removeAttr(this,name);});}});_b47.extend({attr:function(elem,name,_e48){var _e49,ret,_e4a=elem.nodeType;if(!elem||_e4a===3||_e4a===8||_e4a===2){return;}if(typeof elem.getAttribute===_ce4){return _b47.prop(elem,name,_e48);}if(_e4a!==1||!_b47.isXMLDoc(elem)){name=name.toLowerCase();_e49=_b47.attrHooks[name]||(_b47.expr.match.bool.test(name)?_e45:_e44);}if(_e48!==undefined){if(_e48===null){_b47.removeAttr(elem,name);}else{if(_e49&&"set" in _e49&&(ret=_e49.set(elem,_e48,name))!==undefined){return ret;}else{elem.setAttribute(name,_e48+"");return _e48;}}}else{if(_e49&&"get" in _e49&&(ret=_e49.get(elem,name))!==null){return ret;}else{ret=_b47.find.attr(elem,name);return ret==null?undefined:ret;}}},removeAttr:function(elem,_e4b){var name,_e4c,i=0,_e4d=_e4b&&_e4b.match(_c89);if(_e4d&&elem.nodeType===1){while((name=_e4d[i++])){_e4c=_b47.propFix[name]||name;if(_b47.expr.match.bool.test(name)){elem[_e4c]=false;}elem.removeAttribute(name);}}},attrHooks:{type:{set:function(elem,_e4e){if(!_b44.radioValue&&_e4e==="radio"&&_b47.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",_e4e);if(val){elem.value=val;}return _e4e;}}}}});_e45={set:function(elem,_e4f,name){if(_e4f===false){_b47.removeAttr(elem,name);}else{elem.setAttribute(name,name);}return name;}};_b47.each(_b47.expr.match.bool.source.match(/\w+/g),function(i,name){var _e50=_e46[name]||_b47.find.attr;_e46[name]=function(elem,name,_e51){var ret,_e52;if(!_e51){_e52=_e46[name];_e46[name]=ret;ret=_e50(elem,name,_e51)!=null?name.toLowerCase():null;_e46[name]=_e52;}return ret;};});var _e53=/^(?:input|select|textarea|button)$/i;_b47.fn.extend({prop:function(name,_e54){return _cb3(this,_b47.prop,name,_e54,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[_b47.propFix[name]||name];});}});_b47.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,_e55){var ret,_e56,_e57,_e58=elem.nodeType;if(!elem||_e58===3||_e58===8||_e58===2){return;}_e57=_e58!==1||!_b47.isXMLDoc(elem);if(_e57){name=_b47.propFix[name]||name;_e56=_b47.propHooks[name];}if(_e55!==undefined){return _e56&&"set" in _e56&&(ret=_e56.set(elem,_e55,name))!==undefined?ret:(elem[name]=_e55);}else{return _e56&&"get" in _e56&&(ret=_e56.get(elem,name))!==null?ret:elem[name];}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||_e53.test(elem.nodeName)||elem.href?elem.tabIndex:-1;}}}});if(!_b44.optSelected){_b47.propHooks.selected={get:function(elem){var _e59=elem.parentNode;if(_e59&&_e59.parentNode){_e59.parentNode.selectedIndex;}return null;}};}_b47.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_b47.propFix[this.toLowerCase()]=this;});var _e5a=/[\t\r\n\f]/g;_b47.fn.extend({addClass:function(_e5b){var _e5c,elem,cur,_e5d,j,_e5e,_e5f=typeof _e5b==="string"&&_e5b,i=0,len=this.length;if(_b47.isFunction(_e5b)){return this.each(function(j){_b47(this).addClass(_e5b.call(this,j,this.className));});}if(_e5f){_e5c=(_e5b||"").match(_c89)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(_e5a," "):" ");if(cur){j=0;while((_e5d=_e5c[j++])){if(cur.indexOf(" "+_e5d+" ")<0){cur+=_e5d+" ";}}_e5e=_b47.trim(cur);if(elem.className!==_e5e){elem.className=_e5e;}}}}return this;},removeClass:function(_e60){var _e61,elem,cur,_e62,j,_e63,_e64=arguments.length===0||typeof _e60==="string"&&_e60,i=0,len=this.length;if(_b47.isFunction(_e60)){return this.each(function(j){_b47(this).removeClass(_e60.call(this,j,this.className));});}if(_e64){_e61=(_e60||"").match(_c89)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(_e5a," "):"");if(cur){j=0;while((_e62=_e61[j++])){while(cur.indexOf(" "+_e62+" ")>=0){cur=cur.replace(" "+_e62+" "," ");}}_e63=_e60?_b47.trim(cur):"";if(elem.className!==_e63){elem.className=_e63;}}}}return this;},toggleClass:function(_e65,_e66){var type=typeof _e65;if(typeof _e66==="boolean"&&type==="string"){return _e66?this.addClass(_e65):this.removeClass(_e65);}if(_b47.isFunction(_e65)){return this.each(function(i){_b47(this).toggleClass(_e65.call(this,i,this.className,_e66),_e66);});}return this.each(function(){if(type==="string"){var _e67,i=0,self=_b47(this),_e68=_e65.match(_c89)||[];while((_e67=_e68[i++])){if(self.hasClass(_e67)){self.removeClass(_e67);}else{self.addClass(_e67);}}}else{if(type===_ce4||type==="boolean"){if(this.className){_ccc.set(this,"__className__",this.className);}this.className=this.className||_e65===false?"":_ccc.get(this,"__className__")||"";}}});},hasClass:function(_e69){var _e6a=" "+_e69+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(_e5a," ").indexOf(_e6a)>=0){return true;}}return false;}});var _e6b=/\r/g;_b47.fn.extend({val:function(_e6c){var _e6d,ret,_e6e,elem=this[0];if(!arguments.length){if(elem){_e6d=_b47.valHooks[elem.type]||_b47.valHooks[elem.nodeName.toLowerCase()];if(_e6d&&"get" in _e6d&&(ret=_e6d.get(elem,"value"))!==undefined){return ret;}ret=elem.value;return typeof ret==="string"?ret.replace(_e6b,""):ret==null?"":ret;}return;}_e6e=_b47.isFunction(_e6c);return this.each(function(i){var val;if(this.nodeType!==1){return;}if(_e6e){val=_e6c.call(this,i,_b47(this).val());}else{val=_e6c;}if(val==null){val="";}else{if(typeof val==="number"){val+="";}else{if(_b47.isArray(val)){val=_b47.map(val,function(_e6f){return _e6f==null?"":_e6f+"";});}}}_e6d=_b47.valHooks[this.type]||_b47.valHooks[this.nodeName.toLowerCase()];if(!_e6d||!("set" in _e6d)||_e6d.set(this,val,"value")===undefined){this.value=val;}});}});_b47.extend({valHooks:{option:{get:function(elem){var val=_b47.find.attr(elem,"value");return val!=null?val:_b47.trim(_b47.text(elem));}},select:{get:function(elem){var _e70,_e71,_e72=elem.options,_e73=elem.selectedIndex,one=elem.type==="select-one"||_e73<0,_e74=one?null:[],max=one?_e73+1:_e72.length,i=_e73<0?max:one?_e73:0;for(;i<max;i++){_e71=_e72[i];if((_e71.selected||i===_e73)&&(_b44.optDisabled?!_e71.disabled:_e71.getAttribute("disabled")===null)&&(!_e71.parentNode.disabled||!_b47.nodeName(_e71.parentNode,"optgroup"))){_e70=_b47(_e71).val();if(one){return _e70;}_e74.push(_e70);}}return _e74;},set:function(elem,_e75){var _e76,_e77,_e78=elem.options,_e79=_b47.makeArray(_e75),i=_e78.length;while(i--){_e77=_e78[i];if((_e77.selected=_b47.inArray(_e77.value,_e79)>=0)){_e76=true;}}if(!_e76){elem.selectedIndex=-1;}return _e79;}}}});_b47.each(["radio","checkbox"],function(){_b47.valHooks[this]={set:function(elem,_e7a){if(_b47.isArray(_e7a)){return (elem.checked=_b47.inArray(_b47(elem).val(),_e7a)>=0);}}};if(!_b44.checkOn){_b47.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});_b47.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){_b47.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});_b47.fn.extend({hover:function(_e7b,_e7c){return this.mouseenter(_e7b).mouseleave(_e7c||_e7b);},bind:function(_e7d,data,fn){return this.on(_e7d,null,data,fn);},unbind:function(_e7e,fn){return this.off(_e7e,null,fn);},delegate:function(_e7f,_e80,data,fn){return this.on(_e80,_e7f,data,fn);},undelegate:function(_e81,_e82,fn){return arguments.length===1?this.off(_e81,"**"):this.off(_e82,_e81||"**",fn);}});var _e83=_b47.now();var _e84=(/\?/);_b47.parseJSON=function(data){return JSON.parse(data+"");};_b47.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string"){return null;}try{tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}catch(e){xml=undefined;}if(!xml||xml.getElementsByTagName("parsererror").length){_b47.error("Invalid XML: "+data);}return xml;};var _e85,_e86,_e87=/#.*$/,rts=/([?&])_=[^&]*/,_e88=/^(.*?):[ \t]*([^\r\n]*)$/mg,_e89=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_e8a=/^(?:GET|HEAD)$/,_e8b=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,_e8c={},_e8d={},_e8e="*/".concat("*");try{_e86=location.href;}catch(e){_e86=_b45.createElement("a");_e86.href="";_e86=_e86.href;}_e85=rurl.exec(_e86.toLowerCase())||[];function _e8f(_e90){return function(_e91,func){if(typeof _e91!=="string"){func=_e91;_e91="*";}var _e92,i=0,_e93=_e91.toLowerCase().match(_c89)||[];if(_b47.isFunction(func)){while((_e92=_e93[i++])){if(_e92[0]==="+"){_e92=_e92.slice(1)||"*";(_e90[_e92]=_e90[_e92]||[]).unshift(func);}else{(_e90[_e92]=_e90[_e92]||[]).push(func);}}}};};function _e94(_e95,_e96,_e97,_e98){var _e99={},_e9a=(_e95===_e8d);function _e9b(_e9c){var _e9d;_e99[_e9c]=true;_b47.each(_e95[_e9c]||[],function(_e9e,_e9f){var _ea0=_e9f(_e96,_e97,_e98);if(typeof _ea0==="string"&&!_e9a&&!_e99[_ea0]){_e96.dataTypes.unshift(_ea0);_e9b(_ea0);return false;}else{if(_e9a){return !(_e9d=_ea0);}}});return _e9d;};return _e9b(_e96.dataTypes[0])||!_e99["*"]&&_e9b("*");};function _ea1(_ea2,src){var key,deep,_ea3=_b47.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(_ea3[key]?_ea2:(deep||(deep={})))[key]=src[key];}}if(deep){_b47.extend(true,_ea2,deep);}return _ea2;};function _ea4(s,_ea5,_ea6){var ct,type,_ea7,_ea8,_ea9=s.contents,_eaa=s.dataTypes;while(_eaa[0]==="*"){_eaa.shift();if(ct===undefined){ct=s.mimeType||_ea5.getResponseHeader("Content-Type");}}if(ct){for(type in _ea9){if(_ea9[type]&&_ea9[type].test(ct)){_eaa.unshift(type);break;}}}if(_eaa[0] in _ea6){_ea7=_eaa[0];}else{for(type in _ea6){if(!_eaa[0]||s.converters[type+" "+_eaa[0]]){_ea7=type;break;}if(!_ea8){_ea8=type;}}_ea7=_ea7||_ea8;}if(_ea7){if(_ea7!==_eaa[0]){_eaa.unshift(_ea7);}return _ea6[_ea7];}};function _eab(s,_eac,_ead,_eae){var _eaf,_eb0,conv,tmp,prev,_eb1={},_eb2=s.dataTypes.slice();if(_eb2[1]){for(conv in s.converters){_eb1[conv.toLowerCase()]=s.converters[conv];}}_eb0=_eb2.shift();while(_eb0){if(s.responseFields[_eb0]){_ead[s.responseFields[_eb0]]=_eac;}if(!prev&&_eae&&s.dataFilter){_eac=s.dataFilter(_eac,s.dataType);}prev=_eb0;_eb0=_eb2.shift();if(_eb0){if(_eb0==="*"){_eb0=prev;}else{if(prev!=="*"&&prev!==_eb0){conv=_eb1[prev+" "+_eb0]||_eb1["* "+_eb0];if(!conv){for(_eaf in _eb1){tmp=_eaf.split(" ");if(tmp[1]===_eb0){conv=_eb1[prev+" "+tmp[0]]||_eb1["* "+tmp[0]];if(conv){if(conv===true){conv=_eb1[_eaf];}else{if(_eb1[_eaf]!==true){_eb0=tmp[0];_eb2.unshift(tmp[1]);}}break;}}}}if(conv!==true){if(conv&&s["throws"]){_eac=conv(_eac);}else{try{_eac=conv(_eac);}catch(e){return {state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+_eb0};}}}}}}}return {state:"success",data:_eac};};_b47.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e86,type:"GET",isLocal:_e89.test(_e85[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_e8e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":_b47.parseJSON,"text xml":_b47.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(_eb3,_eb4){return _eb4?_ea1(_ea1(_eb3,_b47.ajaxSettings),_eb4):_ea1(_b47.ajaxSettings,_eb3);},ajaxPrefilter:_e8f(_e8c),ajaxTransport:_e8f(_e8d),ajax:function(url,_eb5){if(typeof url==="object"){_eb5=url;url=undefined;}_eb5=_eb5||{};var _eb6,_eb7,_eb8,_eb9,_eba,_ebb,_ebc,i,s=_b47.ajaxSetup({},_eb5),_ebd=s.context||s,_ebe=s.context&&(_ebd.nodeType||_ebd.jquery)?_b47(_ebd):_b47.event,_ebf=_b47.Deferred(),_ec0=_b47.Callbacks("once memory"),_ec1=s.statusCode||{},_ec2={},_ec3={},_ec4=0,_ec5="canceled",_ec6={readyState:0,getResponseHeader:function(key){var _ec7;if(_ec4===2){if(!_eb9){_eb9={};while((_ec7=_e88.exec(_eb8))){_eb9[_ec7[1].toLowerCase()]=_ec7[2];}}_ec7=_eb9[key.toLowerCase()];}return _ec7==null?null:_ec7;},getAllResponseHeaders:function(){return _ec4===2?_eb8:null;},setRequestHeader:function(name,_ec8){var _ec9=name.toLowerCase();if(!_ec4){name=_ec3[_ec9]=_ec3[_ec9]||name;_ec2[name]=_ec8;}return this;},overrideMimeType:function(type){if(!_ec4){s.mimeType=type;}return this;},statusCode:function(map){var code;if(map){if(_ec4<2){for(code in map){_ec1[code]=[_ec1[code],map[code]];}}else{_ec6.always(map[_ec6.status]);}}return this;},abort:function(_eca){var _ecb=_eca||_ec5;if(_eb6){_eb6.abort(_ecb);}done(0,_ecb);return this;}};_ebf.promise(_ec6).complete=_ec0.add;_ec6.success=_ec6.done;_ec6.error=_ec6.fail;s.url=((url||s.url||_e86)+"").replace(_e87,"").replace(_e8b,_e85[1]+"//");s.type=_eb5.method||_eb5.type||s.method||s.type;s.dataTypes=_b47.trim(s.dataType||"*").toLowerCase().match(_c89)||[""];if(s.crossDomain==null){_ebb=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(_ebb&&(_ebb[1]!==_e85[1]||_ebb[2]!==_e85[2]||(_ebb[3]||(_ebb[1]==="http:"?"80":"443"))!==(_e85[3]||(_e85[1]==="http:"?"80":"443"))));}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=_b47.param(s.data,s.traditional);}_e94(_e8c,s,_eb5,_ec6);if(_ec4===2){return _ec6;}_ebc=s.global;if(_ebc&&_b47.active++===0){_b47.event.trigger("ajaxStart");}s.type=s.type.toUpperCase();s.hasContent=!_e8a.test(s.type);_eb7=s.url;if(!s.hasContent){if(s.data){_eb7=(s.url+=(_e84.test(_eb7)?"&":"?")+s.data);delete s.data;}if(s.cache===false){s.url=rts.test(_eb7)?_eb7.replace(rts,"$1_="+_e83++):_eb7+(_e84.test(_eb7)?"&":"?")+"_="+_e83++;}}if(s.ifModified){if(_b47.lastModified[_eb7]){_ec6.setRequestHeader("If-Modified-Since",_b47.lastModified[_eb7]);}if(_b47.etag[_eb7]){_ec6.setRequestHeader("If-None-Match",_b47.etag[_eb7]);}}if(s.data&&s.hasContent&&s.contentType!==false||_eb5.contentType){_ec6.setRequestHeader("Content-Type",s.contentType);}_ec6.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+_e8e+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){_ec6.setRequestHeader(i,s.headers[i]);}if(s.beforeSend&&(s.beforeSend.call(_ebd,_ec6,s)===false||_ec4===2)){return _ec6.abort();}_ec5="abort";for(i in {success:1,error:1,complete:1}){_ec6[i](s[i]);}_eb6=_e94(_e8d,s,_eb5,_ec6);if(!_eb6){done(-1,"No Transport");}else{_ec6.readyState=1;if(_ebc){_ebe.trigger("ajaxSend",[_ec6,s]);}if(s.async&&s.timeout>0){_eba=setTimeout(function(){_ec6.abort("timeout");},s.timeout);}try{_ec4=1;_eb6.send(_ec2,done);}catch(e){if(_ec4<2){done(-1,e);}else{throw e;}}}function done(_ecc,_ecd,_ece,_ecf){var _ed0,_ed1,_ed2,_ed3,_ed4,_ed5=_ecd;if(_ec4===2){return;}_ec4=2;if(_eba){clearTimeout(_eba);}_eb6=undefined;_eb8=_ecf||"";_ec6.readyState=_ecc>0?4:0;_ed0=_ecc>=200&&_ecc<300||_ecc===304;if(_ece){_ed3=_ea4(s,_ec6,_ece);}_ed3=_eab(s,_ed3,_ec6,_ed0);if(_ed0){if(s.ifModified){_ed4=_ec6.getResponseHeader("Last-Modified");if(_ed4){_b47.lastModified[_eb7]=_ed4;}_ed4=_ec6.getResponseHeader("etag");if(_ed4){_b47.etag[_eb7]=_ed4;}}if(_ecc===204||s.type==="HEAD"){_ed5="nocontent";}else{if(_ecc===304){_ed5="notmodified";}else{_ed5=_ed3.state;_ed1=_ed3.data;_ed2=_ed3.error;_ed0=!_ed2;}}}else{_ed2=_ed5;if(_ecc||!_ed5){_ed5="error";if(_ecc<0){_ecc=0;}}}_ec6.status=_ecc;_ec6.statusText=(_ecd||_ed5)+"";if(_ed0){_ebf.resolveWith(_ebd,[_ed1,_ed5,_ec6]);}else{_ebf.rejectWith(_ebd,[_ec6,_ed5,_ed2]);}_ec6.statusCode(_ec1);_ec1=undefined;if(_ebc){_ebe.trigger(_ed0?"ajaxSuccess":"ajaxError",[_ec6,s,_ed0?_ed1:_ed2]);}_ec0.fireWith(_ebd,[_ec6,_ed5]);if(_ebc){_ebe.trigger("ajaxComplete",[_ec6,s]);if(!(--_b47.active)){_b47.event.trigger("ajaxStop");}}};return _ec6;},getJSON:function(url,data,_ed6){return _b47.get(url,data,_ed6,"json");},getScript:function(url,_ed7){return _b47.get(url,undefined,_ed7,"script");}});_b47.each(["get","post"],function(i,_ed8){_b47[_ed8]=function(url,data,_ed9,type){if(_b47.isFunction(data)){type=type||_ed9;_ed9=data;data=undefined;}return _b47.ajax({url:url,type:_ed8,dataType:type,data:data,success:_ed9});};});_b47.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){_b47.fn[type]=function(fn){return this.on(type,fn);};});_b47._evalUrl=function(url){return _b47.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true});};_b47.fn.extend({wrapAll:function(html){var wrap;if(_b47.isFunction(html)){return this.each(function(i){_b47(this).wrapAll(html.call(this,i));});}if(this[0]){wrap=_b47(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}return elem;}).append(this);}return this;},wrapInner:function(html){if(_b47.isFunction(html)){return this.each(function(i){_b47(this).wrapInner(html.call(this,i));});}return this.each(function(){var self=_b47(this),_eda=self.contents();if(_eda.length){_eda.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var _edb=_b47.isFunction(html);return this.each(function(i){_b47(this).wrapAll(_edb?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!_b47.nodeName(this,"body")){_b47(this).replaceWith(this.childNodes);}}).end();}});_b47.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0;};_b47.expr.filters.visible=function(elem){return !_b47.expr.filters.hidden(elem);};var r20=/%20/g,_edc=/\[\]$/,_edd=/\r?\n/g,_ede=/^(?:submit|button|image|reset|file)$/i,_edf=/^(?:input|select|textarea|keygen)/i;function _ee0(_ee1,obj,_ee2,add){var name;if(_b47.isArray(obj)){_b47.each(obj,function(i,v){if(_ee2||_edc.test(_ee1)){add(_ee1,v);}else{_ee0(_ee1+"["+(typeof v==="object"?i:"")+"]",v,_ee2,add);}});}else{if(!_ee2&&_b47.type(obj)==="object"){for(name in obj){_ee0(_ee1+"["+name+"]",obj[name],_ee2,add);}}else{add(_ee1,obj);}}};_b47.param=function(a,_ee3){var _ee4,s=[],add=function(key,_ee5){_ee5=_b47.isFunction(_ee5)?_ee5():(_ee5==null?"":_ee5);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(_ee5);};if(_ee3===undefined){_ee3=_b47.ajaxSettings&&_b47.ajaxSettings.traditional;}if(_b47.isArray(a)||(a.jquery&&!_b47.isPlainObject(a))){_b47.each(a,function(){add(this.name,this.value);});}else{for(_ee4 in a){_ee0(_ee4,a[_ee4],_ee3,add);}}return s.join("&").replace(r20,"+");};_b47.fn.extend({serialize:function(){return _b47.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var _ee6=_b47.prop(this,"elements");return _ee6?_b47.makeArray(_ee6):this;}).filter(function(){var type=this.type;return this.name&&!_b47(this).is(":disabled")&&_edf.test(this.nodeName)&&!_ede.test(type)&&(this.checked||!_ce1.test(type));}).map(function(i,elem){var val=_b47(this).val();return val==null?null:_b47.isArray(val)?_b47.map(val,function(val){return {name:elem.name,value:val.replace(_edd,"\r\n")};}):{name:elem.name,value:val.replace(_edd,"\r\n")};}).get();}});_b47.ajaxSettings.xhr=function(){try{return new XMLHttpRequest();}catch(e){}};var _ee7=0,_ee8={},_ee9={0:200,1223:204},_eea=_b47.ajaxSettings.xhr();if(_b3c.ActiveXObject){_b47(_b3c).on("unload",function(){for(var key in _ee8){_ee8[key]();}});}_b44.cors=!!_eea&&("withCredentials" in _eea);_b44.ajax=_eea=!!_eea;_b47.ajaxTransport(function(_eeb){var _eec;if(_b44.cors||_eea&&!_eeb.crossDomain){return {send:function(_eed,_eee){var i,xhr=_eeb.xhr(),id=++_ee7;xhr.open(_eeb.type,_eeb.url,_eeb.async,_eeb.username,_eeb.password);if(_eeb.xhrFields){for(i in _eeb.xhrFields){xhr[i]=_eeb.xhrFields[i];}}if(_eeb.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(_eeb.mimeType);}if(!_eeb.crossDomain&&!_eed["X-Requested-With"]){_eed["X-Requested-With"]="XMLHttpRequest";}for(i in _eed){xhr.setRequestHeader(i,_eed[i]);}_eec=function(type){return function(){if(_eec){delete _ee8[id];_eec=xhr.onload=xhr.onerror=null;if(type==="abort"){xhr.abort();}else{if(type==="error"){_eee(xhr.status,xhr.statusText);}else{_eee(_ee9[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders());}}}};};xhr.onload=_eec();xhr.onerror=_eec("error");_eec=_ee8[id]=_eec("abort");try{xhr.send(_eeb.hasContent&&_eeb.data||null);}catch(e){if(_eec){throw e;}}},abort:function(){if(_eec){_eec();}}};}});_b47.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){_b47.globalEval(text);return text;}}});_b47.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}if(s.crossDomain){s.type="GET";}});_b47.ajaxTransport("script",function(s){if(s.crossDomain){var _eef,_ef0;return {send:function(_ef1,_ef2){_eef=_b47("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",_ef0=function(evt){_eef.remove();_ef0=null;if(evt){_ef2(evt.type==="error"?404:200,evt.type);}});_b45.head.appendChild(_eef[0]);},abort:function(){if(_ef0){_ef0();}}};}});var _ef3=[],_ef4=/(=)\?(?=&|$)|\?\?/;_b47.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var _ef5=_ef3.pop()||(_b47.expando+"_"+(_e83++));this[_ef5]=true;return _ef5;}});_b47.ajaxPrefilter("json jsonp",function(s,_ef6,_ef7){var _ef8,_ef9,_efa,_efb=s.jsonp!==false&&(_ef4.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&_ef4.test(s.data)&&"data");if(_efb||s.dataTypes[0]==="jsonp"){_ef8=s.jsonpCallback=_b47.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(_efb){s[_efb]=s[_efb].replace(_ef4,"$1"+_ef8);}else{if(s.jsonp!==false){s.url+=(_e84.test(s.url)?"&":"?")+s.jsonp+"="+_ef8;}}s.converters["script json"]=function(){if(!_efa){_b47.error(_ef8+" was not called");}return _efa[0];};s.dataTypes[0]="json";_ef9=_b3c[_ef8];_b3c[_ef8]=function(){_efa=arguments;};_ef7.always(function(){_b3c[_ef8]=_ef9;if(s[_ef8]){s.jsonpCallback=_ef6.jsonpCallback;_ef3.push(_ef8);}if(_efa&&_b47.isFunction(_ef9)){_ef9(_efa[0]);}_efa=_ef9=undefined;});return "script";}});_b47.parseHTML=function(data,_efc,_efd){if(!data||typeof data!=="string"){return null;}if(typeof _efc==="boolean"){_efd=_efc;_efc=false;}_efc=_efc||_b45;var _efe=_c64.exec(data),_eff=!_efd&&[];if(_efe){return [_efc.createElement(_efe[1])];}_efe=_b47.buildFragment([data],_efc,_eff);if(_eff&&_eff.length){_b47(_eff).remove();}return _b47.merge([],_efe.childNodes);};var _f00=_b47.fn.load;_b47.fn.load=function(url,_f01,_f02){if(typeof url!=="string"&&_f00){return _f00.apply(this,arguments);}var _f03,type,_f04,self=this,off=url.indexOf(" ");if(off>=0){_f03=_b47.trim(url.slice(off));url=url.slice(0,off);}if(_b47.isFunction(_f01)){_f02=_f01;_f01=undefined;}else{if(_f01&&typeof _f01==="object"){type="POST";}}if(self.length>0){_b47.ajax({url:url,type:type,dataType:"html",data:_f01}).done(function(_f05){_f04=arguments;self.html(_f03?_b47("<div>").append(_b47.parseHTML(_f05)).find(_f03):_f05);}).complete(_f02&&function(_f06,_f07){self.each(_f02,_f04||[_f06.responseText,_f07,_f06]);});}return this;};_b47.expr.filters.animated=function(elem){return _b47.grep(_b47.timers,function(fn){return elem===fn.elem;}).length;};var _f08=_b3c.document.documentElement;function _f09(elem){return _b47.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView;};_b47.offset={setOffset:function(elem,_f0a,i){var _f0b,_f0c,_f0d,_f0e,_f0f,_f10,_f11,_f12=_b47.css(elem,"position"),_f13=_b47(elem),_f14={};if(_f12==="static"){elem.style.position="relative";}_f0f=_f13.offset();_f0d=_b47.css(elem,"top");_f10=_b47.css(elem,"left");_f11=(_f12==="absolute"||_f12==="fixed")&&(_f0d+_f10).indexOf("auto")>-1;if(_f11){_f0b=_f13.position();_f0e=_f0b.top;_f0c=_f0b.left;}else{_f0e=parseFloat(_f0d)||0;_f0c=parseFloat(_f10)||0;}if(_b47.isFunction(_f0a)){_f0a=_f0a.call(elem,i,_f0f);}if(_f0a.top!=null){_f14.top=(_f0a.top-_f0f.top)+_f0e;}if(_f0a.left!=null){_f14.left=(_f0a.left-_f0f.left)+_f0c;}if("using" in _f0a){_f0a.using.call(elem,_f14);}else{_f13.css(_f14);}}};_b47.fn.extend({offset:function(_f15){if(arguments.length){return _f15===undefined?this:this.each(function(i){_b47.offset.setOffset(this,_f15,i);});}var _f16,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return;}_f16=doc.documentElement;if(!_b47.contains(_f16,elem)){return box;}if(typeof elem.getBoundingClientRect!==_ce4){box=elem.getBoundingClientRect();}win=_f09(doc);return {top:box.top+win.pageYOffset-_f16.clientTop,left:box.left+win.pageXOffset-_f16.clientLeft};},position:function(){if(!this[0]){return;}var _f17,_f18,elem=this[0],_f19={top:0,left:0};if(_b47.css(elem,"position")==="fixed"){_f18=elem.getBoundingClientRect();}else{_f17=this.offsetParent();_f18=this.offset();if(!_b47.nodeName(_f17[0],"html")){_f19=_f17.offset();}_f19.top+=_b47.css(_f17[0],"borderTopWidth",true);_f19.left+=_b47.css(_f17[0],"borderLeftWidth",true);}return {top:_f18.top-_f19.top-_b47.css(elem,"marginTop",true),left:_f18.left-_f19.left-_b47.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var _f1a=this.offsetParent||_f08;while(_f1a&&(!_b47.nodeName(_f1a,"html")&&_b47.css(_f1a,"position")==="static")){_f1a=_f1a.offsetParent;}return _f1a||_f08;});}});_b47.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(_f1b,prop){var top="pageYOffset"===prop;_b47.fn[_f1b]=function(val){return _cb3(this,function(elem,_f1c,val){var win=_f09(elem);if(val===undefined){return win?win[prop]:elem[_f1c];}if(win){win.scrollTo(!top?val:_b3c.pageXOffset,top?val:_b3c.pageYOffset);}else{elem[_f1c]=val;}},_f1b,val,arguments.length,null);};});_b47.each(["top","left"],function(i,prop){_b47.cssHooks[prop]=_d8c(_b44.pixelPosition,function(elem,_f1d){if(_f1d){_f1d=_d86(elem,prop);return _d84.test(_f1d)?_b47(elem).position()[prop]+"px":_f1d;}});});_b47.each({Height:"height",Width:"width"},function(name,type){_b47.each({padding:"inner"+name,content:type,"":"outer"+name},function(_f1e,_f1f){_b47.fn[_f1f]=function(_f20,_f21){var _f22=arguments.length&&(_f1e||typeof _f20!=="boolean"),_f23=_f1e||(_f20===true||_f21===true?"margin":"border");return _cb3(this,function(elem,type,_f24){var doc;if(_b47.isWindow(elem)){return elem.document.documentElement["client"+name];}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}return _f24===undefined?_b47.css(elem,type,_f23):_b47.style(elem,type,_f24,_f23);},type,_f22?_f20:undefined,_f22,null);};});});_b47.fn.size=function(){return this.length;};_b47.fn.andSelf=_b47.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return _b47;});}var _f25=_b3c.jQuery,_f26=_b3c.$;_b47.noConflict=function(deep){if(_b3c.$===_b47){_b3c.$=_f26;}if(deep&&_b3c.jQuery===_b47){_b3c.jQuery=_f25;}return _b47;};if(typeof _b3d===_ce4){_b3c.jQuery=_b3c.$=_b47;}return _b47;}));},"bootstrap/bootstrap":function(){define(["dojo","dijit","dojox"],function(dojo,_f27,_f28){if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery");}+function($){var _f29=$.fn.jquery.split(" ")[0].split(".");if((_f29[0]<2&&_f29[1]<9)||(_f29[0]==1&&_f29[1]==9&&_f29[2]<1)){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}}(jQuery);+function($){"use strict";function _f2a(){var el=document.createElement("bootstrap");var _f2b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in _f2b){if(el.style[name]!==undefined){return {end:_f2b[name]};}}return false;};$.fn.emulateTransitionEnd=function(_f2c){var _f2d=false;var $el=this;$(this).one("bsTransitionEnd",function(){_f2d=true;});var _f2e=function(){if(!_f2d){$($el).trigger($.support.transition.end);}};setTimeout(_f2e,_f2c);return this;};$(function(){$.support.transition=_f2a();if(!$.support.transition){return;}$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this)){return e.handleObj.handler.apply(this,arguments);}}};});}(jQuery);+function($){"use strict";var _f2f="[data-dismiss=\"alert\"]";var _f30=function(el){$(el).on("click",_f2f,this.close);};_f30.VERSION="3.3.0";_f30.TRANSITION_DURATION=150;_f30.prototype.close=function(e){var _f31=$(this);var _f32=_f31.attr("data-target");if(!_f32){_f32=_f31.attr("href");_f32=_f32&&_f32.replace(/.*(?=#[^\s]*$)/,"");}var _f33=$(_f32);if(e){e.preventDefault();}if(!_f33.length){_f33=_f31.closest(".alert");}_f33.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented()){return;}_f33.removeClass("in");function _f34(){_f33.detach().trigger("closed.bs.alert").remove();};$.support.transition&&_f33.hasClass("fade")?_f33.one("bsTransitionEnd",_f34).emulateTransitionEnd(_f30.TRANSITION_DURATION):_f34();};function _f35(_f36){return this.each(function(){var _f37=$(this);var data=_f37.data("bs.alert");if(!data){_f37.data("bs.alert",(data=new _f30(this)));}if(typeof _f36=="string"){data[_f36].call(_f37);}});};var old=$.fn.alert;$.fn.alert=_f35;$.fn.alert.Constructor=_f30;$.fn.alert.noConflict=function(){$.fn.alert=old;return this;};$(document).on("click.bs.alert.data-api",_f2f,_f30.prototype.close);}(jQuery);+function($){"use strict";var _f38=function(_f39,_f3a){this.$element=$(_f39);this.options=$.extend({},_f38.DEFAULTS,_f3a);this.isLoading=false;};_f38.VERSION="3.3.0";_f38.DEFAULTS={loadingText:"loading..."};_f38.prototype.setState=function(_f3b){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();_f3b=_f3b+"Text";if(data.resetText==null){$el.data("resetText",$el[val]());}setTimeout($.proxy(function(){$el[val](data[_f3b]==null?this.options[_f3b]:data[_f3b]);if(_f3b=="loadingText"){this.isLoading=true;$el.addClass(d).attr(d,d);}else{if(this.isLoading){this.isLoading=false;$el.removeClass(d).removeAttr(d);}}},this),0);};_f38.prototype.toggle=function(){var _f3c=true;var _f3d=this.$element.closest("[data-toggle=\"buttons\"]");if(_f3d.length){var _f3e=this.$element.find("input");if(_f3e.prop("type")=="radio"){if(_f3e.prop("checked")&&this.$element.hasClass("active")){_f3c=false;}else{_f3d.find(".active").removeClass("active");}}if(_f3c){_f3e.prop("checked",!this.$element.hasClass("active")).trigger("change");}}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));}if(_f3c){this.$element.toggleClass("active");}};function _f3f(_f40){return this.each(function(){var _f41=$(this);var data=_f41.data("bs.button");var _f42=typeof _f40=="object"&&_f40;if(!data){_f41.data("bs.button",(data=new _f38(this,_f42)));}if(_f40=="toggle"){data.toggle();}else{if(_f40){data.setState(_f40);}}});};var old=$.fn.button;$.fn.button=_f3f;$.fn.button.Constructor=_f38;$.fn.button.noConflict=function(){$.fn.button=old;return this;};$(document).on("click.bs.button.data-api","[data-toggle^=\"button\"]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn")){$btn=$btn.closest(".btn");}_f3f.call($btn,"toggle");e.preventDefault();}).on("focus.bs.button.data-api blur.bs.button.data-api","[data-toggle^=\"button\"]",function(e){$(e.target).closest(".btn").toggleClass("focus",e.type=="focus");});}(jQuery);+function($){"use strict";var _f43=function(_f44,_f45){this.$element=$(_f44);this.$indicators=this.$element.find(".carousel-indicators");this.options=_f45;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart" in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this));};_f43.VERSION="3.3.0";_f43.TRANSITION_DURATION=600;_f43.DEFAULTS={interval:5000,pause:"hover",wrap:true,keyboard:true};_f43.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return;}e.preventDefault();};_f43.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this;};_f43.prototype.getItemIndex=function(item){this.$items=item.parent().children(".item");return this.$items.index(item||this.$active);};_f43.prototype.getItemForDirection=function(_f46,_f47){var _f48=_f46=="prev"?-1:1;var _f49=this.getItemIndex(_f47);var _f4a=(_f49+_f48)%this.$items.length;return this.$items.eq(_f4a);};_f43.prototype.to=function(pos){var that=this;var _f4b=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(pos>(this.$items.length-1)||pos<0){return;}if(this.sliding){return this.$element.one("slid.bs.carousel",function(){that.to(pos);});}if(_f4b==pos){return this.pause().cycle();}return this.slide(pos>_f4b?"next":"prev",this.$items.eq(pos));};_f43.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition){this.$element.trigger($.support.transition.end);this.cycle(true);}this.interval=clearInterval(this.interval);return this;};_f43.prototype.next=function(){if(this.sliding){return;}return this.slide("next");};_f43.prototype.prev=function(){if(this.sliding){return;}return this.slide("prev");};_f43.prototype.slide=function(type,next){var _f4c=this.$element.find(".item.active");var _f4d=next||this.getItemForDirection(type,_f4c);var _f4e=this.interval;var _f4f=type=="next"?"left":"right";var _f50=type=="next"?"first":"last";var that=this;if(!_f4d.length){if(!this.options.wrap){return;}_f4d=this.$element.find(".item")[_f50]();}if(_f4d.hasClass("active")){return (this.sliding=false);}var _f51=_f4d[0];var _f52=$.Event("slide.bs.carousel",{relatedTarget:_f51,direction:_f4f});this.$element.trigger(_f52);if(_f52.isDefaultPrevented()){return;}this.sliding=true;_f4e&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var _f53=$(this.$indicators.children()[this.getItemIndex(_f4d)]);_f53&&_f53.addClass("active");}var _f54=$.Event("slid.bs.carousel",{relatedTarget:_f51,direction:_f4f});if($.support.transition&&this.$element.hasClass("slide")){_f4d.addClass(type);_f4d[0].offsetWidth;_f4c.addClass(_f4f);_f4d.addClass(_f4f);_f4c.one("bsTransitionEnd",function(){_f4d.removeClass([type,_f4f].join(" ")).addClass("active");_f4c.removeClass(["active",_f4f].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger(_f54);},0);}).emulateTransitionEnd(_f43.TRANSITION_DURATION);}else{_f4c.removeClass("active");_f4d.addClass("active");this.sliding=false;this.$element.trigger(_f54);}_f4e&&this.cycle();return this;};function _f55(_f56){return this.each(function(){var _f57=$(this);var data=_f57.data("bs.carousel");var _f58=$.extend({},_f43.DEFAULTS,_f57.data(),typeof _f56=="object"&&_f56);var _f59=typeof _f56=="string"?_f56:_f58.slide;if(!data){_f57.data("bs.carousel",(data=new _f43(this,_f58)));}if(typeof _f56=="number"){data.to(_f56);}else{if(_f59){data[_f59]();}else{if(_f58.interval){data.pause().cycle();}}}});};var old=$.fn.carousel;$.fn.carousel=_f55;$.fn.carousel.Constructor=_f43;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this;};var _f5a=function(e){var href;var _f5b=$(this);var _f5c=$(_f5b.attr("data-target")||(href=_f5b.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if(!_f5c.hasClass("carousel")){return;}var _f5d=$.extend({},_f5c.data(),_f5b.data());var _f5e=_f5b.attr("data-slide-to");if(_f5e){_f5d.interval=false;}_f55.call(_f5c,_f5d);if(_f5e){_f5c.data("bs.carousel").to(_f5e);}e.preventDefault();};$(document).on("click.bs.carousel.data-api","[data-slide]",_f5a).on("click.bs.carousel.data-api","[data-slide-to]",_f5a);$(window).on("load",function(){$("[data-ride=\"carousel\"]").each(function(){var _f5f=$(this);_f55.call(_f5f,_f5f.data());});});}(jQuery);+function($){"use strict";var _f60=function(_f61,_f62){this.$element=$(_f61);this.options=$.extend({},_f60.DEFAULTS,_f62);this.$trigger=$(this.options.trigger).filter("[href=\"#"+_f61.id+"\"], [data-target=\"#"+_f61.id+"\"]");this.transitioning=null;if(this.options.parent){this.$parent=this.getParent();}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger);}if(this.options.toggle){this.toggle();}};_f60.VERSION="3.3.0";_f60.TRANSITION_DURATION=350;_f60.DEFAULTS={toggle:true,trigger:"[data-toggle=\"collapse\"]"};_f60.prototype.dimension=function(){var _f63=this.$element.hasClass("width");return _f63?"width":"height";};_f60.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in")){return;}var _f64;var _f65=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(_f65&&_f65.length){_f64=_f65.data("bs.collapse");if(_f64&&_f64.transitioning){return;}}var _f66=$.Event("show.bs.collapse");this.$element.trigger(_f66);if(_f66.isDefaultPrevented()){return;}if(_f65&&_f65.length){_f67.call(_f65,"hide");_f64||_f65.data("bs.collapse",null);}var _f68=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[_f68](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var _f69=function(){this.$element.removeClass("collapsing").addClass("collapse in")[_f68]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse");};if(!$.support.transition){return _f69.call(this);}var _f6a=$.camelCase(["scroll",_f68].join("-"));this.$element.one("bsTransitionEnd",$.proxy(_f69,this)).emulateTransitionEnd(_f60.TRANSITION_DURATION)[_f68](this.$element[0][_f6a]);};_f60.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in")){return;}var _f6b=$.Event("hide.bs.collapse");this.$element.trigger(_f6b);if(_f6b.isDefaultPrevented()){return;}var _f6c=this.dimension();this.$element[_f6c](this.$element[_f6c]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var _f6d=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse");};if(!$.support.transition){return _f6d.call(this);}this.$element[_f6c](0).one("bsTransitionEnd",$.proxy(_f6d,this)).emulateTransitionEnd(_f60.TRANSITION_DURATION);};_f60.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]();};_f60.prototype.getParent=function(){return $(this.options.parent).find("[data-toggle=\"collapse\"][data-parent=\""+this.options.parent+"\"]").each($.proxy(function(i,_f6e){var _f6f=$(_f6e);this.addAriaAndCollapsedClass(_f70(_f6f),_f6f);},this)).end();};_f60.prototype.addAriaAndCollapsedClass=function(_f71,_f72){var _f73=_f71.hasClass("in");_f71.attr("aria-expanded",_f73);_f72.toggleClass("collapsed",!_f73).attr("aria-expanded",_f73);};function _f70(_f74){var href;var _f75=_f74.attr("data-target")||(href=_f74.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(_f75);};function _f67(_f76){return this.each(function(){var _f77=$(this);var data=_f77.data("bs.collapse");var _f78=$.extend({},_f60.DEFAULTS,_f77.data(),typeof _f76=="object"&&_f76);if(!data&&_f78.toggle&&_f76=="show"){_f78.toggle=false;}if(!data){_f77.data("bs.collapse",(data=new _f60(this,_f78)));}if(typeof _f76=="string"){data[_f76]();}});};var old=$.fn.collapse;$.fn.collapse=_f67;$.fn.collapse.Constructor=_f60;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this;};$(document).on("click.bs.collapse.data-api","[data-toggle=\"collapse\"]",function(e){var _f79=$(this);if(!_f79.attr("data-target")){e.preventDefault();}var _f7a=_f70(_f79);var data=_f7a.data("bs.collapse");var _f7b=data?"toggle":$.extend({},_f79.data(),{trigger:this});_f67.call(_f7a,_f7b);});}(jQuery);+function($){"use strict";var _f7c=".dropdown-backdrop";var _f7d="[data-toggle=\"dropdown\"]";var _f7e=function(_f7f){$(_f7f).on("click.bs.dropdown",this.toggle);};_f7e.VERSION="3.3.0";_f7e.prototype.toggle=function(e){var _f80=$(this);if(_f80.is(".disabled, :disabled")){return;}var _f81=_f82(_f80);var _f83=_f81.hasClass("open");_f84();if(!_f83){if("ontouchstart" in document.documentElement&&!_f81.closest(".navbar-nav").length){$("<div class=\"dropdown-backdrop\"/>").insertAfter($(this)).on("click",_f84);}var _f85={relatedTarget:this};_f81.trigger(e=$.Event("show.bs.dropdown",_f85));if(e.isDefaultPrevented()){return;}_f80.trigger("focus").attr("aria-expanded","true");_f81.toggleClass("open").trigger("shown.bs.dropdown",_f85);}return false;};_f7e.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)){return;}var _f86=$(this);e.preventDefault();e.stopPropagation();if(_f86.is(".disabled, :disabled")){return;}var _f87=_f82(_f86);var _f88=_f87.hasClass("open");if((!_f88&&e.which!=27)||(_f88&&e.which==27)){if(e.which==27){_f87.find(_f7d).trigger("focus");}return _f86.trigger("click");}var desc=" li:not(.divider):visible a";var _f89=_f87.find("[role=\"menu\"]"+desc+", [role=\"listbox\"]"+desc);if(!_f89.length){return;}var _f8a=_f89.index(e.target);if(e.which==38&&_f8a>0){_f8a--;}if(e.which==40&&_f8a<_f89.length-1){_f8a++;}if(!~_f8a){_f8a=0;}_f89.eq(_f8a).trigger("focus");};function _f84(e){if(e&&e.which===3){return;}$(_f7c).remove();$(_f7d).each(function(){var _f8b=$(this);var _f8c=_f82(_f8b);var _f8d={relatedTarget:this};if(!_f8c.hasClass("open")){return;}_f8c.trigger(e=$.Event("hide.bs.dropdown",_f8d));if(e.isDefaultPrevented()){return;}_f8b.attr("aria-expanded","false");_f8c.removeClass("open").trigger("hidden.bs.dropdown",_f8d);});};function _f82(_f8e){var _f8f=_f8e.attr("data-target");if(!_f8f){_f8f=_f8e.attr("href");_f8f=_f8f&&/#[A-Za-z]/.test(_f8f)&&_f8f.replace(/.*(?=#[^\s]*$)/,"");}var _f90=_f8f&&$(_f8f);return _f90&&_f90.length?_f90:_f8e.parent();};function _f91(_f92){return this.each(function(){var _f93=$(this);var data=_f93.data("bs.dropdown");if(!data){_f93.data("bs.dropdown",(data=new _f7e(this)));}if(typeof _f92=="string"){data[_f92].call(_f93);}});};var old=$.fn.dropdown;$.fn.dropdown=_f91;$.fn.dropdown.Constructor=_f7e;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this;};$(document).on("click.bs.dropdown.data-api",_f84).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation();}).on("click.bs.dropdown.data-api",_f7d,_f7e.prototype.toggle).on("keydown.bs.dropdown.data-api",_f7d,_f7e.prototype.keydown).on("keydown.bs.dropdown.data-api","[role=\"menu\"]",_f7e.prototype.keydown).on("keydown.bs.dropdown.data-api","[role=\"listbox\"]",_f7e.prototype.keydown);}(jQuery);+function($){"use strict";var _f94=function(_f95,_f96){this.options=_f96;this.$body=$(document.body);this.$element=$(_f95);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal");},this));}};_f94.VERSION="3.3.0";_f94.TRANSITION_DURATION=300;_f94.BACKDROP_TRANSITION_DURATION=150;_f94.DEFAULTS={backdrop:true,keyboard:true,show:true};_f94.prototype.toggle=function(_f97){return this.isShown?this.hide():this.show(_f97);};_f94.prototype.show=function(_f98){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_f98});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return;}this.isShown=true;this.checkScrollbar();this.$body.addClass("modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal","[data-dismiss=\"modal\"]",$.proxy(this.hide,this));this.backdrop(function(){var _f99=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body);}that.$element.show().scrollTop(0);if(_f99){that.$element[0].offsetWidth;}that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_f98});_f99?that.$element.find(".modal-dialog").one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e);}).emulateTransitionEnd(_f94.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e);});};_f94.prototype.hide=function(e){if(e){e.preventDefault();}e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented()){return;}this.isShown=false;this.escape();$(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(_f94.TRANSITION_DURATION):this.hideModal();};_f94.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus");}},this));};_f94.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide();},this));}else{if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal");}}};_f94.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$body.removeClass("modal-open");that.resetScrollbar();that.$element.trigger("hidden.bs.modal");});};_f94.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null;};_f94.prototype.backdrop=function(_f9a){var that=this;var _f9b=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var _f9c=$.support.transition&&_f9b;this.$backdrop=$("<div class=\"modal-backdrop "+_f9b+"\" />").prependTo(this.$element).on("click.dismiss.bs.modal",$.proxy(function(e){if(e.target!==e.currentTarget){return;}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this);},this));if(_f9c){this.$backdrop[0].offsetWidth;}this.$backdrop.addClass("in");if(!_f9a){return;}_f9c?this.$backdrop.one("bsTransitionEnd",_f9a).emulateTransitionEnd(_f94.BACKDROP_TRANSITION_DURATION):_f9a();}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var _f9d=function(){that.removeBackdrop();_f9a&&_f9a();};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",_f9d).emulateTransitionEnd(_f94.BACKDROP_TRANSITION_DURATION):_f9d();}else{if(_f9a){_f9a();}}}};_f94.prototype.checkScrollbar=function(){this.scrollbarWidth=this.measureScrollbar();};_f94.prototype.setScrollbar=function(){var _f9e=parseInt((this.$body.css("padding-right")||0),10);if(this.scrollbarWidth){this.$body.css("padding-right",_f9e+this.scrollbarWidth);}};_f94.prototype.resetScrollbar=function(){this.$body.css("padding-right","");};_f94.prototype.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth){return 0;}var _f9f=document.createElement("div");_f9f.className="modal-scrollbar-measure";this.$body.append(_f9f);var _fa0=_f9f.offsetWidth-_f9f.clientWidth;this.$body[0].removeChild(_f9f);return _fa0;};function _fa1(_fa2,_fa3){return this.each(function(){var _fa4=$(this);var data=_fa4.data("bs.modal");var _fa5=$.extend({},_f94.DEFAULTS,_fa4.data(),typeof _fa2=="object"&&_fa2);if(!data){_fa4.data("bs.modal",(data=new _f94(this,_fa5)));}if(typeof _fa2=="string"){data[_fa2](_fa3);}else{if(_fa5.show){data.show(_fa3);}}});};var old=$.fn.modal;$.fn.modal=_fa1;$.fn.modal.Constructor=_f94;$.fn.modal.noConflict=function(){$.fn.modal=old;return this;};$(document).on("click.bs.modal.data-api","[data-toggle=\"modal\"]",function(e){var _fa6=$(this);var href=_fa6.attr("href");var _fa7=$(_fa6.attr("data-target")||(href&&href.replace(/.*(?=#[^\s]+$)/,"")));var _fa8=_fa7.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},_fa7.data(),_fa6.data());if(_fa6.is("a")){e.preventDefault();}_fa7.one("show.bs.modal",function(_fa9){if(_fa9.isDefaultPrevented()){return;}_fa7.one("hidden.bs.modal",function(){_fa6.is(":visible")&&_fa6.trigger("focus");});});_fa1.call(_fa7,_fa8,this);});}(jQuery);+function($){"use strict";var _faa=function(_fab,_fac){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",_fab,_fac);};_faa.VERSION="3.3.0";_faa.TRANSITION_DURATION=150;_faa.DEFAULTS={animation:true,placement:"top",selector:false,template:"<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>",trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};_faa.prototype.init=function(type,_fad,_fae){this.enabled=true;this.type=type;this.$element=$(_fad);this.options=this.getOptions(_fae);this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);var _faf=this.options.trigger.split(" ");for(var i=_faf.length;i--;){var _fb0=_faf[i];if(_fb0=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));}else{if(_fb0!="manual"){var _fb1=_fb0=="hover"?"mouseenter":"focusin";var _fb2=_fb0=="hover"?"mouseleave":"focusout";this.$element.on(_fb1+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(_fb2+"."+this.type,this.options.selector,$.proxy(this.leave,this));}}}this.options.selector?(this._options=$.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle();};_faa.prototype.getDefaults=function(){return _faa.DEFAULTS;};_faa.prototype.getOptions=function(_fb3){_fb3=$.extend({},this.getDefaults(),this.$element.data(),_fb3);if(_fb3.delay&&typeof _fb3.delay=="number"){_fb3.delay={show:_fb3.delay,hide:_fb3.delay};}return _fb3;};_faa.prototype.getDelegateOptions=function(){var _fb4={};var _fb5=this.getDefaults();this._options&&$.each(this._options,function(key,_fb6){if(_fb5[key]!=_fb6){_fb4[key]=_fb6;}});return _fb4;};_faa.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self&&self.$tip&&self.$tip.is(":visible")){self.hoverState="in";return;}if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self);}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show){return self.show();}self.timeout=setTimeout(function(){if(self.hoverState=="in"){self.show();}},self.options.delay.show);};_faa.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self);}clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide){return self.hide();}self.timeout=setTimeout(function(){if(self.hoverState=="out"){self.hide();}},self.options.delay.hide);};_faa.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var _fb7=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!_fb7){return;}var that=this;var $tip=this.tip();var _fb8=this.getUID(this.type);this.setContent();$tip.attr("id",_fb8);this.$element.attr("aria-describedby",_fb8);if(this.options.animation){$tip.addClass("fade");}var _fb9=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var _fba=/\s?auto?\s?/i;var _fbb=_fba.test(_fb9);if(_fbb){_fb9=_fb9.replace(_fba,"")||"top";}$tip.detach().css({top:0,left:0,display:"block"}).addClass(_fb9).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var _fbc=$tip[0].offsetWidth;var _fbd=$tip[0].offsetHeight;if(_fbb){var _fbe=_fb9;var _fbf=this.options.container?$(this.options.container):this.$element.parent();var _fc0=this.getPosition(_fbf);_fb9=_fb9=="bottom"&&pos.bottom+_fbd>_fc0.bottom?"top":_fb9=="top"&&pos.top-_fbd<_fc0.top?"bottom":_fb9=="right"&&pos.right+_fbc>_fc0.width?"left":_fb9=="left"&&pos.left-_fbc<_fc0.left?"right":_fb9;$tip.removeClass(_fbe).addClass(_fb9);}var _fc1=this.getCalculatedOffset(_fb9,pos,_fbc,_fbd);this.applyPlacement(_fc1,_fb9);var _fc2=function(){var _fc3=that.hoverState;that.$element.trigger("shown.bs."+that.type);that.hoverState=null;if(_fc3=="out"){that.leave(that);}};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",_fc2).emulateTransitionEnd(_faa.TRANSITION_DURATION):_fc2();}};_faa.prototype.applyPlacement=function(_fc4,_fc5){var $tip=this.tip();var _fc6=$tip[0].offsetWidth;var _fc7=$tip[0].offsetHeight;var _fc8=parseInt($tip.css("margin-top"),10);var _fc9=parseInt($tip.css("margin-left"),10);if(isNaN(_fc8)){_fc8=0;}if(isNaN(_fc9)){_fc9=0;}_fc4.top=_fc4.top+_fc8;_fc4.left=_fc4.left+_fc9;$.offset.setOffset($tip[0],$.extend({using:function(_fca){$tip.css({top:Math.round(_fca.top),left:Math.round(_fca.left)});}},_fc4),0);$tip.addClass("in");var _fcb=$tip[0].offsetWidth;var _fcc=$tip[0].offsetHeight;if(_fc5=="top"&&_fcc!=_fc7){_fc4.top=_fc4.top+_fc7-_fcc;}var _fcd=this.getViewportAdjustedDelta(_fc5,_fc4,_fcb,_fcc);if(_fcd.left){_fc4.left+=_fcd.left;}else{_fc4.top+=_fcd.top;}var _fce=/top|bottom/.test(_fc5);var _fcf=_fce?_fcd.left*2-_fc6+_fcb:_fcd.top*2-_fc7+_fcc;var _fd0=_fce?"offsetWidth":"offsetHeight";$tip.offset(_fc4);this.replaceArrow(_fcf,$tip[0][_fd0],_fce);};_faa.prototype.replaceArrow=function(_fd1,_fd2,_fd3){this.arrow().css(_fd3?"left":"top",50*(1-_fd1/_fd2)+"%").css(_fd3?"top":"left","");};_faa.prototype.setContent=function(){var $tip=this.tip();var _fd4=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](_fd4);$tip.removeClass("fade in top bottom left right");};_faa.prototype.hide=function(_fd5){var that=this;var $tip=this.tip();var e=$.Event("hide.bs."+this.type);function _fd6(){if(that.hoverState!="in"){$tip.detach();}that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type);_fd5&&_fd5();};this.$element.trigger(e);if(e.isDefaultPrevented()){return;}$tip.removeClass("in");$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",_fd6).emulateTransitionEnd(_faa.TRANSITION_DURATION):_fd6();this.hoverState=null;return this;};_faa.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof ($e.attr("data-original-title"))!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","");}};_faa.prototype.hasContent=function(){return this.getTitle();};_faa.prototype.getPosition=function(_fd7){_fd7=_fd7||this.$element;var el=_fd7[0];var _fd8=el.tagName=="BODY";var _fd9=el.getBoundingClientRect();if(_fd9.width==null){_fd9=$.extend({},_fd9,{width:_fd9.right-_fd9.left,height:_fd9.bottom-_fd9.top});}var _fda=_fd8?{top:0,left:0}:_fd7.offset();var _fdb={scroll:_fd8?document.documentElement.scrollTop||document.body.scrollTop:_fd7.scrollTop()};var _fdc=_fd8?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},_fd9,_fdb,_fdc,_fda);};_faa.prototype.getCalculatedOffset=function(_fdd,pos,_fde,_fdf){return _fdd=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-_fde/2}:_fdd=="top"?{top:pos.top-_fdf,left:pos.left+pos.width/2-_fde/2}:_fdd=="left"?{top:pos.top+pos.height/2-_fdf/2,left:pos.left-_fde}:{top:pos.top+pos.height/2-_fdf/2,left:pos.left+pos.width};};_faa.prototype.getViewportAdjustedDelta=function(_fe0,pos,_fe1,_fe2){var _fe3={top:0,left:0};if(!this.$viewport){return _fe3;}var _fe4=this.options.viewport&&this.options.viewport.padding||0;var _fe5=this.getPosition(this.$viewport);if(/right|left/.test(_fe0)){var _fe6=pos.top-_fe4-_fe5.scroll;var _fe7=pos.top+_fe4-_fe5.scroll+_fe2;if(_fe6<_fe5.top){_fe3.top=_fe5.top-_fe6;}else{if(_fe7>_fe5.top+_fe5.height){_fe3.top=_fe5.top+_fe5.height-_fe7;}}}else{var _fe8=pos.left-_fe4;var _fe9=pos.left+_fe4+_fe1;if(_fe8<_fe5.left){_fe3.left=_fe5.left-_fe8;}else{if(_fe9>_fe5.width){_fe3.left=_fe5.left+_fe5.width-_fe9;}}}return _fe3;};_faa.prototype.getTitle=function(){var _fea;var $e=this.$element;var o=this.options;_fea=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return _fea;};_faa.prototype.getUID=function(_feb){do{_feb+=~~(Math.random()*1000000);}while(document.getElementById(_feb));return _feb;};_faa.prototype.tip=function(){return (this.$tip=this.$tip||$(this.options.template));};_faa.prototype.arrow=function(){return (this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow"));};_faa.prototype.enable=function(){this.enabled=true;};_faa.prototype.disable=function(){this.enabled=false;};_faa.prototype.toggleEnabled=function(){this.enabled=!this.enabled;};_faa.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self);}}self.tip().hasClass("in")?self.leave(self):self.enter(self);};_faa.prototype.destroy=function(){var that=this;clearTimeout(this.timeout);this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type);});};function _fec(_fed){return this.each(function(){var _fee=$(this);var data=_fee.data("bs.tooltip");var _fef=typeof _fed=="object"&&_fed;var _ff0=_fef&&_fef.selector;if(!data&&_fed=="destroy"){return;}if(_ff0){if(!data){_fee.data("bs.tooltip",(data={}));}if(!data[_ff0]){data[_ff0]=new _faa(this,_fef);}}else{if(!data){_fee.data("bs.tooltip",(data=new _faa(this,_fef)));}}if(typeof _fed=="string"){data[_fed]();}});};var old=$.fn.tooltip;$.fn.tooltip=_fec;$.fn.tooltip.Constructor=_faa;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this;};}(jQuery);+function($){"use strict";var _ff1=function(_ff2,_ff3){this.init("popover",_ff2,_ff3);};if(!$.fn.tooltip){throw new Error("Popover requires tooltip.js");}_ff1.VERSION="3.3.0";_ff1.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:"<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>"});_ff1.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);_ff1.prototype.constructor=_ff1;_ff1.prototype.getDefaults=function(){return _ff1.DEFAULTS;};_ff1.prototype.setContent=function(){var $tip=this.tip();var _ff4=this.getTitle();var _ff5=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](_ff4);$tip.find(".popover-content").children().detach().end()[this.options.html?(typeof _ff5=="string"?"html":"append"):"text"](_ff5);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html()){$tip.find(".popover-title").hide();}};_ff1.prototype.hasContent=function(){return this.getTitle()||this.getContent();};_ff1.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content);};_ff1.prototype.arrow=function(){return (this.$arrow=this.$arrow||this.tip().find(".arrow"));};_ff1.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template);}return this.$tip;};function _ff6(_ff7){return this.each(function(){var _ff8=$(this);var data=_ff8.data("bs.popover");var _ff9=typeof _ff7=="object"&&_ff7;var _ffa=_ff9&&_ff9.selector;if(!data&&_ff7=="destroy"){return;}if(_ffa){if(!data){_ff8.data("bs.popover",(data={}));}if(!data[_ffa]){data[_ffa]=new _ff1(this,_ff9);}}else{if(!data){_ff8.data("bs.popover",(data=new _ff1(this,_ff9)));}}if(typeof _ff7=="string"){data[_ff7]();}});};var old=$.fn.popover;$.fn.popover=_ff6;$.fn.popover.Constructor=_ff1;$.fn.popover.noConflict=function(){$.fn.popover=old;return this;};}(jQuery);+function($){"use strict";function _ffb(_ffc,_ffd){var _ffe=$.proxy(this.process,this);this.$body=$("body");this.$scrollElement=$(_ffc).is("body")?$(window):$(_ffc);this.options=$.extend({},_ffb.DEFAULTS,_ffd);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",_ffe);this.refresh();this.process();};_ffb.VERSION="3.3.0";_ffb.DEFAULTS={offset:10};_ffb.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight);};_ffb.prototype.refresh=function(){var _fff="offset";var _1000=0;if(!$.isWindow(this.$scrollElement[0])){_fff="position";_1000=this.$scrollElement.scrollTop();}this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();var self=this;this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#./.test(href)&&$(href);return ($href&&$href.length&&$href.is(":visible")&&[[$href[_fff]().top+_1000,href]])||null;}).sort(function(a,b){return a[0]-b[0];}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1]);});};_ffb.prototype.process=function(){var _1001=this.$scrollElement.scrollTop()+this.options.offset;var _1002=this.getScrollHeight();var _1003=this.options.offset+_1002-this.$scrollElement.height();var _1004=this.offsets;var _1005=this.targets;var _1006=this.activeTarget;var i;if(this.scrollHeight!=_1002){this.refresh();}if(_1001>=_1003){return _1006!=(i=_1005[_1005.length-1])&&this.activate(i);}if(_1006&&_1001<_1004[0]){this.activeTarget=null;return this.clear();}for(i=_1004.length;i--;){_1006!=_1005[i]&&_1001>=_1004[i]&&(!_1004[i+1]||_1001<=_1004[i+1])&&this.activate(_1005[i]);}};_ffb.prototype.activate=function(_1007){this.activeTarget=_1007;this.clear();var _1008=this.selector+"[data-target=\""+_1007+"\"],"+this.selector+"[href=\""+_1007+"\"]";var _1009=$(_1008).parents("li").addClass("active");if(_1009.parent(".dropdown-menu").length){_1009=_1009.closest("li.dropdown").addClass("active");}_1009.trigger("activate.bs.scrollspy");};_ffb.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active");};function _100a(_100b){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var _100c=typeof _100b=="object"&&_100b;if(!data){$this.data("bs.scrollspy",(data=new _ffb(this,_100c)));}if(typeof _100b=="string"){data[_100b]();}});};var old=$.fn.scrollspy;$.fn.scrollspy=_100a;$.fn.scrollspy.Constructor=_ffb;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this;};$(window).on("load.bs.scrollspy.data-api",function(){$("[data-spy=\"scroll\"]").each(function(){var $spy=$(this);_100a.call($spy,$spy.data());});});}(jQuery);+function($){"use strict";var Tab=function(_100d){this.element=$(_100d);};Tab.VERSION="3.3.0";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var _100e=$this.data("target");if(!_100e){_100e=$this.attr("href");_100e=_100e&&_100e.replace(/.*(?=#[^\s]*$)/,"");}if($this.parent("li").hasClass("active")){return;}var _100f=$ul.find(".active:last a");var _1010=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var _1011=$.Event("show.bs.tab",{relatedTarget:_100f[0]});_100f.trigger(_1010);$this.trigger(_1011);if(_1011.isDefaultPrevented()||_1010.isDefaultPrevented()){return;}var _1012=$(_100e);this.activate($this.closest("li"),$ul);this.activate(_1012,_1012.parent(),function(){_100f.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:_100f[0]});});};Tab.prototype.activate=function(_1013,_1014,_1015){var _1016=_1014.find("> .active");var _1017=_1015&&$.support.transition&&((_1016.length&&_1016.hasClass("fade"))||!!_1014.find("> .fade").length);function next(){_1016.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find("[data-toggle=\"tab\"]").attr("aria-expanded",false);_1013.addClass("active").find("[data-toggle=\"tab\"]").attr("aria-expanded",true);if(_1017){_1013[0].offsetWidth;_1013.addClass("in");}else{_1013.removeClass("fade");}if(_1013.parent(".dropdown-menu")){_1013.closest("li.dropdown").addClass("active").end().find("[data-toggle=\"tab\"]").attr("aria-expanded",true);}_1015&&_1015();};_1016.length&&_1017?_1016.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();_1016.removeClass("in");};function _1018(_1019){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data){$this.data("bs.tab",(data=new Tab(this)));}if(typeof _1019=="string"){data[_1019]();}});};var old=$.fn.tab;$.fn.tab=_1018;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this;};var _101a=function(e){e.preventDefault();_1018.call($(this),"show");};$(document).on("click.bs.tab.data-api","[data-toggle=\"tab\"]",_101a).on("click.bs.tab.data-api","[data-toggle=\"pill\"]",_101a);}(jQuery);+function($){"use strict";var Affix=function(_101b,_101c){this.options=$.extend({},Affix.DEFAULTS,_101c);this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(_101b);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition();};Affix.VERSION="3.3.0";Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0,target:window};Affix.prototype.getState=function(_101d,_101e,_101f,_1020){var _1021=this.$target.scrollTop();var _1022=this.$element.offset();var _1023=this.$target.height();if(_101f!=null&&this.affixed=="top"){return _1021<_101f?"top":false;}if(this.affixed=="bottom"){if(_101f!=null){return (_1021+this.unpin<=_1022.top)?false:"bottom";}return (_1021+_1023<=_101d-_1020)?false:"bottom";}var _1024=this.affixed==null;var _1025=_1024?_1021:_1022.top;var _1026=_1024?_1023:_101e;if(_101f!=null&&_1025<=_101f){return "top";}if(_1020!=null&&(_1025+_1026>=_101d-_1020)){return "bottom";}return false;};Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset;}this.$element.removeClass(Affix.RESET).addClass("affix");var _1027=this.$target.scrollTop();var _1028=this.$element.offset();return (this.pinnedOffset=_1028.top-_1027);};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1);};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return;}var _1029=this.$element.height();var _102a=this.options.offset;var _102b=_102a.top;var _102c=_102a.bottom;var _102d=$("body").height();if(typeof _102a!="object"){_102c=_102b=_102a;}if(typeof _102b=="function"){_102b=_102a.top(this.$element);}if(typeof _102c=="function"){_102c=_102a.bottom(this.$element);}var affix=this.getState(_102d,_1029,_102b,_102c);if(this.affixed!=affix){if(this.unpin!=null){this.$element.css("top","");}var _102e="affix"+(affix?"-"+affix:"");var e=$.Event(_102e+".bs.affix");this.$element.trigger(e);if(e.isDefaultPrevented()){return;}this.affixed=affix;this.unpin=affix=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(Affix.RESET).addClass(_102e).trigger(_102e.replace("affix","affixed")+".bs.affix");}if(affix=="bottom"){this.$element.offset({top:_102d-_1029-_102c});}};function _102f(_1030){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var _1031=typeof _1030=="object"&&_1030;if(!data){$this.data("bs.affix",(data=new Affix(this,_1031)));}if(typeof _1030=="string"){data[_1030]();}});};var old=$.fn.affix;$.fn.affix=_102f;$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this;};$(window).on("load",function(){$("[data-spy=\"affix\"]").each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom!=null){data.offset.bottom=data.offsetBottom;}if(data.offsetTop!=null){data.offset.top=data.offsetTop;}_102f.call($spy,data);});});}(jQuery);});},"moment/moment":function(){(function(_1032){var _1033,_1034="2.9.0",_1035=(typeof global!=="undefined"&&(typeof window==="undefined"||window===global.window))?global:this,_1036,round=Math.round,_1037=Object.prototype.hasOwnProperty,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,_1038=4,_1039=5,_103a=6,_103b={},_103c=[],_103d=(typeof module!=="undefined"&&module&&module.exports),_103e=/^\/?Date\((\-?\d+)/i,_103f=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,_1040=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,_1041=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,_1042=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,_1043=/\d\d?/,_1044=/\d{1,3}/,_1045=/\d{1,4}/,_1046=/[+\-]?\d{1,6}/,_1047=/\d+/,_1048=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_1049=/Z|[\+\-]\d\d:?\d\d/gi,_104a=/T/i,_104b=/[\+\-]?\d+/,_104c=/[\+\-]?\d+(\.\d{1,3})?/,_104d=/\d/,_104e=/\d\d/,_104f=/\d{3}/,_1050=/\d{4}/,_1051=/[+-]?\d{6}/,_1052=/[+-]?\d+/,_1053=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_1054="YYYY-MM-DDTHH:mm:ssZ",_1055=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],_1056=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],_1057=/([\+\-]|\d\d)/gi,_1058="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),_1059={"Milliseconds":1,"Seconds":1000,"Minutes":60000,"Hours":3600000,"Days":86400000,"Months":2592000000,"Years":31536000000},_105a={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},_105b={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},_105c={},_105d={s:45,m:45,h:22,d:26,M:11},_105e="DDD w W M D d".split(" "),_105f="M D H h m s w W".split(" "),_1060={M:function(){return this.month()+1;},MMM:function(_1061){return this.localeData().monthsShort(this,_1061);},MMMM:function(_1062){return this.localeData().months(this,_1062);},D:function(){return this.date();},DDD:function(){return this.dayOfYear();},d:function(){return this.day();},dd:function(_1063){return this.localeData().weekdaysMin(this,_1063);},ddd:function(_1064){return this.localeData().weekdaysShort(this,_1064);},dddd:function(_1065){return this.localeData().weekdays(this,_1065);},w:function(){return this.week();},W:function(){return this.isoWeek();},YY:function(){return _1066(this.year()%100,2);},YYYY:function(){return _1066(this.year(),4);},YYYYY:function(){return _1066(this.year(),5);},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+_1066(Math.abs(y),6);},gg:function(){return _1066(this.weekYear()%100,2);},gggg:function(){return _1066(this.weekYear(),4);},ggggg:function(){return _1066(this.weekYear(),5);},GG:function(){return _1066(this.isoWeekYear()%100,2);},GGGG:function(){return _1066(this.isoWeekYear(),4);},GGGGG:function(){return _1066(this.isoWeekYear(),5);},e:function(){return this.weekday();},E:function(){return this.isoWeekday();},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true);},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false);},H:function(){return this.hours();},h:function(){return this.hours()%12||12;},m:function(){return this.minutes();},s:function(){return this.seconds();},S:function(){return toInt(this.milliseconds()/100);},SS:function(){return _1066(toInt(this.milliseconds()/10),2);},SSS:function(){return _1066(this.milliseconds(),3);},SSSS:function(){return _1066(this.milliseconds(),3);},Z:function(){var a=this.utcOffset(),b="+";if(a<0){a=-a;b="-";}return b+_1066(toInt(a/60),2)+":"+_1066(toInt(a)%60,2);},ZZ:function(){var a=this.utcOffset(),b="+";if(a<0){a=-a;b="-";}return b+_1066(toInt(a/60),2)+_1066(toInt(a)%60,2);},z:function(){return this.zoneAbbr();},zz:function(){return this.zoneName();},x:function(){return this.valueOf();},X:function(){return this.unix();},Q:function(){return this.quarter();}},_1067={},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],_1068=false;function dfl(a,b,c){switch(arguments.length){case 2:return a!=null?a:b;case 3:return a!=null?a:b!=null?b:c;default:throw new Error("Implement me");}};function _1069(a,b){return _1037.call(a,b);};function _106a(){return {empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};};function _106b(msg){if(_1033.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg);}};function _106c(msg,fn){var _106d=true;return _106e(function(){if(_106d){_106b(msg);_106d=false;}return fn.apply(this,arguments);},fn);};function _106f(name,msg){if(!_1067[name]){_106b(msg);_1067[name]=true;}};function _1070(func,count){return function(a){return _1066(func.call(this,a),count);};};function _1071(func,_1072){return function(a){return this.localeData().ordinal(func.call(this,a),_1072);};};function _1073(a,b){var _1074=((b.year()-a.year())*12)+(b.month()-a.month()),_1075=a.clone().add(_1074,"months"),_1076,_1077;if(b-_1075<0){_1076=a.clone().add(_1074-1,"months");_1077=(b-_1075)/(_1075-_1076);}else{_1076=a.clone().add(_1074+1,"months");_1077=(b-_1075)/(_1076-_1075);}return -(_1074+_1077);};while(_105e.length){i=_105e.pop();_1060[i+"o"]=_1071(_1060[i],i);}while(_105f.length){i=_105f.pop();_1060[i+i]=_1070(_1060[i],2);}_1060.DDDD=_1070(_1060.DDD,3);function _1078(_1079,hour,_107a){var isPm;if(_107a==null){return hour;}if(_1079.meridiemHour!=null){return _1079.meridiemHour(hour,_107a);}else{if(_1079.isPM!=null){isPm=_1079.isPM(_107a);if(isPm&&hour<12){hour+=12;}if(!isPm&&hour===12){hour=0;}return hour;}else{return hour;}}};function _107b(){};function _107c(_107d,_107e){if(_107e!==false){_107f(_107d);}_1080(this,_107d);this._d=new Date(+_107d._d);if(_1068===false){_1068=true;_1033.updateOffset(this);_1068=false;}};function _1081(_1082){var _1083=_1084(_1082),years=_1083.year||0,_1085=_1083.quarter||0,_1086=_1083.month||0,weeks=_1083.week||0,days=_1083.day||0,hours=_1083.hour||0,_1087=_1083.minute||0,_1088=_1083.second||0,_1089=_1083.millisecond||0;this._milliseconds=+_1089+_1088*1000+_1087*60000+hours*3600000;this._days=+days+weeks*7;this._months=+_1086+_1085*3+years*12;this._data={};this._locale=_1033.localeData();this._bubble();};function _106e(a,b){for(var i in b){if(_1069(b,i)){a[i]=b[i];}}if(_1069(b,"toString")){a.toString=b.toString;}if(_1069(b,"valueOf")){a.valueOf=b.valueOf;}return a;};function _1080(to,from){var i,prop,val;if(typeof from._isAMomentObject!=="undefined"){to._isAMomentObject=from._isAMomentObject;}if(typeof from._i!=="undefined"){to._i=from._i;}if(typeof from._f!=="undefined"){to._f=from._f;}if(typeof from._l!=="undefined"){to._l=from._l;}if(typeof from._strict!=="undefined"){to._strict=from._strict;}if(typeof from._tzm!=="undefined"){to._tzm=from._tzm;}if(typeof from._isUTC!=="undefined"){to._isUTC=from._isUTC;}if(typeof from._offset!=="undefined"){to._offset=from._offset;}if(typeof from._pf!=="undefined"){to._pf=from._pf;}if(typeof from._locale!=="undefined"){to._locale=from._locale;}if(_103c.length>0){for(i in _103c){prop=_103c[i];val=from[prop];if(typeof val!=="undefined"){to[prop]=val;}}}return to;};function _108a(_108b){if(_108b<0){return Math.ceil(_108b);}else{return Math.floor(_108b);}};function _1066(_108c,_108d,_108e){var _108f=""+Math.abs(_108c),sign=_108c>=0;while(_108f.length<_108d){_108f="0"+_108f;}return (sign?(_108e?"+":""):"-")+_108f;};function _1090(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months;}res.milliseconds=+other-+(base.clone().add(res.months,"M"));return res;};function _1091(base,other){var res;other=_1092(other,base);if(base.isBefore(other)){res=_1090(base,other);}else{res=_1090(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}return res;};function _1093(_1094,name){return function(val,_1095){var dur,tmp;if(_1095!==null&&!isNaN(+_1095)){_106f(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period).");tmp=val;val=_1095;_1095=tmp;}val=typeof val==="string"?+val:val;dur=_1033.duration(val,_1095);_1096(this,dur,_1094);return this;};};function _1096(mom,_1097,_1098,_1099){var _109a=_1097._milliseconds,days=_1097._days,_109b=_1097._months;_1099=_1099==null?true:_1099;if(_109a){mom._d.setTime(+mom._d+_109a*_1098);}if(days){_109c(mom,"Date",_109d(mom,"Date")+days*_1098);}if(_109b){_109e(mom,_109d(mom,"Month")+_109b*_1098);}if(_1099){_1033.updateOffset(mom,days||_109b);}};function _109f(input){return Object.prototype.toString.call(input)==="[object Array]";};function _10a0(input){return Object.prototype.toString.call(input)==="[object Date]"||input instanceof Date;};function _10a1(_10a2,_10a3,_10a4){var len=Math.min(_10a2.length,_10a3.length),_10a5=Math.abs(_10a2.length-_10a3.length),diffs=0,i;for(i=0;i<len;i++){if((_10a4&&_10a2[i]!==_10a3[i])||(!_10a4&&toInt(_10a2[i])!==toInt(_10a3[i]))){diffs++;}}return diffs+_10a5;};function _10a6(units){if(units){var _10a7=units.toLowerCase().replace(/(.)s$/,"$1");units=_105a[units]||_105b[_10a7]||_10a7;}return units;};function _1084(_10a8){var _10a9={},_10aa,prop;for(prop in _10a8){if(_1069(_10a8,prop)){_10aa=_10a6(prop);if(_10aa){_10a9[_10aa]=_10a8[prop];}}}return _10a9;};function _10ab(field){var count,_10ac;if(field.indexOf("week")===0){count=7;_10ac="day";}else{if(field.indexOf("month")===0){count=12;_10ac="month";}else{return;}}_1033[field]=function(_10ad,index){var i,_10ae,_10af=_1033._locale[field],_10b0=[];if(typeof _10ad==="number"){index=_10ad;_10ad=_1032;}_10ae=function(i){var m=_1033().utc().set(_10ac,i);return _10af.call(_1033._locale,m,_10ad||"");};if(index!=null){return _10ae(index);}else{for(i=0;i<count;i++){_10b0.push(_10ae(i));}return _10b0;}};};function toInt(_10b1){var _10b2=+_10b1,value=0;if(_10b2!==0&&isFinite(_10b2)){if(_10b2>=0){value=Math.floor(_10b2);}else{value=Math.ceil(_10b2);}}return value;};function _10b3(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();};function _10b4(year,dow,doy){return _10b5(_1033([year,11,31+dow-doy]),dow,doy).week;};function _10b6(year){return _10b7(year)?366:365;};function _10b7(year){return (year%4===0&&year%100!==0)||year%400===0;};function _107f(m){var _10b8;if(m._a&&m._pf.overflow===-2){_10b8=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>_10b3(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>24||(m._a[HOUR]===24&&(m._a[_1038]!==0||m._a[_1039]!==0||m._a[_103a]!==0))?HOUR:m._a[_1038]<0||m._a[_1038]>59?_1038:m._a[_1039]<0||m._a[_1039]>59?_1039:m._a[_103a]<0||m._a[_103a]>999?_103a:-1;if(m._pf._overflowDayOfYear&&(_10b8<YEAR||_10b8>DATE)){_10b8=DATE;}m._pf.overflow=_10b8;}};function _10b9(m){if(m._isValid==null){m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated;if(m._strict){m._isValid=m._isValid&&m._pf.charsLeftOver===0&&m._pf.unusedTokens.length===0&&m._pf.bigHour===_1032;}}return m._isValid;};function _10ba(key){return key?key.toLowerCase().replace("_","-"):key;};function _10bb(names){var i=0,j,next,_10bc,split;while(i<names.length){split=_10ba(names[i]).split("-");j=split.length;next=_10ba(names[i+1]);next=next?next.split("-"):null;while(j>0){_10bc=_10bd(split.slice(0,j).join("-"));if(_10bc){return _10bc;}if(next&&next.length>=j&&_10a1(split,next,true)>=j-1){break;}j--;}i++;}return null;};function _10bd(name){var _10be=null;if(!_103b[name]&&_103d){try{_10be=_1033.locale();require("./locale/"+name);_1033.locale(_10be);}catch(e){}}return _103b[name];};function _1092(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(_1033.isMoment(input)||_10a0(input)?+input:+_1033(input))-(+res);res._d.setTime(+res._d+diff);_1033.updateOffset(res,false);return res;}else{return _1033(input).local();}};_106e(_107b.prototype,{set:function(_10bf){var prop,i;for(i in _10bf){prop=_10bf[i];if(typeof prop==="function"){this[i]=prop;}else{this["_"+i]=prop;}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source);},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()];},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()];},monthsParse:function(_10c0,_10c1,_10c2){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}for(i=0;i<12;i++){mom=_1033.utc([2000,i]);if(_10c2&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i");}if(!_10c2&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i");}if(_10c2&&_10c1==="MMMM"&&this._longMonthsParse[i].test(_10c0)){return i;}else{if(_10c2&&_10c1==="MMM"&&this._shortMonthsParse[i].test(_10c0)){return i;}else{if(!_10c2&&this._monthsParse[i].test(_10c0)){return i;}}}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()];},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()];},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()];},weekdaysParse:function(_10c3){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[];}for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=_1033([2000,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i");}if(this._weekdaysParse[i].test(_10c3)){return i;}}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(key){var _10c4=this._longDateFormat[key];if(!_10c4&&this._longDateFormat[key.toUpperCase()]){_10c4=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});this._longDateFormat[key]=_10c4;}return _10c4;},isPM:function(input){return ((input+"").toLowerCase().charAt(0)==="p");},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,_10c5,_10c6){if(hours>11){return _10c6?"pm":"PM";}else{return _10c6?"am":"AM";}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom,now){var _10c7=this._calendar[key];return typeof _10c7==="function"?_10c7.apply(mom,[now]):_10c7;},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(_10c8,_10c9,_10ca,_10cb){var _10cc=this._relativeTime[_10ca];return (typeof _10cc==="function")?_10cc(_10c8,_10c9,_10ca,_10cb):_10cc.replace(/%d/i,_10c8);},pastFuture:function(diff,_10cd){var _10ce=this._relativeTime[diff>0?"future":"past"];return typeof _10ce==="function"?_10ce(_10cd):_10ce.replace(/%s/i,_10cd);},ordinal:function(_10cf){return this._ordinal.replace("%d",_10cf);},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(_10d0){return _10d0;},postformat:function(_10d1){return _10d1;},week:function(mom){return _10b5(mom,this._week.dow,this._week.doy).week;},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow;},firstDayOfYear:function(){return this._week.doy;},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate;}});function _10d2(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"");}return input.replace(/\\/g,"");};function _10d3(_10d4){var array=_10d4.match(_1041),i,_10d5;for(i=0,_10d5=array.length;i<_10d5;i++){if(_1060[array[i]]){array[i]=_1060[array[i]];}else{array[i]=_10d2(array[i]);}}return function(mom){var _10d6="";for(i=0;i<_10d5;i++){_10d6+=array[i] instanceof Function?array[i].call(mom,_10d4):array[i];}return _10d6;};};function _10d7(m,_10d8){if(!m.isValid()){return m.localeData().invalidDate();}_10d8=_10d9(_10d8,m.localeData());if(!_105c[_10d8]){_105c[_10d8]=_10d3(_10d8);}return _105c[_10d8](m);};function _10d9(_10da,_10db){var i=5;function _10dc(input){return _10db.longDateFormat(input)||input;};_1042.lastIndex=0;while(i>=0&&_1042.test(_10da)){_10da=_10da.replace(_1042,_10dc);_1042.lastIndex=0;i-=1;}return _10da;};function _10dd(token,_10de){var a,_10df=_10de._strict;switch(token){case "Q":return _104d;case "DDDD":return _104f;case "YYYY":case "GGGG":case "gggg":return _10df?_1050:_1045;case "Y":case "G":case "g":return _1052;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return _10df?_1051:_1046;case "S":if(_10df){return _104d;}case "SS":if(_10df){return _104e;}case "SSS":if(_10df){return _104f;}case "DDD":return _1044;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return _1048;case "a":case "A":return _10de._locale._meridiemParse;case "x":return _104b;case "X":return _104c;case "Z":case "ZZ":return _1049;case "T":return _104a;case "SSSS":return _1047;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return _10df?_104e:_1043;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return _1043;case "Do":return _10df?_10de._locale._ordinalParse:_10de._locale._ordinalParseLenient;default:a=new RegExp(_10e0(_10e1(token.replace("\\","")),"i"));return a;}};function _10e2(_10e3){_10e3=_10e3||"";var _10e4=(_10e3.match(_1049)||[]),_10e5=_10e4[_10e4.length-1]||[],parts=(_10e5+"").match(_1057)||["-",0,0],_10e6=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?_10e6:-_10e6;};function _10e7(token,input,_10e8){var a,_10e9=_10e8._a;switch(token){case "Q":if(input!=null){_10e9[MONTH]=(toInt(input)-1)*3;}break;case "M":case "MM":if(input!=null){_10e9[MONTH]=toInt(input)-1;}break;case "MMM":case "MMMM":a=_10e8._locale.monthsParse(input,token,_10e8._strict);if(a!=null){_10e9[MONTH]=a;}else{_10e8._pf.invalidMonth=input;}break;case "D":case "DD":if(input!=null){_10e9[DATE]=toInt(input);}break;case "Do":if(input!=null){_10e9[DATE]=toInt(parseInt(input.match(/\d{1,2}/)[0],10));}break;case "DDD":case "DDDD":if(input!=null){_10e8._dayOfYear=toInt(input);}break;case "YY":_10e9[YEAR]=_1033.parseTwoDigitYear(input);break;case "YYYY":case "YYYYY":case "YYYYYY":_10e9[YEAR]=toInt(input);break;case "a":case "A":_10e8._meridiem=input;break;case "h":case "hh":_10e8._pf.bigHour=true;case "H":case "HH":_10e9[HOUR]=toInt(input);break;case "m":case "mm":_10e9[_1038]=toInt(input);break;case "s":case "ss":_10e9[_1039]=toInt(input);break;case "S":case "SS":case "SSS":case "SSSS":_10e9[_103a]=toInt(("0."+input)*1000);break;case "x":_10e8._d=new Date(toInt(input));break;case "X":_10e8._d=new Date(parseFloat(input)*1000);break;case "Z":case "ZZ":_10e8._useUTC=true;_10e8._tzm=_10e2(input);break;case "dd":case "ddd":case "dddd":a=_10e8._locale.weekdaysParse(input);if(a!=null){_10e8._w=_10e8._w||{};_10e8._w["d"]=a;}else{_10e8._pf.invalidWeekday=input;}break;case "w":case "ww":case "W":case "WW":case "d":case "e":case "E":token=token.substr(0,1);case "gggg":case "GGGG":case "GGGGG":token=token.substr(0,2);if(input){_10e8._w=_10e8._w||{};_10e8._w[token]=toInt(input);}break;case "gg":case "GG":_10e8._w=_10e8._w||{};_10e8._w[token]=_1033.parseTwoDigitYear(input);}};function _10ea(_10eb){var w,_10ec,week,_10ed,dow,doy,temp;w=_10eb._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;_10ec=dfl(w.GG,_10eb._a[YEAR],_10b5(_1033(),1,4).year);week=dfl(w.W,1);_10ed=dfl(w.E,1);}else{dow=_10eb._locale._week.dow;doy=_10eb._locale._week.doy;_10ec=dfl(w.gg,_10eb._a[YEAR],_10b5(_1033(),dow,doy).year);week=dfl(w.w,1);if(w.d!=null){_10ed=w.d;if(_10ed<dow){++week;}}else{if(w.e!=null){_10ed=w.e+dow;}else{_10ed=dow;}}}temp=_10ee(_10ec,week,_10ed,doy,dow);_10eb._a[YEAR]=temp.year;_10eb._dayOfYear=temp.dayOfYear;};function _10ef(_10f0){var i,date,input=[],_10f1,_10f2;if(_10f0._d){return;}_10f1=_10f3(_10f0);if(_10f0._w&&_10f0._a[DATE]==null&&_10f0._a[MONTH]==null){_10ea(_10f0);}if(_10f0._dayOfYear){_10f2=dfl(_10f0._a[YEAR],_10f1[YEAR]);if(_10f0._dayOfYear>_10b6(_10f2)){_10f0._pf._overflowDayOfYear=true;}date=_10f4(_10f2,0,_10f0._dayOfYear);_10f0._a[MONTH]=date.getUTCMonth();_10f0._a[DATE]=date.getUTCDate();}for(i=0;i<3&&_10f0._a[i]==null;++i){_10f0._a[i]=input[i]=_10f1[i];}for(;i<7;i++){_10f0._a[i]=input[i]=(_10f0._a[i]==null)?(i===2?1:0):_10f0._a[i];}if(_10f0._a[HOUR]===24&&_10f0._a[_1038]===0&&_10f0._a[_1039]===0&&_10f0._a[_103a]===0){_10f0._nextDay=true;_10f0._a[HOUR]=0;}_10f0._d=(_10f0._useUTC?_10f4:_10f5).apply(null,input);if(_10f0._tzm!=null){_10f0._d.setUTCMinutes(_10f0._d.getUTCMinutes()-_10f0._tzm);}if(_10f0._nextDay){_10f0._a[HOUR]=24;}};function _10f6(_10f7){var _10f8;if(_10f7._d){return;}_10f8=_1084(_10f7._i);_10f7._a=[_10f8.year,_10f8.month,_10f8.day||_10f8.date,_10f8.hour,_10f8.minute,_10f8.second,_10f8.millisecond];_10ef(_10f7);};function _10f3(_10f9){var now=new Date();if(_10f9._useUTC){return [now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];}else{return [now.getFullYear(),now.getMonth(),now.getDate()];}};function _10fa(_10fb){if(_10fb._f===_1033.ISO_8601){_10fc(_10fb);return;}_10fb._a=[];_10fb._pf.empty=true;var _10fd=""+_10fb._i,i,_10fe,_10ff,token,_1100,_1101=_10fd.length,_1102=0;_10ff=_10d9(_10fb._f,_10fb._locale).match(_1041)||[];for(i=0;i<_10ff.length;i++){token=_10ff[i];_10fe=(_10fd.match(_10dd(token,_10fb))||[])[0];if(_10fe){_1100=_10fd.substr(0,_10fd.indexOf(_10fe));if(_1100.length>0){_10fb._pf.unusedInput.push(_1100);}_10fd=_10fd.slice(_10fd.indexOf(_10fe)+_10fe.length);_1102+=_10fe.length;}if(_1060[token]){if(_10fe){_10fb._pf.empty=false;}else{_10fb._pf.unusedTokens.push(token);}_10e7(token,_10fe,_10fb);}else{if(_10fb._strict&&!_10fe){_10fb._pf.unusedTokens.push(token);}}}_10fb._pf.charsLeftOver=_1101-_1102;if(_10fd.length>0){_10fb._pf.unusedInput.push(_10fd);}if(_10fb._pf.bigHour===true&&_10fb._a[HOUR]<=12){_10fb._pf.bigHour=_1032;}_10fb._a[HOUR]=_1078(_10fb._locale,_10fb._a[HOUR],_10fb._meridiem);_10ef(_10fb);_107f(_10fb);};function _10e1(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(_1103,p1,p2,p3,p4){return p1||p2||p3||p4;});};function _10e0(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");};function _1104(_1105){var _1106,_1107,_1108,i,_1109;if(_1105._f.length===0){_1105._pf.invalidFormat=true;_1105._d=new Date(NaN);return;}for(i=0;i<_1105._f.length;i++){_1109=0;_1106=_1080({},_1105);if(_1105._useUTC!=null){_1106._useUTC=_1105._useUTC;}_1106._pf=_106a();_1106._f=_1105._f[i];_10fa(_1106);if(!_10b9(_1106)){continue;}_1109+=_1106._pf.charsLeftOver;_1109+=_1106._pf.unusedTokens.length*10;_1106._pf.score=_1109;if(_1108==null||_1109<_1108){_1108=_1109;_1107=_1106;}}_106e(_1105,_1107||_1106);};function _10fc(_110a){var i,l,_110b=_110a._i,match=_1053.exec(_110b);if(match){_110a._pf.iso=true;for(i=0,l=_1055.length;i<l;i++){if(_1055[i][1].exec(_110b)){_110a._f=_1055[i][0]+(match[6]||" ");break;}}for(i=0,l=_1056.length;i<l;i++){if(_1056[i][1].exec(_110b)){_110a._f+=_1056[i][0];break;}}if(_110b.match(_1049)){_110a._f+="Z";}_10fa(_110a);}else{_110a._isValid=false;}};function _110c(_110d){_10fc(_110d);if(_110d._isValid===false){delete _110d._isValid;_1033.createFromInputFallback(_110d);}};function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}return res;};function _110e(_110f){var input=_110f._i,_1110;if(input===_1032){_110f._d=new Date();}else{if(_10a0(input)){_110f._d=new Date(+input);}else{if((_1110=_103e.exec(input))!==null){_110f._d=new Date(+_1110[1]);}else{if(typeof input==="string"){_110c(_110f);}else{if(_109f(input)){_110f._a=map(input.slice(0),function(obj){return parseInt(obj,10);});_10ef(_110f);}else{if(typeof (input)==="object"){_10f6(_110f);}else{if(typeof (input)==="number"){_110f._d=new Date(input);}else{_1033.createFromInputFallback(_110f);}}}}}}}};function _10f5(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y);}return date;};function _10f4(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y);}return date;};function _1111(input,_1112){if(typeof input==="string"){if(!isNaN(input)){input=parseInt(input,10);}else{input=_1112.weekdaysParse(input);if(typeof input!=="number"){return null;}}}return input;};function _1113(_1114,_1115,_1116,_1117,_1118){return _1118.relativeTime(_1115||1,!!_1116,_1114,_1117);};function _1119(_111a,_111b,_111c){var _111d=_1033.duration(_111a).abs(),_111e=round(_111d.as("s")),_111f=round(_111d.as("m")),hours=round(_111d.as("h")),days=round(_111d.as("d")),_1120=round(_111d.as("M")),years=round(_111d.as("y")),args=_111e<_105d.s&&["s",_111e]||_111f===1&&["m"]||_111f<_105d.m&&["mm",_111f]||hours===1&&["h"]||hours<_105d.h&&["hh",hours]||days===1&&["d"]||days<_105d.d&&["dd",days]||_1120===1&&["M"]||_1120<_105d.M&&["MM",_1120]||years===1&&["y"]||["yy",years];args[2]=_111b;args[3]=+_111a>0;args[4]=_111c;return _1113.apply({},args);};function _10b5(mom,_1121,_1122){var end=_1122-_1121,_1123=_1122-mom.day(),_1124;if(_1123>end){_1123-=7;}if(_1123<end-7){_1123+=7;}_1124=_1033(mom).add(_1123,"d");return {week:Math.ceil(_1124.dayOfYear()/7),year:_1124.year()};};function _10ee(year,week,_1125,_1126,_1127){var d=_10f4(year,0,1).getUTCDay(),_1128,_1129;d=d===0?7:d;_1125=_1125!=null?_1125:_1127;_1128=_1127-d+(d>_1126?7:0)-(d<_1127?7:0);_1129=7*(week-1)+(_1125-_1127)+_1128+1;return {year:_1129>0?year:year-1,dayOfYear:_1129>0?_1129:_10b6(year-1)+_1129};};function _112a(_112b){var input=_112b._i,_112c=_112b._f,res;_112b._locale=_112b._locale||_1033.localeData(_112b._l);if(input===null||(_112c===_1032&&input==="")){return _1033.invalid({nullInput:true});}if(typeof input==="string"){_112b._i=input=_112b._locale.preparse(input);}if(_1033.isMoment(input)){return new _107c(input,true);}else{if(_112c){if(_109f(_112c)){_1104(_112b);}else{_10fa(_112b);}}else{_110e(_112b);}}res=new _107c(_112b);if(res._nextDay){res.add(1,"d");res._nextDay=_1032;}return res;};_1033=function(input,_112d,_112e,_112f){var c;if(typeof (_112e)==="boolean"){_112f=_112e;_112e=_1032;}c={};c._isAMomentObject=true;c._i=input;c._f=_112d;c._l=_112e;c._strict=_112f;c._isUTC=false;c._pf=_106a();return _112a(c);};_1033.suppressDeprecationWarnings=false;_1033.createFromInputFallback=_106c("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(_1130){_1130._d=new Date(_1130._i+(_1130._useUTC?" UTC":""));});function _1131(fn,_1132){var res,i;if(_1132.length===1&&_109f(_1132[0])){_1132=_1132[0];}if(!_1132.length){return _1033();}res=_1132[0];for(i=1;i<_1132.length;++i){if(_1132[i][fn](res)){res=_1132[i];}}return res;};_1033.min=function(){var args=[].slice.call(arguments,0);return _1131("isBefore",args);};_1033.max=function(){var args=[].slice.call(arguments,0);return _1131("isAfter",args);};_1033.utc=function(input,_1133,_1134,_1135){var c;if(typeof (_1134)==="boolean"){_1135=_1134;_1134=_1032;}c={};c._isAMomentObject=true;c._useUTC=true;c._isUTC=true;c._l=_1134;c._i=input;c._f=_1133;c._strict=_1135;c._pf=_106a();return _112a(c).utc();};_1033.unix=function(input){return _1033(input*1000);};_1033.duration=function(input,key){var _1136=input,match=null,sign,ret,_1137,_1138;if(_1033.isDuration(input)){_1136={ms:input._milliseconds,d:input._days,M:input._months};}else{if(typeof input==="number"){_1136={};if(key){_1136[key]=input;}else{_1136.milliseconds=input;}}else{if(!!(match=_103f.exec(input))){sign=(match[1]==="-")?-1:1;_1136={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[_1038])*sign,s:toInt(match[_1039])*sign,ms:toInt(match[_103a])*sign};}else{if(!!(match=_1040.exec(input))){sign=(match[1]==="-")?-1:1;_1137=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return (isNaN(res)?0:res)*sign;};_1136={y:_1137(match[2]),M:_1137(match[3]),d:_1137(match[4]),h:_1137(match[5]),m:_1137(match[6]),s:_1137(match[7]),w:_1137(match[8])};}else{if(_1136==null){_1136={};}else{if(typeof _1136==="object"&&("from" in _1136||"to" in _1136)){_1138=_1091(_1033(_1136.from),_1033(_1136.to));_1136={};_1136.ms=_1138.milliseconds;_1136.M=_1138.months;}}}}}}ret=new _1081(_1136);if(_1033.isDuration(input)&&_1069(input,"_locale")){ret._locale=input._locale;}return ret;};_1033.version=_1034;_1033.defaultFormat=_1054;_1033.ISO_8601=function(){};_1033.momentProperties=_103c;_1033.updateOffset=function(){};_1033.relativeTimeThreshold=function(_1139,limit){if(_105d[_1139]===_1032){return false;}if(limit===_1032){return _105d[_1139];}_105d[_1139]=limit;return true;};_1033.lang=_106c("moment.lang is deprecated. Use moment.locale instead.",function(key,value){return _1033.locale(key,value);});_1033.locale=function(key,_113a){var data;if(key){if(typeof (_113a)!=="undefined"){data=_1033.defineLocale(key,_113a);}else{data=_1033.localeData(key);}if(data){_1033.duration._locale=_1033._locale=data;}}return _1033._locale._abbr;};_1033.defineLocale=function(name,_113b){if(_113b!==null){_113b.abbr=name;if(!_103b[name]){_103b[name]=new _107b();}_103b[name].set(_113b);_1033.locale(name);return _103b[name];}else{delete _103b[name];return null;}};_1033.langData=_106c("moment.langData is deprecated. Use moment.localeData instead.",function(key){return _1033.localeData(key);});_1033.localeData=function(key){var _113c;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}if(!key){return _1033._locale;}if(!_109f(key)){_113c=_10bd(key);if(_113c){return _113c;}key=[key];}return _10bb(key);};_1033.isMoment=function(obj){return obj instanceof _107c||(obj!=null&&_1069(obj,"_isAMomentObject"));};_1033.isDuration=function(obj){return obj instanceof _1081;};for(i=lists.length-1;i>=0;--i){_10ab(lists[i]);}_1033.normalizeUnits=function(units){return _10a6(units);};_1033.invalid=function(flags){var m=_1033.utc(NaN);if(flags!=null){_106e(m._pf,flags);}else{m._pf.userInvalidated=true;}return m;};_1033.parseZone=function(){return _1033.apply(null,arguments).parseZone();};_1033.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};_1033.isDate=_10a0;_106e(_1033.fn=_107c.prototype,{clone:function(){return _1033(this);},valueOf:function(){return +this._d-((this._offset||0)*60000);},unix:function(){return Math.floor(+this/1000);},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");},toDate:function(){return this._offset?new Date(+this):this._d;},toISOString:function(){var m=_1033(this).utc();if(0<m.year()&&m.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString();}else{return _10d7(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}}else{return _10d7(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}},toArray:function(){var m=this;return [m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()];},isValid:function(){return _10b9(this);},isDSTShifted:function(){if(this._a){return this.isValid()&&_10a1(this._a,(this._isUTC?_1033.utc(this._a):_1033(this._a)).toArray())>0;}return false;},parsingFlags:function(){return _106e({},this._pf);},invalidAt:function(){return this._pf.overflow;},utc:function(_113d){return this.utcOffset(0,_113d);},local:function(_113e){if(this._isUTC){this.utcOffset(0,_113e);this._isUTC=false;if(_113e){this.subtract(this._dateUtcOffset(),"m");}}return this;},format:function(_113f){var _1140=_10d7(this,_113f||_1033.defaultFormat);return this.localeData().postformat(_1140);},add:_1093(1,"add"),subtract:_1093(-1,"subtract"),diff:function(input,units,_1141){var that=_1092(input,this),_1142=(that.utcOffset()-this.utcOffset())*60000,_1143,diff,_1144,_1145;units=_10a6(units);if(units==="year"||units==="month"||units==="quarter"){_1144=_1073(this,that);if(units==="quarter"){_1144=_1144/3;}else{if(units==="year"){_1144=_1144/12;}}}else{diff=this-that;_1144=units==="second"?diff/1000:units==="minute"?diff/60000:units==="hour"?diff/3600000:units==="day"?(diff-_1142)/86400000:units==="week"?(diff-_1142)/604800000:diff;}return _1141?_1144:_108a(_1144);},from:function(time,_1146){return _1033.duration({to:this,from:time}).locale(this.locale()).humanize(!_1146);},fromNow:function(_1147){return this.from(_1033(),_1147);},calendar:function(time){var now=time||_1033(),sod=_1092(now,this).startOf("day"),diff=this.diff(sod,"days",true),_1148=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(_1148,this,_1033(now)));},isLeapYear:function(){return _10b7(this.year());},isDST:function(){return (this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=_1111(input,this.localeData());return this.add(input-day,"d");}else{return day;}},month:_1149("Month",true),startOf:function(units){units=_10a6(units);switch(units){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0);}if(units==="week"){this.weekday(0);}else{if(units==="isoWeek"){this.isoWeekday(1);}}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3);}return this;},endOf:function(units){units=_10a6(units);if(units===_1032||units==="millisecond"){return this;}return this.startOf(units).add(1,(units==="isoWeek"?"week":units)).subtract(1,"ms");},isAfter:function(input,units){var _114a;units=_10a6(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=_1033.isMoment(input)?input:_1033(input);return +this>+input;}else{_114a=_1033.isMoment(input)?+input:+_1033(input);return _114a<+this.clone().startOf(units);}},isBefore:function(input,units){var _114b;units=_10a6(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=_1033.isMoment(input)?input:_1033(input);return +this<+input;}else{_114b=_1033.isMoment(input)?+input:+_1033(input);return +this.clone().endOf(units)<_114b;}},isBetween:function(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units);},isSame:function(input,units){var _114c;units=_10a6(units||"millisecond");if(units==="millisecond"){input=_1033.isMoment(input)?input:_1033(input);return +this===+input;}else{_114c=+_1033(input);return +(this.clone().startOf(units))<=_114c&&_114c<=+(this.clone().endOf(units));}},min:_106c("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){other=_1033.apply(null,arguments);return other<this?this:other;}),max:_106c("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){other=_1033.apply(null,arguments);return other>this?this:other;}),zone:_106c("moment().zone is deprecated, use moment().utcOffset instead. "+"https://github.com/moment/moment/issues/1779",function(input,_114d){if(input!=null){if(typeof input!=="string"){input=-input;}this.utcOffset(input,_114d);return this;}else{return -this.utcOffset();}}),utcOffset:function(input,_114e){var _114f=this._offset||0,_1150;if(input!=null){if(typeof input==="string"){input=_10e2(input);}if(Math.abs(input)<16){input=input*60;}if(!this._isUTC&&_114e){_1150=this._dateUtcOffset();}this._offset=input;this._isUTC=true;if(_1150!=null){this.add(_1150,"m");}if(_114f!==input){if(!_114e||this._changeInProgress){_1096(this,_1033.duration(input-_114f,"m"),1,false);}else{if(!this._changeInProgress){this._changeInProgress=true;_1033.updateOffset(this,true);this._changeInProgress=null;}}}return this;}else{return this._isUTC?_114f:this._dateUtcOffset();}},isLocal:function(){return !this._isUTC;},isUtcOffset:function(){return this._isUTC;},isUtc:function(){return this._isUTC&&this._offset===0;},zoneAbbr:function(){return this._isUTC?"UTC":"";},zoneName:function(){return this._isUTC?"Coordinated Universal Time":"";},parseZone:function(){if(this._tzm){this.utcOffset(this._tzm);}else{if(typeof this._i==="string"){this.utcOffset(_10e2(this._i));}}return this;},hasAlignedHourOffset:function(input){if(!input){input=0;}else{input=_1033(input).utcOffset();}return (this.utcOffset()-input)%60===0;},daysInMonth:function(){return _10b3(this.year(),this.month());},dayOfYear:function(input){var _1151=round((_1033(this).startOf("day")-_1033(this).startOf("year"))/86400000)+1;return input==null?_1151:this.add((input-_1151),"d");},quarter:function(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);},weekYear:function(input){var year=_10b5(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add((input-year),"y");},isoWeekYear:function(input){var year=_10b5(this,1,4).year;return input==null?year:this.add((input-year),"y");},week:function(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d");},isoWeek:function(input){var week=_10b5(this,1,4).week;return input==null?week:this.add((input-week)*7,"d");},weekday:function(input){var _1152=(this.day()+7-this.localeData()._week.dow)%7;return input==null?_1152:this.add(input-_1152,"d");},isoWeekday:function(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7);},isoWeeksInYear:function(){return _10b4(this.year(),1,4);},weeksInYear:function(){var _1153=this.localeData()._week;return _10b4(this.year(),_1153.dow,_1153.doy);},get:function(units){units=_10a6(units);return this[units]();},set:function(units,value){var unit;if(typeof units==="object"){for(unit in units){this.set(unit,units[unit]);}}else{units=_10a6(units);if(typeof this[units]==="function"){this[units](value);}}return this;},locale:function(key){var _1154;if(key===_1032){return this._locale._abbr;}else{_1154=_1033.localeData(key);if(_1154!=null){this._locale=_1154;}return this;}},lang:_106c("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===_1032){return this.localeData();}else{return this.locale(key);}}),localeData:function(){return this._locale;},_dateUtcOffset:function(){return -Math.round(this._d.getTimezoneOffset()/15)*15;}});function _109e(mom,value){var _1155;if(typeof value==="string"){value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom;}}_1155=Math.min(mom.date(),_10b3(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,_1155);return mom;};function _109d(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]();};function _109c(mom,unit,value){if(unit==="Month"){return _109e(mom,value);}else{return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value);}};function _1149(unit,_1156){return function(value){if(value!=null){_109c(this,unit,value);_1033.updateOffset(this,_1156);return this;}else{return _109d(this,unit);}};};_1033.fn.millisecond=_1033.fn.milliseconds=_1149("Milliseconds",false);_1033.fn.second=_1033.fn.seconds=_1149("Seconds",false);_1033.fn.minute=_1033.fn.minutes=_1149("Minutes",false);_1033.fn.hour=_1033.fn.hours=_1149("Hours",true);_1033.fn.date=_1149("Date",true);_1033.fn.dates=_106c("dates accessor is deprecated. Use date instead.",_1149("Date",true));_1033.fn.year=_1149("FullYear",true);_1033.fn.years=_106c("years accessor is deprecated. Use year instead.",_1149("FullYear",true));_1033.fn.days=_1033.fn.day;_1033.fn.months=_1033.fn.month;_1033.fn.weeks=_1033.fn.week;_1033.fn.isoWeeks=_1033.fn.isoWeek;_1033.fn.quarters=_1033.fn.quarter;_1033.fn.toJSON=_1033.fn.toISOString;_1033.fn.isUTC=_1033.fn.isUtc;function _1157(days){return days*400/146097;};function _1158(years){return years*146097/400;};_106e(_1033.duration.fn=_1081.prototype,{_bubble:function(){var _1159=this._milliseconds,days=this._days,_115a=this._months,data=this._data,_115b,_115c,hours,years=0;data.milliseconds=_1159%1000;_115b=_108a(_1159/1000);data.seconds=_115b%60;_115c=_108a(_115b/60);data.minutes=_115c%60;hours=_108a(_115c/60);data.hours=hours%24;days+=_108a(hours/24);years=_108a(_1157(days));days-=_108a(_1158(years));_115a+=_108a(days/30);days%=30;years+=_108a(_115a/12);_115a%=12;data.days=days;data.months=_115a;data.years=years;},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this;},weeks:function(){return _108a(this.days()/7);},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+toInt(this._months/12)*31536000000;},humanize:function(_115d){var _115e=_1119(this,!_115d,this.localeData());if(_115d){_115e=this.localeData().pastFuture(+this,_115e);}return this.localeData().postformat(_115e);},add:function(input,val){var dur=_1033.duration(input,val);this._milliseconds+=dur._milliseconds;this._days+=dur._days;this._months+=dur._months;this._bubble();return this;},subtract:function(input,val){var dur=_1033.duration(input,val);this._milliseconds-=dur._milliseconds;this._days-=dur._days;this._months-=dur._months;this._bubble();return this;},get:function(units){units=_10a6(units);return this[units.toLowerCase()+"s"]();},as:function(units){var days,_115f;units=_10a6(units);if(units==="month"||units==="year"){days=this._days+this._milliseconds/86400000;_115f=this._months+_1157(days)*12;return units==="month"?_115f:_115f/12;}else{days=this._days+Math.round(_1158(this._months/12));switch(units){case "week":return days/7+this._milliseconds/604800000;case "day":return days+this._milliseconds/86400000;case "hour":return days*24+this._milliseconds/3600000;case "minute":return days*24*60+this._milliseconds/60000;case "second":return days*24*60*60+this._milliseconds/1000;case "millisecond":return Math.floor(days*24*60*60*1000)+this._milliseconds;default:throw new Error("Unknown unit "+units);}}},lang:_1033.fn.lang,locale:_1033.fn.locale,toIsoString:_106c("toIsoString() is deprecated. Please use toISOString() instead "+"(notice the capitals)",function(){return this.toISOString();}),toISOString:function(){var years=Math.abs(this.years()),_1160=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),_1161=Math.abs(this.minutes()),_1162=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return "P0D";}return (this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(_1160?_1160+"M":"")+(days?days+"D":"")+((hours||_1161||_1162)?"T":"")+(hours?hours+"H":"")+(_1161?_1161+"M":"")+(_1162?_1162+"S":"");},localeData:function(){return this._locale;},toJSON:function(){return this.toISOString();}});_1033.duration.fn.toString=_1033.duration.fn.toISOString;function _1163(name){_1033.duration.fn[name]=function(){return this._data[name];};};for(i in _1059){if(_1069(_1059,i)){_1163(i.toLowerCase());}}_1033.duration.fn.asMilliseconds=function(){return this.as("ms");};_1033.duration.fn.asSeconds=function(){return this.as("s");};_1033.duration.fn.asMinutes=function(){return this.as("m");};_1033.duration.fn.asHours=function(){return this.as("h");};_1033.duration.fn.asDays=function(){return this.as("d");};_1033.duration.fn.asWeeks=function(){return this.as("weeks");};_1033.duration.fn.asMonths=function(){return this.as("M");};_1033.duration.fn.asYears=function(){return this.as("y");};_1033.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(_1164){var b=_1164%10,_1165=(toInt(_1164%100/10)===1)?"th":(b===1)?"st":(b===2)?"nd":(b===3)?"rd":"th";return _1164+_1165;}});function _1166(_1167){if(typeof ender!=="undefined"){return;}_1036=_1035.moment;if(_1167){_1035.moment=_106c("Accessing Moment through the global scope is "+"deprecated, and will be removed in an upcoming "+"release.",_1033);}else{_1035.moment=_1033;}};if(_103d){module.exports=_1033;}else{if(typeof define==="function"&&define.amd){define(function(_1168,_1169,_116a){if(_116a.config&&_116a.config()&&_116a.config().noGlobal===true){_1035.moment=_1036;}return _1033;});_1166(true);}else{_1166();}}}).call(this);},"fastclick/fastclick":function(){(function(){"use strict";function _116b(layer,_116c){var _116d;_116c=_116c||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=_116c.touchBoundary||10;this.layer=layer;this.tapDelay=_116c.tapDelay||200;if(_116b.notNeeded(layer)){return;}function bind(_116e,_116f){return function(){return _116e.apply(_116f,arguments);};};var _1170=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var _1171=this;for(var i=0,l=_1170.length;i<l;i++){_1171[_1170[i]]=bind(_1171[_1170[i]],_1171);}if(_1176){layer.addEventListener("mouseover",this.onMouse,true);layer.addEventListener("mousedown",this.onMouse,true);layer.addEventListener("mouseup",this.onMouse,true);}layer.addEventListener("click",this.onClick,true);layer.addEventListener("touchstart",this.onTouchStart,false);layer.addEventListener("touchmove",this.onTouchMove,false);layer.addEventListener("touchend",this.onTouchEnd,false);layer.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,_1172,_1173){var rmv=Node.prototype.removeEventListener;if(type==="click"){rmv.call(layer,type,_1172.hijacked||_1172,_1173);}else{rmv.call(layer,type,_1172,_1173);}};layer.addEventListener=function(type,_1174,_1175){var adv=Node.prototype.addEventListener;if(type==="click"){adv.call(layer,type,_1174.hijacked||(_1174.hijacked=function(event){if(!event.propagationStopped){_1174(event);}}),_1175);}else{adv.call(layer,type,_1174,_1175);}};}if(typeof layer.onclick==="function"){_116d=layer.onclick;layer.addEventListener("click",function(event){_116d(event);},false);layer.onclick=null;}};var _1176=navigator.userAgent.indexOf("Android")>0;var _1177=/iP(ad|hone|od)/.test(navigator.userAgent);var _1178=_1177&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var _1179=_1177&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);var _117a=navigator.userAgent.indexOf("BB10")>0;_116b.prototype.needsClick=function(_117b){switch(_117b.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(_117b.disabled){return true;}break;case "input":if((_1177&&_117b.type==="file")||_117b.disabled){return true;}break;case "label":case "video":return true;}return (/\bneedsclick\b/).test(_117b.className);};_116b.prototype.needsFocus=function(_117c){switch(_117c.nodeName.toLowerCase()){case "textarea":return true;case "select":return !_1176;case "input":switch(_117c.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return false;}return !_117c.disabled&&!_117c.readOnly;default:return (/\bneedsfocus\b/).test(_117c.className);}};_116b.prototype.sendClick=function(_117d,event){var _117e,touch;if(document.activeElement&&document.activeElement!==_117d){document.activeElement.blur();}touch=event.changedTouches[0];_117e=document.createEvent("MouseEvents");_117e.initMouseEvent(this.determineEventType(_117d),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);_117e.forwardedTouchEvent=true;_117d.dispatchEvent(_117e);};_116b.prototype.determineEventType=function(_117f){if(_1176&&_117f.tagName.toLowerCase()==="select"){return "mousedown";}return "click";};_116b.prototype.focus=function(_1180){var _1181;if(_1177&&_1180.setSelectionRange&&_1180.type.indexOf("date")!==0&&_1180.type!=="time"){_1181=_1180.value.length;_1180.setSelectionRange(_1181,_1181);}else{_1180.focus();}};_116b.prototype.updateScrollParent=function(_1182){var _1183,_1184;_1183=_1182.fastClickScrollParent;if(!_1183||!_1183.contains(_1182)){_1184=_1182;do{if(_1184.scrollHeight>_1184.offsetHeight){_1183=_1184;_1182.fastClickScrollParent=_1184;break;}_1184=_1184.parentElement;}while(_1184);}if(_1183){_1183.fastClickLastScrollTop=_1183.scrollTop;}};_116b.prototype.getTargetElementFromEventTarget=function(_1185){if(_1185.nodeType===Node.TEXT_NODE){return _1185.parentNode;}return _1185;};_116b.prototype.onTouchStart=function(event){var _1186,touch,_1187;if(event.targetTouches.length>1){return true;}_1186=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(_1177){_1187=window.getSelection();if(_1187.rangeCount&&!_1187.isCollapsed){return true;}if(!_1178){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false;}this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(_1186);}}this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=_1186;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if((event.timeStamp-this.lastClickTime)<this.tapDelay){event.preventDefault();}return true;};_116b.prototype.touchHasMoved=function(event){var touch=event.changedTouches[0],_1188=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>_1188||Math.abs(touch.pageY-this.touchStartY)>_1188){return true;}return false;};_116b.prototype.onTouchMove=function(event){if(!this.trackingClick){return true;}if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null;}return true;};_116b.prototype.findControl=function(_1189){if(_1189.control!==undefined){return _1189.control;}if(_1189.htmlFor){return document.getElementById(_1189.htmlFor);}return _1189.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea");};_116b.prototype.onTouchEnd=function(event){var _118a,_118b,_118c,_118d,touch,_118e=this.targetElement;if(!this.trackingClick){return true;}if((event.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true;}this.cancelNextClick=false;this.lastClickTime=event.timeStamp;_118b=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(_1179){touch=event.changedTouches[0];_118e=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||_118e;_118e.fastClickScrollParent=this.targetElement.fastClickScrollParent;}_118c=_118e.tagName.toLowerCase();if(_118c==="label"){_118a=this.findControl(_118e);if(_118a){this.focus(_118e);if(_1176){return false;}_118e=_118a;}}else{if(this.needsFocus(_118e)){if((event.timeStamp-_118b)>100||(_1177&&window.top!==window&&_118c==="input")){this.targetElement=null;return false;}this.focus(_118e);this.sendClick(_118e,event);if(!_1177||_118c!=="select"){this.targetElement=null;event.preventDefault();}return false;}}if(_1177&&!_1178){_118d=_118e.fastClickScrollParent;if(_118d&&_118d.fastClickLastScrollTop!==_118d.scrollTop){return true;}}if(!this.needsClick(_118e)){event.preventDefault();this.sendClick(_118e,event);}return false;};_116b.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null;};_116b.prototype.onMouse=function(event){if(!this.targetElement){return true;}if(event.forwardedTouchEvent){return true;}if(!event.cancelable){return true;}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation();}else{event.propagationStopped=true;}event.stopPropagation();event.preventDefault();return false;}return true;};_116b.prototype.onClick=function(event){var _118f;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true;}if(event.target.type==="submit"&&event.detail===0){return true;}_118f=this.onMouse(event);if(!_118f){this.targetElement=null;}return _118f;};_116b.prototype.destroy=function(){var layer=this.layer;if(_1176){layer.removeEventListener("mouseover",this.onMouse,true);layer.removeEventListener("mousedown",this.onMouse,true);layer.removeEventListener("mouseup",this.onMouse,true);}layer.removeEventListener("click",this.onClick,true);layer.removeEventListener("touchstart",this.onTouchStart,false);layer.removeEventListener("touchmove",this.onTouchMove,false);layer.removeEventListener("touchend",this.onTouchEnd,false);layer.removeEventListener("touchcancel",this.onTouchCancel,false);};_116b.notNeeded=function(layer){var _1190;var _1191;var _1192;if(typeof window.ontouchstart==="undefined"){return true;}_1191=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(_1191){if(_1176){_1190=document.querySelector("meta[name=viewport]");if(_1190){if(_1190.content.indexOf("user-scalable=no")!==-1){return true;}if(_1191>31&&document.documentElement.scrollWidth<=window.outerWidth){return true;}}}else{return true;}}if(_117a){_1192=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(_1192[1]>=10&&_1192[2]>=3){_1190=document.querySelector("meta[name=viewport]");if(_1190){if(_1190.content.indexOf("user-scalable=no")!==-1){return true;}if(document.documentElement.scrollWidth<=window.outerWidth){return true;}}}}if(layer.style.msTouchAction==="none"){return true;}return false;};_116b.attach=function(layer,_1193){return new _116b(layer,_1193);};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return _116b;});}else{if(typeof module!=="undefined"&&module.exports){module.exports=_116b.attach;module.exports.FastClick=_116b;}else{window.FastClick=_116b;}}}());},"bootstrap-datetimepicker/bootstrap-datetimepicker":function(){define(["dojo","dijit","dojox"],function(dojo,dijit,dojox){(function($){var _1194=(window.orientation!=undefined);var _1195=function(_1196,_1197){this.id=dpgId++;this.init(_1196,_1197);};var _1198=function(dt){if(typeof dt==="string"){return new Date(dt);}return dt;};_1195.prototype={constructor:_1195,init:function(_1199,_119a){var icon;if(!(_119a.pickTime||_119a.pickDate)){throw new Error("Must choose at least one picker");}this.options=_119a;this.$element=$(_1199);this.language=_119a.language in dates?_119a.language:"en";this.pickDate=_119a.pickDate;this.pickTime=_119a.pickTime;this.isInput=this.$element.is("input");this.component=false;if(this.$element.find(".input-append")||this.$element.find(".input-prepend")){this.component=this.$element.find(".add-on");}this.format=_119a.format;if(!this.format){if(this.isInput){this.format=this.$element.data("format");}else{this.format=this.$element.find("input").data("format");}if(!this.format){this.format="MM/dd/yyyy";}}this._compileFormat();if(this.component){icon=this.component.find("i");}if(this.pickTime){if(icon&&icon.length){this.timeIcon=icon.data("time-icon");}if(!this.timeIcon){this.timeIcon="icon-time";}icon.addClass(this.timeIcon);}if(this.pickDate){if(icon&&icon.length){this.dateIcon=icon.data("date-icon");}if(!this.dateIcon){this.dateIcon="icon-calendar";}icon.removeClass(this.timeIcon);icon.addClass(this.dateIcon);}this.widget=$(_119b(this.timeIcon,_119a.pickDate,_119a.pickTime,_119a.pick12HourFormat,_119a.pickSeconds,_119a.collapse)).appendTo("body");this.minViewMode=_119a.minViewMode||this.$element.data("date-minviewmode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case "months":this.minViewMode=1;break;case "years":this.minViewMode=2;break;default:this.minViewMode=0;break;}}this.viewMode=_119a.viewMode||this.$element.data("date-viewmode")||0;if(typeof this.viewMode==="string"){switch(this.viewMode){case "months":this.viewMode=1;break;case "years":this.viewMode=2;break;default:this.viewMode=0;break;}}this.startViewMode=this.viewMode;this.weekStart=_119a.weekStart||this.$element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.setStartDate(_119a.startDate||this.$element.data("date-startdate"));this.setEndDate(_119a.endDate||this.$element.data("date-enddate"));this.fillDow();this.fillMonths();this.fillHours();this.fillMinutes();this.fillSeconds();this.update();this.showMode();this._attachDatePickerEvents();},show:function(e){this.widget.show();this.height=this.component?this.component.outerHeight():this.$element.outerHeight();this.place();this.$element.trigger({type:"show",date:this._date});this._attachDatePickerGlobalEvents();if(e){e.stopPropagation();e.preventDefault();}},disable:function(){this.$element.find("input").prop("disabled",true);this._detachDatePickerEvents();},enable:function(){this.$element.find("input").prop("disabled",false);this._attachDatePickerEvents();},hide:function(){var _119c=this.widget.find(".collapse");for(var i=0;i<_119c.length;i++){var _119d=_119c.eq(i).data("collapse");if(_119d&&_119d.transitioning){return;}}this.widget.hide();this.viewMode=this.startViewMode;this.showMode();this.set();this.$element.trigger({type:"hide",date:this._date});this._detachDatePickerGlobalEvents();},set:function(){var _119e="";if(!this._unset){_119e=this.formatDate(this._date);}if(!this.isInput){if(this.component){var input=this.$element.find("input");input.val(_119e);this._resetMaskPos(input);}this.$element.data("date",_119e);}else{this.$element.val(_119e);this._resetMaskPos(this.$element);}},setValue:function(_119f){if(!_119f){this._unset=true;}else{this._unset=false;}if(typeof _119f==="string"){this._date=this.parseDate(_119f);}else{if(_119f){this._date=new Date(_119f);}}this.set();this.viewDate=_11a0(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0);this.fillDate();this.fillTime();},getDate:function(){if(this._unset){return null;}return new Date(this._date.valueOf());},setDate:function(date){if(!date){this.setValue(null);}else{this.setValue(date.valueOf());}},setStartDate:function(date){if(date instanceof Date){this.startDate=date;}else{if(typeof date==="string"){this.startDate=new _11a0(date);if(!this.startDate.getUTCFullYear()){this.startDate=-Infinity;}}else{this.startDate=-Infinity;}}if(this.viewDate){this.update();}},setEndDate:function(date){if(date instanceof Date){this.endDate=date;}else{if(typeof date==="string"){this.endDate=new _11a0(date);if(!this.endDate.getUTCFullYear()){this.endDate=Infinity;}}else{this.endDate=Infinity;}}if(this.viewDate){this.update();}},getLocalDate:function(){if(this._unset){return null;}var d=this._date;return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds());},setLocalDate:function(_11a1){if(!_11a1){this.setValue(null);}else{this.setValue(Date.UTC(_11a1.getFullYear(),_11a1.getMonth(),_11a1.getDate(),_11a1.getHours(),_11a1.getMinutes(),_11a1.getSeconds(),_11a1.getMilliseconds()));}},place:function(){var _11a2="absolute";var _11a3=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth();_11a3.top=_11a3.top+this.height;var _11a4=$(window);if(this.options.width!=undefined){this.widget.width(this.options.width);}if(this.options.orientation=="left"){this.widget.addClass("left-oriented");_11a3.left=_11a3.left-this.widget.width()+20;}if(this._isInFixed()){_11a2="fixed";_11a3.top-=_11a4.scrollTop();_11a3.left-=_11a4.scrollLeft();}if(_11a4.width()<_11a3.left+this.widget.outerWidth()){_11a3.right=_11a4.width()-_11a3.left-this.width;_11a3.left="auto";this.widget.addClass("pull-right");}else{_11a3.right="auto";this.widget.removeClass("pull-right");}this.widget.css({position:_11a2,top:_11a3.top,left:_11a3.left,right:_11a3.right});},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()});},update:function(_11a5){var _11a6=_11a5;if(!_11a6){if(this.isInput){_11a6=this.$element.val();}else{_11a6=this.$element.find("input").val();}if(_11a6){this._date=this.parseDate(_11a6);}if(!this._date){var tmp=new Date();this._date=_11a0(tmp.getFullYear(),tmp.getMonth(),tmp.getDate(),tmp.getHours(),tmp.getMinutes(),tmp.getSeconds(),tmp.getMilliseconds());}}this.viewDate=_11a0(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0);this.fillDate();this.fillTime();},fillDow:function(){var _11a7=this.weekStart;var html=$("<tr>");while(_11a7<this.weekStart+7){html.append("<th class=\"dow\">"+dates[this.language].daysMin[(_11a7++)%7]+"</th>");}this.widget.find(".datepicker-days thead").append(html);},fillMonths:function(){var html="";var i=0;while(i<12){html+="<span class=\"month\">"+dates[this.language].monthsShort[i++]+"</span>";}this.widget.find(".datepicker-months td").append(html);},fillDate:function(){var year=this.viewDate.getUTCFullYear();var month=this.viewDate.getUTCMonth();var _11a8=_11a0(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0);var _11a9=typeof this.startDate==="object"?this.startDate.getUTCFullYear():-Infinity;var _11aa=typeof this.startDate==="object"?this.startDate.getUTCMonth():-1;var _11ab=typeof this.endDate==="object"?this.endDate.getUTCFullYear():Infinity;var _11ac=typeof this.endDate==="object"?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled");this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled");this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled");this.widget.find(".datepicker-days th:eq(1)").text(dates[this.language].months[month]+" "+year);var _11ad=_11a0(year,month-1,28,0,0,0,0);var day=_11ae.getDaysInMonth(_11ad.getUTCFullYear(),_11ad.getUTCMonth());_11ad.setUTCDate(day);_11ad.setUTCDate(day-(_11ad.getUTCDay()-this.weekStart+7)%7);if((year==_11a9&&month<=_11aa)||year<_11a9){this.widget.find(".datepicker-days th:eq(0)").addClass("disabled");}if((year==_11ab&&month>=_11ac)||year>_11ab){this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");}var _11af=new Date(_11ad.valueOf());_11af.setUTCDate(_11af.getUTCDate()+42);_11af=_11af.valueOf();var html=[];var row;var _11b0;while(_11ad.valueOf()<_11af){if(_11ad.getUTCDay()===this.weekStart){row=$("<tr>");html.push(row);}_11b0="";if(_11ad.getUTCFullYear()<year||(_11ad.getUTCFullYear()==year&&_11ad.getUTCMonth()<month)){_11b0+=" old";}else{if(_11ad.getUTCFullYear()>year||(_11ad.getUTCFullYear()==year&&_11ad.getUTCMonth()>month)){_11b0+=" new";}}if(_11ad.valueOf()===_11a8.valueOf()){_11b0+=" active";}if((_11ad.valueOf()+86400000)<=this.startDate){_11b0+=" disabled";}if(_11ad.valueOf()>this.endDate){_11b0+=" disabled";}row.append("<td class=\"day"+_11b0+"\">"+_11ad.getUTCDate()+"</td>");_11ad.setUTCDate(_11ad.getUTCDate()+1);}this.widget.find(".datepicker-days tbody").empty().append(html);var _11b1=this._date.getUTCFullYear();var _11b2=this.widget.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");if(_11b1===year){_11b2.eq(this._date.getUTCMonth()).addClass("active");}if(_11b1-1<_11a9){this.widget.find(".datepicker-months th:eq(0)").addClass("disabled");}if(_11b1+1>_11ab){this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");}for(var i=0;i<12;i++){if((year==_11a9&&_11aa>i)||(year<_11a9)){$(_11b2[i]).addClass("disabled");}else{if((year==_11ab&&_11ac<i)||(year>_11ab)){$(_11b2[i]).addClass("disabled");}}}html="";year=parseInt(year/10,10)*10;var _11b3=this.widget.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled");if(_11a9>year){this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled");}if(_11ab<year+9){this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled");}year-=1;for(var i=-1;i<11;i++){html+="<span class=\"year"+(i===-1||i===10?" old":"")+(_11b1===year?" active":"")+((year<_11a9||year>_11ab)?" disabled":"")+"\">"+year+"</span>";year+=1;}_11b3.html(html);},fillHours:function(){var table=this.widget.find(".timepicker .timepicker-hours table");table.parent().hide();var html="";if(this.options.pick12HourFormat){var _11b4=1;for(var i=0;i<3;i+=1){html+="<tr>";for(var j=0;j<4;j+=1){var c=_11b4.toString();html+="<td class=\"hour\">"+_11b5(c,2,"0")+"</td>";_11b4++;}html+="</tr>";}}else{var _11b4=0;for(var i=0;i<6;i+=1){html+="<tr>";for(var j=0;j<4;j+=1){var c=_11b4.toString();html+="<td class=\"hour\">"+_11b5(c,2,"0")+"</td>";_11b4++;}html+="</tr>";}}table.html(html);},fillMinutes:function(){var table=this.widget.find(".timepicker .timepicker-minutes table");table.parent().hide();var html="";var _11b6=0;for(var i=0;i<5;i++){html+="<tr>";for(var j=0;j<4;j+=1){var c=_11b6.toString();html+="<td class=\"minute\">"+_11b5(c,2,"0")+"</td>";_11b6+=3;}html+="</tr>";}table.html(html);},fillSeconds:function(){var table=this.widget.find(".timepicker .timepicker-seconds table");table.parent().hide();var html="";var _11b7=0;for(var i=0;i<5;i++){html+="<tr>";for(var j=0;j<4;j+=1){var c=_11b7.toString();html+="<td class=\"second\">"+_11b5(c,2,"0")+"</td>";_11b7+=3;}html+="</tr>";}table.html(html);},fillTime:function(){if(!this._date){return;}var _11b8=this.widget.find(".timepicker span[data-time-component]");var table=_11b8.closest("table");var _11b9=this.options.pick12HourFormat;var hour=this._date.getUTCHours();var _11ba="AM";if(_11b9){if(hour>=12){_11ba="PM";}if(hour===0){hour=12;}else{if(hour!=12){hour=hour%12;}}this.widget.find(".timepicker [data-action=togglePeriod]").text(_11ba);}hour=_11b5(hour.toString(),2,"0");var _11bb=_11b5(this._date.getUTCMinutes().toString(),2,"0");var _11bc=_11b5(this._date.getUTCSeconds().toString(),2,"0");_11b8.filter("[data-time-component=hours]").text(hour);_11b8.filter("[data-time-component=minutes]").text(_11bb);_11b8.filter("[data-time-component=seconds]").text(_11bc);},click:function(e){e.stopPropagation();e.preventDefault();this._unset=false;var _11bd=$(e.target).closest("span, td, th");if(_11bd.length===1){if(!_11bd.is(".disabled")){switch(_11bd[0].nodeName.toLowerCase()){case "th":switch(_11bd[0].className){case "switch":this.showMode(1);break;case "prev":case "next":var vd=this.viewDate;var _11be=_11ae.modes[this.viewMode].navFnc;var step=_11ae.modes[this.viewMode].navStep;if(_11bd[0].className==="prev"){step=step*-1;}vd["set"+_11be](vd["get"+_11be]()+step);this.fillDate();this.set();break;}break;case "span":if(_11bd.is(".month")){var month=_11bd.parent().find("span").index(_11bd);this.viewDate.setUTCMonth(month);}else{var year=parseInt(_11bd.text(),10)||0;this.viewDate.setUTCFullYear(year);}if(this.viewMode!==0){this._date=_11a0(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds());this.notifyChange();}this.showMode(-1);this.fillDate();this.set();break;case "td":if(_11bd.is(".day")){var day=parseInt(_11bd.text(),10)||1;var month=this.viewDate.getUTCMonth();var year=this.viewDate.getUTCFullYear();if(_11bd.is(".old")){if(month===0){month=11;year-=1;}else{month-=1;}}else{if(_11bd.is(".new")){if(month==11){month=0;year+=1;}else{month+=1;}}}this._date=_11a0(year,month,day,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds());this.viewDate=_11a0(year,month,Math.min(28,day),0,0,0,0);this.fillDate();this.set();this.notifyChange();}break;}}}},actions:{incrementHours:function(e){this._date.setUTCHours(this._date.getUTCHours()+1);},incrementMinutes:function(e){this._date.setUTCMinutes(this._date.getUTCMinutes()+1);},incrementSeconds:function(e){this._date.setUTCSeconds(this._date.getUTCSeconds()+1);},decrementHours:function(e){this._date.setUTCHours(this._date.getUTCHours()-1);},decrementMinutes:function(e){this._date.setUTCMinutes(this._date.getUTCMinutes()-1);},decrementSeconds:function(e){this._date.setUTCSeconds(this._date.getUTCSeconds()-1);},togglePeriod:function(e){var hour=this._date.getUTCHours();if(hour>=12){hour-=12;}else{hour+=12;}this._date.setUTCHours(hour);},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide();this.widget.find(".timepicker .timepicker-picker").show();},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide();this.widget.find(".timepicker .timepicker-hours").show();},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide();this.widget.find(".timepicker .timepicker-minutes").show();},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide();this.widget.find(".timepicker .timepicker-seconds").show();},selectHour:function(e){var tgt=$(e.target);var value=parseInt(tgt.text(),10);if(this.options.pick12HourFormat){var _11bf=this._date.getUTCHours();if(_11bf>=12){if(value!=12){value=(value+12)%24;}}else{if(value===12){value=0;}else{value=value%12;}}}this._date.setUTCHours(value);this.actions.showPicker.call(this);},selectMinute:function(e){var tgt=$(e.target);var value=parseInt(tgt.text(),10);this._date.setUTCMinutes(value);this.actions.showPicker.call(this);},selectSecond:function(e){var tgt=$(e.target);var value=parseInt(tgt.text(),10);this._date.setUTCSeconds(value);this.actions.showPicker.call(this);}},doAction:function(e){e.stopPropagation();e.preventDefault();if(!this._date){this._date=_11a0(1970,0,0,0,0,0,0);}var _11c0=$(e.currentTarget).data("action");var rv=this.actions[_11c0].apply(this,arguments);this.set();this.fillTime();this.notifyChange();return rv;},stopEvent:function(e){e.stopPropagation();e.preventDefault();},keydown:function(e){var self=this,k=e.which,input=$(e.target);if(k==8||k==46){setTimeout(function(){self._resetMaskPos(input);});}},keypress:function(e){var k=e.which;if(k==8||k==46){return;}var input=$(e.target);var c=String.fromCharCode(k);var val=input.val()||"";val+=c;var mask=this._mask[this._maskPos];if(!mask){return false;}if(mask.end!=val.length){return;}if(!mask.pattern.test(val.slice(mask.start))){val=val.slice(0,val.length-1);while((mask=this._mask[this._maskPos])&&mask.character){val+=mask.character;this._maskPos++;}val+=c;if(mask.end!=val.length){input.val(val);return false;}else{if(!mask.pattern.test(val.slice(mask.start))){input.val(val.slice(0,mask.start));return false;}else{input.val(val);this._maskPos++;return false;}}}else{this._maskPos++;}},change:function(e){var input=$(e.target);var val=input.val();if(this._formatPattern.test(val)){this.update();this.setValue(this._date.getTime());this.notifyChange();this.set();}else{if(val&&val.trim()){this.setValue(this._date.getTime());if(this._date){this.set();}else{input.val("");}}else{if(this._date){this.setValue(null);this.notifyChange();this._unset=true;}}}this._resetMaskPos(input);},showMode:function(dir){if(dir){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+dir));}this.widget.find(".datepicker > div").hide().filter(".datepicker-"+_11ae.modes[this.viewMode].clsName).show();},destroy:function(){this._detachDatePickerEvents();this._detachDatePickerGlobalEvents();this.widget.remove();this.$element.removeData("datetimepicker");this.component.removeData("datetimepicker");},formatDate:function(d){return this.format.replace(_11c1,function(match){var _11c2,_11c3,rv,len=match.length;if(match==="ms"){len=1;}_11c3=_11c4[match].property;if(_11c3==="Hours12"){rv=d.getUTCHours();if(rv===0){rv=12;}else{if(rv!==12){rv=rv%12;}}}else{if(_11c3==="Period12"){if(d.getUTCHours()>=12){return "PM";}else{return "AM";}}else{if(_11c3==="UTCYear"){rv=d.getUTCFullYear();rv=rv.toString().substr(2);}else{_11c2="get"+_11c3;rv=d[_11c2]();}}}if(_11c2==="getUTCMonth"){rv=rv+1;}return _11b5(rv.toString(),len,"0");});},parseDate:function(str){var match,i,_11c5,_11c6,value,_11c7={};if(!(match=this._formatPattern.exec(str))){return null;}for(i=1;i<match.length;i++){_11c5=this._propertiesByIndex[i];if(!_11c5){continue;}value=match[i];if(/^\d+$/.test(value)){value=parseInt(value,10);}_11c7[_11c5]=value;}return this._finishParsingDate(_11c7);},_resetMaskPos:function(input){var val=input.val();for(var i=0;i<this._mask.length;i++){if(this._mask[i].end>val.length){this._maskPos=i;break;}else{if(this._mask[i].end===val.length){this._maskPos=i+1;break;}}}},_finishParsingDate:function(_11c8){var year,month,date,hours,_11c9,_11ca,_11cb;year=_11c8.UTCFullYear;if(_11c8.UTCYear){year=2000+_11c8.UTCYear;}if(!year){year=1970;}if(_11c8.UTCMonth){month=_11c8.UTCMonth-1;}else{month=0;}date=_11c8.UTCDate||1;hours=_11c8.UTCHours||0;_11c9=_11c8.UTCMinutes||0;_11ca=_11c8.UTCSeconds||0;_11cb=_11c8.UTCMilliseconds||0;if(_11c8.Hours12){hours=_11c8.Hours12;}if(_11c8.Period12){if(/pm/i.test(_11c8.Period12)){if(hours!=12){hours=(hours+12)%24;}}else{hours=hours%12;}}return _11a0(year,month,date,hours,_11c9,_11ca,_11cb);},_compileFormat:function(){var match,_11cc,_11cd=[],mask=[],str=this.format,_11ce={},i=0,pos=0;while(match=_11cf.exec(str)){_11cc=match[0];if(_11cc in _11c4){i++;_11ce[i]=_11c4[_11cc].property;_11cd.push("\\s*"+_11c4[_11cc].getPattern(this)+"\\s*");mask.push({pattern:new RegExp(_11c4[_11cc].getPattern(this)),property:_11c4[_11cc].property,start:pos,end:pos+=_11cc.length});}else{_11cd.push(_11d0(_11cc));mask.push({pattern:new RegExp(_11d0(_11cc)),character:_11cc,start:pos,end:++pos});}str=str.slice(_11cc.length);}this._mask=mask;this._maskPos=0;this._formatPattern=new RegExp("^\\s*"+_11cd.join("")+"\\s*$");this._propertiesByIndex=_11ce;},_attachDatePickerEvents:function(){var self=this;this.widget.on("click",".datepicker *",$.proxy(this.click,this));this.widget.on("click","[data-action]",$.proxy(this.doAction,this));this.widget.on("mousedown",$.proxy(this.stopEvent,this));if(this.pickDate&&this.pickTime){this.widget.on("click.togglePicker",".accordion-toggle",function(e){e.stopPropagation();var $this=$(this);var _11d1=$this.closest("ul");var _11d2=_11d1.find(".collapse.in");var _11d3=_11d1.find(".collapse:not(.in)");if(_11d2&&_11d2.length){var _11d4=_11d2.data("collapse");if(_11d4&&_11d4.transitioning){return;}_11d2.collapse("hide");_11d3.collapse("show");$this.find("i").toggleClass(self.timeIcon+" "+self.dateIcon);self.$element.find(".add-on i").toggleClass(self.timeIcon+" "+self.dateIcon);}});}if(this.isInput){this.$element.on({"focus":$.proxy(this.show,this),"change":$.proxy(this.change,this)});if(this.options.maskInput){this.$element.on({"keydown":$.proxy(this.keydown,this),"keypress":$.proxy(this.keypress,this)});}}else{this.$element.on({"change":$.proxy(this.change,this)},"input");if(this.options.maskInput){this.$element.on({"keydown":$.proxy(this.keydown,this),"keypress":$.proxy(this.keypress,this)},"input");}if(this.component){this.component.on("click",$.proxy(this.show,this));}else{this.$element.on("click",$.proxy(this.show,this));}}},_attachDatePickerGlobalEvents:function(){$(window).on("resize.datetimepicker"+this.id,$.proxy(this.place,this));if(!this.isInput){$(document).on("mousedown.datetimepicker"+this.id,$.proxy(this.hide,this));}},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click);this.widget.off("click","[data-action]");this.widget.off("mousedown",this.stopEvent);if(this.pickDate&&this.pickTime){this.widget.off("click.togglePicker");}if(this.isInput){this.$element.off({"focus":this.show,"change":this.change});if(this.options.maskInput){this.$element.off({"keydown":this.keydown,"keypress":this.keypress});}}else{this.$element.off({"change":this.change},"input");if(this.options.maskInput){this.$element.off({"keydown":this.keydown,"keypress":this.keypress},"input");}if(this.component){this.component.off("click",this.show);}else{this.$element.off("click",this.show);}}},_detachDatePickerGlobalEvents:function(){$(window).off("resize.datetimepicker"+this.id);if(!this.isInput){$(document).off("mousedown.datetimepicker"+this.id);}},_isInFixed:function(){if(this.$element){var _11d5=this.$element.parents();var _11d6=false;for(var i=0;i<_11d5.length;i++){if($(_11d5[i]).css("position")=="fixed"){_11d6=true;break;}}return _11d6;}else{return false;}}};$.fn.datetimepicker=function(_11d7,val){return this.each(function(){var $this=$(this),data=$this.data("datetimepicker"),_11d8=typeof _11d7==="object"&&_11d7;if(!data){$this.data("datetimepicker",(data=new _1195(this,$.extend({},$.fn.datetimepicker.defaults,_11d8))));}if(typeof _11d7==="string"){data[_11d7](val);}});};$.fn.datetimepicker.defaults={maskInput:false,pickDate:true,pickTime:true,pick12HourFormat:false,pickSeconds:true,startDate:-Infinity,endDate:Infinity,collapse:true};$.fn.datetimepicker.Constructor=_1195;var dpgId=0;var dates=$.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}};var _11c4={dd:{property:"UTCDate",getPattern:function(){return "(0?[1-9]|[1-2][0-9]|3[0-1])\\b";}},MM:{property:"UTCMonth",getPattern:function(){return "(0?[1-9]|1[0-2])\\b";}},yy:{property:"UTCYear",getPattern:function(){return "(\\d{2})\\b";}},yyyy:{property:"UTCFullYear",getPattern:function(){return "(\\d{4})\\b";}},hh:{property:"UTCHours",getPattern:function(){return "(0?[0-9]|1[0-9]|2[0-3])\\b";}},mm:{property:"UTCMinutes",getPattern:function(){return "(0?[0-9]|[1-5][0-9])\\b";}},ss:{property:"UTCSeconds",getPattern:function(){return "(0?[0-9]|[1-5][0-9])\\b";}},ms:{property:"UTCMilliseconds",getPattern:function(){return "([0-9]{1,3})\\b";}},HH:{property:"Hours12",getPattern:function(){return "(0?[1-9]|1[0-2])\\b";}},PP:{property:"Period12",getPattern:function(){return "(AM|PM|am|pm|Am|aM|Pm|pM)\\b";}}};var keys=[];for(var k in _11c4){keys.push(k);}keys[keys.length-1]+="\\b";keys.push(".");var _11cf=new RegExp(keys.join("\\b|"));keys.pop();var _11c1=new RegExp(keys.join("\\b|"),"g");function _11d0(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");};function _11b5(s,l,c){if(l<s.length){return s;}else{return Array(l-s.length+1).join(c||" ")+s;}};function _119b(_11d9,_11da,_11db,_11dc,_11dd,_11de){if(_11da&&_11db){return ("<div class=\"bootstrap-datetimepicker-widget dropdown-menu\">"+"<ul>"+"<li"+(_11de?" class=\"collapse in\"":"")+">"+"<div class=\"datepicker\">"+_11ae.template+"</div>"+"</li>"+"<li class=\"picker-switch accordion-toggle\"><a><i class=\""+_11d9+"\"></i></a></li>"+"<li"+(_11de?" class=\"collapse\"":"")+">"+"<div class=\"timepicker\">"+_11df.getTemplate(_11dc,_11dd)+"</div>"+"</li>"+"</ul>"+"</div>");}else{if(_11db){return ("<div class=\"bootstrap-datetimepicker-widget dropdown-menu\">"+"<div class=\"timepicker\">"+_11df.getTemplate(_11dc,_11dd)+"</div>"+"</div>");}else{return ("<div class=\"bootstrap-datetimepicker-widget dropdown-menu\">"+"<div class=\"datepicker\">"+_11ae.template+"</div>"+"</div>");}}};function _11a0(){return new Date(Date.UTC.apply(Date,arguments));};var _11ae={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(year){return (((year%4===0)&&(year%100!==0))||(year%400===0));},getDaysInMonth:function(year,month){return [31,(_11ae.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];},headTemplate:"<thead>"+"<tr>"+"<th class=\"prev\">&lsaquo;</th>"+"<th colspan=\"5\" class=\"switch\"></th>"+"<th class=\"next\">&rsaquo;</th>"+"</tr>"+"</thead>",contTemplate:"<tbody><tr><td colspan=\"7\"></td></tr></tbody>"};_11ae.template="<div class=\"datepicker-days\">"+"<table class=\"table-condensed\">"+_11ae.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+"<div class=\"datepicker-months\">"+"<table class=\"table-condensed\">"+_11ae.headTemplate+_11ae.contTemplate+"</table>"+"</div>"+"<div class=\"datepicker-years\">"+"<table class=\"table-condensed\">"+_11ae.headTemplate+_11ae.contTemplate+"</table>"+"</div>";var _11df={hourTemplate:"<span data-action=\"showHours\" data-time-component=\"hours\" class=\"timepicker-hour\"></span>",minuteTemplate:"<span data-action=\"showMinutes\" data-time-component=\"minutes\" class=\"timepicker-minute\"></span>",secondTemplate:"<span data-action=\"showSeconds\" data-time-component=\"seconds\" class=\"timepicker-second\"></span>"};_11df.getTemplate=function(_11e0,_11e1){return ("<div class=\"timepicker-picker\">"+"<table class=\"table-condensed\""+(_11e0?" data-hour-format=\"12\"":"")+">"+"<tr>"+"<td><a href=\"#\" class=\"btn\" data-action=\"incrementHours\"><i class=\"icon-chevron-up\"></i></a></td>"+"<td class=\"separator\"></td>"+"<td><a href=\"#\" class=\"btn\" data-action=\"incrementMinutes\"><i class=\"icon-chevron-up\"></i></a></td>"+(_11e1?"<td class=\"separator\"></td>"+"<td><a href=\"#\" class=\"btn\" data-action=\"incrementSeconds\"><i class=\"icon-chevron-up\"></i></a></td>":"")+(_11e0?"<td class=\"separator\"></td>":"")+"</tr>"+"<tr>"+"<td>"+_11df.hourTemplate+"</td> "+"<td class=\"separator\">:</td>"+"<td>"+_11df.minuteTemplate+"</td> "+(_11e1?"<td class=\"separator\">:</td>"+"<td>"+_11df.secondTemplate+"</td>":"")+(_11e0?"<td class=\"separator\"></td>"+"<td>"+"<button type=\"button\" class=\"btn btn-primary\" data-action=\"togglePeriod\"></button>"+"</td>":"")+"</tr>"+"<tr>"+"<td><a href=\"#\" class=\"btn\" data-action=\"decrementHours\"><i class=\"icon-chevron-down\"></i></a></td>"+"<td class=\"separator\"></td>"+"<td><a href=\"#\" class=\"btn\" data-action=\"decrementMinutes\"><i class=\"icon-chevron-down\"></i></a></td>"+(_11e1?"<td class=\"separator\"></td>"+"<td><a href=\"#\" class=\"btn\" data-action=\"decrementSeconds\"><i class=\"icon-chevron-down\"></i></a></td>":"")+(_11e0?"<td class=\"separator\"></td>":"")+"</tr>"+"</table>"+"</div>"+"<div class=\"timepicker-hours\" data-action=\"selectHour\">"+"<table class=\"table-condensed\">"+"</table>"+"</div>"+"<div class=\"timepicker-minutes\" data-action=\"selectMinute\">"+"<table class=\"table-condensed\">"+"</table>"+"</div>"+(_11e1?"<div class=\"timepicker-seconds\" data-action=\"selectSecond\">"+"<table class=\"table-condensed\">"+"</table>"+"</div>":""));};})(window.jQuery);});},"bootstrap-jasny/bootstrap-jasny":function(){define(["dojo","dijit","dojox"],function(dojo,dijit,dojox){+function($){"use strict";var isIE=window.navigator.appName=="Microsoft Internet Explorer";var _11e2=function(_11e3,_11e4){this.$element=$(_11e3);this.$input=this.$element.find(":file");if(this.$input.length===0){return;}this.name=this.$input.attr("name")||_11e4.name;this.$hidden=this.$element.find("input[type=hidden][name=\""+this.name+"\"]");if(this.$hidden.length===0){this.$hidden=$("<input type=\"hidden\">").insertBefore(this.$input);}this.$preview=this.$element.find(".fileinput-preview");var _11e5=this.$preview.css("height");if(this.$preview.css("display")!=="inline"&&_11e5!=="0px"&&_11e5!=="none"){this.$preview.css("line-height",_11e5);}this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()};this.listen();};_11e2.prototype.listen=function(){this.$input.on("change.bs.fileinput",$.proxy(this.change,this));$(this.$input[0].form).on("reset.bs.fileinput",$.proxy(this.reset,this));this.$element.find("[data-trigger=\"fileinput\"]").on("click.bs.fileinput",$.proxy(this.trigger,this));this.$element.find("[data-dismiss=\"fileinput\"]").on("click.bs.fileinput",$.proxy(this.clear,this));},_11e2.prototype.change=function(e){var files=e.target.files===undefined?(e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]):e.target.files;e.stopPropagation();if(files.length===0){this.clear();return;}this.$hidden.val("");this.$hidden.attr("name","");this.$input.attr("name",this.name);var file=files[0];if(this.$preview.length>0&&(typeof file.type!=="undefined"?file.type.match(/^image\/(gif|png|jpeg)$/):file.name.match(/\.(gif|png|jpe?g)$/i))&&typeof FileReader!=="undefined"){var _11e6=new FileReader();var _11e7=this.$preview;var _11e8=this.$element;_11e6.onload=function(re){var $img=$("<img>");$img[0].src=re.target.result;files[0].result=re.target.result;_11e8.find(".fileinput-filename").text(file.name);if(_11e7.css("max-height")!="none"){$img.css("max-height",parseInt(_11e7.css("max-height"),10)-parseInt(_11e7.css("padding-top"),10)-parseInt(_11e7.css("padding-bottom"),10)-parseInt(_11e7.css("border-top"),10)-parseInt(_11e7.css("border-bottom"),10));}_11e7.html($img);_11e8.addClass("fileinput-exists").removeClass("fileinput-new");_11e8.trigger("change.bs.fileinput",files);};_11e6.readAsDataURL(file);}else{this.$element.find(".fileinput-filename").text(file.name);this.$preview.text(file.name);this.$element.addClass("fileinput-exists").removeClass("fileinput-new");this.$element.trigger("change.bs.fileinput");}},_11e2.prototype.clear=function(e){if(e){e.preventDefault();}this.$hidden.val("");this.$hidden.attr("name",this.name);this.$input.attr("name","");if(isIE){var _11e9=this.$input.clone(true);this.$input.after(_11e9);this.$input.remove();this.$input=_11e9;}else{this.$input.val("");}this.$preview.html("");this.$element.find(".fileinput-filename").text("");this.$element.addClass("fileinput-new").removeClass("fileinput-exists");if(e!==undefined){this.$input.trigger("change");this.$element.trigger("clear.bs.fileinput");}},_11e2.prototype.reset=function(){this.clear();this.$hidden.val(this.original.hiddenVal);this.$preview.html(this.original.preview);this.$element.find(".fileinput-filename").text("");if(this.original.exists){this.$element.addClass("fileinput-exists").removeClass("fileinput-new");}else{this.$element.addClass("fileinput-new").removeClass("fileinput-exists");}this.$element.trigger("reset.bs.fileinput");},_11e2.prototype.trigger=function(e){this.$input.trigger("click");e.preventDefault();};var old=$.fn.fileinput;$.fn.fileinput=function(_11ea){return this.each(function(){var $this=$(this),data=$this.data("bs.fileinput");if(!data){$this.data("bs.fileinput",(data=new _11e2(this,_11ea)));}if(typeof _11ea=="string"){data[_11ea]();}});};$.fn.fileinput.Constructor=_11e2;$.fn.fileinput.noConflict=function(){$.fn.fileinput=old;return this;};$(document).on("click.fileinput.data-api","[data-provides=\"fileinput\"]",function(e){var $this=$(this);if($this.data("bs.fileinput")){return;}$this.fileinput($this.data());var _11eb=$(e.target).closest("[data-dismiss=\"fileinput\"],[data-trigger=\"fileinput\"]");if(_11eb.length>0){e.preventDefault();_11eb.trigger("click.bs.fileinput");}});}(window.jQuery);});},"esri/arcgis/utils":function(){define(["require","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/json","dojo/_base/url","dojo/on","dojo/DeferredList","dojo/dom-construct","../kernel","../config","../lang","../request","../SpatialReference","../map","../urlUtils","../geometry/ScreenPoint","../geometry/Extent","../geometry/webMercatorUtils","../symbols/jsonUtils","../renderers/jsonUtils","../dijit/PopupTemplate","../dijit/Popup","../tasks/query","../tasks/GeometryService","../layers/ArcGISTiledMapServiceLayer","../layers/FeatureLayer","dojo/i18n!../nls/jsapi"],function(G,l,k,u,s,H,mb,xa,B,nb,F,I,g,y,z,ob,ya,za,C,pb,D,Aa,Ba,qb,rb,sb,tb,w,aa){function E(a){return y({url:p.arcgisUrl+"/"+a.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0});};function ba(a,f){var b={f:"json"};f&&(b.token=f);return y({url:a,content:b,callbackParamName:"callback"},{disableIdentityLookup:!0});};function ca(a){a.itemProperties.layerDefinition&&(a.layerDefinition?(a.layerDefinition.drawingInfo||(a.layerDefinition.drawingInfo=a.itemProperties.layerDefinition.drawingInfo),g.isDefined(a.layerDefinition.definitionExpression)||(a.layerDefinition.definitionExpression=a.itemProperties.layerDefinition.definitionExpression),g.isDefined(a.layerDefinition.minScale)||(a.layerDefinition.minScale=a.itemProperties.layerDefinition.minScale),g.isDefined(a.layerDefinition.maxScale)||(a.layerDefinition.maxScale=a.itemProperties.layerDefinition.maxScale)):a.layerDefinition=a.itemProperties.layerDefinition);a.itemProperties.popupInfo&&(!a.popupInfo&&!a.disablePopup)&&(a.popupInfo=a.itemProperties.popupInfo);g.isDefined(a.itemProperties.showLabels)&&!g.isDefined(a.showLabels)&&(a.showLabels=a.itemProperties.showLabels);g.isDefined(a.itemProperties.showLegend)&&!g.isDefined(a.showLegend)&&(a.showLegend=a.itemProperties.showLegend);g.isDefined(a.itemProperties.refreshInterval)&&!g.isDefined(a.refreshInterval)&&(a.refreshInterval=a.itemProperties.refreshInterval);};function Ca(a){ca(a);a.itemProperties.layerDefinition&&a.layerDefinition&&(!g.isDefined(a.layerDefinition.maximumTrackPoints)&&g.isDefined(a.itemProperties.layerDefinition.maximumTrackPoints)&&(a.layerDefinition.maximumTrackPoints=a.itemProperties.layerDefinition.maximumTrackPoints),!a.layerDefinition.definitionGeometry&&a.itemProperties.layerDefinition.definitionGeometry&&(a.layerDefinition.definitionGeometry=a.itemProperties.layerDefinition.definitionGeometry));a.itemProperties.purgeOptions&&!a.purgeOptions&&(a.purgeOptions=a.itemProperties.purgeOptions);};function J(a,f){var b=new s,c=a.itemData,d=[],e=[];k.forEach(c.operationalLayers,function(a){if(a.itemId&&!a.type){var c=a.url.toLowerCase();-1<c.indexOf("/featureserver")||-1<c.indexOf("/mapserver/")?(e.push(a),d.push(E(a))):-1<c.indexOf("/mapserver")&&-1===c.indexOf("/mapserver/")&&(!a.layers||!g.isDefined(a.minScale)&&!g.isDefined(a.maxScale))?(e.push(a),d.push(E(a))):-1<c.indexOf("/imageserver")&&!g.isDefined(a.minScale)&&!g.isDefined(a.maxScale)?(e.push(a),d.push(E(a))):-1<c.indexOf("/streamserver")&&(e.push(a),d.push(E(a)));}});c.baseMap&&c.baseMap.baseMapLayers&&k.forEach(c.baseMap.baseMapLayers,function(a){a.itemId&&(e.push(a),d.push(E(a)));});if(0<d.length){var h={};(new B(d)).addCallback(function(c){k.forEach(e,function(a,e){var b=c[e][1];if(b&&!(b instanceof Error)&&(h[a.itemId]=b,!a.type)){var d=a.url.toLowerCase();if((-1<d.indexOf("/featureserver")||-1<d.indexOf("/mapserver/"))&&b.layers){k.forEach(b.layers,function(b){if(d.endsWith("/featureserver/"+b.id)||d.endsWith("/mapserver/"+b.id)){a.itemProperties=b,ca(a);}});}else{if(-1<d.indexOf("/streamserver")){a.itemProperties=b,Ca(a);}else{if(-1<d.indexOf("/mapserver")){b.layers&&!a.layers&&(a.layers=b.layers),g.isDefined(b.minScale)&&!g.isDefined(a.minScale)&&(a.minScale=b.minScale),g.isDefined(b.maxScale)&&!g.isDefined(a.maxScale)&&(a.maxScale=b.maxScale),g.isDefined(b.refreshInterval)&&!g.isDefined(a.refreshInterval)&&(a.refreshInterval=b.refreshInterval),b.visibleLayers&&!a.visibleLayers&&(a.visibleLayers=b.visibleLayers);}else{if(-1<d.indexOf("/imageserver")&&(g.isDefined(b.minScale)&&!g.isDefined(a.minScale)&&(a.minScale=b.minScale),g.isDefined(b.maxScale)&&!g.isDefined(a.maxScale)&&(a.maxScale=b.maxScale),g.isDefined(b.refreshInterval)&&!g.isDefined(a.refreshInterval)&&(a.refreshInterval=b.refreshInterval),b.popupInfo&&(!a.popupInfo&&!a.disablePopup)&&(a.popupInfo=b.popupInfo),b.renderingRule&&!a.renderingRule&&(a.renderingRule=b.renderingRule,b.renderingRule.functionName&&(a.renderingRule.rasterFunction=b.renderingRule.functionName)),b.bandIds&&!a.bandIds&&(a.bandIds=b.bandIds),b.mosaicRule&&!a.mosaicRule&&(a.mosaicRule=b.mosaicRule),b.format&&!a.format&&(a.format=b.format),g.isDefined(b.compressionQuality)&&!g.isDefined(a.compressionQuality)&&(a.compressionQuality=b.compressionQuality),b.layerDefinition&&b.layerDefinition.definitionExpression&&(!g.isDefined(a.layerDefinition)||!g.isDefined(a.layerDefinition.definitionExpression)))){a.layerDefinition=a.layerDefinition||{},a.layerDefinition.definitionExpression=b.layerDefinition.definitionExpression;}}}}}});a.relatedItemsData=h;b.callback(a);});}else{b.callback(a);}return b;};function ub(a,f){var b=new s,c=a.itemData,d=c.baseMap.baseMapLayers[0];if("BingMapsAerial"===d.type||"BingMapsRoad"===d.type||"BingMapsHybrid"===d.type){if(d.portalUrl&&F.id){delete f.bingMapsKey,F.id.checkSignInStatus(ya.urlToObject(p.arcgisUrl).path).then(l.hitch(null,function(a,b,e,c,f){ba(d.portalUrl,f.token).then(l.hitch(null,da,a,b,e,c),l.hitch(null,K,a,b,e,c));},a,f,c,b),l.hitch(null,function(a,b,e,c,f){ba(d.portalUrl).then(l.hitch(null,da,a,b,e,c),l.hitch(null,K,a,b,e,c));},a,f,c,b));}else{if(f.bingMapsKey){var e=new t({bingMapsKey:f.bingMapsKey,mapStyle:t.MAP_STYLE_AERIAL});u.connect(e,"onLoad",l.hitch(this,function(){b.callback([a,f]);}));u.connect(e,"onError",function(e){delete f.bingMapsKey;a.itemData=L(c);d=a.itemData.baseMap.baseMapLayers[0];d.errors=[];d.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});b.callback([a,f]);});}else{a.itemData=L(c),d=a.itemData.baseMap.baseMapLayers[0],d.errors=[],d.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),b.callback([a,f]);}}}else{b.callback([a,f]);}return b;};function da(a,f,b,c,d){d.bingKey?(f.bingMapsKey=d.bingKey,d=new t({bingMapsKey:f.bingMapsKey,mapStyle:t.MAP_STYLE_AERIAL}),u.connect(d,"onLoad",l.hitch(this,function(){c.callback([a,f]);})),u.connect(d,"onError",function(e){delete f.bingMapsKey;a.itemData=L(b);e=a.itemData.baseMap.baseMapLayers[0];e.errors=[];e.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});c.callback([a,f]);})):K(a,f,b,c);};function K(a,f,b,c){delete f.bingMapsKey;a.itemData=L(b);b=a.itemData.baseMap.baseMapLayers[0];b.errors=[];b.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});c.callback([a,f]);};function L(a){a.baseMap="BingMapsAerial"===a.baseMap.baseMapLayers[0].type?{title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:"BingMapsRoad"===a.baseMap.baseMapLayers[0].type?{title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:{title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return a;};function ea(a,f,b,c){var d=a.dynamicLayerInfos||a.layerInfos,e=f.layers;if(e&&d){if(c.usePopupManager){var h;k.forEach(d,function(a){var c=a.id;if(!a.subLayerIds){for(a=0;a<e.length;a++){var d=e[a];if(d.id===c&&d.popupInfo){h||(h={});h[c]={infoTemplate:new b(d.popupInfo),layerUrl:d.layerUrl};break;}}}});h&&a.setInfoTemplates(h);}else{var m=[],q=[],r=[],n=[],v=[],Da=[];k.forEach(d,function(b){var c=b.id;if(!b.subLayerIds&&-1!==k.indexOf(a.visibleLayers,c)){for(b=0;b<e.length;b++){var d=e[b];if(d.id===c){q.push(c);m.push(d.popupInfo);r.push(d.layerUrl||"");d.layerDefinition&&d.layerDefinition.definitionExpression?n.push(d.layerDefinition.definitionExpression):n.push("");v.push(g.isDefined(d.minScale)?d.minScale:null);Da.push(g.isDefined(d.maxScale)?d.maxScale:null);break;}}}});m.length&&(a.__popups=m,a.__popupIds=q,a.__popupUrls=r,a.__popupWhereClauses=n,a.__popupMinScales=v,a.__popupMaxScales=Da,a.__resourceInfo=f.resourceInfo);}}};function fa(a){if(!a){return !1;}var f=(new mb(p.arcgisUrl)).authority;return -1!==a.indexOf(".arcgis.com/")||-1!==a.indexOf(f);};function Ea(a){return !a?!1:-1!==a.indexOf("/services.arcgisonline.com/")||-1!==a.indexOf("/server.arcgisonline.com/");};function A(a){if("https:"===location.protocol&&(fa(a)||Ea(a))){a=a.replace("http:","https:");}return a;};function ga(a,f,b){var c=[],d;a.displayLevels||(c=k.map(a.resourceInfo.tileInfo.lods,function(a){return a.level;}));a.exclusionAreas&&(d=l.clone(a.exclusionAreas),d=k.map(d,function(a){a.geometry=new C(a.geometry);return a;}));c=new tb(A(a.url),{resourceInfo:a.resourceInfo,opacity:a.opacity,visible:a.visibility,displayLevels:a.displayLevels||c,id:a.id,minScale:a.minScale,maxScale:a.maxScale,refreshInterval:a.refreshInterval,exclusionAreas:d});b.ignorePopups||ea(c,a,f,b);return c;};function ha(a,f){if(!a||!f||0===f.length){return [];}var b=","+f+",",c=[],d,e=",";for(d=0;d<a.length;d++){if(null!==a[d].subLayerIds){if(-1===b.indexOf(","+a[d].id+",")||-1<e.indexOf(","+a[d].id+",")){e+=a[d].subLayerIds.toString()+",";}}else{-1<b.indexOf(","+a[d].id+",")&&-1===e.indexOf(","+a[d].id+",")&&c.push(a[d].id);}}return c;};function Fa(a,f,b){var c=new Ga;c.format="png24";a.resourceInfo&&(a.resourceInfo.supportedImageFormatTypes&&-1<a.resourceInfo.supportedImageFormatTypes.indexOf("PNG32"))&&(c.format="png32");var c=new Ha(A(a.url),{resourceInfo:a.resourceInfo,opacity:a.opacity,visible:a.visibility,id:a.id,imageParameters:c,minScale:a.minScale,maxScale:a.maxScale,refreshInterval:a.refreshInterval}),d=a.visibleLayers;if(!a.visibleLayers){var e="";k.forEach(c.layerInfos,function(a){a.defaultVisibility&&(e+=(0<e.length?",":"")+a.id);});d=e;}if(a.layers&&0<a.layers.length){var h=[],m=[],q,g=[],n,v;k.forEach(a.layers,function(b){b.layerDefinition&&b.layerDefinition.definitionExpression&&(h[b.id]=b.layerDefinition.definitionExpression);if(b.layerDefinition&&b.layerDefinition.source){q=null;v=b.layerDefinition.source;if("mapLayer"===v.type){var c=k.filter(a.resourceInfo.layers,function(a){return a.id===v.mapLayerId;});c.length&&(q=l.mixin(c[0],b));}else{q=l.mixin({},b);}q&&(q.source=v,delete q.popupInfo,q=new Ia(q),a.visibleLayers&&(c="string"==typeof a.visibleLayers?a.visibleLayers.split(","):a.visibleLayers,-1<k.indexOf(c,b.id)?q.defaultVisibility=!0:q.defaultVisibility=!1),m.push(q));}b.layerDefinition&&(b.layerDefinition.source&&b.layerDefinition.drawingInfo)&&(n=new Ja(b.layerDefinition.drawingInfo),g[b.id]=n);},this);0<h.length&&c.setLayerDefinitions(h);0<m.length?(c.setDynamicLayerInfos(m,!0),0<g.length&&c.setLayerDrawingOptions(g,!0)):(d=ha(c.layerInfos,d),c.setVisibleLayers(d));}else{d=ha(c.layerInfos,d),c.setVisibleLayers(d);}b.ignorePopups||ea(c,a,f,b);return c;};function vb(a,f,b){var c=new Ka;c.bandIds=a.bandIds;null!=a.format&&(c.format=a.format,null!=a.compressionQuality&&(c.compressionQuality=a.compressionQuality));if(a.renderingRule&&a.renderingRule.rasterFunction){var d=new La(a.renderingRule);c.renderingRule=d;}a.mosaicRule&&(d=new Ma(a.mosaicRule),c.mosaicRule=d);g.isDefined(a.noData)&&(c.noData=a.noData);g.isDefined(a.noDataInterpretation)&&(c.noDataInterpretation=a.noDataInterpretation);g.isDefined(a.interpolation)&&(c.interpolation=a.interpolation);c=new Na(A(a.url),{resourceInfo:a.resourceInfo,opacity:a.opacity,visible:a.visibility,id:a.id,imageServiceParameters:c,minScale:a.minScale,maxScale:a.maxScale,refreshInterval:a.refreshInterval});a.layerDefinition&&a.layerDefinition.definitionExpression&&c.setDefinitionExpression(a.layerDefinition.definitionExpression,!0);!b.ignorePopups&&a.popupInfo&&c.setInfoTemplate(new f(a.popupInfo));return c;};function ia(a,f,b){var c=[102113,102100,3857],d=b||new z(f[0].layerObject.fullExtent.spatialReference),e=new z(a.resourceInfo.fullExtent.spatialReference);return d.wkt==e.wkt&&(d.wkid==e.wkid||g.isDefined(d.latestWkid)&&d.latestWkid==e.wkid||g.isDefined(e.latestWkid)&&d.wkid==e.latestWkid||g.isDefined(d.latestWkid)&&d.latestWkid==e.latestWkid)||d.wkid&&e.wkid&&k.some(c,function(a){return a===e.wkid;})&&k.some(c,function(a){return a===d.wkid;})?!0:!1;};function ja(a,f){if(!f[0].layerObject.tileInfo){return !1;}var b=[];k.forEach(f,function(a){a.baseMapLayer&&a.layerObject.tileInfo&&(b=b.concat(k.map(a.layerObject.tileInfo.lods,function(a){return a.scale;})));});return k.some(a.resourceInfo.tileInfo.lods,function(a){return k.some(b,function(b){return b===a.scale;});});};function ka(a,f,b,c,d){var e,h=b._clazz;if("OpenStreetMap"===a.type){e=new Oa({id:a.id,opacity:a.opacity,visible:null!==a.visibility&&void 0!==a.visibility?a.visibility:!0});}else{if("WMS"===a.type){var m=[],q=[];k.forEach(a.layers,function(a){q.push(new Pa({name:a.name,title:a.title,legendURL:a.legendURL}));m.push(a.name);},this);a.visibleLayers&&(m=a.visibleLayers);c={extent:new C(a.extent[0][0],a.extent[0][1],a.extent[1][0],a.extent[1][1],new z({wkid:4326})),layerInfos:q,version:a.version,maxWidth:a.maxWidth,maxHeight:a.maxHeight,getMapURL:a.mapUrl,spatialReferences:a.spatialReferences,title:a.title,copyright:a.copyright,minScale:a.minScale||0,maxScale:a.maxScale||0,format:a.format};e=new Qa(a.url,{id:a.id,visibleLayers:m,format:"png",transparent:a.baseMapLayer?!1:!0,opacity:a.opacity,visible:null!==a.visibility?a.visibility:!0,resourceInfo:c,refreshInterval:a.refreshInterval});e.spatialReference.wkid=c.spatialReferences[0];}else{if("KML"===a.type){b=a.url;if(F.id&&(h=F.id.findCredential(ya.urlToObject(p.arcgisUrl).path))){var r=p.arcgisUrl.substring(p.arcgisUrl.indexOf("//")+2,p.arcgisUrl.indexOf("/",p.arcgisUrl.indexOf("//")+3)),n=r.split("."),n=n[n.length-2]+"."+n[n.length-1];f=b.indexOf(n);-1<f&&(b="https://"+r+b.substring(f+n.length),b+="?token="+h.token);}e=new Ra(b,{id:a.id,visible:null!==a.visibility?a.visibility:!0,outSR:c,refreshInterval:a.refreshInterval});u.connect(e,"onLoad",function(){(a.opacity||0===a.opacity)&&e.setOpacity(a.opacity);g.isDefined(a.minScale)&&g.isDefined(a.maxScale)&&e.setScaleRange(a.minScale,a.maxScale);a.visibleFolders&&k.forEach(e.folders,function(b){-1<k.indexOf(a.visibleFolders,b.id)?e.setFolderVisibility(b,!0):e.setFolderVisibility(b,!1);},this);});}else{"WebTiledLayer"===a.type?(e=new Sa(a.templateUrl,{id:a.id,visible:null!==a.visibility?a.visibility:!0,opacity:a.opacity,copyright:a.copyright,fullExtent:a.fullExtent&&new C(a.fullExtent),initialExtent:a.fullExtent&&new C(a.fullExtent),subDomains:a.subDomains,tileInfo:a.tileInfo?new Ta(a.tileInfo):null,refreshInterval:a.refreshInterval}),u.connect(e,"onLoad",function(){(g.isDefined(a.minScale)||g.isDefined(a.maxScale))&&e.setScaleRange(a.minScale,a.maxScale);})):"GeoRSS"===a.type?(e=new Ua(a.url,{id:a.id,opacity:a.opacity,outSpatialReference:c,refreshInterval:a.refreshInterval}),u.connect(e,"onLoad",function(){!1===a.visibility&&e.hide();g.isDefined(a.minScale)&&g.isDefined(a.maxScale)&&e.setScaleRange(a.minScale,a.maxScale);var b=e.getFeatureLayers();k.forEach(b,function(c){a.pointSymbol&&"esriGeometryPoint"===c.geometryType?(c.renderer.symbol=D.fromJson(a.pointSymbol),1===b.length&&(e.pointSymbol=D.fromJson(a.pointSymbol))):a.lineSymbol&&"esriGeometryPolyline"===c.geometryType?(c.renderer.symbol=D.fromJson(a.lineSymbol),1===b.length&&(e.polylineSymbol=D.fromJson(a.lineSymbol))):a.polygonSymbol&&"esriGeometryPolygon"===c.geometryType&&(c.renderer.symbol=D.fromJson(a.polygonSymbol),1===b.length&&(e.polygonSymbol=D.fromJson(a.polygonSymbol)));});})):"CSV"==a.type&&a.url?(c={layerDefinition:a.layerDefinition,columnDelimiter:a.columnDelimiter,id:a.id?a.id:null,visible:null!==a.visibility?a.visibility:!0,opacity:a.opacity,refreshInterval:a.refreshInterval},a.locationInfo&&(c.latitudeFieldName=a.locationInfo.latitudeFieldName,c.longitudeFieldName=a.locationInfo.longitudeFieldName),b.ignorePopups||(c.infoTemplate=new Ba(a.popupInfo?a.popupInfo:Va.generateDefaultPopupInfo(a))),e=new Wa(a.url,c)):a.layerDefinition&&!a.url?(c=H.fromJson(H.toJson(a)),delete c.id,delete c.opacity,delete c.visibility,e=new w(c,{id:a.id,opacity:a.opacity,visible:a.visibility,outFields:["*"],autoGeneralize:!0}),!b.ignorePopups&&c.popupInfo&&e.setInfoTemplate(new h(c.popupInfo))):"BingMapsAerial"===a.type||"BingMapsRoad"===a.type||"BingMapsHybrid"===a.type?b.bingMapsKey?(c=t.MAP_STYLE_AERIAL_WITH_LABELS,"BingMapsAerial"===a.type?c=t.MAP_STYLE_AERIAL:"BingMapsRoad"===a.type&&(c=t.MAP_STYLE_ROAD),e=new t({bingMapsKey:b.bingMapsKey,mapStyle:c,opacity:a.opacity,id:a.id}),u.connect(e,"onError",l.hitch(this,function(a){a.errors=a.errors||[];a.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+a.type+"]"});},a))):(a.errors=a.errors||[],a.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+a.type+"]"})):a.resourceInfo&&a.resourceInfo.mapName?e=!0===a.resourceInfo.singleFusedMapCache&&(a.baseMapLayer||ia(a,f,c)&&ja(a,d))?ga(a,h,b):Fa(a,h,b):a.resourceInfo&&a.resourceInfo.pixelSizeX?e=!0===a.resourceInfo.singleFusedMapCache&&(a.baseMapLayer||ia(a,f,c)&&ja(a,d))?ga(a,h,b):vb(a,h,b):a.resourceInfo&&"Feature Layer"===a.resourceInfo.type?(a.capabilities&&(a.resourceInfo.capabilities=a.capabilities),e=new w(A(a.url),{resourceInfo:a.resourceInfo,opacity:a.opacity,visible:a.visibility,id:a.id,mode:fa(a.url)?w.MODE_AUTO:g.isDefined(a.mode)?a.mode:w.MODE_ONDEMAND,editable:!1===b.editable?!1:void 0,outFields:["*"],autoGeneralize:!0,refreshInterval:a.refreshInterval}),!b.ignorePopups&&a.popupInfo&&e.setInfoTemplate(new h(a.popupInfo)),a.layerDefinition&&(a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&(c=Aa.fromJson(a.layerDefinition.drawingInfo.renderer),c.isMaxInclusive=!0,e.setRenderer(c)),a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.labelingInfo&&(c=k.map(a.layerDefinition.drawingInfo.labelingInfo,function(a){return new Xa(a);}),e.setLabelingInfo(c)),a.layerDefinition.definitionExpression&&e.setDefinitionExpression(a.layerDefinition.definitionExpression),g.isDefined(a.layerDefinition.minScale)&&e.setMinScale(a.layerDefinition.minScale),g.isDefined(a.layerDefinition.maxScale)&&e.setMaxScale(a.layerDefinition.maxScale))):a.resourceInfo&&a.resourceInfo.streamUrls&&(c={resourceInfo:a.resourceInfo,opacity:a.opacity,visible:a.visibility,id:a.id},a.layerDefinition&&(n=a.layerDefinition.drawingInfo,a.layerDefinition.definitionGeometry&&(r=r||{},r.geometry=a.layerDefinition.definitionGeometry),g.isDefined(a.layerDefinition.definitionExpression)&&(r=r||{},r.where=a.layerDefinition.definitionExpression),g.isDefined(a.layerDefinition.maximumTrackPoints)&&(c.maximumTrackPoints=a.layerDefinition.maximumTrackPoints)),r&&(c.filter=r),a.purgeOptions&&(c.purgeOptions=a.purgeOptions),e=new Ya(A(a.url),c),n&&n.renderer&&(c=n.renderer,e.setRenderer(Aa.fromJson(c))),!b.ignorePopups&&a.popupInfo&&e.setInfoTemplate(new h(a.popupInfo)),a.layerDefinition&&(g.isDefined(a.layerDefinition.minScale)&&e.setMinScale(a.layerDefinition.minScale),g.isDefined(a.layerDefinition.maxScale)&&e.setMaxScale(a.layerDefinition.maxScale)),xa.once(e,"error",function(b){a.errors.push({message:"Error loading stream layer. Check websocket url"});}));}}}e&&(e.arcgisProps={title:a.title},a.baseMapLayer&&(e._basemapGalleryLayerType=a.isReference?"reference":"basemap"));return e;};function la(a,f,b,c){k.forEach(a,function(e,d){if(e.url&&!e.type){if(0===d||a[0].layerObject){e.layerObject=ka(e,a,f,b,c);}}else{e.layerObject=ka(e,a,f,b,c);}});var d=k.filter(a,function(a){return !a.isReference;}),e=k.filter(a,function(a){return !!a.isReference;});return a=d.concat(e);};function ma(a){var f=null;a=a[0];a.url&&!a.type?a.resourceInfo.spatialReference&&(f=new z,a.resourceInfo.spatialReference.wkid&&(f.wkid=a.resourceInfo.spatialReference.wkid),a.resourceInfo.spatialReference.wkt&&(f.wkt=a.resourceInfo.spatialReference.wkt)):-1<a.type.indexOf("BingMaps")||"OpenStreetMap"==a.type?f=new z({wkid:102100}):"WMS"==a.type&&(f=new z({wkid:a.spatialReferences[0]}));return f;};function Za(a,f,b,c,d,e,h){k.forEach(f,function(b,c){b.url&&!b.type&&(b.resourceInfo=a[b.deferredsPos][1],delete b.deferredsPos);});e=e||ma(f);f=la(f,b,e,h);d.callback(f);return d;};function $a(a,f){var b=A(a);return y({url:b,content:{f:"json"},callbackParamName:"callback",error:function(a,d){a.message=a.message?a.message+(" [url:"+b+"]"):"[url:"+b+"]";f.push(a);I.defaults.io.errorHandler(a,d);}});};function ab(a){var f=p.arcgisUrl+"/"+a.itemId+"/data";return y({url:f,content:{f:"json"},callbackParamName:"callback",error:function(b,c){b.message=b.message?b.message+(" [url:"+f+"]"):"[url:"+f+"]";a.errors=a.errors||[];a.errors.push(b);I.defaults.io.errorHandler(b,c);}});};function bb(a,f,b){var c=new s;if((!b.featureCollection||!b.featureCollection.layers)&&!b.layers){return undefined,a.errors=a.errors||[],a.errors.push({message:"Invalid Feature Collection item data. [item id: "+a.itemId+"]"}),c.errback(),c;}b.layers&&(b.featureCollection={layers:b.layers},delete b.layers,g.isDefined(b.showLegend)&&(b.featureCollection.showLegend=b.showLegend,delete b.showLegend));cb(a,b.featureCollection,f).then(function(d){b.featureCollection=d;a.featureCollection&&a.featureCollection.layers?k.forEach(b.featureCollection.layers,function(b,c){var d=a.featureCollection.layers[c];if(!d.poupInfo&&!d.layerDefinition){d.popupInfo=b.popupInfo,d.layerDefinition=b.layerDefinition;}else{if(d.layerDefinition){if(g.isDefined(d.layerDefinition.minScale)&&g.isDefined(d.layerDefinition.maxScale)&&(d.layerDefinition.minScale!==b.layerDefinition.minScale||d.layerDefinition.maxScale!==b.layerDefinition.maxScale)){delete b.layerDefinition.minscale,delete b.layerDefinition.maxScale;}d.layerDefinition.drawingInfo&&H.toJson(d.layerDefinition.drawingInfo)!==H.toJson(b.layerDefinition.drawingInfo)&&delete b.layerDefinition.drawingInfo;d.layerDefinition.showLegend!==b.layerDefinition.showLegend&&delete b.layerDefinition.showLegend;d.layerDefinition=l.mixin(d.layerDefinition,b.layerDefinition);}else{d.layerDefinition=b.layerDefinition;}}d.featureSet=b.featureSet;d.nextObjectId=b.nextObjectId;}):(a.featureCollection=a.featureCollection||{},a.featureCollection=l.mixin(a.featureCollection,b.featureCollection));c.callback(a);});return c;};function cb(a,f,b){var c=new s;G(["./csv"],function(d){var e=[];k.forEach(f.layers,function(a){a.featureSet&&(a.featureSet.features&&a.featureSet.features.length&&a.featureSet.features[0].geometry&&a.featureSet.features[0].geometry.spatialReference)&&(a.deferredsPos=e.length,e.push(d.projectFeatureCollection(a,b,a.featureSet.features[0].geometry.spatialReference)));});(new B(e)).addCallback(function(){k.forEach(f.layers,function(b){g.isDefined(b.deferredsPos)&&(e[b.deferredsPos].results&&e[b.deferredsPos].results.length?b=e[b.deferredsPos].results[0]:(undefined,b.errors=b.errors||[],b.errors.push({message:"Errors projecting feature collection. ["+a.title+" - "+b.layerDefinition.name+"]"})),delete b.deferredsPos);});c.callback(f);});});return c;};function M(a,f,b,c){var d=new s,e=new s,h=[],m;k.forEach(a.operationalLayers,function(a){a.itemId&&"Feature Collection"==a.type&&h.push(ab(a).then(l.hitch(null,bb,a,b)));});0===h.length?db(a,f,b,c,e):(m=new B(h),m.addCallback(function(d){db(a,f,b,c,e);}));e.then(function(a){h=[];k.forEach(a,function(a){a=a.layerObject;if(a instanceof w&&!a.loaded&&!a.loadError){var b=new s;xa.once(a,"load, error",function(){b.callback(a);});h.push(b);}});if(h.length){var b=new s;m=new B(h);m.addCallback(function(){b.callback(a);});return b.promise;}return a;}).then(function(a){var b=[];k.forEach(a,function(a){if(a.layerObject instanceof w){var c=a.layerObject;c.loaded&&(c.labelingInfo&&(a.showLabels||c._collection))&&b.push(c);}});b.length?G(["../layers/LabelLayer"],function(c){var e=new c;k.forEach(b,function(a){e.addFeatureLayer(a);});a.push({layerObject:e});d.callback(a);}):d.callback(a);});return d;};function db(a,f,b,c,d){var e=[],h=[],m=[];k.forEach(a.operationalLayers,function(a,b){a.featureCollection?k.forEach(a.featureCollection.layers,function(c,d){var e=!0;a.visibleLayers&&-1==k.indexOf(a.visibleLayers,d)&&(e=!1);c.visibility=a.visibility&&e;c.opacity=a.opacity;c.id=(a.id||"operational"+b)+"_"+d;m.push(c);},this):m.push(a);});k.forEach(a.baseMap.baseMapLayers,function(a,b){a.baseMapLayer=!0;a.id=a.id||"base"+b;e.push(a);});k.forEach(m,function(a,b){a.id=a.id||"operational"+b;e.push(a);});k.forEach(e,function(a){a.url&&!a.type&&(a.deferredsPos=h.length,a.errors=a.errors||[],h.push($a(a.url,a.errors)));});0===h.length?(b=b||ma(e),e=la(e,f,b,c),d.callback(e)):(new B(h)).addCallback(function(a){Za(a,e,f,h,d,b,c);});return d;};function N(a,f,b,c){var d=a.minScale,e=a.maxScale;if(10.1>=b.version&&f){for(a=f.length-1;0<=a;a--){if(f[a].id==c){if(0==d&&0<f[a].minScale?d=f[a].minScale:0<d&&0==f[a].minScale?d=b.minScale:0<d&&0<f[a].minScale&&(d=Math.min(d,f[a].minScale)),e=Math.max(b.maxScale||0,f[a].maxScale||0),b.setScaleRange(d,e),-1<f[a].parentLayerId){c=f[a].parentLayerId;}else{break;}}}}else{10.1<b.version&&(k.forEach(a.layerInfos,function(a){a.id==c&&(0==d&&0<a.minScale?d=a.minScale:0<d&&0==a.minScale||0<d&&0<a.minScale&&(d=Math.min(d,a.minScale)),e=Math.max(e||0,a.maxScale||0));}),b.setScaleRange(d,e));}};function O(a,f,b,c){var d=a.url,e=a.__popupIds,h=a.__popupUrls,m=a.__popupWhereClauses,q=a.__popupMinScales,r=a.__popupMaxScales,n=a.__resourceInfo,v=[];k.forEach(a.__popups,function(c,l){if(c){var p,s=[];k.forEach(c.fieldInfos,function(a){"shape"!==a.fieldName.toLowerCase()&&s.push(a.fieldName);});if(a.dynamicLayerInfos&&0<a.dynamicLayerInfos.length){var t=k.filter(a.dynamicLayerInfos,function(a){return e[l]==a.id;})[0].source;p=new w(d+"/dynamicLayer",{id:a.id+"_"+e[l],source:t,outFields:s,mode:w.MODE_SELECTION,infoTemplate:c&&new b(c),drawMode:!1,visible:a.visible,autoGeneralize:!0});var x=function(b,c){0<m[b].length&&c.setDefinitionExpression(m[b]);if(!g.isDefined(q[b])&&!g.isDefined(r[b])){N(a,f||n.layers,c,e[b]);}else{if(g.isDefined(a.minScale)||g.isDefined(a.maxScale)){var d=a.minScale,h=a.maxScale;0==d&&0<q[b]?d=q[b]:0<d&&0==q[b]||0<d&&0<q[b]&&(d=Math.min(d,q[b]));h=Math.max(h||0,r[b]||0);c.setScaleRange(d,h);}else{c.setScaleRange(q[b],r[b]);}}};p.loaded?x(l,p):u.connect(p,"onLoad",function(a){x(l,p);});}else{var y=null,z=d+"/"+e[l];if(h[l].length){z=h[l];}else{if(f){for(t=0;t<f.length;t++){if(f[t].id===e[l]){y=f[t];break;}}}}p=new w(A(z),{id:a.id+"_"+e[l],outFields:s,mode:w.MODE_SELECTION,infoTemplate:c&&new b(c),drawMode:!1,visible:a.visible,resourceInfo:y,autoGeneralize:!0});p.loaded?(0<m[l].length&&p.setDefinitionExpression(m[l]),N(a,f||n.layers,p,e[l])):u.connect(p,"onLoad",function(b){0<m[l].length&&p.setDefinitionExpression(m[l]);N(a,f||n.layers,b,e[l]);});}v.push(p);}});0<v.length&&(u.connect(a,"onVisibilityChange",l.hitch(this,function(a,b){k.forEach(a,function(a){b?a.show():a.hide();});},v)),u.connect(c,"onLayerRemove",l.hitch(this,function(a,b,d){a.id===d.id&&k.forEach(b,function(a){c.removeLayer(a);});},a,v)));delete a.__popups;delete a.__popupIds;delete a.__popupUrls;delete a.__popupWhereClauses;delete a.__popupMinScales;delete a.__popupMaxScales;delete a.__resourceInfo;return v;};function eb(a){return y({url:A(a.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}});};function fb(a,f,b){var c=[];k.forEach(a,function(a){var b=a.__popups;b&&(1<b.length&&10<=a.version)&&(a.__deferredsPos=c.length,c.push(eb(a)));});var d=[];0<c.length?(new B(c)).addCallback(function(c){k.forEach(a,function(a){a.__popups&&0<a.__popups.length&&(a.__deferredsPos||0===a.__deferredsPos?(d=d.concat(O(a,c[a.__deferredsPos][1].layers,b,f)),delete a.__deferredsPos):d=d.concat(O(a,null,b,f)));});f.addLayers(d);}):(k.forEach(a,function(a){a.__popups&&0<a.__popups.length&&(d=d.concat(O(a,null,b,f)));}),f.addLayers(d));};function gb(a){k.forEach(a,function(a){var b=a.layer;b.toJson&&(a=b.toJson(),a.featureSet&&(b.name&&-1<b.name.indexOf("Text"))&&k.forEach(a.featureSet.features,function(a,d){if(a.attributes.TEXT){var e=b.graphics[d];e.symbol.setText(a.attributes.TEXT);a.symbol.horizontalAlignment&&(e.symbol.align=a.symbol.horizontalAlignment);e.setSymbol(e.symbol);e.setAttributes(a.attributes);}},this));});};function hb(a){var f=6;k.forEach(a,function(a){if(a=a.renderer){"esri.renderer.SimpleRenderer"===a.declaredClass?((a=a.symbol)&&a.xoffset&&(f=Math.max(f,Math.abs(a.xoffset))),a&&a.yoffset&&(f=Math.max(f,Math.abs(a.yoffset)))):("esri.renderer.UniqueValueRenderer"===a.declaredClass||"esri.renderer.ClassBreaksRenderer"===a.declaredClass)&&k.forEach(a.infos,function(a){(a=a.symbol)&&a.xoffset&&(f=Math.max(f,Math.abs(a.xoffset)));a&&a.yoffset&&(f=Math.max(f,Math.abs(a.yoffset)));});}});return f;};function na(a){var f=this,b=f.infoWindow,c=a.graphic;if(f.loaded){b.hide();b.clearFeatures();var d=[];k.forEach(f.graphicsLayerIds,function(a){if((a=f.getLayer(a))&&a instanceof w&&a.loaded&&a.visible){a.clearSelection(),a.infoTemplate&&!a.suspended&&d.push(a);}});k.forEach(f.layerIds,function(a){(a=f.getLayer(a))&&(-1!==a.declaredClass.indexOf("ArcGISImageServiceLayer")&&a.loaded&&a.visible&&a.infoTemplate)&&d.push(a);});c=c&&c.getInfoTemplate()?c:null;if(d.length||c){var e=hb(d),h=a.screenPoint,m=f.toMap(new za(h.x-e,h.y+e)),e=f.toMap(new za(h.x+e,h.y-e)),m=new C(m.x,m.y,e.x,e.y,f.spatialReference),g=new rb;g.geometry=m;g.timeExtent=f.timeExtent;var l=!0,m=k.map(d,function(b){var c;-1!==b.declaredClass.indexOf("ArcGISImageServiceLayer")?(g.geometry=a.mapPoint,l=!1,c=b.queryVisibleRasters(g,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),c.addCallback(function(){return b.getVisibleRasters();})):(c=b.selectFeatures(g),c.addCallback(function(){return b.getSelectedFeatures();}));return c;});c&&(e=new s,e.callback([c]),m.splice(0,0,e));if(!k.some(m,function(a){return -1===a.fired;})){var n=c?1:0;k.forEach(d,function(a){n=-1!==a.declaredClass.indexOf("ArcGISImageServiceLayer")?n+a.getVisibleRasters().length:n+a.getSelectedFeatures().length;});if(!n){return;}}b.setFeatures(m);b.show(a.mapPoint,{closestFirst:l});}}};function wb(a,f){var b=f.mapOptions||{},c;b.infoWindow||(c=new qb({visibleWhenEmpty:!1},nb.create("div")),b.infoWindow=c);!g.isDefined(b.showInfoWindowOnClick)&&!f.usePopupManager&&(b.showInfoWindowOnClick=!1);b=new ob(a,b);u.connect(b,"onLayersAddResult",gb);return b;};function x(a,f,b,c,d,e){var h,g,q,l;c.map?(h=c.map,g=c.clickEventHandle,q=c.clickEventListener,l=c.errors):(h=wb(c,d),!d.ignorePopups&&(!d.disableClickBehavior&&!d.usePopupManager)&&(g=u.connect(h,"onClick",na),q=na));h.addLayers(a);!d.ignorePopups&&!d.usePopupManager&&fb(a,h,d._clazz);var n=l||[];k.forEach(f,function(a){a.errors&&(n=n.concat(a.errors));},this);h.loaded?e.callback({map:h,itemInfo:b,errors:n,clickEventHandle:g,clickEventListener:q}):u.connect(h,"onLoad",function(){e.callback({map:h,itemInfo:b,errors:n,clickEventHandle:g,clickEventListener:q});});};function P(a,f,b,c,d){var e=[];k.forEach(d,function(a){l.isArray(a.layerObject)?k.forEach(a.layerObject,function(a){e.push(a);}):e.push(a.layerObject);});if("BingMapsAerial"===d[0].type||"BingMapsRoad"===d[0].type||"BingMapsHybrid"===d[0].type){var h=setInterval(function(){if(d[0].layerObject&&d[0].layerObject.loaded){clearInterval(h),ib(a,f,b,c,d,e);}else{if(d[0].errors){clearInterval(h);var k="";d[0].errors&&d[0].errors.length&&(k=" ("+d[0].errors[0].message+")");c.errback(Error(aa.arcgis.utils.baseLayerError+k));}}},10);}else{if(!e[0]&&d[0].baseMapLayer){var g="";d[0].errors&&d[0].errors.length&&(g=" ("+d[0].errors[0].message+")");c.errback(Error(aa.arcgis.utils.baseLayerError+g));}else{ib(a,f,b,c,d,e);}}};function ib(a,f,b,c,d,e){try{var h=b.mapOptions||{};b.mapOptions=h;var m=a.item;e=k.filter(e,g.isDefined);if(m){if(m.extent&&m.extent.length){if(h.extent){x(e,d,a,f,b,c);}else{var l=new C(m.extent[0][0],m.extent[0][1],m.extent[1][0],m.extent[1][1],new z({wkid:4326})),r=e[0].spatialReference;4326===r.wkid?(h.extent=l,x(e,d,a,f,b,c)):102100===r.wkid||102113===r.wkid||3857===r.wkid?(l.xmin=Math.max(l.xmin,-180),l.xmax=Math.min(l.xmax,180),l.ymin=Math.max(l.ymin,-89.99),l.ymax=Math.min(l.ymax,89.99),h.extent=pb.geographicToWebMercator(l),x(e,d,a,f,b,c)):b.geometryServiceURL||I.defaults.geometryService?(b.geometryServiceURL?new sb(b.geometryServiceURL):I.defaults.geometryService).project([l],r,function(k){k=k[0];h.extent=h.extent||k;x(e,d,a,f,b,c);},function(){x(e,d,a,f,b,c);}):c.errback(Error(aa.arcgis.utils.geometryServiceError));}}else{x(e,d,a,f,b,c);}}else{x(e,d,a,f,b,c);}}catch(n){c.errback(n);}};function jb(a){var f=[];a=a.baseMap.baseMapLayers.concat(a.operationalLayers);k.forEach(a,function(a){var c={};if(a.featureCollection&&"CSV"!==a.type){!0===a.featureCollection.showLegend&&k.forEach(a.featureCollection.layers,function(d){!1!==d.showLegend&&(c={layer:d.layerObject,title:a.title,defaultSymbol:d.renderer&&d.renderer.defaultSymbol&&d.renderer.defaultLabel?!0:!1},1<a.featureCollection.layers.length&&(c.title+=" - "+d.layerDefinition.name),f.push(c));});}else{if(a.baseMapLayer&&!0===a.showLegend&&a.layerObject||!a.baseMapLayer&&!1!==a.showLegend&&a.layerObject){var d=a.layerObject.renderer,e=a.layerObject.declaredClass,d=!d||d&&d.defaultSymbol&&d.defaultLabel?!0:!1;if(10.1>a.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===e||"esri.layers.ArcGISTiledMapServiceLayer"===e)||"esri.layers.ArcGISImageServiceLayer"===e){d=!0;}c={layer:a.layerObject,title:a.title,defaultSymbol:d};a.layers&&(e=k.map(k.filter(a.layers,function(a){return !1===a.showLegend;}),function(a){return a.id;}),e.length&&(c.hideLayers=e));f.push(c);}}});return f;};function xb(a,f){function b(a,b){k.forEach(a,function(a,c){switch(a){case Q:Ha=b[c];break;case R:Na=b[c];break;case oa:Va=b[c];break;case S:Wa=b[c];break;case pa:Ia=b[c];break;case T:Ua=b[c];break;case qa:Ga=b[c];break;case ra:Ka=b[c];break;case U:Ra=b[c];break;case V:Xa=b[c];break;case sa:Ja=b[c];break;case ta:Ma=b[c];break;case W:Oa=b[c];break;case ua:La=b[c];break;case X:Ya=b[c];break;case va:Ta=b[c];break;case Y:t=b[c];break;case Z:Sa=b[c];break;case $:Qa=b[c];break;case wa:Pa=b[c];}});};var c=new s,d=a.itemData,e=[];d.baseMap&&d.baseMap.baseMapLayers&&(e=e.concat(d.baseMap.baseMapLayers));d.operationalLayers&&(e=e.concat(d.operationalLayers));for(var d=k.map(e,function(a){return a&&a.layerType;}),h=[],g=[],e=!1,l=0;l<d.length;l++){switch(d[l]){case "ArcGISFeatureLayer":-1===k.indexOf(h,V)&&h.push(V);break;case "ArcGISImageServiceLayer":-1===k.indexOf(h,R)&&(h.push(R),g.push(ra),g.push(ta),g.push(ua));break;case "ArcGISMapServiceLayer":-1===k.indexOf(h,Q)&&(h.push(Q),g.push(pa),g.push(qa),g.push(sa));break;case "ArcGISStreamLayer":-1===k.indexOf(h,X)&&h.push(X);break;case "ArcGISTiledImageServiceLayer":case "ArcGISTiledMapServiceLayer":break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===k.indexOf(h,Y)&&h.push(Y);break;case "CSV":-1===k.indexOf(h,S)&&(h.push(S),g.push(oa));break;case "GeoRSS":-1===k.indexOf(h,T)&&h.push(T);break;case "KML":-1===k.indexOf(h,U)&&h.push(U);break;case "OpenStreetMap":-1===k.indexOf(h,W)&&h.push(W);break;case "WebTiledLayer":-1===k.indexOf(h,Z)&&(h.push(Z),g.push(va));break;case "WMS":-1===k.indexOf(h,$)&&(h.push($),g.push(wa));break;default:e=!0;}if(e){break;}}e&&(h=yb,g=zb);h.length?G(h,function(){b(h,arguments);g.length?G(g,function(){b(g,arguments);c.resolve();}):c.resolve();}):c.resolve();return c;};function kb(a,f,b,c){xb(c,f).then(function(){ub(c,f).then(function(c){var e=c[0],f=c[1];if(!e.itemData.operationalLayers||0===e.itemData.operationalLayers.length){J(e,f).addCallback(function(c){M(c.itemData,f).addCallback(l.hitch(null,P,c,a,f,b));});}else{var g=new s,q=e.itemData.baseMap.baseMapLayers.slice(),p=k.filter(e.itemData.baseMap.baseMapLayers,function(a){return !a.isReference;});c={item:e.item,itemData:{baseMap:{baseMapLayers:p}}};e.itemData.baseMap.baseMapLayers=k.filter(e.itemData.baseMap.baseMapLayers,function(a){return a.isReference;});J(c,f).addCallback(function(b){M(b.itemData,f).addCallback(l.hitch(null,P,b,a,f,g));});g.then(function(a){J(e,f).addCallback(function(c){M(c.itemData,f,a.map.spatialReference,p).addCallback(function(d){c.itemData.baseMap.baseMapLayers=q;P(c,a,f,b,d);});});},l.hitch(b,b.errback));}});});};function lb(a){p._arcgisUrl&&0<p._arcgisUrl.length&&(p.arcgisUrl=p._arcgisUrl);var f=p.arcgisUrl+"/"+a,b={},c=new s;y({url:f,content:{f:"json"},callbackParamName:"callback",load:function(a){b.item=a;y({url:f+"/data",content:{f:"json"},callbackParamName:"callback",load:function(a){b.itemData=a;c.callback(b);},error:function(a){c.errback(a);}});},error:function(a){c.errback(a);}});return c;};String.prototype.endsWith=function(a){return this.match(a+"$")==a;};var p,Ha,Na,Va,Wa,Ia,Ua,Ga,Ka,Ra,Xa,Ja,Ma,Oa,La,Ya,Ta,t,Sa,Qa,Pa,Q="../layers/ArcGISDynamicMapServiceLayer",R="../layers/ArcGISImageServiceLayer",oa="./csv",S="../layers/CSVLayer",pa="../layers/DynamicLayerInfo",T="../layers/GeoRSSLayer",qa="../layers/ImageParameters",ra="../layers/ImageServiceParameters",U="../layers/KMLLayer",V="../layers/LabelClass",sa="../layers/LayerDrawingOptions",ta="../layers/MosaicRule",W="../layers/OpenStreetMapLayer",ua="../layers/RasterFunction",X="../layers/StreamLayer",va="../layers/TileInfo",Y="../virtualearth/VETiledLayer",Z="../layers/WebTiledLayer",$="../layers/WMSLayer",wa="../layers/WMSLayerInfo",yb=[Q,R,S,T,U,V,W,X,Y,Z,$],zb=[oa,pa,qa,ra,sa,ta,ua,va,wa];p={arcgisUrl:location.protocol+"//www.arcgis.com/sharing/rest/content/items",getItem:lb,createMap:function(a,f,b){var c=new s;b=b||{};var d=b.infoTemplateClass;b._clazz=d&&(l.isObject(d)?d:l.getObject(d))||Ba;l.isString(a)?lb(a).addCallback(l.hitch(null,kb,f,b,c)).addErrback(l.hitch(c,c.errback)):kb(f,b,c,a);return c;},getLegendLayers:function(a){return a&&a.itemInfo&&a.itemInfo.itemData?jb(a.itemInfo.itemData):[];},_arcgisUrl:null,_getItemProps:J,_getItemData:E,_getBingKey:ba,_portalUrlResponse:da,_portalUrlFailure:K,_processFSItemProperties:ca,_processSSItemProperties:Ca,_getLayers:M,_preBuildLayerObjects:Za,_buildLayerObjects:la,_preCreateMap:P,_getMapSR:ma,_createMap:x,_addSelectionLayers:fb,_createSelectionFeatureLayers:O,_getServiceInfo:$a,_getFeatureCollectionItem:ab,_mergeFeatureCollectionItem:bb,_projectFeatureCollection:cb,_getLayersInfo:eb,_initLayer:ka,_loadAsCached:ga,_loadAsDynamic:Fa,_processPopups:ea,_onLayersAddResult:gb,_sameSpatialReferenceAsBasemap:ia,_sameTilingSchemeAsBasemap:ja,_showPopup:na,_calculateClickTolerance:hb,_getVisibleFeatureLayers:ha,_updateLayerScaleInfo:N,_checkUrl:A,_isHostedService:fa,_isAgolService:Ea,_getLegendLayers:jb};l.setObject("arcgis.utils",p,F);return p;});},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(b,c,a){b=window.location;a=b.pathname;a={version:"3.12",_appBaseUrl:b.protocol+"//"+b.host+a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-1]))};c.noGlobals||(window.esri=a);(a.dijit=a.dijit||{})._arcgisUrl=("file:"===b.protocol?"http:":b.protocol)+"//www.arcgis.com/sharing/rest";return a;});},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(b,c,a,d){a={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:window.Worker&&!1,io:{errorHandler:function(a,b){c.publish("esri.Error",[a]);},proxyUrl:null,alwaysUseProxy:!1,useCors:!0,corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com tilesdevext.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com".split(" "),corsDetection:window.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2000,timeout:60000,useWorkers:"on-request",maxRequestWorkers:5}}};b.noGlobals||(window.esriConfig=a);return a;});},"esri/lang":function(){define(["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date","dojo/has","dojo/number","dojo/date/locale","./kernel"],function(l,q,r,g,s,w,t,u,x){function h(a){return void 0!==a&&null!==a;};function m(a,c,b){var d=b.match(/([^\(]+)(\([^\)]+\))?/i),e=g.trim(d[1]);b=c[a];var d=q.fromJson((d[2]?g.trim(d[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),f=d.utcOffset;if(-1===l.indexOf(v,e)){e=g.getObject(e),g.isFunction(e)&&(b=e(b,a,c,d));}else{if("number"===typeof b||"string"===typeof b&&b&&!isNaN(Number(b))){switch(b=Number(b),e){case "NumberFormat":return t.format(b,d);case "DateString":a=new Date(b);if(d.local||d.systemLocale){return d.systemLocale?a.toLocaleDateString()+(d.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(d.hideTime?"":" "+a.toTimeString());}a=a.toUTCString();d.hideTime&&(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(b),h(f)&&(a=s.add(a,"minute",a.getTimezoneOffset()-f)),u.format(a,d);}}}return h(b)?b:"";};function n(a,c){var b;if(c){for(b in a){a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b] instanceof Object&&n(a[b],!0));}}else{for(b in a){a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];}}return a;};var v=["NumberFormat","DateString","DateFormat"],p=/<\/?[^>]+>/g;return {valueOf:function(a,c){for(var b in a){if(a[b]==c){return b;}}return null;},stripTags:function(a){if(a){var c=typeof a;if("string"===c){a=a.replace(p,"");}else{if("object"===c){for(var b in a){(c=a[b])&&"string"===typeof c&&c.replace(p,"");}}}}return a;},substitute:function(a,c,b){var d,e,f;h(b)&&(g.isObject(b)?(d=b.first,e=b.dateFormat,f=b.numberFormat):d=b);if(!c||"${*}"===c){c=[];for(var k in a){b=a[k];if(e&&-1!==l.indexOf(e.properties||"",k)){b=m(k,a,e.formatter||"DateString");}else{if(f&&-1!==l.indexOf(f.properties||"",k)){b=m(k,a,f.formatter||"NumberFormat");}}c.push(k+" = "+(h(b)?b:"")+"<br/>");if(d){break;}}return c.join("");}return g.replace(c,g.hitch({obj:a},function(a,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),m(b,this.obj,c.join(":"))):e&&-1!==l.indexOf(e.properties||"",b)?m(b,this.obj,e.formatter||"DateString"):f&&-1!==l.indexOf(f.properties||"",b)?m(b,this.obj,f.formatter||"NumberFormat"):h(this.obj[b])?this.obj[b]:"";}),/\$\{([^\}]+)\}/g);},filter:function(a,c,b){c=[g.isString(a)?a.split(""):a,b||r.global,g.isString(c)?new Function("item","index","array",c):c];b={};var d;a=c[0];for(d in a){c[2].call(c[d],a[d],d,a)&&(b[d]=a[d]);}return b;},isDefined:h,fixJson:n};});},"esri/request":function(){define(["require","dojo/_base/array","dojo/_base/config","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/url","dojo/_base/xhr","dojo/io/script","dojo/io/iframe","dojo/dom-construct","dojo/io-query","./kernel","./config","./sniff","./lang","./urlUtils","./deferredUtils"],function(P,w,J,R,p,W,z,X,Y,S,T,l,Z,r,x,q,$){function K(a){a=new W(a);return (a.host+(a.port?":"+a.port:"")).toLowerCase();};function C(a,d,e,f){var k=!1,n=!1,t;x.isDefined(d)&&(p.isObject(d)?(k=!!d.useProxy,n=!!d.usePost,t=d.crossOrigin):k=!!d);a=p.mixin({},a);a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));d=a.content;var h=a.url,g=e&&a.form,s=m;t=x.isDefined(t)?t:s.useCors;a.load=function(a){var b;a&&(a.error?(b=p.mixin(Error(),a.error),b.log=J.isDebug):"error"===a.status&&(b=p.mixin(Error(),a),b.log=J.isDebug),b&&!x.isDefined(b.httpCode)&&(b.httpCode=b.code));return b||a;};a.error=function(a,b){b&&b.xhr&&b.xhr.abort();a instanceof Error||(a=p.mixin(Error(),a));a.log=J.isDebug;s.errorHandler(a,b);return a;};a._token&&(a.content=a.content||{},a.content.token=a._token);var y=0,A;d&&h&&(A=T.objectToQuery(d),y=A.length+h.length+1,r("esri-url-encodes-apostrophe")&&(y=A.replace(/'/g,"%27").length+h.length+1));a.timeout=x.isDefined(a.timeout)?a.timeout:s.timeout;a.handleAs=a.handleAs||"json";try{var u,v,b=t&&q.canUseXhr(a.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(a.url),c=q.hasSameOrigin(a.url,window.location.href)||b,B=n||e||y>s.postLength?!0:!1,U=!c&&-1!==a.handleAs.indexOf("json")&&a.callbackParamName&&!e?!0:!1,D=q.getProxyRule(a.url)||s.alwaysUseProxy||k||(!U||B)&&!c?!0:!1;e&&(!r("esri-file-upload")&&!D&&b)&&(D=!0);if(D){if(u=q.getProxyUrl(h,t),v=u.path,u._xo&&(b=!0),!B&&v.length+1+y>s.postLength&&(B=!0),a.url=v+"?"+h,B){a.content=p.mixin(u.query||{},d);}else{var V=T.objectToQuery(p.mixin(u.query||{},d));V&&(a.url+="?"+V);a.content=null;}}if(U&&!B){return !x.isDefined(a.isAsync)&&4>r("ff")&&(a.isAsync=!0),X.get(E?E(a):a);}var F=a.headers;if(b&&(!F||!F.hasOwnProperty("X-Requested-With"))){F=a.headers=F||{},F["X-Requested-With"]=null;}if(e){var L=a.callbackParamName||"callback.html",C=a.callbackElementName||"textarea",G,M,H,N,O=g.elements?g.elements.length:0,Q;if(d=a.content){for(G in d){if(H=d[G],x.isDefined(H)){M=null;for(N=0;N<O;N++){if(Q=g.elements[N],Q.name===G){M=Q;break;}}M?M.value=H:f?g.append(G,H):g.appendChild(S.create("input",{type:"hidden",name:G,value:H}));}}}if(r("esri-file-upload")){w.forEach(g.elements,function(a){a.name===L&&g.removeChild(a);}),a.contentType=!1,a.postData=f?g:new FormData(g),delete a.form;}else{g.enctype="multipart/form-data";9>r("ie")&&(g.encoding="multipart/form-data");g.method="post";w.some(g.elements,function(a){return a.name===L;})||g.appendChild(S.create("input",{type:"hidden",name:L,value:C}));if(-1!==h.toLowerCase().indexOf("addattachment")||-1!==h.toLowerCase().indexOf("updateattachment")){a.url=h+(-1===h.indexOf("?")?"?":"&")+L+"="+C,D&&(a.url=v+"?"+a.url);}delete a.content;}}if(b&&!a.hasOwnProperty("withCredentials")){if(f=D?v:h,-1!==w.indexOf(m.webTierAuthServers,K(f))){a.withCredentials=!0;}else{if(l.id){var I=l.id.findServerInfo(f);I&&I.webTierAuth&&(a.withCredentials=!0);}}}a=E?E(a):a;return B?e&&!r("esri-file-upload")?Y.send(a):z.post(a):z.get(a);}catch(P){return e=new R,e.errback(a.error(P)),e;}};function O(a){var d=m.corsStatus,e=q.canUseXhr(a,!0);-1<e&&m.corsEnabledServers.splice(e,1);d[K(a)]=1;return e;};function I(a){var d=m.corsStatus;if(m.corsDetection&&m.useCors){try{var e=K(a);r("esri-cors")&&(a&&-1!==a.toLowerCase().indexOf("/rest/services")&&!q.hasSameOrigin(a,window.location.href)&&!q.canUseXhr(a)&&!d[e])&&(d[e]=-1,z.get({url:a.substring(0,a.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(f){f?(d[e]=2,q.canUseXhr(a)||m.corsEnabledServers.push(e)):d[e]=1;},function(a){d[e]=1;}));}catch(f){}}};function n(a,d){function e(b){b._pendingDfd=C(a,d,y,s);if(!b._pendingDfd){b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;var c=Error("Deferred object is missing");c.log=J.isDebug;a._usrDfd=null;b.errback(c);b._pendingDfd=null;return b;}b._pendingDfd.addCallback(function(d){b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;a._usrDfd=null;b.callback(d);b._pendingDfd=null;}).addErrback(function(c){var e,f,g;c&&(e=c.code,f=c.subcode,g=(g=c.messageCode)&&g.toUpperCase());if(c&&403==e&&(4==f||c.message&&-1<c.message.toLowerCase().indexOf("ssl")&&-1===c.message.toLowerCase().indexOf("permission"))){if(!a._ssl){a._ssl=a._sslFromServer=!0;a._usrDfd=b;n(a,d);return;}}else{if(c&&415==c.status){if(O(a.url),!a._err415){a._err415=1;a._usrDfd=b;n(a,d);return;}}else{if(l.id&&-1!==w.indexOf(l.id._errorCodes,e)&&!l.id._isPublic(a.url)&&!p&&(403!=e||-1===w.indexOf(aa,g)&&(!x.isDefined(f)||2==f))){b._pendingDfd=l.id.getCredential(a.url,{token:a._token,error:c});b._pendingDfd.addCallback(function(c){a._token=c.token;a._usrDfd=b;a._credential=c;a._ssl=a._sslFromServer||c.ssl;n(a,d);}).addErrback(function(c){a._usrDfd=null;b.errback(c);b._pendingDfd=null;});return;}}}b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;a._usrDfd=null;b.errback(c);b._pendingDfd=null;});};a.url=q.fixUrl(a.url);"file:"!==window.location.protocol&&(a.url=q.getAbsoluteUrl(a.url));d=d||{};var f,k=a.form,p=d.disableIdentityLookup,t=d._preLookup,h=!1;if(r("esri-workers")&&!1!==m.useWorkers){if(!0===d.useWorkers||!0===m.useWorkers){h=!0;}else{if(d.workerOptions){var g=d.workerOptions;if(g.callback||g.worker&&g.worker.worker instanceof Worker){h=!0;}}}}var s=k&&k.append,y=k&&(k.elements?w.some(k.elements,function(a){return "file"===a.type;}):s),A=-1!==a.url.toLowerCase().indexOf("token=")||a.content&&a.content.token||y&&w.some(k.elements,function(a){return "token"===a.name;})?1:0;I(a.url);if(a._usrDfd){f=a._usrDfd;}else{f=new R($._dfdCanceller);f.addCallback(function(b){/\/sharing\/rest\/accounts\/self/i.test(a.url)&&(!A&&!a._token&&b.user&&b.user.username)&&m.webTierAuthServers.push(K(a.url));if(b=a._credential){var c=l.id.findServerInfo(b.server);if(c=c&&c.owningSystemUrl){c=c.replace(/\/?$/,"/sharing"),(b=l.id.findCredential(c,b.userId))&&-1===l.id._getIdenticalSvcIdx(c,b)&&b.resources.splice(0,0,c);}}});f.addBoth(function(b){delete a._credential;if(b&&(!r("ie")||!b.nodeType)){b._ssl=a._ssl;}});var u=a.load,v=a.error;u&&f.addCallback(function(a){var c=f._pendingDfd,c=c&&c.ioArgs;return u.call(c&&c.args,a,c);});v&&f.addErrback(function(a){var c=f._pendingDfd,c=c&&c.ioArgs;return v.call(c&&c.args,a,c);});}if(l.id&&!A&&!a._token&&!l.id._isPublic(a.url)&&(!p||t)){if(k=l.id.findCredential(a.url)){a._token=k.token,a._ssl=k.ssl;}}h?d.workerOptions&&d.workerOptions.worker?(z=d.workerOptions.worker,e(f)):P(["./workers/RequestClient"],function(a){if(d.workerOptions){var c=d.workerOptions;z=a.getClient(c.callback,c.cbFunction);}else{z=a.getClient();}e(f);}):e(f);return f;};var E,m=Z.defaults.io,aa=["COM_0056","COM_0057"];n._request=C;n._disableCors=O;n._detectCors=I;n.setRequestPreCallback=function(a){E=a;};return n;});},"esri/sniff":function(){define(["dojo/_base/sniff","./kernel"],function(a,m){var c=a("ff"),e=a("ie"),k=void 0===e&&7<=a("trident"),g=a("webkit"),f=a("opera"),l=a("chrome"),n=a("safari"),h=navigator.userAgent,d;(d=h.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&a.add("esri-iphone",parseFloat(d[2].replace("_",".")));(d=h.match(/Android\s+(\d+\.\d+)/i))&&a.add("esri-android",parseFloat(d[1]));(d=h.match(/Fennec\/(\d+\.\d+)/i))&&a.add("esri-fennec",parseFloat(d[1]));0<=h.indexOf("BlackBerry")&&0<=h.indexOf("WebKit")&&a.add("esri-blackberry",1);a.add("esri-touch",a("esri-iphone")||a("esri-android")||a("esri-blackberry")||6<=a("esri-fennec")||(c||g)&&document.createTouch?!0:!1);a.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);m._getDOMAccessor=function(a){var b="";c?b="Moz":g?b="Webkit":e?b="ms":f&&(b="O");return b+a.charAt(0).toUpperCase()+a.substr(1);};a.add("esri-phonegap",!!window.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest" in window&&"withCredentials" in new XMLHttpRequest);a.add("esri-file-upload",window.FormData&&window.FileList?!0:!1);a.add("esri-workers",window.Worker?!0:!1);a.add("esri-transforms",k||9<=e||3.5<=c||4<=l||3.1<=n||10.5<=f||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transitions",k||10<=e||4<=c||4<=l||3.1<=n||10.5<=f||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transforms3d",k||10<=c||12<=l||4<=n||3.2<=a("esri-iphone")||3<=a("esri-android"));a.add("esri-url-encodes-apostrophe",function(){var a=window.document.createElement("a");a.href="?'";return -1<a.href.indexOf("?%27");});3>a("esri-android")&&(a.add("esri-transforms",!1,!1,!0),a.add("esri-transitions",!1,!1,!0),a.add("esri-transforms3d",!1,!1,!0));m._css=function(d){var b=a("esri-transforms3d");if(void 0!==d&&null!==d){b=d;}else{if(b&&(l||n&&!a("esri-iphone"))){b=!1;}}var h=b?"translate3d(":"translate(",k=b?l?",-1px)":",0px)":")",m=b?"scale3d(":"scale(",p=b?",1)":")",q=b?"rotate3d(0,0,1,":"rotate(",r=b?"matrix3d(":"matrix(",s=b?",0,0,":",",t=b?",0,0,0,0,1,0,":",",u=b?",0,1)":")";return {names:{transition:g&&"-webkit-transition"||c&&"MozTransition"||f&&"OTransition"||e&&"msTransition"||"transition",transform:g&&"-webkit-transform"||c&&"MozTransform"||f&&"OTransform"||e&&"msTransform"||"transform",transformName:g&&"-webkit-transform"||c&&"-moz-transform"||f&&"-o-transform"||e&&"-ms-transform"||"transform",origin:g&&"-webkit-transform-origin"||c&&"MozTransformOrigin"||f&&"OTransformOrigin"||e&&"msTransformOrigin"||"transformOrigin",endEvent:g&&"webkitTransitionEnd"||c&&"transitionend"||f&&"oTransitionEnd"||e&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return h+a+"px,"+b+"px"+k;},scale:function(a){return m+a+","+a+p;},rotate:function(a){return q+a+"deg)";},matrix:function(a){return r+a.xx+","+a.xy+s+a.yx+","+a.yy+t+a.dx.toFixed(10)+(c?"px,":",")+a.dy.toFixed(10)+(c?"px":"")+u;},getScaleFromMatrix:function(a){if(!a){return 1;}a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")));}};};return a;});},"esri/urlUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/io-query","./kernel","./config","./sniff","dojo/i18n!./nls/jsapi"],function(k,r,l,p,s,t,q,u){var e={},m=t.defaults.io,n=window.location.protocol;"file:"===n&&(n="http:");e.urlToObject=function(a){var c={},b=new l(a),d=a.indexOf("?");null===b.query?c={path:a,query:null}:(c.path=a.substring(0,d),c.query=p.queryToObject(b.query));b.fragment&&(c.hash=b.fragment,null===b.query&&(c.path=c.path.substring(0,c.path.length-(b.fragment.length+1))));return c;};e.getProxyUrl=function(a,c){var b=k.isString(a)?0===k.trim(a).toLowerCase().indexOf("https:"):a,d=m.proxyUrl,f,g,h=u.io.proxyNotSet;if(k.isString(a)&&(g=e.getProxyRule(a))){d=g.proxyUrl;}if(!d){throw undefined,Error(h);}b&&(!1!==c&&0!==window.location.href.toLowerCase().indexOf("https:"))&&(b=d,0!==b.toLowerCase().indexOf("http")&&(b=e.getAbsoluteUrl(b)),b=b.replace(/^http:/i,"https:"),e.canUseXhr(b)&&(d=b,f=1));d=e.urlToObject(d);d._xo=f;return d;};e.addProxy=function(a){var c=e.getProxyRule(a),b;c?b=e.urlToObject(c.proxyUrl):m.alwaysUseProxy&&(b=e.getProxyUrl());b&&(c=e.urlToObject(a),a=b.path+"?"+c.path,(b=p.objectToQuery(k.mixin(b.query||{},c.query)))&&(a+="?"+b));return a;};e.addProxyRule=function(a){var c=a.urlPrefix=e.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),b=m.proxyRules,d,f=b.length,g,h=f;for(d=0;d<f;d++){if(g=b[d].urlPrefix,0===c.indexOf(g)){if(c.length===g){return -1;}h=d;break;}else{0===g.indexOf(c)&&(h=d+1);}}b.splice(h,0,a);return h;};e.getProxyRule=function(a){var c=m.proxyRules,b=c.length,d=e.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),f;for(a=0;a<b;a++){if(0===d.indexOf(c[a].urlPrefix)){f=c[a];break;}}return f;};e.hasSameOrigin=function(a,c,b){a=a.toLowerCase();c=c.toLowerCase();var d=window.location.href.toLowerCase();a=0===a.indexOf("http")?new l(a):d=new l(d);c=0===c.indexOf("http")?new l(c):k.isString(d)?new l(d):d;return (b||a.scheme===c.scheme)&&a.host===c.host&&a.port===c.port;};e.canUseXhr=function(a,c){var b=q("esri-phonegap")?!0:!1,d=e.hasSameOrigin,f=m.corsEnabledServers,g,h=-1;!b&&(q("esri-cors")&&f&&f.length)&&(b=r.some(f,function(b,c){g=0!==k.trim(b).toLowerCase().indexOf("http");return d(a,g?"http://"+b:b)||g&&d(a,"https://"+b)?(h=c,!0):!1;}));return c?h:b;};e.getAbsoluteUrl=function(a){return k.isString(a)&&!/^https?:\/\//i.test(a)?0===a.indexOf("//")?n+a:0===a.indexOf("/")?n+"//"+window.location.host+a:s._appBaseUrl+a:a;};e.fixUrl=function(a){/^\/\//i.test(a)&&(a=n+a);return a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");};return e;});},"esri/nls/jsapi":function(){define({root:{io:{proxyNotSet:"esri.config.defaults.io.proxyUrl is not set. If making a request to a CORS enabled server, please push the domain into esri.config.defaults.io.corsEnabledServers."},map:{deprecateReorderLayerString:"Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",deprecateShiftDblClickZoom:"Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported."},basemaps:{streets:"Streets",satellite:"Imagery",hybrid:"Imagery with Labels",terrain:"Terrain with Labels",topo:"Topographic",gray:"Light Gray Canvas","dark-gray":"Dark Gray Canvas",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap"},geometry:{deprecateToScreenPoint:"esri.geometry.toScreenPoint deprecated. Use esri.geometry.toScreenGeometry.",deprecateToMapPoint:"esri.geometry.toMapPoint deprecated. Use esri.geometry.toMapGeometry."},layers:{tiled:{tileError:"Unable to load tile"},dynamic:{imageError:"Unable to load image"},graphics:{drawingError:"Unable to draw graphic "},agstiled:{deprecateRoundrobin:"Constructor option 'roundrobin' deprecated. Use option 'tileServers'."},imageParameters:{deprecateBBox:"Property 'bbox' deprecated. Use property 'extent'."},FeatureLayer:{noOIDField:"objectIdField is not set [url: ${url}]",fieldNotFound:"unable to find '${field}' field in the layer 'fields' information [url: ${url}]",noGeometryField:"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]",invalidParams:"query contains one or more unsupported parameters",updateError:"an error occurred while updating the layer",createUserSeconds:"Created by ${userId} seconds ago",createUserMinute:"Created by ${userId} a minute ago",editUserSeconds:"Edited by ${userId} seconds ago",editUserMinute:"Edited by ${userId} a minute ago",createSeconds:"Created seconds ago",createMinute:"Created a minute ago",editSeconds:"Edited seconds ago",editMinute:"Edited a minute ago",createUserMinutes:"Created by ${userId} ${minutes} minutes ago",createUserHour:"Created by ${userId} an hour ago",createUserHours:"Created by ${userId} ${hours} hours ago",createUserWeekDay:"Created by ${userId} on ${weekDay} at ${formattedTime}",createUserFull:"Created by ${userId} on ${formattedDate} at ${formattedTime}",editUserMinutes:"Edited by ${userId} ${minutes} minutes ago",editUserHour:"Edited by ${userId} an hour ago",editUserHours:"Edited by ${userId} ${hours} hours ago",editUserWeekDay:"Edited by ${userId} on ${weekDay} at ${formattedTime}",editUserFull:"Edited by ${userId} on ${formattedDate} at ${formattedTime}",createUser:"Created by ${userId}",editUser:"Edited by ${userId}",createMinutes:"Created ${minutes} minutes ago",createHour:"Created an hour ago",createHours:"Created ${hours} hours ago",createWeekDay:"Created on ${weekDay} at ${formattedTime}",createFull:"Created on ${formattedDate} at ${formattedTime}",editMinutes:"Edited ${minutes} minutes ago",editHour:"Edited an hour ago",editHours:"Edited ${hours} hours ago",editWeekDay:"Edited on ${weekDay} at ${formattedTime}",editFull:"Edited on ${formattedDate} at ${formattedTime}"}},tasks:{gp:{gpDataTypeNotHandled:"GP Data type not handled."},na:{route:{routeNameNotSpecified:"'RouteName' not specified for at least 1 stop in stops FeatureSet."}},query:{invalid:"Unable to perform query. Please check your parameters."}},toolbars:{draw:{convertAntiClockwisePolygon:"Polygons drawn in anti-clockwise direction will be reversed to be clockwise.",addPoint:"Click to add a point",addShape:"Click to add a shape, or press down to start and let go to finish",addMultipoint:"Click to start adding points",freehand:"Press down to start and let go to finish",start:"Click to start drawing",resume:"Click to continue drawing",complete:"Double-click to complete",finish:"Double-click to finish",invalidType:"Unsupported geometry type"},edit:{invalidType:"Unable to activate the tool. Check if the tool is valid for the given geometry type.",deleteLabel:"Delete"}},virtualearth:{vetiledlayer:{bingMapsKeyNotSpecified:"BingMapsKey must be provided."},vegeocode:{bingMapsKeyNotSpecified:"BingMapsKey must be provided.",requestQueued:"Server token not retrieved. Queing request to be executed after server token retrieved."}},widgets:{attributeInspector:{NLS_first:"First",NLS_previous:"Previous",NLS_next:"Next",NLS_last:"Last",NLS_deleteFeature:"Delete",NLS_title:"Edit Attributes",NLS_errorInvalid:"Invalid",NLS_validationInt:"Value must be an integer.",NLS_validationFlt:"Value must be a float.",NLS_of:"of",NLS_noFeaturesSelected:"No features selected"},basemapToggle:{toggle:"Toggle basemap"},homeButton:{home:{button:"Home",title:"Default extent"}},layerSwipe:{title:"Drag to see underlying layer"},locateButton:{locate:{button:"My Location",title:"Find my location",tracking:"Track location",stopTracking:"Stop tracking location"}},overviewMap:{NLS_drag:"Drag To Change The Map Extent",NLS_show:"Show Map Overview",NLS_hide:"Hide Map Overview",NLS_maximize:"Maximize",NLS_restore:"Restore",NLS_noMap:"'map' not found in input parameters",NLS_noLayer:"main map does not have a base layer",NLS_invalidSR:"spatial reference of the given layer is not compatible with the main map",NLS_invalidType:"unsupported layer type. Valid types are 'TiledMapServiceLayer' and 'DynamicMapServiceLayer'"},timeSlider:{NLS_first:"First",NLS_previous:"Previous",NLS_next:"Next",NLS_play:"Play/Pause",NLS_invalidTimeExtent:"TimeExtent not specified, or in incorrect format."},attachmentEditor:{NLS_attachments:"Attachments:",NLS_add:"Add",NLS_none:"None",NLS_error:"There was an error.",NLS_fileNotSupported:"This file type is not supported."},directions:{error:{notEnoughStops:"Enter an origin and a destination.",unknownStop:"Location '<name>' could not be found.",routeTask:"Unable to route to these addresses.",locator:"Location could not be found.",invalidStopType:"Invalid stop type",locatorUndefined:"Unable to reverse geocode. Locator URL is undefined.",noAddresses:"No addresses were returned.",noStops:"No stops were given to be added.",maximumStops:"The maximum number of stops has been reached",cantFindRouteServiceDescription:"Route service description was not reached or recognized. Please check service URL and/or user credentials, if specified.",maxWalkingDistance:"The distance between any inputs must be less than 50 miles (80 kilometers) when walking.",nonNAmTruckingMode:"Calculating trucking routes outside of North and Central America is not currently supported.",cantRemoveStop:"Failed to remove stop."},time:{minute:"minute",minutes:"minutes",hour:"hour",hours:"hours"},units:{KILOMETERS:{name:"kilometers",abbr:"km"},METERS:{name:"meters",abbr:"m"},MILES:{name:"miles",abbr:"mi"},NAUTICAL_MILES:{name:"nautical miles",abbr:"nm"}},travelMode:{car:"By Car",truck:"By Truck",walking:"Walking"},impedance:{fastest:"Fastest",shortest:"Shortest"},unlocatedStop:"<unknown location>",showOptions:"Show more options",hideOptions:"Hide options",findOptimalOrder:"Optimize order",useTraffic:"Use traffic",returnToStart:"Return to start",addDestination:"Add destination",viewFullRoute:"Zoom to full route",getDirections:"Get Directions",clearDirections:"Clear",reverseDirections:"Reverse directions",activate:"Add destinations by clicking on the map",print:"Print",printNotes:"Enter notes here",printDisclaimer:"Directions are provided for planning purposes only and are subject to <a href='http://www.esri.com/legal/software-license' target='_blank'>Esri's terms of use</a>. Dynamic road conditions can exist that cause accuracy to differ from your directions and must be taken into account along with signs and legal restrictions. You assume all risk of use."},editor:{tools:{NLS_attributesLbl:"Attributes",NLS_cutLbl:"Cut",NLS_deleteLbl:"Delete",NLS_extentLbl:"Extent",NLS_freehandPolygonLbl:"Freehand Polygon",NLS_freehandPolylineLbl:"Freehand Polyline",NLS_pointLbl:"Point",NLS_polygonLbl:"Polygon",NLS_polylineLbl:"Polyline",NLS_reshapeLbl:"Reshape",NLS_selectionNewLbl:"New selection",NLS_selectionAddLbl:"Add to selection",NLS_selectionClearLbl:"Clear selection",NLS_selectionRemoveLbl:"Subtract from selection",NLS_selectionUnionLbl:"Union",NLS_autoCompleteLbl:"Auto Complete",NLS_unionLbl:"Union",NLS_rectangleLbl:"Rectangle",NLS_circleLbl:"Circle",NLS_ellipseLbl:"Ellipse",NLS_triangleLbl:"Triangle",NLS_arrowLbl:"Arrow",NLS_arrowLeftLbl:"Left Arrow",NLS_arrowUpLbl:"Up Arrow",NLS_arrowDownLbl:"Down Arrow",NLS_arrowRightLbl:"Right Arrow",NLS_undoLbl:"Undo",NLS_redoLbl:"Redo"}},Search:{main:{clearButtonTitle:"Clear Search",searchButtonTitle:"Search",placeholderAll:"Search All",searchIn:"Search in",all:"All",noResults:"No Results",noResultsFound:"There were no results found for ${value}.",nwyw:"Not what you wanted?",location:"Location",currentLocation:"Current location",selectAnother:"Select another location",placeholder:"Find address or place",untitledSource:"Untitled source"},esriLocatorName:"Esri World Geocoder"},Geocoder:{main:{clearButtonTitle:"Clear Search",searchButtonTitle:"Search",geocoderMenuButtonTitle:"Change Geocoder",geocoderMenuHeader:"Search in",geocoderMenuCloseTitle:"Close Menu",untitledGeocoder:"Untitled geocoder"},esriGeocoderName:"Esri World Geocoder"},geocodeMatch:{match:{mapAllCandidatesLabel:"Map All Suggestions",defaultSortOrderLabel:"Default Sort Order",tableOptionsLabel:"Options",columnLabelAddress:"Address",columnLabelType:"Type",columnLabelScore:"Score",noDataMsg:"No Results.",userCreatedLabel:"User Created",defaultMatchType:"DefaultMatch"},popup:{noAddress:"No Address Found.",matchButtonLabel:"Match",discardButtonLabel:"Discard",checkBoxLocation:"Location (X, Y)",checkBoxAddress:"Suggested Address",addressTitle:"Suggested Address",optionsTitle:"Match Options:",loadingPH:"Searching...",locationTitle:"Location",xTitle:"X: ",yTitle:"Y: "},customLabel:"Custom",idProperty:"id",gridTitle:"Suggestions",matchedLC:"matched",matchedUC:"Matched",unmatchedLC:"unmatched",unmatchedUC:"Unmatched"},geocodeReview:{review:{noDataMsg1:"No Unmatched Features",noDataMsg2:"No Matched Features",noDataMsg3:"No Reviewed Features",columnOriginalLocation:"Original Location",columnSelectedLocation:"Selected Location",columnOriginalAddress:"Original Address",columnSelectedAddress:"Selected Address"},customLabel:"Custom",unmatchedLC:"unmatched",matchedLC:"matched",unmatchedUC:"Unmatched",matchedUC:"Matched",totalUC:"Total",remainingUC:"Remaining",idProperty:"id",reviewedUC:"Reviewed",columnLabelAddress:"Address",of:"of",unmatchedTotal:"Unmatched (${count} Total)",unmatchedRemaining:"Unmatched (${count1} of ${count2} Remaining)",matchedTotal:"Matched (${count} Total)",reviewedTotal:"Reviewed (${count} Total)"},HistogramTimeSlider:{NLS_range:"Range",NLS_cumulative:"Cumulative",NLS_play:"Play/Pause",NLS_invalidTimeExtent:"TimeExtent not specified, or in incorrect format.",NLS_overview:"OVERVIEW",NLS_fullRange:"full range"},legend:{NLS_points:"Points",NLS_lines:"Lines",NLS_polygons:"Polygons",NLS_creatingLegend:"Creating legend",NLS_noLegend:"No legend",NLS_dotValue:"1 Dot = ${value} ${unit}",NLS_currentObservations:"Current observations",NLS_previousObservations:"Previous observations",high:"High",low:"Low"},popup:{NLS_moreInfo:"More info",NLS_searching:"Searching",NLS_prevFeature:"Previous feature",NLS_nextFeature:"Next feature",NLS_close:"Close",NLS_prevMedia:"Previous media",NLS_nextMedia:"Next media",NLS_noInfo:"No information available",NLS_noAttach:"No attachments found",NLS_maximize:"Maximize",NLS_restore:"Restore",NLS_zoomTo:"Zoom to",NLS_pagingInfo:"(${index} of ${total})",NLS_attach:"Attachments"},measurement:{NLS_distance:"Distance",NLS_area:"Area",NLS_location:"Location",NLS_resultLabel:"Measurement Result",NLS_length_miles:"Miles",NLS_length_kilometers:"Kilometers",NLS_length_feet:"Feet",NLS_length_meters:"Meters",NLS_length_yards:"Yards",NLS_length_nautical_miles:"Nautical Miles",NLS_area_acres:"Acres",NLS_area_sq_miles:"Sq Miles",NLS_area_sq_kilometers:"Sq Kilometers",NLS_area_hectares:"Hectares",NLS_area_sq_yards:"Sq Yards",NLS_area_sq_feet:"Sq Feet",NLS_area_sq_meters:"Sq Meters",NLS_area_sq_nautical_miles:"Sq Nautical Miles",NLS_deg_min_sec:"DMS",NLS_decimal_degrees:"Degrees",NLS_map_coordinate:"Map Coordinate",NLS_longitude:"Longitude",NLS_latitude:"Latitude",NLS_MGRS:"MGRS",NLS_USNG:"USNG",NLS_UTM:"UTM",NLS_GeoRef:"GeoRef",NLS_GARS:"GARS",NLS_geometry_service_error:"Geometry Service Error",NLS_calculating:"Calculating..."},bookmarks:{NLS_add_bookmark:"Add Bookmark",NLS_new_bookmark:"Untitled",NLS_bookmark_edit:"Edit",NLS_bookmark_remove:"Remove"},print:{NLS_print:"Print",NLS_printing:"Printing",NLS_printout:"Printout"},textSymbolEditor:{symbolConfiguration:"Symbol Configuration",alignment:"Alignment",color:"Color"},scalebar:{km:"km",mi:"mi",ft:"ft",m:"m"},templatePicker:{creationDisabled:"Feature creation is disabled for all layers.",loading:"Loading.."},renderingRule:{rendererLabelTitle:"Renderer",bandCombinationLabelTitle:"RGB composite",userDefinedRendererTitle:"User Defined Renderer",userDefinedRendererDesc:"A user defined renderer. Use different bands for inputs to the Red, Green, and Blue channels (multi-band services only). Apply different radiometric enhancement algorithms to make image look better.",imageEnhancementLabelTitle:"Image Enhancement",stretchDescLabel:"Apply contrast enhancements to improve the image display.",stretchMethodLabel:"Stretch Type:",stretchMethodNoneDesc:"No additional enhancements applied.",stretchMethodMinMaxDesc:"Stretch to the entire range of pixel values.",numStdDevLabelTitle:"Trim extreme pixel values beyond",numStdDevEndLabelTitle:"standard deviations.",draLabelTitle:"Dynamic range adjustment",minMaxDescLabelTitle:"Trim extreme pixel values",minPercentLabelTitle:"Exclude bottom:",maxPercentLabelTitle:"Exclude top:",percentLabelTitle:"%",gammaLabelTitle:"Gamma:",bandNamesRequestMsg:"Requesting band information...",noneStretchAlias:"None",minMaxStretchAlias:"Minimum and Maximum",stdDevStretchAlias:"Standard Deviation",percentClipStretchAlias:"Percent Clip",minGammaLabel:"0.1",maxGammaLabel:"10"},mosaicRule:{mosaicMethodLabel:"Prioritize imagery based on:",orderFieldLabel:"Attribute:",orderValueLabel:"Highest priority value:",lockRasterIdLabel:"Image IDs:",mosaicOperatorLabel:"Resolve overlapping pixels by:",descendingLabel:"Reverse the order",queryLabel:"Filter your images:",queryFieldLabel:"Field:",queryOperatorLabel:"Operator:",queryValueLabel:"Value:",selectAllLabel:"Select All",mosaicruleNotApplicable:"The image layer contains only one image and does not support changing image display order.",lockRasterRequestMsg:"Searching...",lockRasterRequestDoneMsg:"Done...",lockRasterRequestErrorMsg:"Error searching...",lockRasterRequestNoRasterMsg:"No rasters found...",refreshLockRasterIdsLabel:"Refresh",orderFieldNotFound:"Not Available",byAttributeAlias:"An attribute",centerAlias:"Image center closest to view center",lockRasterAlias:"A list of images",nadirAlias:"Sensor location closest to view center",northWestAlias:"Fixed order with most North West on top",seamlineAlias:"Defined Seamlines",viewPointAlias:"View point",noneAlias:"Only scale",firstAlias:"Only highest priority",lastAlias:"Only Lowest priority",minAlias:"Minimum of pixel values",maxAlias:"Maximum of pixel values",averageAlias:"Average of pixel values",blendAlias:"Blend pixel values"},tags:{addTags:"Add tag(s)",noTagsFound:"No existing tags match."},rendererSlider:{color:{changeMinMaxToolTIp:"Type in a value.",handleToolTip:"Match data values to colors.",maxValueToolTip:"Type in the largest expected data value.",minValueToolTip:"Type in the smallest expected data value.",changeSymbol:"Change symbol"},size:{handleToolTip:"Match data values to symbol size.",sizeInputBoxLines:"Set line thickness from 0 to 18 pixels.",sizeInputBoxPoints:"Set symbol size from 1 to 120 pixels"}}},arcgis:{utils:{baseLayerError:"Unable to load the base map layer",geometryServiceError:"Provide a geometry service to open Web Map.",showing:"Showing ${fieldAlias}"}},identity:{lblItem:"item",title:"Sign In",info:"Please sign in to access the item on ${server} ${resource}",lblUser:"Username:",lblPwd:"Password:",lblOk:"OK",lblSigning:"Signing in...",lblCancel:"Cancel",errorMsg:"Invalid username/password. Please try again.",invalidUser:"The username or password you entered is incorrect.",forbidden:"The username and password are valid, but you don't have access to this resource.",noAuthService:"Unable to access the authentication service."},common:{cancel:"Cancel",ok:"OK",create:"Create",close:"Close",done:"Done",apply:"Apply",remove:"Remove",open:"Open",edit:"Edit",share:"Share",save:"Save",help:"Help",warning:"Warning",deleteLabel:"Delete",titleLabel:"Title:",newLabel:"New",arcgis:"ArcGIS",previous:"Previous",submit:"Submit",next:"Next",yesLabel:"Yes",noLabel:"No",errorTitle:"Error",upload:"Upload",sum:"Sum",minimum:"Minimum",maximum:"Maximum",average:"Average",standardDev:"Std Deviation",statistic:"Statistic",attribute:"Field",selectAttribute:"Select attribute",runAnalysis:"Run Analysis",oneLabel:"1.",twoLabel:"2.",threeLabel:"3.",fourLabel:"4.",fiveLabel:"5.",sixLabel:"6.",sevenLabel:"7.",eightLabel:"8.",outputnameMissingMsg:"Output name is required",miles:"Miles",kilometers:"Kilometers",meters:"Meters",feet:"Feet",degree:"Decimal Degree(s)",inches:"Inch(es)",nautMiles:"Nautical Miles",pointsUnit:"Point(s)",yards:"Yards",comingSoonLabel:"Coming Soon!",sqMiles:"Square Miles",sqFeet:"Square Feet",sqKm:"Square Kilometers",sqMeters:"Square Meters",hectares:"Hectares",acres:"Acres",seconds:"Seconds",minutes:"Minutes",hours:"Hours",today:"Today",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday",chooseSummarizeLabel:"Choose layer to summarize",creditTitle:"Credit Usage Report",analysisLayers:"Analysis layers:",showCredits:"Show credits",learnMore:"Learn More",hoursSmall:"hr",minutesSmall:"min",secondsSmall:"sec",statsRequiredMsg:"At least one of the statistics parameters is required.",nowLabel:"Now",hrsLabel:"hrs",groupLabel:"Group",ungroupLabel:"Ungroup",and:"and",or:"or",add:"Add",polygons:"Polygons",points:"Points",lines:"Lines",input:"Input",areas:"Areas",validateRouteIdMsg:"Layers must have the same number of records, or one layer must have one record only.",straightLineDistance:"Line distance",outputLabel:"Output:",addPoint:"Click to add a point",movePoint:"Click to move the point",selectAll:"Select All",unselectAll:"Unselect All",selectLabel:"Select",queryLabel:"Query",drawnBoundary:"Drawn Boundary",basic:"Basic",intermediate:"Intermediate",advanced:"Advanced",majority:"Majority",minority:"Minority",addMinMajorityLable:"Add minority, majority",addPercentageLabel:"Add percentages",drivingMode:"Driving",truckingMode:"Trucking",walkingMode:"Walking",distanceMsg:"Only numeric values are allowed"},analysisTools:{performAnalysis:"Perform Analysis",summarizeData:"Summarize Data",findLocations:"Find Locations",aggregateTool:"Aggregate Points",bufferTool:"Buffer Data",dataEnrichment:"Data Enrichment",analyzePatterns:"Analyze Patterns",useProximity:"Use Proximity",manageData:"Manage Data",aggregateToolName:"Aggregate Points",bufferToolName:"Create Buffers",aggregatePoints:"Aggregate Points",summarizeWithin:"Summarize Within",summarizeNearby:"Summarize Nearby",enrichLayer:"Enrich Layer",findNearest:"Find Nearest",findHotSpots:"Find Hot Spots",createBuffers:"Create Buffers",dissolveBoundaries:"Dissolve Boundaries",mergeLayers:"Merge Layers",extractData:"Extract Data",overlayLayers:"Overlay Layers",fieldCalculator:"Field Calculator",createDriveTimeAreas:"Create Drive-Time Areas",deriveNewLocations:"Derive New Locations",findExistingLocations:"Find Existing Locations",findSimilarLocations:"Find Similar Locations",exploreCorrelations:"Explore Correlations",findRoute:"Find Route",generateFleetPlan:"Generate Fleet-routing plan",createDensitySurface:"Create density surface",interpolatePoints:"Interpolate Points",orgUsrMsg:"You must be a member of an organization to run this service.",pubRoleMsg:"Your online account has not been assigned to the Publisher role.",servNameExists:"A result layer already exists with this name. Result layers must be named uniquely across the organization. Please use a different name.",outputLayerLabel:"Result layer name",outputFileName:"Output file name",emptyResultInfoMsg:"The result of your analysis did not return any features. No layer will be created.",invalidServiceName:"The result layer name contains one or more invalid characters (<, >, #, %, :, \", ?, &, +, /, or \\).",invalidServiceNameLength:"The result layer name length should be less than 98 characters.",requiredValue:"This value is required.",saveResultIn:"Save result in",useMapExtent:"Use current map extent",connectOriginsToDestinations:"Connect Origins to Destinations",planRoutes:"Plan Routes",calculateDensity:"Calculate Density",traceDownstream:"Trace Downstream",createWatershed:"Create Watersheds",createViewshed:"Create Viewshed"},aggregatePointsTool:{aggregateDefine:"Count <b>${layername}</b> within",outputLayerName:"Aggregation of ${pointlayername} to ${polygonlayername}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Aggregate Points solutions. Points from ${pointlayername} were aggregated to ${polygonlayername}",itemTags:"Analysis Result, Aggregate Points, ${pointlayername}, ${polygonlayername}",itemSnippet:"Analysis Feature Service generated from Aggregate Points",removeAttrStats:"Remove Attribute Statistics",keepPolygonLabel:"Keep areas with no points",addStatsLabel:"Add statistic (optional)",chooseAreaLabel:"Choose area"},findHotSpotsTool:{hotspotsPolyDefine:"Analyze <b>${layername}</b>  to find statistically significant hot and cold spots of ",hotspotsPointDefine:"Analyze <b>${layername}</b>  to find statistically significant hot and cold spots ",fieldLabel:"with or without an analysis field",noAnalysisField:"No Analysis Field",hotspots:"Hot Spots",outputLayerName:"Hot Spots ${layername}",Options:"Options",defineBoundingLabel:"Define where incidents are possible",provideAggLabel:"Provide aggregation areas for summing incidents",defaultBoundingOption:"Select bounding areas",defaultAggregationOption:"Select aggregation areas",itemDescription:"Feature Service generated from running the Find Hot Spots solution.",itemTags:"Analysis Result, Hot Spots, ${layername}, ${fieldname}",itemSnippet:"Analysis Feature Service generated from Find Hot Spots",chooseAttributeLabel:"Choose an analysis field",blayerName:"Drawn Boundaries"},overlayLayersTool:{overlayDefine:"Overlay <b>${layername}</b> with",chooseOverlayLayer:"Choose overlay layer",chooseOverlayMethod:"Choose overlay method",chooseOutputType:"Choose output type",itemDescription:"Feature Service generated from running the Overlay layers solution.",itemTags:"Analysis Result, Overlay layers, ${layername}",itemSnippet:"Analysis Feature Service generated from Overlay layers",unionOutputLyrName:"Union of ${layername} and ${overlayname}",intersectOutputLyrName:"Intersect of ${layername} and ${overlayname}",eraseOutputLyrName:"Erase ${layername} with ${overlayname}",overlayLayerPolyMsg:"The Overlay layer should be a Polygon Layer for Union overlay",notSupportedEraseOverlayMsg:"This Overlay layer is not supported for Erase overlay. Defaults to Intersect overlay.",intersect:"Intersect",union:"Union",erase:"Erase"},bufferTool:{bufferDefine:"Create buffers from <b>${layername}</b>",outputLayerName:"Buffer of ${layername}",sizeLabel:"Enter buffer size",sizeHelp:"To create multiple buffers, enter distances separated by spaces (2 3 5).",typeLabel:"Buffer type",resultLabel:"Result layer name",optionsLabel:"Options",itemDescription:"Feature Service generated from running the Buffer Features solution. Input from ${layername} were buffered by ${distance_field} ${units}",itemTags:"Analysis Result, Buffer, ${layername}",itemSnippet:"Analysis Feature Service generated from Buffer",overlap:"Overlap",dissolve:"Dissolve",include:"Include",exclude:"Exclude",around:"Around",sideType:"Side type",endType:"End type",left:"Left",right:"Right",round:"Round",flat:"Flat",multipleDistance:"Multiple distance buffers should be",rings:"Rings",disks:"Disks",areaofInputPoly:"Area of input polygons in buffer polygons",distance:"Distance",field:"Field"},driveTimes:{toolDefine:"Create areas around <b>${layername}</b>",outputLayerName:"Drive from ${layername} (${breakValues} ${breakUnits})",outputModeLayerName:"${mode} from ${layername} (${breakValues} ${breakUnits})",driving:"Drive",trucking:"Truck",walking:"Walk",measureLabel:"Measure",measureHelp:"To output multiple areas for each point, type sizes separated by spaces (2 3.5 5).",areaLabel:"Areas from different points",trafficLabel:"Use traffic",typicalTraffCdtnLabel:"Traffic based on typical conditions for",resultLabel:"Result layer name",liveTrafficLabel:"Live traffic",itemDescription:"Feature Service generated from running the Create Drive Times solution.",itemTags:"Analysis Result, Drive Times, ${layername}",itemSnippet:"Analysis Feature Service generated from Create Drive Times",split:"Split",seeAvailability:"See availability.",timeOfDeparture:"Time of departure",drivingDistance:"Driving Distance",drivingTime:"Driving Time",truckingTime:"Trucking Time",truckingDistance:"Trucking Distance",walkingDistance:"Walking Distance",walkingTime:"Walking Time",liveSingularTimeLabel:"Live traffic +1 hr ${minute} min",liveSingularHourTimeLabel:"Live traffic +1 hr",liveTimeLabel:"Live traffic +${hour} hr ${minute} min",liveTimeHoursLabel:"Live traffic +${hour} hr",liveTimeMinutesLabel:"Live traffic +${minute} min"},routeOriginDestinationPairsTool:{toolDefine:"Route between pairs of points originating from <b>${layername}</b>",labelOne:"Route to destinations in",pairPoints:"Points with matching IDs will connect:",originTripId:"ID field in origins",destnTripId:"Matching ID field in destinations",includeSegments:"Include individual road segments.",inValidNumberRecordsMsg:"Layers must have the same number of records, or one layer must have one record only.",outputLayerName:"${layername} to ${destnlayername}",itemDescription:"Feature Service generated from running the Connect Origins to Destinations solution.",itemTags:"Analysis Result, Connect Origins to Destinations, ${layername}, ${destnlayername}",itemSnippet:"Analysis Feature Service generated from Connect Origins to Destinations"},planRoutesTool:{toolDefine:"Route vehicles to stops in <b>${layername}</b>",timeSpentLabel:"Time spent at each stop",defineRoutesLabel:"Define routes",startRoutesLabel:"Routes begin at",endRoutesLabel:"Routes end at",routes:"Routes",stops:"Stops",numRoutes:"Maximum number of vehicles to route",maxPtsRoute:"Maximum number of stops per vehicle",limitMaxTime:"Limit the total route time per vehicle",returnToStart:"Return to start",specifyStartTime:"Start time for all routes",createStartLoc:"Add point to map",createEndLoc:"Add point to map",selectStartLoc:"Select starting location",selectEndLoc:"Select ending location",vehicles:"Vehicles",routeId:"Route ID field",selectRouteId:"Select RouteID",stopsLabel:"Your layer has ${numStops} stops.",stopsLabelByExtent:"The current map extent shows ${numStops} stops.",outputLayerName:"Routes to ${layername}",itemDescription:"Feature Service generated from running the Plan Routes solution.",itemTags:"Analysis Result, Plan Routes, ${layername}",itemSnippet:"Analysis Feature Service generated from Plan Routes",startEndPtsValidMsg:"Start or end points not set",travelModeLabel:"Travel mode for routes"},extractDataTool:{layersToExtract:"Layers to extract",studyArea:"Study area",outputDataFormat:"Output data format",filegdb:"File Geodatabase (.zip)",shpFile:"Shapefile (.zip)",lyrpkg:"Layer Package (.lpk)",selectFtrs:"Select features",clipFtrs:"Clip features",sameAsDisplay:"Same as Display",sameAsLayer:"Same as ${layername}",outputfileName:"Extract Data ${datetime}",itemDescription:"File generated from running the Extract Data solution.",itemTags:"Analysis Result, Extract Data",itemSnippet:"Analysis File item generated from Extract Data",kml:"KML (.kmz or .zip)",csvPoints:"CSV (.csv or .zip)  ",linesCSVValidationMsg:"Line and area layers cannot be extracted to CSV.  Choose a different format or uncheck all line and area layers.",runAnalysisMsg:"Data is being extracted and will be available in My Content."},summarizeWithinTool:{summarizeDefine:"For Features within <b>${sumWithinLayerName}</b>",outputLayerName:"Summarize ${summaryLayerName} within ${sumWithinLayerName}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Summarize Within solution. ${summaryLayerName} were summarized within ${sumWithinLayerName}",itemTags:"Analysis Result, Summarize Within, ${sumWithinLayerName}, ${summaryLayerName}",itemSnippet:"Analysis Feature Service generated from Summarize Within",removeAttrStats:"Remove Attribute Statistics",summarizeMetricPoint:"Count of points",summarizeMetricLine:"Length of lines in",summarizeMetricPoly:"Sum Area in",addStatsLabel:"Attribute statistics",addStats:"Add statistics from <b>${summaryLayerName}</b>",sumLabel:"Summarize"},summarizeNearbyTool:{summarizeDefine:"Summarize what is nearby <b>${sumNearbyLayerName}</b>",findNearLabel:"Summarize nearest features using a",outputLayerName:"Summarize ${summaryLayerName} in ${sumNearbyLayerName}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Summarize Nearby solution. ${sumNearbyLayerName} were summarized nearby ${summaryLayerName}",itemTags:"Analysis Result, Summarize Nearby, ${sumNearbyLayerName}, ${summaryLayerName}",itemSnippet:"Analysis Feature Service generated from Summarize Nearby",removeAttrStats:"Remove Attribute Statistics",summarizeMetricPoint:"Count of points",summarizeMetricLine:"Total Length",summarizeMetricPoly:"Total Area",addStatsLabel:"Attribute statistics",addStats:"Add statistics from <b>${summaryLayerName}</b>",sumLabel:"Summarize",chooseLayer:"Choose layer to summarize",returnBdrycCheckLabel:"Return bounding areas"},creditEstimator:{analysisLayersLabel:"Analysis layers:",totalRecordsLabel:"Total records:",creditsAvailLabel:"Credits available:",creditsReqLabel:"Credits required:",ntwCreditsReqLabel:"Network credits required:",EnrichCreditsLabel:"Enrichment credits required"},enrichLayerTool:{selectCountryLabel:"Select country",enrichDefine:"Enrich <b>${inputLayerName}</b>",chooseDataCollectionLabel:"Show available data for:",defAreasLabel:"Define areas to enrich",outputLayerName:"Enriched ${layername}",itemDescription:"Feature Service generated from running the Enrich layer solution. ${inputLayerName} were enriched",itemTags:"Analysis Result, Enrich Layer, ${inputLayerName}",itemSnippet:"Analysis Feature Service generated from Enrich layer",straightLineDistance:"Line distance",selectDataVar:"Select Variables",clickDataVar:"Click Select Variables to open Data Browser and browse for variables",selectedVars:"Selected Variables",usCountryCode:"United States",canadaCountryCode:"Canada",albaniaCountryCode:"Albania",australiaCountryCode:"Australia",austriaCountryCode:"Austria",bahrainCountryCode:"Bahrain",belarusCountryCode:"Belarus",bosniaCountryCode:"Bosnia and Herzegovina",botswanaCountryCode:"Botswana",belgiumCountryCode:"Belgium",brazilCountryCode:"Brazil",bulgariaCountryCode:"Bulgaria",chinaCountryCode:"China",colombiaCountryCode:"Colombia",croatiaCountryCode:"Croatia",cyprusCountryCode:"Cyprus",czechCountryCode:"Czech Republic",coteCountryCode:"Cote d'Ivoire",denmarkCountryCode:"Denmark",finlandCountryCode:"Finland",franceCountryCode:"France",germanyCountryCode:"Germany",ghanaCountryCode:"Ghana",greeceCountryCode:"Greece",hungaryCountryCode:"Hungary",icelandCountryCode:"Iceland",indiaCountryCode:"India",indonesiaCountryCode:"Indonesia",irelandCountryCode:"Ireland",israelCountryCode:"Israel",italyCountryCode:"Italy",japanCountryCode:"Japan",kazakhstanCountryCode:"Kazakhstan",kenyaCountryCode:"Kenya",latviaCountryCode:"Latvia",liechtensteinCountryCode:"Liechtenstein",lithuaniaCountryCode:"Lithuania",luxembourgCountryCode:"Luxembourg",malawiCountryCode:"Malawi",malaysiaCountryCode:"Malaysia",maltaCountryCode:"Malta",mauritiusCountryCode:"Mauritius",mexicoCountryCode:"Mexico",moldovaCountryCode:"Moldova",montenegroCountryCode:"Montenegro",mozambiqueCountryCode:"Mozambique",namibiaCountryCode:"Namibia",netherlandsCountryCode:"Netherlands",nzCountryCode:"New Zealand",nigeriaCountryCode:"Nigeria",norwayCountryCode:"Norway",peruCountryCode:"Peru",polandCountryCode:"Poland",portugalCountryCode:"Portugal",puertoCountryCode:"Puerto Rico",romaniaCountryCode:"Romania",reunionCountryCode:"Reunion",spainCountryCode:"Spain",switzerlandCountryCode:"Switzerland",swedenCountryCode:"Sweden",turkeyCountryCode:"Turkey",ukCountryCode:"United Kingdom",zmCountryCode:"Zambia",ugandaCountryCode:"Uganda",mkCountryCode:"The Former Yugoslav Republic of Macedonia",uaeCountryCode:"United Arab Emirates",thCountryCode:"Thailand",twCountryCode:"Taiwan",szCountryCode:"Swaziland",krCountryCode:"South Korea",siCountryCode:"Slovenia",sgCountryCode:"Singapore",rsCountryCode:"Serbia",saCountryCode:"Saudi Arabia",tzCountryCode:"Tanzania",ukrCountryCode:"Ukraine",globalCode:"Global",russiaCountryCode:"Russia",algCountryCode:"Algeria",andCountryCode:"Andorra",argCountryCode:"Argentina",azCountryCode:"Azerbaijan",baCountryCode:"Bangladesh",chCountryCode:"Chile",coCountryCode:"Costa Rica",egCountryCode:"Egypt",elCountryCode:"El Salvador",eeCountryCode:"Estonia",grCountryCode:"Georgia",gtCountryCode:"Guatemala",hoCountryCode:"Honduras",joCountryCode:"Jordan",kwCountryCode:"Kuwait",kzCountryCode:"Kyrgyzstan",lbCountryCode:"Lebanon",leCountryCode:"Lesotho",mgCountryCode:"Mongolia",moCountryCode:"Morocco",niCountryCode:"Nicaragua",omCountryCode:"Oman",pkCountryCode:"Pakistan",phCountryCode:"Philippines",qaCountryCode:"Qatar",slCountryCode:"Slovakia",safCountryCode:"South Africa",sriCountryCode:"Sri Lanka",sdCountryCode:"Sudan",tnCountryCode:"Tunisia",ugCountryCode:"Uruguay",syCountryCode:"Syria",vzCountryCode:"Venezuela",vtCountryCode:"Vietnam",keyGlobalFacts:"Key Global Facts",age:"Age",husByOccupancy:"Housing Units By Occupancy",householdsByIncome:"Households by Income",keyUSFacts:"Key US Facts",policy:"Policy Facts",raceAndEthnicity:"Race And Ethnicity",wealth:"Wealth Facts",keyCanFacts:"Key Canada Facts",aTSpend:"Austria Spending",aTFacts:"Austria Facts",bESpend:"Belgium Spending",bEFacts:"Belgium Facts",bRSpend:"Brazil Spending",bRFacts:"Brazil Facts",dKSpend:"Denmark Spending",dKFacts:"Denmark Facts",fISpend:"Finland Spending",fIFacts:"Finland Facts",fRSpend:"France Spending",fRFacts:"France Facts",dESpend:"Germany Spending",dEFacts:"Germany Facts",gRSpend:"Greece Spending",gRFacts:"Greece Facts",iEFacts:"Ireland Facts",iESpend:"Ireland Spending",iNFacts:"India Facts",iNSpend:"India Spending",iTFacts:"Italy Facts",iTSpend:"Italy Spending",keyWEFacts:"Key Western Europe Facts",keyWESpend:"Key Western Europe Spending",jPFacts:"Japan Facts",jPSpend:"Japan Spending",lIFacts:"Liechtenstein Facts",lISpend:"Liechtenstein Spending",lUFacts:"Luxembourg Facts",lUSpend:"Luxembourg Spending",nLFacts:"Netherlands Facts",nLSpend:"Netherlands Spending",nOFacts:"Norway Facts",nOSpend:"Norway Spending",pTFacts:"Portugal Facts",pTSpend:"Portugal Spending",eSSpend:"Spain Spending",eSFacts:"Spain Facts",sEFacts:"Sweden Facts",sESpend:"Sweden Spending",cHFacts:"Switzerland Facts",cHSpend:"Switzerland Spending",tRFacts:"Turkey Facts",tRSpend:"Turkey Spending",gBFacts:"United Kingdom Facts",gBSpend:"United Kigdom Spending",tapestry:"Tapestry",infrastructure:"Infrastructure",landCover:"Land Cover",landscapeFacts:"Landscape Facts",publicLands:"Public Lands",soils:"Soils",waterWetlands:"Water Wetlands",rUFacts:"Russia Facts",rUSpend:"Russia Spending"},dissolveBoundaries:{dissolveBoundariesDefine:"Dissolve <b>${layername}</b>",chooseDissolveLabel:"Choose dissolve method",overlappingAreasLabel:"Areas that overlap or are adjacent",sameAttributeAreasLabel:"Areas with same field value",summarizeLabel:"Add statistic (optional)",itemDescription:"Feature Service generated from running the Dissolve Boundaries solution.",itemTags:"Analysis Result, Dissolve Boundaries, ${layername}",itemSnippet:"Analysis Feature Service generated from Dissolve Boundaries",resultLabel:"Result layer name",outputLayerName:"Dissolve ${layername}"},FindNearestTool:{summarizeDefine:"For each location in <b>${sumNearbyLayerName}</b>, find its nearest locations.",findNearLabel:"Find the nearest locations by measuring",outputLayerName:"Nearest ${layer} to ${sumNearbyLayerName}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Find Nearest solution. Nearest ${sumNearbyLayerName}",itemTags:"Analysis Result, Find Nearest, ${sumNearbyLayerName}, ${summaryLayerName}",itemSnippet:"Analysis Feature Service generated from Find Nearest",removeAttrStats:"Remove Attribute Statistics",forEachLocationLabel:"For each location in <b>${sumNearbyLayerName}</b>",findNearestLabel:"Limit the number of nearest locations to:",limitSearchRangeCheck:"Limit the search range to",addStats:"For each location in <b>${summaryLayerName}</b>",chooseLayer:"Choose a layer",findLocationsIn:"Find the nearest locations in:",outputLayersLabel:"Result layer names",straightLineDistance:"Line distance",resultLabel1:"Nearest locations layer",resultLabel2:"Connecting lines layer",outputConnectingLayerName:"Nearest ${layer} to ${sumNearbyLayerName} (Lines)",chooseLayerInfoLabel:"Both input layers must contain points to enable Driving distance and Driving time options"},mergeLayers:{mergeLayersDefine:"Merge <b>${layername}</b> with",outputLayerName:"Merge ${layername} ${mergelayername}",chooseMergeLayer:"Choose layer",mergeFieldsLabel:"Modify merging fields (optional)",itemDescription:"Feature Service generated from running the Merge Layers solution.",itemTags:"Analysis Result, Merge Layers, ${layername}",itemSnippet:"Analysis Feature Service generated from Merge Layers",resultLabel:"Result layer name",rename:"Rename",remove:"Remove",match:"Match",operation:"Operation",fieldTypeMatchValidationMsg:"Fields to be matched must have the same type.  Transformation of types is supported (for example, double to integer, integer to string) except for string to numeric."},findExistingLocations:{findExpLabel:"Find the <b>${analysisLayerName}</b> features that match the following expression(s)",outputLayerName:"Find Locations in ${analysisLayerName}",itemDescription:"Feature Service generated from running the Find Existing Locations solutions for  ${analysisLayerName}.",itemTags:"Analysis Result, Find Existing Locations, ${analysisLayerName}",itemSnippet:"Analysis Feature Service generated from Find Existing Locations"},deriveNewLocations:{findExpLabel:"Derive new locations that match the following expression(s)",outputLayerName:"New Locations",itemDescription:"Feature Service generated from running the Derive New Locations solutions.",itemTags:"Analysis Result, Derive New Locations, ${analysisLayerName}",itemSnippet:"Analysis Feature Service generated from Find Existing Locations"},findSimilarLocations:{toolDefine:"Find locations that are similar to: <b>${layername}</b>",labelOneText:"You may use all locations or make a selection",labelTwoText:"Search for similar locations in",labelThreeText:"Base similarity on",labelFourText:"Show me:",outputLayerName:"Most Similar ${analysisLayerName}",selectTargetFtrs:"Select one or more target features",useAllFtrs:"Use all features",itemDescription:"Feature Service generated from running the Find Similar Locations solutions for  ${analysisLayerName}.",itemTags:"Analysis Result, Find Similar Locations, ${analysisLayerName}",itemSnippet:"Analysis Feature Service generated from Find Similar Locations",allResults:"all locations from most to least similar",justShowTop:"the top",selectSearchLayer:"Select the search layer",query:"Query",noFieldMatchMsg:"Search layer and input layer do not have any fields in common.",reqSelectionMsg:"You must select the feature(s) to match by making an interactive selection or by constructing a query.",selectedFeaturesLabel:"${total} feature(s) selected"},expressionGrid:{addExpr:"Add Expression",expression:"Expression",editExpr:"Edit Expression",viewText:"View Text",viewGrid:"View Grid",addExprDescription:"Click Add Expression to begin building your query.",duplicateExpression:"This Expression already exists"},expressionForm:{where:"where (attribute query)",whereLabel:"where",intersects:"intersects",notIntersects:"does not intersect",withinDistance:"within a distance of",notWithinDistance:"not within a distance of",contains:"completely contains",notContains:"does not completely contain",completelyContains:"completely contains",notCompletelyContains:"does not completely contain",within:"completely within",notWithin:"not completely within",completelyWithin:"completely within",notCompletelyWithin:"not completely within",identical:"are identical to",notIdentical:"are not identical to",touches:"touches",notTouches:"does not touch",crossesOutline:"crossed by the outline of",notCrossesOutline:"not crossed by the outline of",from:"from",inValidAttributeFilterMessage:"Layer ${layername} does not contain any attributes that can be used in an attribute query."},interpolatePointsTool:{toolDefine:"Interpolate values from <b>${layername}</b>",outputLayerName:"${layername} Prediction",interpolationMethod:"Interpolation method",optimizeFor:"Optimize for",selectAttributesLabel:"Choose field to interpolate",classifyLabel:"Classify by",classesCountLabel:"Number of classes",equalInterval:"Equal Interval",manual:"Manual",quantile:"Equal Area",geometricInterval:"Geometric Interval",outputPredictionErrors:"Output prediction errors",interpolateWithin:"Clip output to",predictLocLabel:"Predict at these locations",choosePointLayer:"Choose point layer",pointlayerName:"Drawn Prediction Points",classBreakValues:"Class break values",defaultBoundingOption:"Choose study area",classBreaksHelp:"Enter break values spearated by spaces: (10 20 30)",itemDescription:"Feature Service generated from running the Interpolate Points solution.",itemTags:"Analysis Result, Interpolate Points, ${layername}, ${fieldname}",itemSnippet:"Analysis Feature Service generated from Interpolate Points",speed:"Speed",accuracy:"Accuracy"},calculateDensityTool:{toolDefine:"Calculate density values from <b>${layername}</b>",selectAttributesLabel:"Use a count field (optional)",outputAerealUnits:"Output area units",itemDescription:"Feature Service generated from running the Calculate Density solution.",itemTags:"Analysis Result, Calculate Density, ${layername}, ${fieldname}",itemSnippet:"Analysis Feature Service generated from Calculate Density",outputLayerName:"${layername} Density",searchDistance:"Search Distance",naturalBreaks:"Natural Breaks",standardDeviation:"Standard Deviation",chooseCountField:"No count field"},traceDownstreamTool:{toolDefine:"Trace downstream from <b>${layername}</b>",outputLayerName:"${layername} Trace",choosePointLayer:"Choose point layer",pointlayerName:"Drawn Prediction Points",defaultBoundingOption:"Choose study area",itemDescription:"Feature Service generated from running the Trace Downstream solution.",itemTags:"Analysis Result, Trace Downstream, ${layername}",itemSnippet:"Analysis Feature Service generated from Trace Downstream",clipOutputToLabel:"Clip output to",traceOptionsLabel:"Trace downstream settings (optional)",splitTraceLabel:"Split the trace into line segments",maxTraceLabel:"Maximum distance of the trace"},createWatershedTool:{toolDefine:"Create Watersheds from <b>${layername}</b>",outputLayerName:"${layername} Watersheds",choosePointLayer:"Choose point layer",pointlayerName:"Drawn Prediction Points",defaultBoundingOption:"Choose study area",itemDescription:"Feature Service generated from running the Create Watershed solution.",itemTags:"Analysis Result, Create Watersheds, ${layername}",itemSnippet:"Analysis Feature Service generated from Create Watershed",searchDistanceLabel:"Search distance to nearest drainage (optional)"},createViewshedTool:{toolDefine:"Create areas that are visible from <b>${layername}</b>",outputLayerName:"${layername} visible areas",itemDescription:"Feature Service generated from running the Create Viewshed solution.",itemTags:"Analysis Result, Create Viewshed, ${layername}",itemSnippet:"Analysis Feature Service generated from Create Viewshed",maxDistanceLabel:"Maximum viewing distance",observerHghtLabel:"Height of ${layername}",targetHghtLabel:"Height of other objects on the ground",viewshedOptionlabel:"Visibility settings (optional)",maxDistanceValidMsg:"The maximum viewing distance cannot be more than ${limit} ${units}.",maxdistanceInValidMsg:"Only integer values are allowed"},analysisMsgCodes:{SS_84493:"There was 1 outlier location; it was not used to compute ${AggregationType}.",SS_84492:"The total study area was ${Area}.",SS_84491:"There were ${NumFeatures} valid input aggregation areas.",SS_84490:"The aggregation process resulted in ${AggNumFeatures} weighted areas.",SS_84489:"Analysis was performed on all aggregation areas.",SS_84485:"There were ${NumFeatures} valid input features.",SS_84477:"Blue output features represent cold spots where low ${FieldName} cluster.",SS_84476:"Red output features represent hot spots where high ${FieldName} cluster.",SS_84471:"Output",SS_84470:"${NumSignificant} output features are statistically significant based on a FDR correction for multiple testing and spatial dependence.",SS_84466:"Hot Spot Analysis",SS_84465:"The optimal fixed distance band was based on one standard distance of the features from the geometric mean: ${DistanceInfo}.",SS_84464:"The optimal fixed distance band was based on the average distance to ${NumNeighs} nearest neighbors: ${DistanceInfo}.",SS_84461:"The optimal fixed distance band selected was based on peak clustering found at ${DistanceInfo}.",SS_84459:"Scale of Analysis",SS_84458:"Analysis was based on the number of points in each polygon cell.",SS_84457:"Points were aggregated to the fishnet polygon cells falling within the bounding areas provided.",SS_84453:"Analysis was performed on all fishnet polygon cells within the bounding area layer.",SS_84452:"Analysis was performed on all fishnet polygon cells containing at least one point.",SS_84451:"Analysis was based on the number of points in each fishnet polygon cell.",SS_84450:"The polygon cell size was ${SnapInfo}.",SS_84449:"A fishnet polygon mesh was created for aggregating points.",SS_84446:"${VarName} Properties:",SS_84444:"Incident Aggregation",SS_84437:"There were no locational outliers.",SS_84434:"There were ${NumOutliers} outlier locations; these were not used to compute ${AggregationType}.",SS_84428:"Initial Data Assessment.",SS_84271_0:"Min",SS_84272_0:"Max",SS_84261_0:"Mean",SS_84262_0:"Std. Dev.",SS_00002:"The following report outlines the workflow used to optimize your Find Hot Spots result:",AO_100001:"Aggregate Points failed.",AO_100002:"The geometry type of Point Layer must be points.",AO_100003:"The geometry type of  Polygon Layer must be polygons.",AO_100004:"The field  ${fieldName} provided for Summary Fields does not exist.",AO_100005:"The field  ${fieldName} provided for Summary Fields is not numeric.",AO_100006:"The summary type ${summary} provided for field ${fieldName} is invalid.",AO_100007:"Find Hot Spots failed.",AO_100008:"The geometry type for the boundingPolygonLayer must be polygon.",AO_100009:"The geometry type of Analysis Layer must be points or polygons.",AO_100010:"The geometry type of Aggregation Polygon Layer must be polygon.",AO_100011:"Must provide an Analysis Field for polygon Analysis Layer.",AO_100012:"Create Buffers failed.",AO_100013:"Overlay Layers failed.",AO_100014:"Summarize Within failed.",AO_100015:"The geometry type of Summarize Layer input must be point, line, or polygons.",AO_100016:"The geometry type of Summarize Layer input must be point or line.",AO_100017:"The geometry type of Summarize Layer input must be point.",AO_100018:"Sum Units ${sumUnits} is not applicable for ${shapeType} shape type.",AO_100019:"At least one of the parameters, Summarize Shape or  Summary Fields is required.",AO_468:"Input shape types are not equal.",AO_1156:"A field value was incompatible with the field type.",AO_800:"The value is not a member of SUM | MEAN | MIN | MAX | RANGE | STD | COUNT | FIRST | LAST.",AO_728:"The analysisField ${fieldName} you specified does not exist in the analysisLayer.",AO_12:"Field to add already exists.",AO_539:"Expression is invalid.",AO_1115:"Layer description property must be set for ${layerName}.",AO_366:"Invalid geometry type.",AO_641:"This tool requires at least ${numFeatures} feature(s) to compute results.",AO_906:"Zero variance: all of the values for your input field are likely the same.",AO_1533:"We were not able to compute hot and cold spots for the data provided.  If appropriate, try specifying an Analysis Field.",AO_1534:"Hot and cold spots cannot be computed when the number of points in every polygon area is identical. Try different polygon areas or different analysis options.",AO_1535:"The analysis option you selected requires a minimum of ${minNumFeatures} aggregation areas.",AO_1536:"The analysis options you selected require a minimum of ${minNumIncidents} points to compute hot and cold spots.",AO_1570:"The analysis option you selected requires a minimum of ${minNumIncidents} points to be inside the bounding polygon area(s).",AO_1571:"The analysis options you selected require a minimum of ${minNumFeatures} features with valid data in the analysis field in order to compute hot and cold spots.\t",AO_1572:"There is not enough variation in point locations to compute hot and cold spots. Coincident points, for example, reduce spatial variation.  You can try providing a bounding area, aggregation areas (a minimum of 30), or an Analysis Field.",AO_1573:"There is not enough variation among the points within the bounding polygon area(s). You can try providing larger boundaries.",AO_1574:"The analysis option you selected requires a minimum of ${minNumIncidents} points to be inside the aggregation polygons.",AO_1575:"All of the values for your analysis field are likely the same.  Hot and cold spots cannot be computed when there is no variation in the field being analyzed.",AO_84426:"Must provide polygons for aggregating incidents into counts for this incident data aggregation method.",AO_26:"Buffer distance is zero.",AO_109:"The buffer distance cannot be negative for lines and points.",AO_385:"The LINE option is not valid with point features.",AO_438:"Overlay not polygon.",AO_100020:"Enrich Layer failed.",AO_100021:"The geometry type of Input Layer must be point, line or polygon.",AO_100022:"Units ${units} is not supported for Buffer type ${bufferType}.",AO_100023:"Unable to enrich layer for input spatial reference ${spref}.",AO_100024:"The number of features in ${inputLayer} is zero.",AO_100025:"Summarize Nearby failed.",AO_100026:"Extract Data failed.",AO_100027:"Dissolve Boundaries failed.",AO_100028:"Create Drive Time Areas failed.",AO_100029:"Merge Layers failed.",AO_100030:"Find Nearest failed.",AO_100031:"The number of nearest locations to find can not be greater than 100.",AO_100032:"The number of features in ${analysisLayer} is zero.",AO_100033:"The number of features in ${nearLayer} is zero.",AO_100034:"The number of features in ${analysisLayer} can not be greater than 1000.",AO_100035:"The number of features in ${nearLayer} can not be greater than 1000.",AO_100036:"The ${analysisLayer} layer must have a point geometry type when using ${measurementType} as the measurement type.",AO_100037:"The ${nearLayer} layer must have a point geometry type when using ${measurementType} as the measurement type.",AO_100038:"The search cutoff cannot be less than zero.",AO_100039:"The ${inputLayer} must have a point geometry type.",AO_100040:"The number of features in ${inputLayer} can not be greater than ${max}.",AO_100041:"Buffer type parameter is supported only for layers containing points or lines.",AO_100042:"The geometry type ${shapeType} of Nearby Layer is not supported for Near type ${nearType}",AO_100043:"Units ${units} is not supported for Near type ${nearType}.",AO_100044:"Distance value should be greater than 0",AO_100045:"Distance and units are required when Buffer type is specified",AO_100046:"Failed to access GeoEnrichment server.",AO_100047:"Enrichment may not be available for some features.",AO_100048:"The input layer ${inputLayer} contains multipoint geometry and has been converted to single point geometry.",AO_100049:"No features in the processing extent for any input layers.",AO_100050:"No fields exist in the input layer for data extraction.",AO_100051:"No features in the processing extent for any input layers and none of the input layers have fields for data extraction. ",AO_100052:"The field name ${fieldName} does not exist in the ${paramName}.",AO_100053:"Required keys ${missingKeys} are missing in attribute expression ${expression}.",AO_100054:"Required keys ${missingKeys} are missing in spatial relationship expression ${expression}.",AO_100055:"Invalid expression; malformed JSON.",AO_100056:"Invalid layer index in expression ${expression}.",AO_100057:"Layer index exceeds the number of input layers in expression ${expression}.",AO_100058:"${spatialRel} spatial relationship does not support ${lyrGeomType}/${selLyrGeomType} geometry types for layer/selectingLayer in expression ${expression}.",AO_100059:"Invalid spatial relationship {spatialRel} in expression ${expression}.",AO_100060:"Query expression failed in expression ${expression}.",AO_100061:"FindExistingLocations failed.",AO_100062:"Invalid distance and/or units in expression ${expression}",AO_100063:"PlanRoutes failed.",AO_100064:"The number of features in ${stopsLayer} is zero.",AO_100065:"The number of features in ${startLayer} is zero.",AO_100066:"The maximum number of vehicles to route cannot be less than zero and greater than ${max}.",AO_100067:"The maximum number of stops per vehicle cannot be less than zero and greater than ${max}.",AO_100068:"The number of features in ${stopsLayer} cannot be greater than ${max}.",AO_100069:"The number of features in ${startLayer} cannot be greater than ${max}.",AO_100070:"The number of features in ${endLayer} cannot be greater than ${max}.",AO_100071:"The ${stopsLayer} layer must have a point geometry type.",AO_100072:"The ${startLayer} layer must have a point geometry.",AO_100073:"The ${endLayer} layer must have a point geometry.",AO_100074:"The time spent at each stop cannot be less than zero.",AO_100075:"The total route time per vehicle should be greater than zero and less than one year (525600 minutes).",AO_100076:"The ${endLayer} should not be specified if return to start is true.",AO_100077:"Find Similar Locations failed.",AO_100078:"Invalid field name in expression ${expression}",AO_100079:"Derive New Locations failed.",AO_100080:"Connect Origins To Destinations failed.",AO_100081:"Field Calculator failed.",AO_735:"Please provide at least one valid analysis field to base similarity on.",AO_1589:"This tool requires a minimum of 2 locations to search.",AO_100082:"A field name and an expression are required.",AO_100083:"A field type is required for creating a new field.",AO_100084:"Field type is required to be String, Integer, Double or Date.",AO_1599:"Too few records for analysis. This tool requires at least 1 reference  location in the Input Layer to compute results.",AO_100088:"Field(s) ${attribute} must be in both the reference and candidate search layers.",AO_100089:"The following fields lack sufficient variation for use in this analysis: ${attribute}.",AO_100090:"This tool requires at least 2 candidate search locations that are not also reference locations.",AO_100094:"The maximum number of vehicles to route must be equal to the number of features in ${startLayer}.",AO_100104:"InterpolatePoints failed.",AO_40039:"Not enough data to compute method.",AO_40040:"Data is distributed along a straight line and cannot be processed.",AO_40069:"The variance of the data is too small to be calculated.",AO_100091:"The geometry type of ${paramName} must be Points",AO_100092:"The geometry type of boundingPolygonLayer must be Polygons",AO_100093:"The classification type Manual requires classbreaks value.",AO_100095:"The number of features in ${endLayer} must be equal to the number of features in ${startLayer}.",AO_100096:"The ${startLayerRouteIDField} in ${startLayer} does not have unique values.",AO_100097:"The ${endLayerRouteIDField} in ${endLayer} does not have unique values.",AO_100098:"The values in ${startLayerRouteIDField} in ${startLayer} do not have a one-to-one match with the values in ${endLayerRouteIDField} in ${endLayer}.",AO_100099:"All break values must be greater than zero.",AO_100100:"The features in ${inputLayer} are not within the data coverage area. See availability at ${url}.",AO_100101:"No features in ${inputLayer} are within a distance of ${max} kilometers from streets.",AO_100102:"All features in ${inputLayer} must be in the same time zone when using traffic and creating areas with dissolve or split options.",AO_100103:"The ${measureType} value cannot be greater than ${max} ${breakUnits}.",AO_100105:"CalculateDensity failed",AO_100106:"Field ${fieldName} is not numeric.",AO_100107:"Field ${fieldName} does not have any positive values.",AO_100108:"Field ${fieldName} has negative values, only positive values will be considered for calculating density.",AO_100109:"The geometry type for the input layer must be points or lines.",AO_100110:"Your user role doesn’t include the geoEnrichment privilege",AO_100111:"Your user role doesn’t include the network analysis privilege",AO_100112:"Your user role doesn't include the publish hosted features privilege",AO_100113:"None of the stops were assigned to any routes. Check the Status and Violated Constraints fields in the output unassigned stops layer for more information.",AO_100114:"The time spent at each stop, ${stopServiceTime} minutes, must be less than the total route time per vehicle, ${maxRouteTime} minutes.",AO_100115:"Some stops were not assigned to any routes. Check the Violated Constraints field in the output unassigned stops layer for more information.",AO_100116:"Only ${routesUsed} out of ${routeCount} routes are needed to reach all stops. If you want to use more routes, run Plan Routes again but reduce the limits on the maximum number of stops or the total route time per vehicle.",AO_100117:"Driving a truck is currently not supported outside of North America and Central America.",AO_100118:"Your user role doesn't include the create, update and delete content privilege.",GPEXT_001:"Invalid parameter ${name} value",GPEXT_002:"Parameter missing ${name}",GPEXT_003:"Invalid parameter ${name}:property ${propname} is missing",GPEXT_004:"Invalid layer parameter property ${propname} is missing",GPEXT_005:"Failed to access url ${url}",GPEXT_006:"Accessing url ${url} returned error ${error}",GPEXT_007:"Invalid item ${id}",GPEXT_008:"Failed to create service ${name}",GPEXT_009:"Failed to add layer ${lname} to service ${name}",GPEXT_010:"Failed to parse layer JSON",GPEXT_011:"Layer ${url} does not have Extract capability",GPEXT_012:"Invalid External Operation",GPEXT_013:"This tool uses the Geoenrichment Service.  Please refer to ArcGIS Online Service Credit Estimator for more details.",GPEXT_014:"This tool uses Network Analysis Services.  Please refer to ArcGIS Online Service Credit Estimator for more details.",GPEXT_015:"Select appropriate helper services url from Portal for requested operation.",GPEXT_016:"Invalid layer object.",GPEXT_017:"Service ${name} already exists.",SS_00003:"The following report outlines the summary of your Find Similar Locations result:",SS_84503:"Summary of Input Features to Match",SS_89997:"[\"Attribute\", \"Min\", \"Max\", \"SD\", \"Mean\"]",SS_84504:"Summary of Attributes of Interest",SS_84512:"[\"Attribute\", \"Min\", \"Max\", \"SD\", \"Mean\", \"Input\"]",SS_84505:"Top ${numResults} Most Similar Locations (Values)",SS_84506:" Top 10 of ${numResults} Most Similar Locations (Values)",SS_84510:"[\"OID\", \"SIMRANK\", \"SIMINDEX\"]",SS_89998:" [\"\", \"Total\", ${sumIndex}] ",AO_100119:"The geometry type of WithinLayer input must be polygons",AO_100120:"The features in the layer are beyond max request size limit and cannot be enriched",AO_100121:"CreateViewshed Failed",AO_100122:"TraceDownstream Failed",AO_100123:"CreateWatersheds Failed",AO_100124:"The geometry type of Input Layer must be point for buffer type ${bufferType}",AO_100125:"The groupby field ${fieldName} must be integers, text or date.",AO_100126:"The features in the input layer are beyond max request size and hence simplified",AO_100127:"All points fall outside the processing unit extent",AO_100128:"The point field provided must be string or integer",AO_100129:"The point falls outside the catchment extent",AO_100130:"The point falls outside the processing unit extent",AO_100131:"The maximum viewing distance parameter cannot be more than ${max}${units}",AO_100132:"The DEM source data is not available in the input points area.",AO_100133:"The input DEM resolution is not supported at the specified maximum distance value. Specify a smaller maximum distance value.",AO_100136:"The geometry type for Extent Layer must be polygon.",AO_100137:"A value for the  ${parameterName} is required.",AO_100138:"Some origins were not connected to their paired destinations. Check the Status field in output unassigned origins and unassigned destinations layers for more information.",AO_100139:"None of the origins could be connected to destinations.",AO_100140:"The features in the Extent Layer are beyond max request size and hence simplified.",AO_100141:"The features in the Extent Layer are beyond max request size limit and cannot be extracted."},geoenrichment:{task:{GeoenrichmentTask:{noData:"There is no data for the selected area"}},dijit:{AgePyramid:{maxLabel:"The largest group:",minLabel:"The smallest group:",compLabel:"Dots show comparison to",menLabel:"Men",womenLabel:"Women"},BufferOptions:{studyArea:"Show data for:",ring:"Ring",driveTime:"Drive Times",driveDistance:"Drive Distance",radius:"Radius:",time:"Time:",distance:"Distance:",buffer:"Buffer:",units:{esriDriveTimeUnitsMinutes:"minutes",esriMiles:"miles",esriKilometers:"kilometers",esriFeet:"feet",esriMeters:"meters"}},bufferTitle:{pointRing:{esriFeet:"${radius}-feet ring",esriKilometers:"${radius}-km ring",esriMeters:"${radius}-meter ring",esriMiles:"${radius}-mile ring"},pointDriveTime:{esriFeet:"${radius}-feet drive distance",esriKilometers:"${radius}-km drive distance",esriMeters:"${radius}-meter drive distance",esriMiles:"${radius}-mile drive distance",esriDriveTimeUnitsMinutes:"${radius}-minute drive time"},lineBuffer:{esriFeet:"${radius}-feet buffer",esriKilometers:"${radius}-km buffer",esriMeters:"${radius}-meter buffer",esriMiles:"${radius}-mile buffer"},polygon:"This area",stdGeo:"Intersecting ${level} feature"},DataCategoriesPage:{loading:"Loading...",global:"Global",search:"search for a variable name",noResults:"No results found for '${seachKey}'."},DataCollectionsPage:{categoryName:"${categoryName} Variables",mapPopVar:"Choose a Popular Variable",keepBrowse:"Keep Browsing",showAll:"Show all ${categoryName} Variables",search:"search within the current category",noResults:"No results found for '${seachKey}'.",from:"from '${categoryName}'"},DataVariablesPage:{vars:"variables"},ShoppingCart:{selectedVars:"Selected Variables",noVariables:"No variables have yet been selected"},VariableInfo:{name:"Name",variable:"Variable",source:"Source",vintage:"Vintage"},EnrichOptionsPage:{bufferRing:"1 mile circle around locations",bufferPolygon:"input polygons (buffer unavailable)",selectedVariables:"Selected Variables:",customize:"customize",bufferOptions:"Show data for:",edit:"edit",totalVars:"Total Variables: ${varCount} (${credits})",varsPerRow:"Variables per Row: ${varCount} (${credits})",credits:"${credits} credits",creditsCalc:"calculating...",totalVarsTooltip:"This operation will enrich ${rowCount} rows with ${varCount} variables and will cost ${credits}.",varsPerRowTooltip:"This operation will enrich each row with ${varCount} variables and will cost ${credits} per row.",overwriteExisting:"Existing column values will be overwritten",varName:"Variable Name",column:"Column",newColumn:"<Create New>",noColumn:"<None>",back:"Back",finish:"Add data to system"},InfographicsMainPage:{mainTitle:"Configure Infographics",loading:"Loading...",chooseCountry:"Show available data for: ",chooseDataCollection:"Choose from popular data collections: ",chooseTheme:"Select color theme:",dark:"Dark",light:"Light",addVariables:"Add more variables...",ok:"OK",add:"Add",cancel:"Cancel"},OneVar:{subtitleSite2:"for this area ",subtitleVar2:"${alias} is ",lessThan:"which is less than the average for ${site}",moreThan:"which is more than the average for ${site}",same:"which is the same as the average for ${site}",areaCol:"Area",valueCol:"Value"},RelatedVariables:{highLabel2:"The largest group: ${alias}",lowLabel2:"The smallest group: ${alias}",indicatorCol:"Indicator",valueCol:"Value",difCol:"Difference",chartLabel:"Bars show deviation from"},Tapestry:{hhTypeLabel:"Household Type:",medianAgeLabel:"Median Age:",incomeLabel:"Income:",employmentLabel:"Employment:",educationLabel:"Education:",residentialLabel:"Residential:",raceEthnicityLabel:"Race / Ethnicity:",hhLabel:"households",adultsLabel:"adults"},WizardButtons:{back:"Back",ok:"OK",apply:"Apply",cancel:"Cancel",next:"Next"},EnrichConfig:{title:"Enrich Layer"},DataBrowser:{title:"Data Browser"}}},filterDlg:{expressionTemplate:"${field_dropdown} ${operator_dropdown} ${values_input}",filter:"Filter",applyFilter:"Apply Filter",applyFilterBtn:"Apply Filter",removeFilterBtn:"Remove Filter",view:"View",change:"Change",edit:"Edit",create:"Create",match1Msg:"Display features in the layer that match the following expression",matchMsg:"Display features in the layer that match ${any_or_all} of the following expressions",matchMsgSet:"${any_or_all} of the following expressions in this set are true",all:"All",any:"Any",andBetweenValues:"and",and:"and",or:"or",friendlyAnd:"All of these expressions must be true:",friendlyOr:"Any of these expressions must be true:",friendlyDatePattern:"MM/dd/yyyy",addAnotherExpression:"Add another expression",addSet:"Add a set",askForValues:"Ask for values",value:"Value",valueTooltip:"Enter value",field:"Field",fieldTooltip:"Pick from existing field",uniqueValues:"Unique",uniqueValueTooltip:"Pick from unique values in selected field",toThisLayer:"To this layer",toNewLayer:"To a new layer",newLayerName:"New layer name",showFilterExpression:"Show filter's expressions",deleteExpression:"Delete this expression",deleteSet:"Delete this set",addExpression:"Add an expression to this set",addSetTooltip:"Add a set to contain expressions",promptMsg:"Provide a prompt and some hint text to present this filter interactively to others",prompt:"Prompt",hint:"Hint",stringOperatorIs:"is",stringOperatorIsNot:"is not",stringOperatorStartsWith:"starts with",stringOperatorEndsWith:"ends with",stringOperatorContains:"contains",stringOperatorDoesNotContain:"does not contain",stringOperatorIsBlank:"is blank",stringOperatorIsNotBlank:"is not blank",dateOperatorIsOn:"is on",dateOperatorIsNotOn:"is not on",dateOperatorIsBefore:"is before",dateOperatorIsAfter:"is after",dateOperatorDays:"days",dateOperatorWeeks:"weeks",dateOperatorMonths:"months",dateOperatorInTheLast:"in the last",dateOperatorNotInTheLast:"not in the last",dateOperatorIsBetween:"is between",dateOperatorIsNotBetween:"is not between",dateOperatorIsBlank:"is blank",dateOperatorIsNotBlank:"is not blank",numberOperatorIs:"is",numberOperatorIsNot:"is not",numberOperatorIsAtLeast:"is at least",numberOperatorIsLessThan:"is less than",numberOperatorIsAtMost:"is at most",numberOperatorIsGreaterThan:"is greater than",numberOperatorIsBetween:"is between",numberOperatorIsNotBetween:"is not between",numberOperatorIsBlank:"is blank",numberOperatorIsNotBlank:"is not blank",emptyString:"empty string",error:{noUniqueValues:"The specified field has has no values.",generateRendererFailed:"Unique values could not be determined for the selected field.",missingValue:"there's a missing value in one of the expressions",cantParseExpression:"Filter cannot be shown because one or more of its expressions cannot be parsed. To edit the filter expressions, clear the filter and create a new filter interactively.",noFilterFields:"Layer ${name} has no fields that can be used for filtering."}},calculateFields:{addFieldTitle:"Add Field",nameLabel:"Name:",aliasLabel:"Alias:",typeLabel:"Type:",lengthLabel:"Length:",defaultValueLabel:"Default Value:",optional:"(Optional)",stringLabel:"String",integerLabel:"Integer",doubleLabel:"Double",dateLabel:"Date",expBuilderTitle:"Expression Builder",operators:"Operators",availableFields:"Available Fields",helpers:"Helpers",functions:"Functions",numeric:"Numeric",clear:"Clear",validate:"Validate",addNewField:"Add New Field",add:"Add",close:"Close",calculate:"Calculate",deleteLabel:"Delete",exprLabel:"${fieldName} =",layerReqMsg:"A layer is required parameter for calculate field",fieldReqMsg:"A calculate field has not been provided",lyrSupportCalMsg:"This layer ${layername} does not support calculate fields",lyrUpdateCapMsg:"Either update capability is not enabled on the layer ${layername} or, you do not have access to update features on this layer",selectCalField:"Choose field to calculate:",firstOperatorMsg:"Operator '${operator}' cannot start an expression",completeHelperMsg:"Complete the helper method added previously",successMsg:"Successfully updated ${count} features ",deleteField:"Delete Field",deleteFieldConfirm:"Are you sure you want to delete '${field}' field from this layer?",fields:"Fields",exprFailedMsg:"Calculate for the expression '${expr}' failed.",inValidFielNameCharMsg:"The field name contains one or more invalid characters <br/>(`~@#$%^&*()-+=|\\<>?/{.!'[]:\n\r).",inValidFieldStartCharMsg:"The field name cannot start with one of these invalid characters <br/>(`~@#$%^&*()-+=|\\<>?/{}.!'[]:;\n\r_012356789).",invalidSqlkeywordsMsg:"The field name cannot be the same as an SQL keyword.",invalidExpression:"The calculate expression is not valid",sameFielNameMsg:"The field name cannot be same as an existing field name",errorCodes:{3001:"Sql expression is not supported.",3002:"Sql expression syntax error.",3004:"Sql expression semantic error.",3007:"Invalid table name ${tableName}.",3008:"Invalid field name ${fieldName}.",3009:"Unsafe sql expression is not allowed."},absFunc:"${functionName}: Returns the absolute (positive) value of ${num}.",castFunc:"${functionName}: Converts a ${num} to a different type. FLOAT converts ${num} to a double and INT converts to an integer.",ceilingFunc:"${functionName}: Returns the smallest integer greater than or equal to  ${num}.",cosFunc:"${functionName}: Returns the trigonometric cosine of ${num}. ${num} is assumed to be an angle in radians.",floorFunc:"${functionName}: Returns the largest integer that is less than or equal to ${num}.",logFunc:"${functionName}: The natural logarithm of ${num}.",log10Func:"${functionName}: The base-10 logarithm of ${num}.",modFunc:"${functionName}: Returns the remainder after the division of n is performed on ${num}. Both ${n} and ${num} must be integer.",powerFunc:"${functionName}: Returns the value of ${num} raised to the specified power ${y}.",roundFunc:"${functionName}: Rounds ${num} to the specified ${length}.",sinFunc:"${functionName}: Returns the trigonometric sine of ${num}. ${num} is assumed to be an angle in radians.",tanFunc:"${functionName}: Returns the tangent of ${num}. ${num} is assumed to be an angle in radians.",truncateFunc:"${functionName}: Truncates ${num} at the specified ${decimal_place}. A positive ${decimal_place} truncates while a negative ${decimal_place} rounds.",nullifFunc:"${functionName}: Returns null if ${num} equals ${value}. Commonly used to prevent divide-by-zero errors by setting ${value} to 0.",char_lengthFunc:"${functionName}: Returns the number of characters in ${str}. The result is an integer.",concatFunc:"${functionName}: Concatenates two strings.",positionFunc:"${functionName}: Returns the position of the first occurrence of substring in ${str}. If substring is not found, the result is 0.",lowerFunc:"${functionName}: Returns a string where all characters in ${str} are converted to lowercase.",substringFunc:"${functionName}: Returns a part of ${str}. ${start} is an integer index specifying where the returned characters start. ${length} is the number of characters to be returned.",trimFunc:"${functionName}: Returns a string where all leading or trailing spaces are removed from ${str}.",upperFunc:"${functionName}: Returns a string where all characters in ${str} are converted to uppercase.",current_dateFunc:"${functionName}: Returns the current date.",current_timeFunc:"${functionName}: Returns the current time (hours, minutes, seconds).",current_timestampFunc:"${functionName}: Returns the current time (hours, minutes, seconds, milliseconds)."},colorPicker:{transparency:"Transparency",recent:"Recent",brightsTooltip:"Brights",pastelsTooltip:"Pastels",paletteTooltip:"Select a color.",noColorTooltip:"No color",hexInputTooltip:"A custom color in hexadecimal notation (#FFFF00)."},visibleScaleRangeSlider:{noLimit:"No Limit",preview:"Preview",currentScaleTooltip:"Current map scale (${scaleLabel})",suggestedVisibleRangeTooltip:"Suggested visible range",customScaleInputTooltip:"Type in a scale.",scaleRangeLabels:{world:"World",continent:"Continent",countries:"Countries",country:"Country",states:"States",state:"State",counties:"Counties",county:"County",metropolitanArea:"Metropolitan Area",cities:"Cities",city:"City",town:"Town",neighborhood:"Neighborhood",streets:"Streets",street:"Street",buildings:"Buildings",building:"Building",smallBuilding:"Small Building",rooms:"Rooms",room:"Room"},featuredScaleLabels:{current:"Current Map View (${scaleLabel})",world:"World (${scaleLabel})",continent:"Continent (${scaleLabel})",countriesBig:"Countries - Big (${scaleLabel})",countriesSmall:"Countries - Small (${scaleLabel})",statesProvinces:"States / Provinces (${scaleLabel})",stateProvince:"State/Province (${scaleLabel})",counties:"Counties (${scaleLabel})",county:"County (${scaleLabel})",metropolitanArea:"Metropolitan Area (${scaleLabel})",cities:"Cities (${scaleLabel})",city:"City (${scaleLabel})",town:"Town (${scaleLabel})",neighborhood:"Neighborhood (${scaleLabel})",streets:"Streets (${scaleLabel})",street:"Street (${scaleLabel})",buildings:"Buildings (${scaleLabel})",building:"Building (${scaleLabel})"}},symbolEditor:{preview:"Preview",shape:"Shape",fill:"Fill",outline:"Outline",px:"px",symbolSize:"Symbol Size",symbolSizeTooltip:"Set symbol size from ${min} to ${max} pixels.",useImage:"Use an Image",useImageTooltip:"Use a custom image.",imageUrlInputTooltip:"For best results, the image should be no greater than 120 pixels wide by 120 pixels high. Other sizes will be adjusted to fit. Acceptable image formats are: PNG, GIF and JPEG.",selectCategoryTooltip:"Select a category.",imageLoadError:"Unable to load image.",symbolLoadError:"Unable to load symbols.",noFillTooltip:"No fill",symbolTransparencyTooltip:"Symbol transparency",lineWidth:"Line Width",lineWidthTooltip:"Set a line width from ${min} to ${max} pixels.",pattern:"Pattern",patternTooltip:"Line type",flipColors:"Flip Colors",flipColorsTooltip:"Invert color ramp.",noOutlineTooltip:"No outline",saturation:"Saturation",saturationTooltip:"Adjust color intensity.",selectRampTooltip:"Select a color ramp."},smartStyling:{others:"Others"}},ar:1,cs:1,da:1,de:1,es:1,et:1,fi:1,fr:1,he:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1});},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(g,h,k){return {_dfdCanceller:function(a){a.canceled=!0;var b=a._pendingDfd;-1===a.fired&&(b&&-1===b.fired)&&b.cancel();a._pendingDfd=null;},_fixDfd:function(a){var b=a.then;a.then=function(a,c,f){if(a){var d=a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a);};}return b.call(this,a,c,f);};return a;},_resDfd:function(a,b,e){var c=b.length;1===c?e?a.errback(b[0]):a.callback(b[0]):1<c?(b._argsArray=!0,a.callback(b)):a.callback();}};});},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","./kernel","./lang"],function(g,f,e,c,d,h){c=[-20037508.342788905,20037508.342788905];d=[-20037508.342787,20037508.342787];return g(null,{declaredClass:"esri.SpatialReference",constructor:function(a){a&&(e.isObject(a)?e.mixin(this,a):e.isString(a)?this.wkt=a:this.wkid=a);},wkid:null,wkt:null,_info:{102113:{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:c,origin:d,dx:0.00001},102100:{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]",valid:c,origin:d,dx:0.00001},3785:{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:c,origin:d,dx:0.00001},3857:{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]",valid:c,origin:d,dx:0.00001},4326:{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return -1!==f.indexOf([102113,102100,3857,3785],this.wkid);},_isWrappable:function(){return -1!==f.indexOf([102113,102100,3857,3785,4326],this.wkid);},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(a){var b=!1;a&&(b=this.isWebMercator()&&4326===a.wkid||a.isWebMercator()&&4326===this.wkid);return b;},isWebMercator:function(){return this._isWebMercator();},equals:function(a){var b=!1;a&&(this===a&&(b=!0),this.wkid||a.wkid?b=this.wkid===a.wkid||this.isWebMercator()&&a.isWebMercator()||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(b=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return b;},toJson:function(){var a=null,b=h.isDefined;b(this.wkid)?a={wkid:this.wkid}:b(this.wkt)&&(a={wkt:this.wkt});a&&b(this.latestWkid)&&(a.latestWkid=this.latestWkid);return a;}});});},"esri/map":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/on","dojo/aspect","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","./kernel","./config","./sniff","./lang","./_coremap","./MapNavigationManager"],function(v,K,L,A,p,r,B,C,M,D,g,E,N,O,P,w,F,h,s,Q,R){var x={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},G={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},e=A.connect,l=A.disconnect,m=E.create,q=O.set,y=p.hitch,t=N.getMarginBox,H=K.deprecated,z=p.mixin,I=0;return L(Q,{declaredClass:"esri.Map",constructor:function(a,c){z(this,{_slider:null,_navDiv:null,_mapParams:z({attributionWidth:0.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},c||{})});z(this,{isDoubleClickZoom:!1,isShiftDoubleClickZoom:!1,isClickRecenter:!1,isScrollWheelZoom:!1,isPan:!1,isRubberBandZoom:!1,isKeyboardNavigation:!1,isPanArrows:!1,isZoomSlider:!1});p.isFunction(w._css)&&(w._css=w._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var b=h("esri-transforms")&&h("esri-transitions");this.navigationMode=this._mapParams.navigationMode||b&&"css-transforms"||"classic";"css-transforms"===this.navigationMode&&!b&&(this.navigationMode="classic");this.fadeOnZoom=s.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=c&&c.smartNavigation;if(!s.isDefined(this.smartNavigation)&&h("mac")&&!h("esri-touch")&&!h("esri-pointer")&&!(3.5>=h("ff"))){var d=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);d&&(s.isDefined(d[1])&&s.isDefined(d[3]))&&(b=parseInt(d[1],10),d=parseInt(d[3],10),this.smartNavigation=10<b||10===b&&6<=d);}this.showAttribution=s.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=e(this,"onLoad",this,"_onLoadInitNavsHandler");var k=m("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution){if(b=p.getObject("esri.dijit.Attribution",!1)){this._initAttribution(b,k);}else{var J=I++,f=this;this._rids&&this._rids.push(J);v(["./dijit/Attribution"],function(a){var b=f._rids?r.indexOf(f._rids,J):-1;-1!==b&&(f._rids.splice(b,1),f._initAttribution(a,k));});}}this._mapParams.logo&&(b={},6===h("ie")&&(b.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+v.toUrl("./images/map/logo-med.png")+"')"),this._ogol=m("div",{style:b},k),this._setLogoSize(),this._onMapResizeLogo_connect=e(this,"onResize",this,"_setLogoSize"),h("esri-touch")||(this._ogol_connect=e(this._ogol,"onclick",this,"_openLogoLink")));this.navigationManager=new R(this);c&&c.basemap&&(this._onLoadFix=!0,this.setBasemap(c.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize){b=this._getEnclosingResizableWidget(this.container)||window,d=y(this,this.resize),this._rszSignal=C.pausable(b,"resize",d),this._oriSignal=C.pausable(window,"orientationchange",d),M.after(b,"resize",d,!0);}},_getEnclosingResizableWidget:function(a){var c=P.getEnclosingWidget(a);return !c?c:c.resize?c:this._getEnclosingResizableWidget(a.parentNode);},_setLogoSize:function(){this._ogol&&(250000>this.root.clientWidth*this.root.clientHeight?(g.remove(this._ogol,"logo-med"),g.add(this._ogol,"logo-sm")):(g.remove(this._ogol,"logo-sm"),g.add(this._ogol,"logo-med")));},_initAttribution:function(a,c){var b=m("span",{"class":"esriAttribution"},c,"first");q(b,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(e(b,"onclick",function(){g.contains(this,"esriAttributionOpen")?g.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&g.add(this,"esriAttributionOpen");}));this.attribution=new a({map:this},b);},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var a=this._slider;a&&(a.destroy&&!a._destroyed)&&a.destroy();var a=this._navDiv,c=this.attribution;a&&E.destroy(a);c&&c.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);r.forEach(this._connects,l);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=null;this.inherited("_cleanUp",arguments);},_isPanningOrZooming:function(){return this.__panning||this.__zooming;},_canZoom:function(a){var c=this.getLevel();return !this.__tileInfo||!(c===this.getMinZoom()&&0>a||c===this.getMaxZoom()&&0<a);},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider){this._createSimpleSlider();}else{if(this._mapParams.slider){var a=-1!==this._getSliderClass(!0).indexOf("Horizontal"),a=[a?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",a?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",a?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(r.some(a,function(a){return !p.getObject(a,!1);})){var a=r.map(a,function(a){return a.replace(/\./g,"/");}),c=I++,b=this;this._rids&&this._rids.push(c);v(a,function(){var a=b._rids?r.indexOf(b._rids,c):-1;-1!==a&&(b._rids.splice(a,1),b._createSlider.apply(b,arguments));});}else{a=r.map(a,function(a){return p.getObject(a,!1);}),this._createSlider.apply(this,a);}}}l(this._onLoadHandler_connect);},_createNav:function(){if(this._mapParams.nav){var a,c,b,d=g.add,k=this.id;this._navDiv=m("div",{id:k+"_navdiv"},this.root);d(this._navDiv,"navDiv");var h=this.width/2,f=this.height/2,n;for(b in x){c=x[b],a=m("div",{id:k+"_pan_"+b},this._navDiv),d(a,"fixedPan "+c),"up"===b||"down"===b?(n=parseInt(t(a).w,10)/2,q(a,{left:h-n+"px",zIndex:30})):(n=parseInt(t(a).h,10)/2,q(a,{top:f-n+"px",zIndex:30})),this._connects.push(e(a,"onclick",y(this,this[c])));}this._onMapResizeNavHandler_connect=e(this,"onResize",this,"_onMapResizeNavHandler");for(b in G){c=G[b],a=m("div",{id:k+"_pan_"+b,style:{zIndex:30}},this._navDiv),d(a,"fixedPan "+c),this._connects.push(e(a,"onclick",y(this,this[c])));}this.isPanArrows=!0;}},_onMapResizeNavHandler:function(a,c,b){a=this.id;c/=2;b/=2;var d=D.byId,k,e,f;for(k in x){e=d(a+"_pan_"+k),"up"===k||"down"===k?(f=parseInt(t(e).w,10)/2,q(e,"left",c-f+"px")):(f=parseInt(t(e).h,10)/2,q(e,"top",b-f+"px"));}},_createSimpleSlider:function(){if(this._mapParams.slider){var a=this._slider=m("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),c=h("esri-touch")&&!h("ff")?"touchstart":h("esri-pointer")?navigator.msPointerEnabled?"MSPointerDown":"pointerdown":"onclick",b=m("div",{"class":"esriSimpleSliderIncrementButton"},a),d=m("div",{"class":"esriSimpleSliderDecrementButton"},a);this._incButton=b;this._decButton=d;this._simpleSliderZoomHandler(null,null,null,this.getLevel());b.innerHTML="<span>+</span>";d.innerHTML="<span>&ndash;</span>";8>h("ie")&&g.add(d,"dj_ie67Fix");this._connects.push(e(b,c,this,this._simpleSliderChangeHandler));this._connects.push(e(d,c,this,this._simpleSliderChangeHandler));"touchstart"==c&&(this._connects.push(e(b,"onclick",this,this._simpleSliderChangeHandler)),this._connects.push(e(d,"onclick",this,this._simpleSliderChangeHandler)));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(e(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>h("ie")&&D.setSelectable(a,!1);this.root.appendChild(a);this.isZoomSlider=!0;}},_simpleSliderChangeHandler:function(a){B.stop(a);a=-1!==a.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:a?1:-1});},_simpleSliderZoomHandler:function(a,c,b,d){var e;a=this._incButton;c=this._decButton;-1<d&&d===this.getMaxZoom()?e=a:-1<d&&d===this.getMinZoom()&&(e=c);e?(g.add(e,"esriSimpleSliderDisabledButton"),g.remove(e===a?c:a,"esriSimpleSliderDisabledButton")):(g.remove(a,"esriSimpleSliderDisabledButton"),g.remove(c,"esriSimpleSliderDisabledButton"));},_getSliderClass:function(a){a=a?"Large":"Simple";var c=this._mapParams.sliderOrientation,b=this._mapParams.sliderPosition||"",c=c&&"horizontal"===c.toLowerCase()?"esri"+a+"SliderHorizontal":"esri"+a+"SliderVertical";if(b){switch(b.toLowerCase()){case "top-left":b="esri"+a+"SliderTL";break;case "top-right":b="esri"+a+"SliderTR";break;case "bottom-left":b="esri"+a+"SliderBL";break;case "bottom-right":b="esri"+a+"SliderBR";}}return "esri"+a+"Slider "+c+" "+b;},_createSlider:function(a,c,b){if(this._mapParams.slider){var d=m("div",{id:this.id+"_zoom_slider"},this.root),k=F.defaults.map,g=this._getSliderClass(!0),f=-1!==g.indexOf("Horizontal"),n=this.getNumLevels();if(0<n){var l,p,u=this._mapParams.sliderLabels,s=!!u;if(k=!1!==u){var t=f?"bottomDecoration":"rightDecoration";if(!u){u=[];for(f=0;f<n;f++){u[f]="";}}r.forEach([{"class":"esriLargeSliderTicks",container:t,count:n,dijitClass:c},{"class":s&&"esriLargeSliderLabels",container:t,count:n,labels:u,dijitClass:b}],function(a){var b=m("div"),e=a.dijitClass;delete a.dijitClass;d.appendChild(b);e===c?l=new e(a,b):p=new e(a,b);});}a=this._slider=new a({id:d.id,"class":g,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:n,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},d);a.startup();k&&(l.startup(),p.startup());this._slider_connect=e(a,"onChange",this,"_onSliderChangeHandler");this._connects.push(e(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(e(a._movable,"onFirstMove",this,"_onSliderMoveStartHandler"));}else{a=this._slider=new a({id:d.id,"class":g,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:k.sliderChangeImmediate,style:"height:50px; z-index:30;"},d);b=a.domNode.firstChild.childNodes;for(f=1;3>=f;f++){q(b[f],"visibility","hidden");}a.startup();this._slider_connect=e(a,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(e(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"));}b=a.decrementButton;a.incrementButton.style.outline="none";b.style.outline="none";a.sliderHandle.style.outline="none";a._onKeyPress=function(){};if(a=a._movable){var v=a.onMouseDown;a.onMouseDown=function(a){9>h("ie")&&1!==a.button||v.apply(this,arguments);};}this.isZoomSlider=!0;}},_onSliderMoveStartHandler:function(){l(this._slider_connect);l(this._slidermovestop_connect);this._slider_connect=e(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=e(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler");},_onSliderChangeDragHandler:function(a){this._extentUtil({targetLevel:a});},_onSliderMoveEndHandler:function(){l(this._slider_connect);l(this._slidermovestop_connect);},_onSliderChangeHandler:function(a){this.setLevel(a);},_updateSliderValue:function(a,c){l(this._slider_connect);var b=this._slider,d=b._onChangeActive;b._onChangeActive=!1;b.set("value",a);b._onChangeActive=d;this._slider_connect=e(b,"onChange",this,c);},_onExtentChangeSliderHandler:function(a,c,b,d){l(this._slidermovestop_connect);this._updateSliderValue(d.level,"_onSliderChangeHandler");},_onDynSliderChangeHandler:function(a){this._extentUtil({numLevels:0<a?1:-1});},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler");},_openLogoLink:function(a){window.open(F.defaults.map.logoLink,"_blank");B.stop(a);},enableMapNavigation:function(){this.navigationManager.enableNavigation();},disableMapNavigation:function(){this.navigationManager.disableNavigation();},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.navigationManager.enableDoubleClickZoom(),this.isDoubleClickZoom=!0);},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.navigationManager.disableDoubleClickZoom(),this.isDoubleClickZoom=!1);},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(H(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0);},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(H(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1);},enableClickRecenter:function(){this.isClickRecenter||(this.navigationManager.enableClickRecenter(),this.isClickRecenter=!0);},disableClickRecenter:function(){this.isClickRecenter&&(this.navigationManager.disableClickRecenter(),this.isClickRecenter=!1);},enablePan:function(){this.isPan||(this.navigationManager.enablePan(),this.isPan=!0);},disablePan:function(){this.isPan&&(this.navigationManager.disablePan(),this.isPan=!1);},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.navigationManager.enableRubberBandZoom(),this.isRubberBandZoom=!0);},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.navigationManager.disableRubberBandZoom(),this.isRubberBandZoom=!1);},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.navigationManager.enableKeyboardNavigation(),this.isKeyboardNavigation=!0);},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.navigationManager.disableKeyboardNavigation(),this.isKeyboardNavigation=!1);},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0);},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1);},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0);},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1);},showZoomSlider:function(){this._slider&&(q(this._slider.domNode||this._slider,"visibility","visible"),this.isZoomSlider=!0);},hideZoomSlider:function(){this._slider&&(q(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1);}});});},"esri/_coremap":function(){define(["require","module","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/_base/unload","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/sniff","dijit/registry","dojox/gfx/matrix","./kernel","./config","./basemaps","./lang","./Evented","./fx","./deferredUtils","./tileUtils","./PluginTarget","./geometry/Point","./geometry/ScreenPoint","./geometry/Extent","./geometry/Rect","./geometry/mathUtils","./geometry/scaleUtils","./geometry/screenUtils","./geometry/webMercatorUtils","./layers/GraphicsLayer","./layers/TileInfo","./layers/LOD","./layers/ArcGISTiledMapServiceLayer","./layers/OpenStreetMapLayer","./dijit/Popup","./plugins/popupManager","dojo/uacss"],function(P,ia,ja,ka,z,aa,H,m,Aa,la,ma,na,X,Q,U,V,R,oa,pa,Ba,qa,D,t,ra,ba,sa,ca,ta,M,C,A,N,ua,G,da,Y,E,va,wa,xa,ea,ya){function fa(a,b){var c=a.lods;c.sort(function(a,b){return a.scale>b.scale?-1:a.scale<b.scale?1:0;});var d=[],c=m.filter(c,function(a){if(-1===I(d,a.scale)){return d.push(a.scale),!0;}}),e=b.lods=[],f;m.forEach(c,function(a,b){f=e[b]=new wa(a);f.level=b;});b.tileInfo=new va(S(a,{lods:e}));};var Z,T=da.toMapPoint,$=da.toScreenPoint,W=z.connect,O=z.disconnect,x=H.hitch,B=V.set,I=m.indexOf,S=H.mixin,ga=0,J=qa.defaults.map,za=function(){};return ka([ra,ta],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:"Unable to find basemap definition for: \"${basemapName}\". Try one of these: ${list}",invalidBasemap:"Unable to add basemap: \"${basemapName}\".",unknownLayerType:"Unknown basemap layer type: \"${type}\" found in basemap definition for: \"${basemapName}\".",visible:!0,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(a,b){var c=this;this.registerConnectEvents();S(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_connects:[],_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[]});var d=this.container=ma.byId(a),e=this.id=na.get(d,"id")||oa.getUniqueId(this.declaredClass);X.add(d,"map");var f=U.getContentBox(d),g=X.add,h=Q.create;this.position=new C(0,0);this._reposition();var k=this.width=f.w||J.width,l=this.height=f.h||J.height;0===f.w&&B(d,"width",k+"px");0===f.h&&B(d,"height",l+"px");var u=this.root=h("div",{id:e+"_root",style:{width:k+"px",height:l+"px",direction:"ltr"}});g(u,"container");f=this.__container=h("div",{id:e+"_container"},u);B(f,"position","absolute");g(f,"container");d.appendChild(u);d=this._params=S({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},b||{});this.wrapAround180=d.wrapAround180;this.optimizePanAnimation=d.optimizePanAnimation;t.isDefined(d.resizeDelay)&&(this.resizeDelay=d.resizeDelay);d.lods&&(fa({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:d.lods},d),this.__tileInfo=d.tileInfo);this.extent=d.extent;this._extentUtil({mapCenter:d.center,targetLevel:d.zoom,targetScale:d.scale});this.__visibleRect=new N(0,0,k,l);this.__visibleDelta=new N(0,0,k,l);e=this._layersDiv=h("div",{id:e+"_layers"});g(e,"layersDiv");f.appendChild(e);this._zoomAnimDiv=h("div",{style:{position:"absolute"}});d.infoWindow?this.infoWindow=d.infoWindow:(g=this.infoWindow=new ya(d.popupOptions,h("div")),g.startup(),g._ootb=!0,B(g.domNode,"zIndex",40));d.showLabels&&(P(["./layers/LabelLayer"],function(a){Z=a;c._createLabelLayer();}),this.on("load",function(){c._createLabelLayer();}));this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:d.showInfoWindowOnClick});this._zoomStartHandler=x(this,this._zoomStartHandler);this._zoomingHandler=x(this,this._zoomingHandler);this._zoomEndHandler=x(this,this._zoomEndHandler);this._panningHandler=x(this,this._panningHandler);this._panEndHandler=x(this,this._panEndHandler);this._endTranslate=x(this,this._endTranslate);la.addOnWindowUnload(this,this.destroy);},_getAbsMid:function(a){return P.toAbsMid?P.toAbsMid(a):ia.id.replace(/\/[^\/]*$/ig,"/")+a;},_cleanUp:function(){var a=this.infoWindow;a&&(a._ootb&&a.destroy?a.destroy():a.unsetMap(this),delete this.infoWindow);O(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");Q.destroy(this.root);this.root=null;},_addLayer:function(a,b,c){var d=a.id=a.id||(a instanceof E?J.graphicsLayerNamePrefix:J.layerNamePrefix)+ga++;this._layers[d]=a;var e,f;if(b===this.layerIds||b===this.graphicsLayerIds){e=this._layerSize,this._layerSize++;}a._isRefLayer="top"===c;c=!t.isDefined(c)||0>c||c>b.length||"top"===c?b.length:c;0===e&&(this._firstLayerId=d);if(!a._isRefLayer){for(;(f=this.getLayer(b[c-1]))&&f._isRefLayer;){c--;}}b.splice(c,0,d);var g=x(this,this._addLayerHandler),h=this;c=this._connects;f=function(){a.loaded?h._onLoadFix?(h._onLoadFix=!1,setTimeout(function(){g(a);},0)):g(a):(h[d+"_addtoken_load"]=W(a,"onLoad",h,"_addLayerHandler"),h[d+"_addtoken_err"]=W(a,"onError",h,function(c){g(a,c,b);}));};this.loaded||0===e||a.loaded&&-1===I(this.graphicsLayerIds,d)?f():c.push(W(this,"onLoad",f));return a;},_addLayerHandler:function(a,b,c){var d=this.id,e=a.id,f=I(a instanceof E?this.graphicsLayerIds:this.layerIds,e),g=f,h=!1,k=this._params;O(this[e+"_addtoken_load"]);O(this[e+"_addtoken_err"]);if(b){delete this._layers[e],-1!==f&&(c.splice(f,1),this.onLayerAddResult(a,b));}else{-1===f&&(f=I(this._internalLayerIds,e),g=20+f,h=!0);if(e===this._firstLayerId){b=a.spatialReference;if((c=this.extent&&this.extent.spatialReference)&&!c.equals(b)&&(a.tileInfo||!a.url)){c=null;}c=this.spatialReference=c||b;this.wrapAround180=this.wrapAround180&&c&&c._isWrappable()?!0:!1;a.tileInfo&&(this.__tileInfo?(b=this.__tileInfo.lods,this.__tileInfo=S({},a.tileInfo),this.__tileInfo.lods=b):(fa(S({},a.tileInfo),k),this.__tileInfo=k.tileInfo));if(this.wrapAround180){b=this.__tileInfo;c=c._getInfo();if(!b||Math.abs(c.origin[0]-b.origin.x)>c.dx){this.wrapAround180=!1;}this.wrapAround180&&b&&ca._addFrameInfo(b,c);}k.units=a.units;if((b=this.__tileInfo&&this.__tileInfo.lods)&&b.length){c=k.minScale;var f=k.maxScale,l=-1,u=-1,n=!1,ha=!1,q;for(q=0;q<b.length;q++){0<c&&(!n&&c>=b[q].scale)&&(l=b[q].level,n=!0),0<f&&(!ha&&f>=b[q].scale)&&(u=0<q?b[q-1].level:-1,ha=!0);}-1===k.minZoom&&(k.minZoom=0===c?b[0].level:l);-1===k.maxZoom&&(k.maxZoom=0===f?b[b.length-1].level:u);for(q=0;q<b.length;q++){k.minZoom===b[q].level&&(k.minScale=b[q].scale),k.maxZoom===b[q].level&&(k.maxScale=b[q].scale);}}else{k.minZoom=k.maxZoom=k.zoom=-1;}}a instanceof E?(this._gc||(this._gc=new E._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=d+"_gc"),g=a._setMap(this,this._gc._surface),g.id=d+"_"+e,this._layerDivs[e]=g,this._reorderLayers(this.graphicsLayerIds)):(g=a._setMap(this,this._layersDiv,g,this.__LOD),g.id=d+"_"+e,this._layerDivs[e]=g,this._reorderLayers(this.layerIds),!h&&-1!==a.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerAdd(a));e===this._firstLayerId&&(this.graphics=new E({id:d+"_graphics",displayOnPan:k.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(a===this.graphics){c=this._layers[this._firstLayerId];d=k.zoom;g=k.scale;b=k.center;c=c.initialExtent||c.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&c&&(b&&(b=this._convertGeometry(c,b)),b&&(c=c.centerAt(b)));if(b=this.extent||c&&new A(c.toJson())){-1<d?b=this.__getExtentForLevel(d,null,b).extent:0<g&&(b=G.getExtentForScale(this,g,b));}if(!b){return;}d=this._fixExtent(b,k.fitExtent);this.extent=d.extent;this.__LOD=d.lod;this.__setExtent(this.extent,null,null,k.fitExtent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this);}h||(this.onLayerAdd(a),this.onLayerAddResult(a));O(this[e+"_addLayerHandler_connect"]);}},_convertGeometry:function(a,b){var c=a&&a.spatialReference,d=b&&b.spatialReference;c&&(d&&!c.equals(d))&&(c._canProject(d)?c.isWebMercator()?b=Y.geographicToWebMercator(b):4326===c.wkid&&(b=Y.webMercatorToGeographic(b,!0)):(undefined,b=null));return b;},_reorderLayers:function(a){var b=this.onLayerReorder,c=Q.place,d=this._layerDivs,e=this._layers,f=this._gc?this._gc._surface.getEventSource():null;if(a===this.graphicsLayerIds){m.forEach(a,function(a,g){var h=d[a];h&&(c(h.getEventSource(),f,g),b(e[a],g));});}else{var g=this.graphics,h=g?g.id:null,k=this._layersDiv,l;m.forEach(a,function(a,f){l=d[a];a!==h&&l&&(c(l,k,f),b(e[a],f));});f&&(f=9>R("ie")?f.parentNode:f,c(f,f.parentNode,a.length));}this.onLayersReordered([].concat(a));},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor);},_zoomingHandler:function(a){var b=parseFloat(a.left),c=parseFloat(a.top);a=new A(b,c-parseFloat(a.height),b+parseFloat(a.width),c,this.spatialReference);b=this.extent.getWidth()/a.getWidth();this.__zoom(a,b,this._zoomAnimDiv.anchor);},_zoomEndHandler:function(){var a=this._zoomAnimDiv,b=a.extent,c=this.extent.getWidth()/b.getWidth(),d=a.anchor,e=a.newLod,f=a.levelChange;a.extent=a.anchor=a.levelChange=a.startingExtent=a.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(b,c,d,e,f);},_panningHandler:function(a){if(isNaN(parseFloat(a.left))||isNaN(parseFloat(a.top))){var b=Math.round,c=this._panAnim.node;a.left=-1*(this._delta.x-b(this.width/2))+"px";a.top=-1*(this._delta.y-b(this.height/2))+"px";V.set(c,"left",a.left);V.set(c,"top",a.top);}a=new C(parseFloat(a.left),parseFloat(a.top));b=this.toMap(a);this.onPan(this.extent.offset(this.extent.xmin-b.x,this.extent.ymax-b.y),a);},_panEndHandler:function(a){this.__panning=!1;var b=Math.round;a=new C(-b(parseFloat(a.style.left)),-b(parseFloat(a.style.top)));var b=a.x,c=a.y,d=this.__visibleRect,e=this.__visibleDelta;d.x+=-b;d.y+=-c;e.x+=-b;e.y+=-c;B(this._zoomAnimDiv,{left:"0px",top:"0px"});var d=this.extent,e=this._ratioW,f=this._ratioH,d=new A(d.xmin+b/e,d.ymin-c/f,d.xmax+b/e,d.ymax-c/f,this.spatialReference);a.setX(-a.x);a.setY(-a.y);this._delta=this._panAnim=null;this._updateExtent(d);this.onPanEnd(d,a);this._fireExtChg([d,a,!1,this.__LOD]);},_fixExtent:function(a,b){for(var c=this._reshapeExtent(a),d=1.25;!0===b&&(c.extent.getWidth()<a.getWidth()||c.extent.getHeight()<a.getHeight())&&0<c.lod.level&&3>=d;){c=this._reshapeExtent(a.expand(d)),d+=0.25;}return c;},_getFrameWidth:function(){var a=-1,b=this.spatialReference._getInfo();this.__LOD?(b=this.__LOD._frameInfo)&&(a=b[3]):b&&(a=Math.round(2*b.valid[1]/(this.extent.getWidth()/this.width)));return a;},_fixAspectRatio:function(a){var b=a.getWidth(),c=a.getHeight(),d=b/c,e=this.width/this.height,f=0,g=0;this.width>this.height?b>c?e>d?f=c*e-b:g=b/e-c:f=c*e-b:this.width<this.height?b<c?e>d?f=c*e-b:g=b/e-c:g=b/e-c:b<c?f=c-b:b>c&&(g=b/e-c);f&&(a.xmin-=f/2,a.xmax+=f/2);g&&(a.ymin-=g/2,a.ymax+=g/2);return a;},_reshapeExtent:function(a){a=this._fixAspectRatio(a);return this._getAdjustedExtent(a);},_getAdjustedExtent:function(a){if(this.__tileInfo){return ca.getCandidateTileInfo(this,this.__tileInfo,a);}var b=G.getScale(this,a),c=this.getMinScale(),d=this.getMaxScale(),e=!d||b>=d;c&&!(b<=c)?a=G.getExtentForScale(this,c,a):e||(a=G.getExtentForScale(this,d,a));return {extent:a};},_onBingLayerAdd:function(a){this["__"+a.id+"_vis_connect"]=z.connect(a,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(a.visible);},_onBingLayerRemove:function(a){z.disconnect(this["__"+a.id+"_vis_connect"]);delete this["__"+a.id+"_vis_connect"];var b=m.some(this.layerIds,function(b){return (a=this._layers[b])&&a.visible&&-1!==a.declaredClass.indexOf("VETiledLayer");},this);this._toggleBingLogo(b);},_toggleBingLogo:function(a){a&&!this._bingLogo?(a={left:this._mapParams&&this._mapParams.nav?"25px":""},6===R("ie")&&(a.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+P.toUrl("./images/map/bing-logo-lg.png")+"')"),a=this._bingLogo=Q.create("div",{style:a},this.root),X.add(a,"bingLogo-lg")):!a&&this._bingLogo&&(Q.destroy(this._bingLogo),delete this._bingLogo);},__panStart:function(a,b){var c=this._zoomAnim,d=this._panAnim;if(c&&c._active){c.stop(),c._fire("onEnd",[c.node]);}else{if(d&&d._active){d.stop();this._panAnim=null;var d=d.curve.getValue(d._getStep()),c=Math.round(parseFloat(d.left)),d=Math.round(parseFloat(d.top)),e=this.navigationManager._dragOrigin;this.__pan(c,d);e&&(e.x-=c,e.y-=d);return;}}this.__panning=!0;this.onPanStart(this.extent,new C(a,b));},__pan:function(a,b){var c=this.extent,d=this._ratioW,e=this._ratioH;this.onPan(new A(c.xmin-a/d,c.ymin+b/e,c.xmax-a/d,c.ymax+b/e,this.spatialReference),new C(a,b));},__panEnd:function(a,b){var c=this.__visibleRect,d=this.__visibleDelta;c.x+=a;c.y+=b;d.x+=a;d.y+=b;var c=new C(a,b),d=this.extent,e=this._ratioW,f=this._ratioH,d=new A(d.xmin-a/e,d.ymin+b/f,d.xmax-a/e,d.ymax+b/f,this.spatialReference);this.__panning=!1;this._updateExtent(d);this.onPanEnd(d,c);this._fireExtChg([d,c,!1,this.__LOD]);},__zoomStart:function(a,b){this.__zooming=!0;this.onZoomStart(a,1,b,this.__LOD?this.__LOD.level:null);},__zoom:function(a,b,c){this.onZoom(a,b,c);},__zoomEnd:function(a,b,c,d,e){B(this._layersDiv,{left:"0px",top:"0px"});this._delta=new C(0,0);this.__visibleRect.x=this.__visibleRect.y=0;a=new A(a);this.__LOD=d;this._ratioW=this.width/a.getWidth();this._ratioH=this.height/a.getHeight();var f=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(a,e);this.onZoomEnd(a,b,c,d?d.level:null);this._fireExtChg([a,f,e,d]);},_extentUtil:function(a,b,c,d,e){var f=new aa,g,h,k,l,u,n,m,q,v,y,r=this.width,p=this.height,L,s,w;a&&(g=a.numLevels,h=a.targetLevel,L=t.isDefined(h),k=a.factor,l=a.mapAnchor,u=a.screenAnchor,n=a.mapCenter,s=a.levelOrFactor,m=a.targetScale,q=t.isDefined(m)&&0<m);b&&(v=b.dx,y=b.dy,n=b.mapCenter);H.isArray(n)&&(n=new M(n));var z=this._panAnim;b=(a=this._stopAnim())?a.divExtent:this.extent;var B=this.__tileInfo,F=this._params;if(!this.loaded){if(c){b&&(c=this._convertGeometry(b,c)),c&&(this.extent=c,F.zoom=F.scale=-1,F.center=null);}else{if(n||L||q){if(n){if(b){if(n=this._convertGeometry(b,n)){this.extent=b.centerAt(n),F.center=null;}}else{F.center=n;}}L&&-1<h?(F.zoom=h,F.scale=-1):q&&(F.scale=m,F.zoom=-1);}}f.resolve();return f;}if(n&&(n=this._convertGeometry(this,n),!n)||l&&(l=this._convertGeometry(this,l),!l)||c&&(c=this._convertGeometry(this,c),!c)){return f.reject(),f;}z&&(l&&u)&&(l=T(this.extent,r,p,u));a&&(l&&u)&&(l=T(a.divExtent,r,p,u));L&&(B?(g=this.getMinZoom(),L=this.getMaxZoom(),h<g?h=g:h>L&&(h=L),g=h-(a?a.level:this.getLevel())):(g=0<h?-1:1,w=s?h:null));if(!c){if(t.isDefined(g)){B?(r=a?a.level:this.getLevel(),p=this.__getExtentForLevel(r+g,n,b).extent):(p=(a?a.end:this.extent).expand(w||(0<g?0.5*g:2*-g)),w&&n&&(p=p.centerAt(n))),p&&(n?c=p:(r=l||b.getCenter(),v=b.ymax-(p.getHeight()-b.getHeight())*(r.y-b.ymax)/b.getHeight(),r=b.xmin-(p.getWidth()-b.getWidth())*(r.x-b.xmin)/b.getWidth(),c=new A(r,v-p.getHeight(),r+p.getWidth(),v,this.spatialReference)));}else{if(q){c=G.getExtentForScale(this,m,b);}else{if(t.isDefined(k)){c=b.expand(k);}else{if(v||y){a?(c=a.end,l=c.getCenter(),w=$(c,r,p,l),w.x+=v,w.y+=y,w=T(c,r,p,w),c=c.offset(w.x-l.x,w.y-l.y)):(v=new C(r/2+v,p/2+y),y=T(b,r,p,v),p=b.getWidth(),v=b.getHeight(),r=y.x-p/2,y=y.y-v/2,c=new A(r,y,r+p,y+v,this.spatialReference));}}}}}c||(n?(b=a?a.end:b,p=b.getWidth(),v=b.getHeight(),r=n.x-p/2,y=n.y-v/2,c=new A(r,y,r+p,y+v,this.spatialReference)):a&&(c=a.end));c?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,za),this._extentDfd.reject()),this._extentDfd=f,this.__setExtent(c,null,u,d,a,e)):f.reject();return f;},__setExtent:function(a,b,c,d,e,f){try{if(this._firstLayerId){this.extent=a;}else{var g=!0,h=this.spatialReference,k=e?e.divExtent:this.extent,l=this._fixExtent(a,d||!1);a=l.extent;var u=a.getWidth(),n=a.getHeight(),m=Math.round;if(k){var q=m(1000000*k.getWidth()),v=m(1000000*u),y=m(1000000*k.getHeight()),r=m(1000000*n),g=q!==v||y!==r;}var p,t,s=e&&e.rect,w=e&&e.divExtent;if(J.zoomDuration&&g&&k){w=w||new A(k);s=s||{left:k.xmin,top:k.ymax,width:k.getWidth(),height:k.getHeight()};t={left:a.xmin,top:a.ymax,width:u,height:n};var z=new M(a.xmin,a.ymax,h),D=new M(a.xmin,a.ymin,h),F=new M(this.extent.xmin,this.extent.ymax,h),E=new M(this.extent.xmin,this.extent.ymin,h);p=ua.getLineIntersection(F,z,E,D,h);!p&&!e&&(g=!1);}this._ratioW=this.width/u;this._ratioH=this.height/n;var K=this._zoomAnimDiv;if(g){B(this._layersDiv,{left:"0px",top:"0px"}),b=new C(0,0),this.__visibleRect.x=this.__visibleRect.y=0,s&&t?(this._delta=b,K.id="_zAD",K.startingExtent=w,K.extent=a,K.levelChange=g,K.newLod=l.lod,K.anchor=c?c:!p&&e?e.anchor:$(this.extent,this.width,this.height,p),this._zoomAnim=ba.resize({node:K,start:s,end:t,duration:J.zoomDuration,rate:J.zoomRate,beforeBegin:!e?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(this.extent.getWidth()/a.getWidth(),K.anchor)):(this._updateExtent(a,g),this._fireExtChg([this.extent,b,g,this.__LOD=l.lod]));}else{if(!this.__panning){if(!1===this.loaded||f){this._updateExtent(a,g),this._fireExtChg([this.extent,b,g,this.__LOD=l.lod]);}else{this.__panning=!0;s=(new N(0,0,this.width,this.height,this.spatialReference)).getCenter();s.x=m(s.x);s.y=m(s.y);var x=this._delta=this.toScreen(a.getCenter()),G=Math.abs(s.x-x.x),H=Math.abs(s.y-x.y);50000<G||50000<H?(this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(a,!1),this._fireExtChg([this.extent,new C(0,0),!0,this.__LOD])):this.optimizePanAnimation&&(G>2*this.width||H>2*this.height)?(b=new C(s.x-x.x,s.y-x.y),this.__panStart(s.x,s.y),this.__pan(b.x,b.y),this.__panEnd(b.x,b.y)):(this.onPanStart(this.extent,new C(0,0)),this._panAnim=ba.slideTo({node:K,left:s.x-x.x,top:s.y-x.y,duration:J.panDuration,rate:J.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play());}}}}}catch(I){undefined,console.error(I);}},_fireOnScale:function(a,b,c){if("css-transforms"===this.navigationMode){var d=this.__visibleDelta;this.onScale(pa.scaleAt(a,{x:-1*(this.width/2-(b.x-d.x)),y:-1*(this.height/2-(b.y-d.y))}),c);}},_stopAnim:function(){var a=this._zoomAnim,b=this._panAnim;if(a&&a._active){a.stop();var b=a.curve.getValue(a._getStep()),c=parseFloat(b.left),d=parseFloat(b.top),a=a.node;return {anchor:a.anchor,start:a.startingExtent,end:a.extent,level:a.newLod&&a.newLod.level,rect:b,divExtent:new A(c,d-parseFloat(b.height),c+parseFloat(b.width),d,this.spatialReference)};}b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]));},__getExtentForLevel:function(a,b,c){var d=this.__tileInfo,d=d&&d.lods;a=t.isDefined(a)?a:0;c=c||this.extent;b=b||c&&c.getCenter();if(d){if(b){c=this.getMinZoom();var e=this.getMaxZoom();a>e&&(a=e);a<c&&(a=c);a=d[a];d=this.width*a.resolution/2;c=this.height*a.resolution/2;return {extent:new A(b.x-d,b.y-c,b.x+d,b.y+c,b.spatialReference),lod:a};}}else{if(c){return {extent:c.expand(!a||1>a?1:a).centerAt(b)};}}},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart());},_decr:function(){var a=--this._jobs;a?0>a&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd());},_fireEvent:function(a,b){this[a]&&this[a].apply(this,b);},_updateExtent:function(a,b){this.extent=a;b&&this._setClipRect();var c=this.spatialReference;c&&(c.isWebMercator()?this.geographicExtent=Y.webMercatorToGeographic(this._getAvailExtent(),!0):4326===c.wkid&&(this.geographicExtent=new A(this._getAvailExtent().toJson())));},_fireExtChg:function(a){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",a);if(a=this._extentDfd){delete this._extentDfd,a.resolve();}},attr:function(a,b){var c=this.container;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));return this;},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(a,b,c){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect();},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this._cleanUp(),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this));},setCursor:function(a){B(this.__container,"cursor",this.cursor=a);},setMapCursor:function(a){this.setCursor(this._cursor=a);},resetMapCursor:function(){this.setCursor(this._cursor);},setInfoWindow:function(a){var b=this.infoWindow;b&&b.unsetMap(this);this.infoWindow=a;this.loaded&&a&&a.setMap(this);},setInfoWindowOnClick:function(a){this._params.showInfoWindowOnClick=a;this.popupManager&&this.popupManager.set("enabled",a);},getInfoWindowAnchor:function(a){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(a)||"upperright";},toScreen:function(a,b){return $(this.extent,this.width,this.height,a,b);},toMap:function(a){return T(this.extent,this.width,this.height,a);},addLayer:function(a,b){a&&!this.getLayer(a.id)&&this._addLayer(a,a instanceof E?this.graphicsLayerIds:this.layerIds,b);return a;},addLayers:function(a){var b=[],c=a.length,d,e,f=a.length;d=z.connect(this,"onLayerAddResult",function(e,f){-1!==m.indexOf(a,e)&&(c--,b.push({layer:e,success:!f,error:f}),c||(z.disconnect(d),this.onLayersAddResult(b)));});for(e=0;e<f;e++){this.addLayer(a[e]);}return this;},removeLayer:function(a,b){var c=a.id,d=a instanceof E?this.graphicsLayerIds:this.layerIds,e=I(d,c);0<=e&&(d.splice(e,1),a instanceof E?(O(this["_gl_"+a.id+"_click_connect"]),a.loaded&&a._unsetMap(this,this._gc._surface)):a.loaded&&(a._unsetMap(this,this._layersDiv),-1!==a.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(a)),delete this._layers[c],delete this._layerDivs[c],b||this._reorderLayers(d),this.onLayerRemove(a));},removeAllLayers:function(){var a=this.layerIds,b;for(b=a.length-1;0<=b;b--){this.removeLayer(this._layers[a[b]],1);}a=this.graphicsLayerIds;for(b=a.length-1;0<=b;b--){this.removeLayer(this._layers[a[b]],1);}this.onLayersRemoved();},reorderLayer:function(a,b){H.isString(a)&&(ja.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),a=this.getLayer(a));var c=a.id,d,e=a instanceof E?this.graphicsLayerIds:this.layerIds;0>b?b=0:b>=e.length&&(b=e.length-1);d=I(e,c);-1===d||d===b||(e.splice(d,1),e.splice(b,0,c),this._reorderLayers(e));},getLayer:function(a){return this._layers[a];},setExtent:function(a,b){a=new A(a.toJson());var c=a.getWidth(),d=a.getHeight();return 0===c&&0===d?this.centerAt(new M({x:a.xmin,y:a.ymin,spatialReference:a.spatialReference&&a.spatialReference.toJson()})):this._extentUtil(null,null,a,b);},centerAt:function(a){return this._extentUtil(null,{mapCenter:a});},centerAndZoom:function(a,b){return this._extentUtil({targetLevel:b,mapCenter:a,levelOrFactor:!0});},getScale:function(){return this.__LOD?this.__LOD.scale:G.getScale(this);},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0;},getResolutionInMeters:function(){return this.getResolution()*(G.getUnitValue(this.spatialReference)||20015077/180);},getMinScale:function(){return this._params.minScale;},getMaxScale:function(){return this._params.maxScale;},setScale:function(a){return this._extentUtil({targetScale:a});},getLayersVisibleAtScale:function(a){var b=[];(a=a||this.getScale())&&m.forEach(this.layerIds.concat(this.graphicsLayerIds),function(c){c=this.getLayer(c);c.isVisibleAtScale(a)&&b.push(c);},this);return b;},getNumLevels:function(){var a=this.getMinZoom(),b=this.getMaxZoom();return a===b&&0>a?0:b-a+1;},getLevel:function(){return this.__LOD?this.__LOD.level:-1;},setLevel:function(a){if(-1<a){return this._extentUtil({targetLevel:a});}},getZoom:function(){return this.getLevel();},setZoom:function(a){return this.setLevel(a);},getMinZoom:function(){return this._params.minZoom;},getMaxZoom:function(){return this._params.maxZoom;},setBasemap:function(a){var b;H.isObject(a)?(b=a,a=b.title):b=D&&D[a];if(b){this._basemapDfd&&-1===this._basemapDfd.fired&&this._basemapDfd.cancel();var c=[],d=[],e=0;m.forEach(b.baseMapLayers||b.layers,function(b){var f,g={id:b.id,displayLevels:b.displayLevels,opacity:t.isDefined(b.opacity)?b.opacity:null,visible:t.isDefined(b.visibility)?b.visibility:null};if(b.type){switch(b.type){case "OpenStreetMap":f=new ea(g);break;default:undefined;}}else{f=b.url;if("https:"===window.location.protocol&&(-1!==f.search(/^http\:\/\/server\.arcgisonline\.com/i)||-1!==f.search(/^http\:\/\/services\.arcgisonline\.com/i)||-1!==f.search(/^http\:\/\/.+\.arcgis\.com/i))){f=f.replace(/http:/i,"https:");}f=new xa(f,g);}f&&(c.push(f),d.push(b),b.isReference||e++);},this);if(!c.length||!e){}else{var f={basemapName:a,infos:d,layers:c};if(this.loaded){var g=this,h=new aa(sa._dfdCanceller),k=function(a){h._pendingLayers--;a=m.indexOf(f.layers,this);if(-1<a&&(a=h._layerEvents[a])){z.disconnect(a[0]),z.disconnect(a[1]);}0>=h._pendingLayers&&(delete h._layerEvents,delete g._basemapDfd,0>h.fired&&h.callback(f));};this._basemapDfd=h;h._pendingLayers=0;h._layerEvents={};m.forEach(c,function(a,b){a&&(h._pendingLayers++,a.loaded?k(a):h._layerEvents[b]=[z.connect(a,"onLoad",a,k),z.connect(a,"onError",a,k)]);});h.addCallback(x(this,this._basemapLoaded));}else{this._basemapLoaded(f);}}}else{b=[];for(var l in D){b.push(l);}}},_basemapLoaded:function(a){var b=a.layers,c=a.infos,d=0,e=!0,f;this.loaded&&(m.forEach(b,function(a,b){a.loaded&&(c[b].isReference||d++);}),e=d);e&&(this.basemapLayerIds&&(f={basemapName:this._basemap,infos:D&&D[this._basemap]&&D[this._basemap].baseMapLayers},f.basemapName||(m.forEach(this.basemapLayerIds,function(a){if(this.getLayer(a) instanceof ea){return f.basemapName="osm",f.infos=D&&D.osm&&D.osm.baseMapLayers,!1;}},this),f.basemapName||(f=null))),this._removeBasemap(),this._basemap=a.basemapName,this.basemapLayerIds=this._addBasemap(b,c),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:a,previous:f}));},_addBasemap:function(a,b){var c=[],d=[],e=0;m.forEach(a,function(a,g){b[g].isReference?c.push(a):(this.addLayer(a,e++),d.push(a.id));},this);c.length&&m.forEach(c,function(a){this.addLayer(a,"top");d.push(a.id);},this);return d;},_removeBasemap:function(){var a=this.basemapLayerIds,b;a&&a.length&&m.forEach(a,function(a){(b=this.getLayer(a))&&this.removeLayer(b);},this);},getBasemap:function(){return this._basemap||"";},translate:function(a,b){a=a||0;b=b||0;if(!this._txTimer){this._tx=this._ty=0;var c=this.toScreen(this.extent.getCenter());this.__panStart(c.x,c.y);}this._tx+=a;this._ty+=b;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150);},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var a=this._tx,b=this._ty;this._tx=this._ty=0;this.__panEnd(a,b);},setTimeExtent:function(a){a=(this.timeExtent=a)?new a.constructor(a.toJson()):null;this.onTimeExtentChange(a);},setTimeSlider:function(a){this.timeSlider&&(O(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);a&&(this.timeSlider=a,this.setTimeExtent(a.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=W(a,"onTimeExtentChange",this,"setTimeExtent"));},setVisibility:function(a){if(this.visible!==a){this.visible=a;a||(this._display=this.container.style.display);this.container.style.display=a?this._display:"none";if(this.autoResize){var b=a?"resume":"pause";this._rszSignal[b]();this._oriSignal[b]();}a&&this.resize();}return this;},resize:function(a){var b=this,c=function(){clearTimeout(b._resizeT);b.reposition();b._resize();};clearTimeout(b._resizeT);!0===a?c():b._resizeT=setTimeout(c,b.resizeDelay);},_resize:function(){var a=this.width,b=this.height,c=U.getContentBox(this.container);if(!(a===c.w&&b===c.h)){var d=this._zoomAnim||this._panAnim;d&&(d.stop(),d._fire("onEnd",[d.node]));B(this.root,{width:(this.width=c.w)+"px",height:(this.height=c.h)+"px"});c=this.width;d=this.height;this.attribution&&this.attribution.domNode&&V.set(this.attribution.domNode,"maxWidth",Math.floor(c*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,c,d);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,c,d);var e=new N(this.extent),a=(new N(e.x,e.y,e.width*(c/a),e.height*(d/b),this.spatialReference)).getExtent();this.onResize(a,c,d);this._extentUtil(null,null,a,null,!0);}},reposition:function(){this._reposition();this.onReposition(this.position.x,this.position.y);},_reposition:function(){var a=U.position(this.container,!0),b=U.getPadBorderExtents(this.container);this.position.update(a.x+b.l,a.y+b.t);},_setClipRect:function(){delete this._clip;var a=7>=R("ie")||void 0===R("ie")&&7<=R("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var b=this.width,c=this.height,d=this._getFrameWidth(),e=b-d;0<e&&(a=e/2,a="rect(0px,"+(a+d)+"px,"+c+"px,"+a+"px)",c=this.extent.getWidth(),b=c*(d/b),this._clip=[(c-b)/2,b]);}B(this.__container,"clip",a);},_getAvailExtent:function(){var a=this.extent,b=this._clip;if(b){if(!a._clip){var c=new N(a);c.width=b[1];c.x+=b[0];a._clip=c.getExtent();}return a._clip;}return a;},_fixedPan:function(a,b){return this._extentUtil(null,{dx:a,dy:b});},panUp:function(){return this._fixedPan(0,-0.75*this.height);},panUpperRight:function(){return this._fixedPan(0.75*this.width,-0.75*this.height);},panRight:function(){return this._fixedPan(0.75*this.width,0);},panLowerRight:function(){return this._fixedPan(0.75*this.width,0.75*this.height);},panDown:function(){return this._fixedPan(0,0.75*this.height);},panLowerLeft:function(){return this._fixedPan(-0.75*this.width,0.75*this.height);},panLeft:function(){return this._fixedPan(-0.75*this.width,0);},panUpperLeft:function(){return this._fixedPan(-0.75*this.width,-0.75*this.height);},enableSnapping:function(a){a=a||{};if("esri.SnappingManager"===a.declaredClass){this.snappingManager=a;}else{var b=ga++,c=this;this._rids&&this._rids.push(b);P(["./SnappingManager"],function(d){var e=c._rids?m.indexOf(c._rids,b):-1;-1!==e&&(c._rids.splice(e,1),c.snappingManager=new d(H.mixin({map:c},a)));});}return this.snappingManager;},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null;},_createLabelLayer:function(){function a(){b._labels.removeAllFeatureLayers();m.forEach(b.graphicsLayerIds,function(a){a=b.getLayer(a);"function"===typeof a.applyEdits&&b._labels.addFeatureLayer(a);});};var b=this;!this._labels&&(Z&&this.loaded)&&(this._labels=new Z({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),a(),this.on("layers-reordered",a));}});});},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(g,lang){var m=g.matrix={};var _11ec={};m._degToRad=function(_11ed){return _11ec[_11ed]||(_11ec[_11ed]=(Math.PI*_11ed/180));};m._radToDeg=function(_11ee){return _11ee/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _11ef=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_11ef,r=m.normalize(arg[i]);_11ef=new m.Matrix2D();_11ef.xx=l.xx*r.xx+l.xy*r.yx;_11ef.xy=l.xx*r.xy+l.xy*r.yy;_11ef.yx=l.yx*r.xx+l.yy*r.yx;_11ef.yy=l.yx*r.xy+l.yy*r.yy;_11ef.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_11ef.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}lang.mixin(this,_11ef);}}else{lang.mixin(this,arg);}}}};lang.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});lang.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(angle){var c=Math.cos(angle);var s=Math.sin(angle);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_11f0){return m.rotate(m._degToRad(_11f0));},skewX:function(angle){return new m.Matrix2D({xy:Math.tan(angle)});},skewXg:function(_11f1){return m.skewX(m._degToRad(_11f1));},skewY:function(angle){return new m.Matrix2D({yx:Math.tan(angle)});},skewYg:function(_11f2){return m.skewY(m._degToRad(_11f2));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_11f3){return (_11f3 instanceof m.Matrix2D)?_11f3:new m.Matrix2D(_11f3);},isIdentity:function(_11f4){return _11f4.xx==1&&_11f4.xy==0&&_11f4.yx==0&&_11f4.yy==1&&_11f4.dx==0&&_11f4.dy==0;},clone:function(_11f5){var obj=new m.Matrix2D();for(var i in _11f5){if(typeof (_11f5[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_11f5[i]){obj[i]=_11f5[i];}}return obj;},invert:function(_11f6){var M=m.normalize(_11f6),D=M.xx*M.yy-M.xy*M.yx;M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_11f7,x,y){return {x:_11f7.xx*x+_11f7.xy*y+_11f7.dx,y:_11f7.yx*x+_11f7.yy*y+_11f7.dy};},multiplyPoint:function(_11f8,a,b){var M=m.normalize(_11f8);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiplyRectangle:function(_11f9,rect){var M=m.normalize(_11f9);rect=rect||{x:0,y:0,width:0,height:0};if(m.isIdentity(M)){return {x:rect.x,y:rect.y,width:rect.width,height:rect.height};}var p0=m.multiplyPoint(M,rect.x,rect.y),p1=m.multiplyPoint(M,rect.x,rect.y+rect.height),p2=m.multiplyPoint(M,rect.x+rect.width,rect.y),p3=m.multiplyPoint(M,rect.x+rect.width,rect.y+rect.height),minx=Math.min(p0.x,p1.x,p2.x,p3.x),miny=Math.min(p0.y,p1.y,p2.y,p3.y),maxx=Math.max(p0.x,p1.x,p2.x,p3.x),maxy=Math.max(p0.y,p1.y,p2.y,p3.y);return {x:minx,y:miny,width:maxx-minx,height:maxy-miny};},multiply:function(_11fa){var M=m.normalize(_11fa);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_11fb,x,y){return m.multiply(m.translate(x,y),_11fb,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.rotate(angle),a,b);}return m._sandwich(m.rotate(angle),a.x,a.y);},rotategAt:function(_11fc,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_11fc),a,b);}return m._sandwich(m.rotateg(_11fc),a.x,a.y);},skewXAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.skewX(angle),a,b);}return m._sandwich(m.skewX(angle),a.x,a.y);},skewXgAt:function(_11fd,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_11fd),a,b);}return m._sandwich(m.skewXg(_11fd),a.x,a.y);},skewYAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.skewY(angle),a,b);}return m._sandwich(m.skewY(angle),a.x,a.y);},skewYgAt:function(_11fe,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_11fe),a,b);}return m._sandwich(m.skewYg(_11fe),a.x,a.y);}});g.Matrix2D=m.Matrix2D;return m;});},"dojox/gfx/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_11ff,lang,Color,has,win,arr,dom,_1200,_1201){var g=lang.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(node,_1202){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_1202+" ")>=0;};g._addClass=function(node,_1203){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_1203+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_1203);}};g._removeClass=function(node,_1204){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_1204+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _1205={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p,_1206;if(has("ie")){_1206=win.doc.documentElement.style.fontSize||"";if(!_1206){win.doc.documentElement.style.fontSize="100%";}}var div=_1200.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _1205){div.style.fontSize=p;_1205[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}if(has("ie")){win.doc.documentElement.style.fontSize=_1206;}win.body().removeChild(div);return _1205;};var _1207=null;b._getCachedFontMeasurements=function(_1208){if(_1208||!_1207){_1207=b._getFontMeasurements();}return _1207;};var _1209=null,empty={};b._getTextBox=function(text,style,_120a){var m,s,al=arguments.length;var i,box;if(!_1209){_1209=_1200.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},win.body());}m=_1209;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&style){for(i in style){if(i in empty){continue;}s[i]=style[i];}}if(al>2&&_120a){m.className=_120a;}m.innerHTML=text;if(m.getBoundingClientRect){var bcr=m.getBoundingClientRect();box={l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{box=_1201.getMarginBox(m);}m.innerHTML="";return box;};b._computeTextLocation=function(_120b,width,_120c,_120d){var loc={},align=_120b.align;switch(align){case "end":loc.x=_120b.x-width;break;case "middle":loc.x=_120b.x-width/2;break;default:loc.x=_120b.x;break;}var c=_120d?0.75:1;loc.y=_120b.y-_120c*c;return loc;};b._computeTextBoundingBox=function(s){if(!g._base._isRendered(s)){return {x:0,y:0,width:0,height:0};}var loc,_120e=s.getShape(),font=s.getFont()||g.defaultFont,w=s.getTextWidth(),h=g.normalizedLength(font.size);loc=b._computeTextLocation(_120e,w,h,true);return {x:loc.x,y:loc.y,width:w,height:h};};b._isRendered=function(s){var p=s.parent;while(p&&p.getParent){p=p.parent;}return p!==null;};var _120f=0;b._getUniqueId=function(){var id;do{id=_11ff._scopeName+"xUnique"+(++_120f);}while(dom.byId(id));return id;};b._fixMsTouchAction=function(_1210){var r=_1210.rawNode;if(typeof r.style.msTouchAction!="undefined"){r.style.msTouchAction="none";}};lang.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _1211={};return function(type){var t=_1211[type];if(t){return new t();}t=_1211[type]=new Function();t.prototype=g["default"+type];return new t();};})(),normalizeColor:function(color){return (color instanceof Color)?color:new Color(color);},normalizeParameters:function(_1212,_1213){var x;if(_1213){var empty={};for(x in _1212){if(x in _1213&&!(x in empty)){_1212[x]=_1213[x];}}}return _1212;},makeParameters:function(_1214,_1215){var i=null;if(!_1215){return lang.delegate(_1214);}var _1216={};for(i in _1214){if(!(i in _1216)){_1216[i]=lang.clone((i in _1215)?_1215[i]:_1214[i]);}}return _1216;},formatNumber:function(x,_1217){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var point=val.indexOf(".");if(point>=0&&val.length-point>5){val=x.toFixed(4);}}if(x<0){return val;}return _1217?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _1218=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_1218;case "in":return val*72*_1218;case "pc":return val*12*_1218;case "mm":return val*g.mm_in_pt*_1218;case "cm":return val*g.cm_in_pt*_1218;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_1219){var ns=typeof _1219=="string"?g[_1219]:_1219;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(name){g[name]=ns[name];});if(typeof _1219=="string"){g.renderer=_1219;}else{arr.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(r){return (g.renderer=g[r]&&g[r].Surface===g.Surface?r:null);});}}}});return g;});},"esri/basemaps":function(){define(["dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(b,c,a){return {streets:{title:a.basemaps.streets,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/d8855ee4d3d74413babfb0f41203b168/info/thumbnail/world_street_map.jpg",itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:a.basemaps.satellite,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/86de95d4e0244cba80f0fa2c9403a7b2/info/thumbnail/tempimagery.jpg",itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:a.basemaps.hybrid,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/413fd05bbd7342f5991d5ec96f4f8b18/info/thumbnail/tempimagery_with_labels_ne_usa.png",itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:a.basemaps.terrain,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/aab054ab883c4a4094c72e949566ad40/info/thumbnail/tempTerrain_with_labels_ne_usa.png",itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:a.basemaps.topo,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/6e03e8c26aad4b9c92a87c1063ddb0e3/info/thumbnail/topo_map_2.jpg",itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:a.basemaps.gray,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/8b3b470883a744aeb60e5fff0a319ce7/info/thumbnail/templight_gray_canvas_with_labels__ne_usa.png",itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:a.basemaps["dark-gray"],thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/da65bacab5bd4defb576f839b6b28098/info/thumbnail/DGCanvasWebMap.jpg",itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:a.basemaps.oceans,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/48b8cec7ebf04b5fbdcaf70d09daff21/info/thumbnail/tempoceans.jpg",itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:a.basemaps["national-geographic"],thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/509e2d6b034246d692a461724ae2d62c/info/thumbnail/natgeo.jpg",itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:a.basemaps.osm,thumbnailUrl:"//www.arcgis.com/sharing/rest/content/items/5d2bfa736f8448b3a1708e1f6be23eed/info/thumbnail/temposm.jpg",itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]}};});},"esri/Evented":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Evented","dojo/has","./kernel"],function(m,h,l,n,p,q){return m([n],{declaredClass:"esri.Evented",registerConnectEvents:function(){var d=this.constructor,c=this.constructor._meta.parents,a=[{}],e={},b,f,g=function(a,b){h.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c];d._meta&&d._meta.parents&&g(d._meta.parents,b);d.prototype._eventMap&&b.push(h.mixin({},d.prototype._eventMap));}return b;};if(!d._onMap){g(c,a);a.push(this._eventMap);c=h.mixin.apply(this,a);for(b in this){/^on\w/.test(b)&&h.isFunction(this[b])&&(a=this._hyphenLower(b).toLowerCase(),c[a]||(e[a]={method:b}));}for(f in c){b=this._onCamelCase(f),e[f]={method:b,argKeys:c[f]};}d._onMap=e;return d._onMap;}},on:function(d,c){if(-1<d.indexOf(",")){for(var a=d.split(/\s*,\s*/),e=a.length,b=[];e--;){b.push(this.on(a[e],c));}b.remove=function(){for(var a=0;a<b.length;a++){b[a].remove();}};return b;}var a=this.constructor._onMap||this.registerConnectEvents(),e="string"==typeof d&&d.toLowerCase(),f=this._onCamelCase(e),g=a&&a[e];return (f=g&&g.method||this[f]&&h.isFunction(this[f])&&f)?g&&h.isArray(g.argKeys)?(a=this._onArr2Obj(c,a[e].argKeys),l.after(this,f,a,!0)):l.after(this,f,function(a){a=a||{};a.target||(a.target=this);c.call(this,a);},!0):this.inherited(arguments);},emit:function(d,c){var a,e,b,f,g=d.toLowerCase();f=this._onCamelCase(d);var k=this.constructor._onMap||this.registerConnectEvents();f=(b=k&&k[g]&&k[g].method||h.isFunction(this[f])&&f)&&this[b];b&&(k&&k[g])&&this._onObj2Arr(function(){e=Array.prototype.slice.call(arguments);},k[g].argKeys)(c);c=c||{};c.target||(c.target=this);f&&(a=e&&e.length?e:[c],a=f.apply(this,a));this.inherited(arguments,[d,c]);return a;},_onObj2Arr:function(d,c){if(c){var a=this;return function(e){var b,f=[],g=c.length;for(b=0;b<g;b++){f[b]=e[c[b]];}d.apply(a,f);};}return d;},_onArr2Obj:function(d,c){if(c){var a=this;return function(){var e,b={},f=arguments.length;for(e=0;e<f;e++){b[c[e]]=arguments[e];}b.target||(b.target=a);d.call(a,b);};}return d;},_hyphenLower:function(d){return d.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(c,a){return (a?"-":"")+c.toLowerCase();});},_onCamelCase:function(d){return "on"+d.substr(0,1).toUpperCase()+d.substr(1).replace(/\-([a-z])/g,function(c,a){return a.toUpperCase();});}});});},"esri/fx":function(){define(["dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/fx","dojo/has","./kernel"],function(n,f,g,k,l,m,p,q,r){return {animateRange:function(a){var b=a.range;return new f.Animation(g.mixin({curve:new f._Line(b.start,b.end)},a));},resize:function(a){var b=a.node=k.byId(a.node),c=a.start,d=a.end;c||(c=l.getMarginBox(b),b=l.getPadBorderExtents(b),c=a.start={left:c.l+b.l,top:c.t+b.t,width:c.w-b.w,height:c.h-b.h});d||(d=a.anchor?a.anchor:{x:c.left,y:c.top},b=a.size,d=a.end={left:c.left-(b.width-c.width)*(d.x-c.left)/c.width,top:c.top-(b.height-c.height)*(d.y-c.top)/c.height,width:b.width,height:b.height});return f.animateProperty(g.mixin({properties:{left:{start:c.left,end:d.left},top:{start:c.top,end:d.top},width:{start:c.width,end:d.width},height:{start:c.height,end:d.height}}},a));},slideTo:function(a){var b=a.node=k.byId(a.node),c=m.getComputedStyle,d=null,e=null,h=function(){return function(){var a="absolute"==b.style.position?"absolute":"relative";d="absolute"==a?b.offsetTop:parseInt(c(b).top)||0;e="absolute"==a?b.offsetLeft:parseInt(c(b).left)||0;"absolute"!=a&&"relative"!=a&&(a=l.position(b,!0),d=a.y,e=a.x,b.style.position="absolute",b.style.top=d+"px",b.style.left=e+"px");};}();h();a=f.animateProperty(g.mixin({properties:{top:{start:d,end:a.top||0},left:{start:e,end:a.left||0}}},a));n.connect(a,"beforeBegin",a,h);return a;},flash:function(a){a=g.mixin({end:"#f00",duration:500,count:1},a);a.duration/=2*a.count;var b=k.byId(a.node),c=a.start;c||(c=m.getComputedStyle(b).backgroundColor);var d=a.end,e=[],h=a.count,b={node:b,duration:a.duration};for(a=0;a<h;a++){e.push(f.animateProperty(g.mixin({properties:{backgroundColor:{start:c,end:d}}},b))),e.push(f.animateProperty(g.mixin({properties:{backgroundColor:{start:d,end:c}}},b)));}return p.chain(e);}};});},"dojo/fx":function(){define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./aspect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,_121a,dojo,_121b,_121c,_121d,dom,_121e,geom,ready,_121f){if(!dojo.isAsync){ready(0,function(){var _1220=["./fx/Toggler"];_121f(_1220);});}var _1221=dojo.fx={};var _1222={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _1223=function(_1224){this._index=-1;this._animations=_1224||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;_121b.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};_1223.prototype=new _121a();lang.extend(_1223,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=_121c.after(this._current,"onAnimate",lang.hitch(this,"_onAnimate"),true);this._onEndCtx=_121c.after(this._current,"onEnd",lang.hitch(this,"_onEnd"),true);this._current.play(0,true);}},play:function(delay,_1225){if(!this._current){this._current=this._animations[this._index=0];}if(!_1225&&this._current.status()=="playing"){return this;}var _1226=_121c.after(this._current,"beforeBegin",lang.hitch(this,function(){this._fire("beforeBegin");}),true),_1227=_121c.after(this._current,"onBegin",lang.hitch(this,function(arg){this._fire("onBegin",arguments);}),true),_1228=_121c.after(this._current,"onPlay",lang.hitch(this,function(arg){this._fire("onPlay",arguments);_1226.remove();_1227.remove();_1228.remove();}));if(this._onAnimateCtx){this._onAnimateCtx.remove();}this._onAnimateCtx=_121c.after(this._current,"onAnimate",lang.hitch(this,"_onAnimate"),true);if(this._onEndCtx){this._onEndCtx.remove();}this._onEndCtx=_121c.after(this._current,"onEnd",lang.hitch(this,"_onEnd"),true);this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=_121c.after(this._current,"onPause",lang.hitch(this,function(arg){this._fire("onPause",arguments);e.remove();}),true);this._current.pause();}return this;},gotoPercent:function(_1229,_122a){this.pause();var _122b=this.duration*_1229;this._current=null;_121b.some(this._animations,function(a,index){if(_122b<=a.duration){this._current=a;this._index=index;return true;}_122b-=a.duration;return false;},this);if(this._current){this._current.gotoPercent(_122b/this._current.duration);}if(_122a){this.play();}return this;},stop:function(_122c){if(this._current){if(_122c){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=_121c.after(this._current,"onStop",lang.hitch(this,function(arg){this._fire("onStop",arguments);e.remove();}),true);this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){this.stop();if(this._onAnimateCtx){this._onAnimateCtx.remove();}if(this._onEndCtx){this._onEndCtx.remove();}}});lang.extend(_1223,_1222);_1221.chain=function(_122d){return new _1223(_122d);};var _122e=function(_122f){this._animations=_122f||[];this._connects=[];this._finished=0;this.duration=0;_121b.forEach(_122f,function(a){var _1230=a.duration;if(a.delay){_1230+=a.delay;}if(this.duration<_1230){this.duration=_1230;}this._connects.push(_121c.after(a,"onEnd",lang.hitch(this,"_onEnd"),true));},this);this._pseudoAnimation=new _121d.Animation({curve:[0,1],duration:this.duration});var self=this;_121b.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(_121c.after(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);},true));});};lang.extend(_122e,{_doAction:function(_1231,args){_121b.forEach(this._animations,function(a){a[_1231].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_1232,args){var t=this._pseudoAnimation;t[_1232].apply(t,args);},play:function(delay,_1233){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_1234,_1235){var ms=this.duration*_1234;_121b.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_1235);});this._call("gotoPercent",arguments);return this;},stop:function(_1236){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){this.stop();_121b.forEach(this._connects,function(_1237){_1237.remove();});}});lang.extend(_122e,_1222);_1221.combine=function(_1238){return new _122e(_1238);};_1221.wipeIn=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_121d.animateProperty(lang.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _1239=_121e.get(node,"height");return Math.max(_1239,1);}},end:function(){return node.scrollHeight;}}}},args));var fini=function(){s.height="auto";s.overflow=o;};_121c.after(anim,"onStop",fini,true);_121c.after(anim,"onEnd",fini,true);return anim;};_1221.wipeOut=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_121d.animateProperty(lang.mixin({properties:{height:{end:1}}},args));_121c.after(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";},true);var fini=function(){s.overflow=o;s.height="auto";s.display="none";};_121c.after(anim,"onStop",fini,true);_121c.after(anim,"onEnd",fini,true);return anim;};_1221.slideTo=function(args){var node=args.node=dom.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=_121e.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=geom.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=_121d.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));_121c.after(anim,"beforeBegin",init,true);return anim;};return _1221;});},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(t,v,w,u,s){return {_addFrameInfo:function(a,c){var b,d,f=2*c.origin[1],g=c.origin[0],h=a.origin.x,e=a.width,l;t.forEach(a.lods,function(a){b=Math.round(f/a.resolution);d=Math.ceil(b/e);l=Math.floor((g-h)/(e*a.resolution));a._frameInfo||(a._frameInfo=[d,l,l+d-1,b]);});},getContainingTileCoords:function(a,c,b){var d=a.origin;b=b.resolution;return {row:Math.floor((d.y-c.y)/(a.height*b)),col:Math.floor((c.x-d.x)/(a.width*b))};},getCandidateTileInfo:function(a,c,b){var d;d=a.width;for(var f=a.height,g=b.xmax-b.xmin,h=b.ymax-b.ymin,e=a.__tileInfo===c,l=e?a.getMinZoom():-1,e=e?a.getMaxZoom():-1,m=-1,n=c.lods,p=Math.abs,k,q,r,e=-1<e?e:n.length-1,l=-1<l?l:0;l<=e;l++){if(q=n[l]){if(r=g>h?p(h-f*q.resolution):p(g-d*q.resolution),0>m||r<=m){k=q,m=r;}else{break;}}}d=k;k=d.resolution;f=(b.xmin+b.xmax)/2;g=(b.ymin+b.ymax)/2;h=a.width/2*k;k*=a.height/2;f=new s(f-h,g-k,f+h,g+k,b.spatialReference);b=new u(f.xmin,f.ymax,b.spatialReference);e=d.resolution;h=c.width;g=c.height;c=c.origin;a=a.__visibleDelta;k=Math.floor;n=h*e;p=g*e;e=k((c.y-b.y)/p);m=k((b.x-c.x)/n);l=c.y-e*p;c=k(Math.abs((b.x-(c.x+m*n))*h/n))+a.x;a=k(Math.abs((b.y-l)*g/p))+a.y;return {tile:{point:b,coords:{row:e,col:m},offsets:{x:c,y:a}},lod:d,extent:f};},getTileExtent:function(a,c,b,d){var f=a.origin;c=a.lods[c].resolution;var g=a.width,h=a.height;return new s(d*c*g+f.x,f.y-(b+1)*c*h,(d+1)*c*g+f.x,f.y-b*c*h,a.spatialReference);}};});},"esri/geometry/Point":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang","../SpatialReference","./Geometry"],function(d,f,s,t,l,q,r){function g(a,b){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);var c=b*m;return [a*m*e,e/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)))];};function h(a,b,c){a=a/e*k;if(c){return b=n/2-2*Math.atan(Math.exp(-1*b/e)),[a,b*k];}c=a-360*Math.floor((a+180)/360);b=n/2-2*Math.atan(Math.exp(-1*b/e));return [c,b*k];};var e=6378137,n=3.141592653589793,k=57.29577951308232,m=0.017453292519943,p={type:"point",x:0,y:0};d=d(r,{declaredClass:"esri.geometry.Point",constructor:function(a,b,c){f.mixin(this,p);f.isArray(a)?(this.x=a[0],this.y=a[1],this.spatialReference=b):f.isObject(a)?(f.mixin(this,a),l.isDefined(this.latitude)&&(this.y=this.latitude),l.isDefined(this.longitude)&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=new q(this.spatialReference))):(this.x=a,this.y=b,this.spatialReference=c);this.verifySR();},offset:function(a,b){return new this.constructor(this.x+a,this.y+b,this.spatialReference);},setX:function(a){this.x=a;return this;},setY:function(a){this.y=a;return this;},setLongitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.x=g(a,this.y)[0]:4326===b.wkid&&(this.x=a));return this;},setLatitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.y=g(this.x,a)[1]:4326===b.wkid&&(this.y=a));return this;},getLongitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=h(this.x,this.y)[0]:4326===a.wkid&&(b=this.x));return b;},getLatitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=h(this.x,this.y)[1]:4326===a.wkid&&(b=this.y));return b;},update:function(a,b){this.x=a;this.y=b;return this;},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=b._getInfo();if(c){var d=c.valid[0],e=c.valid[1],c=2*e;a>e?(d=Math.ceil(Math.abs(a-e)/c),a-=d*c):a<d&&(d=Math.ceil(Math.abs(a-d)/c),a+=d*c);}}return new this.constructor(a,this.y,b);},toJson:function(){var a={x:this.x,y:this.y},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a;}});d.lngLatToXY=g;d.xyToLngLat=h;d.defaultProps=p;return d;});},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(a,c,d,e,b){return a(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,setSpatialReference:function(a){this.spatialReference=a;return this;},verifySR:function(){this.spatialReference||this.setSpatialReference(new b(4326));},getExtent:function(){return null;}});});},"esri/geometry/Extent":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../lang","../SpatialReference","./Geometry","./Point","./webMercatorUtils","./mathUtils"],function(w,u,p,A,B,x,s,y,m,t,z){var v={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},g=w(y,{declaredClass:"esri.geometry.Extent",constructor:function(a,c,b,d,e){p.mixin(this,v);p.isObject(a)?(p.mixin(this,a),this.spatialReference&&(this.spatialReference=new s(this.spatialReference))):this.update(a,c,b,d,e);this.verifySR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new m((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(a){var c=this.getCenter(),b=a.x-c.x;a=a.y-c.y;return new g(this.xmin+b,this.ymin+a,this.xmax+b,this.ymax+a,this.spatialReference);},update:function(a,c,b,d,e){this.xmin=a;this.ymin=c;this.xmax=b;this.ymax=d;this.spatialReference=e;this._parts=this._shifted=null;return this;},offset:function(a,c){return new g(this.xmin+a,this.ymin+c,this.xmax+a,this.ymax+c,this.spatialReference);},expand:function(a){var c=(1-a)/2;a=this.getWidth()*c;c*=this.getHeight();return new g(this.xmin+a,this.ymin+c,this.xmax-a,this.ymax-c,this.spatialReference);},intersects:function(a){if(!a){return !1;}var c=a.type,b=this.spatialReference,d=a.spatialReference;b&&(d&&!b.equals(d)&&b._canProject(d))&&(a=b.isWebMercator()?t.geographicToWebMercator(a):t.webMercatorToGeographic(a,!0));switch(c){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);case "polyline":return this._intersectsPolyline(a);}},normalize:function(){var a=this._normalize(!1,!0);p.isArray(a)||(a=[a]);return a;},shiftCentralMeridian:function(){return this._normalize(!0);},_intersectsMultipoint:function(a){var c=a.points.length,b;for(b=0;b<c;b++){if(this.contains(a.getPoint(b))){return !0;}}return !1;},_intersectsExtent:function(a){var c,b,d,e,f=!1;this.xmin<=a.xmin?(c=a.xmin,this.xmax<c?f=!0:d=Math.min(this.xmax,a.xmax)-c):(c=this.xmin,a.xmax<c?f=!0:d=Math.min(this.xmax,a.xmax)-c);this.ymin<=a.ymin?(b=a.ymin,this.ymax<b?f=!0:e=Math.min(this.ymax,a.ymax)-b):(b=this.ymin,a.ymax<b?f=!0:e=Math.min(this.ymax,a.ymax)-b);return f?null:new g(c,b,c+d,b+e,this.spatialReference);},_intersectsPolygon:function(a){var c=[this.xmin,this.ymax],b=[this.xmax,this.ymax],d=[this.xmin,this.ymin],e=[this.xmax,this.ymin],f=[c,b,d,e],c=[[d,c],[c,b],[b,e],[e,d]],d=a.rings,e=d.length,k,g=new m(0,0,this.spatialReference);k=f.length;for(b=0;b<k;b++){if(g.update(f[b][0],f[b][1]),a.contains(g)){return !0;}}g.setSpatialReference(a.spatialReference);for(var l,h,b=0;b<e;b++){if(f=d[b],k=f.length){l=f[0];g.update(l[0],l[1]);if(this.contains(g)){return !0;}for(a=1;a<k;a++){h=f[a];g.update(h[0],h[1]);if(this.contains(g)||this._intersectsLine([l,h],c)){return !0;}l=h;}}}return !1;},_intersectsPolyline:function(a){var c=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],b,d=a.paths,e=d.length,f,k,g,l,h=new m(0,0,a.spatialReference);for(a=0;a<e;a++){if(f=d[a],k=f.length){g=f[0];h.update(g[0],g[1]);if(this.contains(h)){return !0;}for(b=1;b<k;b++){l=f[b];h.update(l[0],l[1]);if(this.contains(h)||this._intersectsLine([g,l],c)){return !0;}g=l;}}}return !1;},_intersectsLine:function(a,c){var b=z._getLineIntersection2,d,e=c.length;for(d=0;d<e;d++){if(b(a,c[d])){return !0;}}return !1;},contains:function(a){if(!a){return !1;}var c=a.type;if("point"===c){var b=this.spatialReference,d=a.spatialReference,c=a.x;a=a.y;b&&(d&&!b.equals(d)&&b._canProject(d))&&(a=b.isWebMercator()?m.lngLatToXY(c,a):m.xyToLngLat(c,a,!0),c=a[0],a=a[1]);return c>=this.xmin&&c<=this.xmax&&a>=this.ymin&&a<=this.ymax;}return "extent"===c?this._containsExtent(a):!1;},_containsExtent:function(a){var c=a.xmin,b=a.ymin,d=a.xmax,e=a.ymax,f=a.spatialReference;a=new m(c,b,f);c=new m(c,e,f);e=new m(d,e,f);b=new m(d,b,f);return this.contains(a)&&this.contains(c)&&this.contains(e)&&this.contains(b)?!0:!1;},union:function(a){return new g(Math.min(this.xmin,a.xmin),Math.min(this.ymin,a.ymin),Math.max(this.xmax,a.xmax),Math.max(this.ymax,a.ymax),this.spatialReference);},getExtent:function(){var a=this.spatialReference;return new g(this.xmin,this.ymin,this.xmax,this.ymax,a&&new s(a.toJson()));},_shiftCM:function(a){if(!this._shifted){var c=new g(this.toJson()),b=c.spatialReference;if(a=a||b._getInfo()){var d=this._getCM(a);if(d){var e=b._isWebMercator()?t.webMercatorToGeographic(d):d;c.xmin-=d.x;c.xmax-=d.x;b._isWebMercator()||(e.x=this._normalizeX(e.x,a).x);c.setSpatialReference(new s(x.substitute({Central_Meridian:e.x},4326===b.wkid?a.altTemplate:a.wkTemplate)));}}this._shifted=c;}return this._shifted;},_getCM:function(a){var c,b=a.valid[0];a=a.valid[1];var d=this.xmin,e=this.xmax;if(!(d>=b&&d<=a)||!(e>=b&&e<=a)){c=this.getCenter();}return c;},_normalize:function(a,c,b){var d=new g(this.toJson()),e=d.spatialReference;if(e&&(b=b||e._getInfo())){var f=u.map(this._getParts(b),function(a){return a.extent;});return 2<f.length?a?this._shiftCM(b):d.update(b.valid[0],d.ymin,b.valid[1],d.ymax,e):2===f.length?a?this._shiftCM(b):c?f:{rings:u.map(f,function(a){return [[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];}),spatialReference:e}:f[0]||d;}return d;},_getParts:function(a){if(!this._parts){var c=this.xmin,b=this.xmax,d=this.ymin,e=this.ymax,f=this.spatialReference,k=this.getWidth(),m=c,l=b,h=0,n=0,p=[],q,r;a=a||f._getInfo();q=a.valid[0];r=a.valid[1];n=this._normalizeX(c,a);c=n.x;h=n.frameId;n=this._normalizeX(b,a);b=n.x;n=n.frameId;a=c===b&&0<k;if(k>2*r){k=new g(m<l?c:b,d,r,e,f);c=new g(q,d,m<l?b:c,e,f);r=new g(0,d,r,e,f);d=new g(q,d,0,e,f);f=[];q=[];k.contains(r)&&f.push(h);k.contains(d)&&q.push(h);c.contains(r)&&f.push(n);c.contains(d)&&q.push(n);for(e=h+1;e<n;e++){f.push(e),q.push(e);}p.push({extent:k,frameIds:[h]},{extent:c,frameIds:[n]},{extent:r,frameIds:f},{extent:d,frameIds:q});}else{c>b||a?p.push({extent:new g(c,d,r,e,f),frameIds:[h]},{extent:new g(q,d,b,e,f),frameIds:[n]}):p.push({extent:new g(c,d,b,e,f),frameIds:[h]});}this._parts=p;}return this._parts;},_normalizeX:function(a,c){var b=0,d=c.valid[0],e=c.valid[1],f=2*e;a>e?(b=Math.ceil(Math.abs(a-e)/f),a-=b*f):a<d&&(b=Math.ceil(Math.abs(a-d)/f),a+=b*f,b=-b);return {x:a,frameId:b};},toJson:function(){var a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},c=this.spatialReference;c&&(a.spatialReference=c.toJson());return a;}});g.defaultProps=v;return g;});},"esri/geometry/webMercatorUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../SpatialReference","./Point"],function(k,n,p,q,l,e){function f(a,b,d,c){if("point"===a.type){var g=b(a.x,a.y,c);return new a.constructor(g[0],g[1],new l(d));}if("extent"===a.type){var g=b(a.xmin,a.ymin,c),e=b(a.xmax,a.ymax,c);return new a.constructor(g[0],g[1],e[0],e[1],new l(d));}if("polyline"===a.type||"polygon"===a.type){var g="polyline"===a.type,f=[],h;k.forEach(g?a.paths:a.rings,function(a){f.push(h=[]);k.forEach(a,function(a){h.push(b(a[0],a[1],c));});});return g?new a.constructor({paths:f,spatialReference:d}):new a.constructor({rings:f,spatialReference:d});}if("multipoint"===a.type){var m=[];k.forEach(a.points,function(a){m.push(b(a[0],a[1],c));});return new a.constructor({points:m,spatialReference:d});}};function h(a,b){var d=a&&(null!=a.wkid?a:a.spatialReference),c=b&&(null!=b.wkid?b:b.spatialReference);return !d||!c?!1:c.equals(d)?!0:c._canProject(d);};return {canProject:h,project:function(a,b){var d=a&&a.spatialReference,c=b&&(null!=b.wkid?b:b.spatialReference);d&&c?d.equals(c)?a=new a.constructor(a.toJson()):h(d,c)?c.isWebMercator()?a=f(a,e.lngLatToXY,{wkid:102100}):4326===c.wkid&&(a=f(a,e.xyToLngLat,{wkid:4326})):a=null:a=null;return a;},lngLatToXY:e.lngLatToXY,xyToLngLat:e.xyToLngLat,geographicToWebMercator:function(a){return f(a,e.lngLatToXY,{wkid:102100});},webMercatorToGeographic:function(a,b){return f(a,e.xyToLngLat,{wkid:4326},b);}};});},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(t,u,v,p){function r(a,c,b){return a instanceof p?new p(a.x+b*(c.x-a.x),a.y+b*(c.y-a.y)):[a[0]+b*(c[0]-a[0]),a[1]+b*(c[1]-a[1])];};function g(a,c){return 1e-8>Math.abs(a-c);};function s(a,c,b,d){var e,f=g(a[0],c[0])?10000000000:(a[1]-c[1])/(a[0]-c[0]),k=g(b[0],d[0])?10000000000:(b[1]-d[1])/(b[0]-d[0]),l=a[1]-f*a[0],h=b[1]-k*b[0];if(g(f,k)){if(g(l,h)){if(g(a[0],c[0])){if(Math.min(a[1],c[1])<Math.max(b[1],d[1])||Math.max(a[1],c[1])>Math.min(b[1],d[1])){a=(a[1]+c[1]+b[1]+d[1]-Math.min(a[1],c[1],b[1],d[1])-Math.max(a[1],c[1],b[1],d[1]))/2,e=(a-l)/f;}else{return null;}}else{if(Math.min(a[0],c[0])<Math.max(b[0],d[0])||Math.max(a[0],c[0])>Math.min(b[0],d[0])){e=(a[0]+c[0]+b[0]+d[0]-Math.min(a[0],c[0],b[0],d[0])-Math.max(a[0],c[0],b[0],d[0]))/2,a=f*e+l;}else{return null;}}return [e,a];}return null;}g(f,10000000000)?(e=a[0],a=k*e+h):g(k,10000000000)?(e=b[0],a=f*e+l):(e=-(l-h)/(f-k),a=a[1]===c[1]?a[1]:b[1]===d[1]?b[1]:f*e+l);return [e,a];};return {getLength:function(a,c){var b=c.x-a.x,d=c.y-a.y;return Math.sqrt(b*b+d*d);},_getLength:function(a,c){var b=c[0]-a[0],d=c[1]-a[1];return Math.sqrt(b*b+d*d);},getPointOnLine:r,getMidpoint:function(a,c){return r(a,c,0.5);},_equals:g,_getLineIntersection:s,getLineIntersection:function(a,c,b,d,e){(a=s([a.x,a.y],[c.x,c.y],[b.x,b.y],[d.x,d.y]))&&(a=new p(a[0],a[1],e));return a;},_getLineIntersection2:function(a,c){var b=a[0],d=a[1],e=c[0],f=c[1],k=b[0],b=b[1],l=d[0],d=d[1],h=e[0],q=e[1],e=f[0]-h,h=k-h,g=l-k,f=f[1]-q,q=b-q,m=d-b,n=f*g-e*m;if(0===n){return !1;}e=(e*q-f*h)/n;h=(g*q-m*h)/n;return 0<=e&&1>=e&&0<=h&&1>=h?[k+e*(l-k),b+e*(d-b)]:!1;},_pointLineDistance:function(a,c){var b=c[0],d=c[1],e=b[0],f=b[1],b=a[0],k=a[1],l=d[0]-e,h=d[1]-f,g=b-e,p=k-f,d=Math.sqrt,m=Math.pow,n=d(m(l,2)+m(h,2)),g=(g*l+p*h)/(n*n),f=f+g*h;return d(m(b-(e+g*l),2)+m(k-f,2));}};});},"esri/PluginTarget":function(){define(["require","dojo/aspect","dojo/_base/array","dojo/_base/lang","dojo/Deferred","dojo/when"],function(g,h,k,n,l,m){function b(){h.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={};};b.prototype={addPlugin:function(c,a){var f=this,e=this._plugins,d=new l;try{g([c],function(b){c in e?d.resolve({id:e[c].declaredId||c.replace(/\//g,".")}):(e[c]=b,m(b.add(f,a),function(){var a={id:b.declaredId||c.replace(/\//g,".")};f.emit("plugin-add",a);d.resolve(a);},function(a){d.reject(a);}));});}catch(b){d.reject(b);}return d.promise;},removePlugin:function(c){if(c in this._plugins){var a=this._plugins[c];a.remove(this);delete this._plugins[c];this.emit("plugin-remove",{id:a.declaredId||c.replace(/\//g,".")});}},_pluginsHandler:function(){var c=this;k.some(arguments,function(a){if(a&&a.plugins&&a.plugins instanceof Array){a=a.plugins;var b,e,d;for(d=0;d<a.length;d++){b=a[d],e=b instanceof Object?b.id:b,c.addPlugin(e,b.options);}return !0;}});}};return b;});},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(a,c,d,e,b){return a(b,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});});},"esri/geometry/Rect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","../kernel","../SpatialReference","./Geometry","./Point","./Extent"],function(h,b,q,k,r,l,m,n,p){var g=h(m,{declaredClass:"esri.geometry.Rect",constructor:function(a,c,f,d,e){b.mixin(this,k.defaultRect);b.isObject(a)&&"extent"===a.type&&(c=a.ymax,f=a.getWidth(),d=a.getHeight(),e=a.spatialReference,a=a.xmin);b.isObject(a)?(b.mixin(this,a),this.spatialReference&&(this.spatialReference=new l(this.spatialReference))):(this.x=a,this.y=c,this.width=f,this.height=d,this.spatialReference=e);this.verifySR();},getCenter:function(){return new n(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(a,c){return new g(this.x+a,this.y+c,this.width,this.height,this.spatialReference);},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0;},getExtent:function(){return new p(parseFloat(this.x),parseFloat(this.y)-parseFloat(this.height),parseFloat(this.x)+parseFloat(this.width),parseFloat(this.y),this.spatialReference);},update:function(a,c,b,d,e){this.x=a;this.y=c;this.width=b;this.height=d;this.spatialReference=e;return this;}});return g;});},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../lang","../WKIDUnitConversion"],function(p,q,r,m,n,h){var k=20015077/180,l=m.defaults,f={getUnitValue:function(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=h.values[h[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d;},getScale:function(a,b,c){var d,e,g;1<arguments.length&&n.isDefined(b)&&!b.declaredClass?(d=a,e=b,b=null,g=f.getUnitValue(c)):(d=b||a.extent,e=a.width,g=f.getUnitValue(d&&d.spatialReference));return d&&e?39.37*(d.getWidth()/e*(g||k))*l.screenDPI:0;},getExtentForScale:function(a,b,c){c=c||a.extent;var d=f.getUnitValue(a.spatialReference);return c.expand(b*a.width/(39.37*(d||k)*l.screenDPI)/c.getWidth());}};return f;});},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(a,b){return {values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,50000,150000],2000:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:5,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:12,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:2,2157:0,2158:0,2159:12,2160:12,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2191:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:2,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:1,2223:1,2224:1,2225:2,2226:2,2227:2,2228:2,2229:2,2230:2,2231:2,2232:2,2233:2,2234:2,2235:2,2236:2,2237:2,2238:2,2239:2,2240:2,2241:2,2242:2,2243:2,2244:2,2245:2,2246:2,2247:2,2248:2,2249:2,2250:2,2251:1,2252:1,2253:1,2254:2,2255:2,2256:1,2257:2,2258:2,2259:2,2260:2,2261:2,2262:2,2263:2,2264:2,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2274:2,2275:2,2276:2,2277:2,2278:2,2279:2,2280:1,2281:1,2282:1,2283:2,2284:2,2285:2,2286:2,2287:2,2288:2,2289:2,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:3,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:1,2868:1,2869:1,2870:2,2871:2,2872:2,2873:2,2874:2,2875:2,2876:2,2877:2,2878:2,2879:2,2880:2,2881:2,2882:2,2883:2,2884:2,2885:2,2886:2,2887:2,2888:2,2891:2,2892:2,2893:2,2894:2,2895:2,2896:1,2897:1,2898:1,2899:2,2900:2,2901:1,2902:2,2903:2,2904:2,2905:2,2906:2,2907:2,2908:2,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2915:2,2916:2,2917:2,2918:2,2919:2,2920:2,2921:1,2922:1,2923:1,2924:2,2925:2,2926:2,2927:2,2928:2,2929:2,2930:2,2931:0,2932:0,2933:0,2934:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:2,2965:2,2966:2,2967:2,2968:2,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2983:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2990:0,2991:0,2992:1,2993:0,2994:1,2995:0,2996:0,2997:0,2998:0,2999:0,3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3038:0,3039:0,3040:0,3041:0,3042:0,3043:0,3044:0,3045:0,3046:0,3047:0,3048:0,3049:0,3050:0,3051:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:1,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:2,3090:0,3091:2,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:2,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3146:0,3147:0,3148:0,3149:0,3150:0,3151:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3167:13,3168:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3295:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3389:0,3390:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:2,3405:0,3406:0,3407:3,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:2,3418:2,3419:2,3420:2,3421:2,3422:2,3423:2,3424:2,3425:2,3426:2,3427:2,3428:2,3429:2,3430:2,3431:2,3432:2,3433:2,3434:2,3435:2,3436:2,3437:2,3438:2,3439:0,3440:0,3441:2,3442:2,3443:2,3444:2,3445:2,3446:2,3447:0,3448:0,3449:0,3450:0,3451:2,3452:2,3453:2,3454:2,3455:2,3456:2,3457:2,3458:2,3459:2,3460:0,3461:0,3462:0,3463:0,3464:0,3465:0,3466:0,3467:0,3468:0,3469:0,3470:0,3471:0,3472:0,3473:0,3474:0,3475:0,3476:0,3477:0,3478:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3554:0,3555:0,3556:0,3557:0,3558:0,3559:0,3560:2,3561:2,3562:2,3563:2,3564:2,3565:2,3566:2,3567:2,3568:2,3569:2,3570:2,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3594:0,3595:0,3596:0,3597:0,3598:2,3599:0,3600:2,3601:0,3602:0,3603:0,3604:0,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3637:0,3638:0,3639:0,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3665:0,3666:0,3667:0,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3693:0,3694:0,3695:0,3696:2,3697:0,3698:2,3699:0,3700:2,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:2,3729:2,3730:2,3731:2,3732:2,3733:2,3734:2,3735:2,3736:2,3737:2,3738:2,3739:2,3740:0,3741:0,3742:0,3743:0,3744:0,3745:0,3746:0,3747:0,3748:0,3749:0,3750:0,3751:0,3753:2,3754:2,3755:2,3756:2,3757:2,3758:2,3759:2,3760:2,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3785:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3825:0,3826:0,3827:0,3828:0,3829:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3844:0,3845:0,3846:0,3847:0,3848:0,3849:0,3850:0,3851:0,3852:0,3854:0,3857:0,3873:0,3874:0,3875:0,3876:0,3877:0,3878:0,3879:0,3880:0,3881:0,3882:0,3883:0,3884:0,3885:0,3890:0,3891:0,3892:0,3893:0,3907:0,3908:0,3909:0,3910:0,3911:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3970:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:2,3992:2,3994:0,3995:0,3996:0,3997:0,4026:0,4037:0,4038:0,4048:0,4049:0,4050:0,4051:0,4056:0,4057:0,4058:0,4059:0,4060:0,4061:0,4062:0,4063:0,4071:0,4082:0,4083:0,4093:0,4094:0,4095:0,4096:0,4217:2,4399:2,4400:2,4401:2,4402:2,4403:2,4404:2,4405:2,4406:2,4407:2,4408:2,4409:2,4410:2,4411:2,4412:2,4413:2,4414:0,4415:0,4417:0,4418:2,4419:2,4420:2,4421:2,4422:2,4423:2,4424:2,4425:2,4426:2,4427:2,4428:2,4429:2,4430:2,4431:2,4432:2,4433:2,4434:0,4437:0,4438:2,4439:2,4455:2,4456:2,4457:2,4462:0,4467:0,4471:0,4474:0,4484:0,4485:0,4486:0,4487:0,4488:0,4489:0,4491:0,4492:0,4493:0,4494:0,4495:0,4496:0,4497:0,4498:0,4499:0,4500:0,4501:0,4502:0,4503:0,4504:0,4505:0,4506:0,4507:0,4508:0,4509:0,4510:0,4511:0,4512:0,4513:0,4514:0,4515:0,4516:0,4517:0,4518:0,4519:0,4520:0,4521:0,4522:0,4523:0,4524:0,4525:0,4526:0,4527:0,4528:0,4529:0,4530:0,4531:0,4532:0,4533:0,4534:0,4535:0,4536:0,4537:0,4538:0,4539:0,4540:0,4541:0,4542:0,4543:0,4544:0,4545:0,4546:0,4547:0,4548:0,4549:0,4550:0,4551:0,4552:0,4553:0,4554:0,4559:0,4568:0,4569:0,4570:0,4571:0,4572:0,4573:0,4574:0,4575:0,4576:0,4577:0,4578:0,4579:0,4580:0,4581:0,4582:0,4583:0,4584:0,4585:0,4586:0,4587:0,4588:0,4589:0,4647:0,4652:0,4653:0,4654:0,4655:0,4656:0,4766:0,4767:0,4768:0,4769:0,4770:0,4771:0,4772:0,4773:0,4774:0,4775:0,4776:0,4777:0,4778:0,4779:0,4780:0,4781:0,4782:0,4783:0,4784:0,4785:0,4786:0,4787:0,4788:0,4789:0,4790:0,4791:0,4792:0,4793:0,4794:0,4795:0,4796:0,4797:0,4798:0,4799:0,4800:0,4822:0,4826:0,4839:0,5014:0,5015:0,5016:0,5018:0,5048:0,5069:0,5070:0,5071:0,5072:0,5105:0,5106:0,5107:0,5108:0,5109:0,5110:0,5111:0,5112:0,5113:0,5114:0,5115:0,5116:0,5117:0,5118:0,5119:0,5120:0,5121:0,5122:0,5123:0,5124:0,5125:0,5126:0,5127:0,5128:0,5129:0,5130:0,5167:0,5168:0,5173:0,5174:0,5175:0,5176:0,5177:0,5178:0,5179:0,5180:0,5181:0,5182:0,5183:0,5184:0,5185:0,5186:0,5187:0,5188:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5253:0,5254:0,5255:0,5256:0,5257:0,5258:0,5259:0,5266:0,5269:0,5270:0,5271:0,5272:0,5273:0,5274:0,5275:0,5292:0,5293:0,5294:0,5295:0,5296:0,5297:0,5298:0,5299:0,5300:0,5301:0,5302:0,5303:0,5304:0,5305:0,5306:0,5307:0,5308:0,5309:0,5310:0,5311:0,5316:0,5320:0,5321:0,5325:0,5329:0,5330:0,5331:0,5337:0,5343:0,5344:0,5345:0,5346:0,5347:0,5348:0,5349:0,5355:0,5356:0,5357:0,5361:0,5362:0,5367:0,5382:0,5383:0,5387:0,5388:0,5389:0,5396:0,5456:0,5457:0,5459:0,5460:0,5461:0,5462:0,5463:0,5469:0,5472:4,5479:0,5480:0,5481:0,5482:0,5490:0,5513:0,5514:0,5518:0,5519:0,5520:0,5523:0,5530:0,5531:0,5532:0,5533:0,5534:0,5535:0,5536:0,5537:0,5538:0,5539:0,5550:0,5551:0,5552:0,5559:0,5562:0,5563:0,5564:0,5565:0,5566:0,5567:0,5568:0,5569:0,5570:0,5571:0,5572:0,5573:0,5574:0,5575:0,5576:0,5577:0,5578:0,5579:0,5580:0,5581:0,5582:0,5583:0,5588:1,5589:3,5596:0,5623:2,5624:2,5625:2,5627:0,5629:0,5631:0,5632:0,5633:0,5634:0,5635:0,5636:0,5637:0,5638:0,5639:0,5641:0,5643:0,5644:0,5646:2,5649:0,5650:0,5651:0,5652:0,5653:0,5654:2,5655:2,5659:0,5663:0,5664:0,5665:0,5666:0,5667:0,5668:0,5669:0,5670:0,5671:0,5672:0,5673:0,5674:0,5675:0,5676:0,5677:0,5678:0,5679:0,5680:0,5682:0,5683:0,5684:0,5685:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5875:0,5876:0,5877:0,5879:0,5880:0,5887:0,5890:0,5921:0,5922:0,5923:0,5924:0,5925:0,5926:0,5927:0,5928:0,5929:0,5930:0,5931:0,5932:0,5933:0,5934:0,5935:0,5936:0,5937:0,5938:0,5939:0,5940:0,6050:0,6051:0,6052:0,6053:0,6054:0,6055:0,6056:0,6057:0,6058:0,6059:0,6060:0,6061:0,6062:0,6063:0,6064:0,6065:0,6066:0,6067:0,6068:0,6069:0,6070:0,6071:0,6072:0,6073:0,6074:0,6075:0,6076:0,6077:0,6078:0,6079:0,6080:0,6081:0,6082:0,6083:0,6084:0,6085:0,6086:0,6087:0,6088:0,6089:0,6090:0,6091:0,6092:0,6093:0,6094:0,6095:0,6096:0,6097:0,6098:0,6099:0,6100:0,6101:0,6102:0,6103:0,6104:0,6105:0,6106:0,6107:0,6108:0,6109:0,6110:0,6111:0,6112:0,6113:0,6114:0,6115:0,6116:0,6117:0,6118:0,6119:0,6120:0,6121:0,6122:0,6123:0,6124:0,6125:0,6128:1,6129:1,6141:1,6210:0,6211:0,6244:0,6245:0,6246:0,6247:0,6248:0,6249:0,6250:0,6251:0,6252:0,6253:0,6254:0,6255:0,6256:0,6257:0,6258:0,6259:0,6260:0,6261:0,6262:0,6263:0,6264:0,6265:0,6266:0,6267:0,6268:0,6269:0,6270:0,6271:0,6272:0,6273:0,6274:0,6275:0,6316:0,6328:0,6329:0,6330:0,6331:0,6332:0,6333:0,6334:0,6335:0,6336:0,6337:0,6338:0,6339:0,6340:0,6341:0,6342:0,6343:0,6344:0,6345:0,6346:0,6347:0,6348:0,6350:0,6351:0,6352:0,6353:0,6354:0,6391:1,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20791:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21782:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:10,24371:10,24372:10,24373:10,24374:10,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25000:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:2,26730:2,26731:2,26732:2,26733:2,26734:2,26735:2,26736:2,26737:2,26738:2,26739:2,26740:2,26741:2,26742:2,26743:2,26744:2,26745:2,26746:2,26747:2,26748:2,26749:2,26750:2,26751:2,26752:2,26753:2,26754:2,26755:2,26756:2,26757:2,26758:2,26759:2,26760:2,26761:2,26762:2,26763:2,26764:2,26765:2,26766:2,26767:2,26768:2,26769:2,26770:2,26771:2,26772:2,26773:2,26774:2,26775:2,26776:2,26777:2,26778:2,26779:2,26780:2,26781:2,26782:2,26783:2,26784:2,26785:2,26786:2,26787:2,26788:2,26789:2,26790:2,26791:2,26792:2,26793:2,26794:2,26795:2,26796:2,26797:2,26798:2,26799:2,26801:2,26802:2,26803:2,26811:2,26812:2,26813:2,26847:2,26848:2,26849:2,26850:2,26851:2,26852:2,26853:2,26854:2,26855:2,26856:2,26857:2,26858:2,26859:2,26860:2,26861:2,26862:2,26863:2,26864:2,26865:2,26866:2,26867:2,26868:2,26869:2,26870:2,26891:0,26892:0,26893:0,26894:0,26895:0,26896:0,26897:0,26898:0,26899:0,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:6,27292:6,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27493:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:5,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31965:0,31966:0,31967:0,31968:0,31969:0,31970:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32000:0,32001:2,32002:2,32003:2,32005:2,32006:2,32007:2,32008:2,32009:2,32010:2,32011:2,32012:2,32013:2,32014:2,32015:2,32016:2,32017:2,32018:2,32019:2,32020:2,32021:2,32022:2,32023:2,32024:2,32025:2,32026:2,32027:2,32028:2,32029:2,32030:2,32031:2,32033:2,32034:2,32035:2,32036:2,32037:2,32038:2,32039:2,32040:2,32041:2,32042:2,32043:2,32044:2,32045:2,32046:2,32047:2,32048:2,32049:2,32050:2,32051:2,32052:2,32053:2,32054:2,32055:2,32056:2,32057:2,32058:2,32059:2,32060:2,32061:0,32062:0,32064:2,32065:2,32066:2,32067:2,32074:2,32075:2,32076:2,32077:2,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:2,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:2,32165:2,32166:2,32167:2,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:2,32665:2,32666:2,32667:2,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:2,65062:2,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102040:0,102041:2,102042:0,102043:0,102044:0,102045:0,102046:0,102047:0,102048:0,102049:0,102050:0,102051:0,102052:0,102053:0,102054:0,102055:0,102056:0,102057:0,102058:0,102059:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:14,102069:15,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102080:0,102081:0,102082:0,102083:0,102084:0,102085:0,102086:0,102087:0,102088:0,102089:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:2,102119:1,102120:2,102121:2,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102204:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102212:0,102213:0,102214:0,102215:0,102216:0,102217:2,102218:0,102219:2,102220:2,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102247:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102299:0,102300:0,102301:0,102302:0,102303:0,102304:0,102305:0,102306:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102319:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102328:0,102329:0,102330:0,102331:0,102332:0,102333:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102359:0,102360:0,102361:0,102362:0,102363:0,102364:0,102365:0,102366:0,102367:0,102368:0,102369:0,102370:0,102371:0,102372:0,102373:0,102374:0,102375:0,102376:0,102377:0,102378:1,102379:1,102380:0,102381:1,102382:0,102383:0,102384:0,102385:0,102386:0,102387:0,102388:0,102389:2,102390:2,102391:2,102392:2,102393:2,102394:2,102395:2,102396:2,102397:2,102398:2,102401:0,102402:0,102403:0,102404:0,102405:0,102406:0,102407:0,102408:0,102409:0,102410:0,102411:0,102412:0,102413:0,102414:0,102415:0,102416:0,102417:0,102418:0,102419:0,102420:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102439:0,102440:0,102441:0,102442:0,102443:0,102444:0,102445:2,102446:2,102447:2,102450:0,102451:0,102452:0,102461:2,102462:2,102463:2,102464:2,102465:2,102466:2,102467:2,102468:2,102469:0,102470:0,102471:0,102472:0,102473:0,102474:0,102475:0,102476:0,102477:0,102478:0,102479:0,102480:0,102481:0,102482:0,102483:0,102484:0,102485:0,102486:0,102487:0,102488:0,102489:0,102490:0,102491:0,102492:0,102493:0,102494:0,102495:0,102496:0,102500:1,102501:1,102502:1,102503:1,102504:1,102505:1,102506:1,102507:1,102508:1,102509:1,102510:1,102511:1,102512:1,102513:1,102514:1,102515:1,102516:1,102517:1,102518:1,102519:1,102520:0,102521:0,102522:0,102523:0,102524:0,102525:2,102526:2,102527:2,102528:2,102529:2,102530:0,102531:0,102532:0,102533:0,102534:0,102535:0,102536:0,102537:0,102538:0,102539:0,102540:0,102541:0,102542:0,102543:0,102544:0,102545:0,102546:0,102547:0,102548:0,102549:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102585:0,102586:0,102587:0,102588:0,102589:2,102590:0,102591:0,102592:0,102593:0,102594:0,102595:0,102596:0,102597:0,102598:0,102599:2,102600:2,102601:0,102602:0,102603:0,102604:2,102605:0,102606:0,102607:0,102608:0,102609:0,102610:0,102611:0,102612:0,102613:0,102614:0,102615:0,102616:0,102617:0,102618:0,102619:0,102620:0,102621:0,102622:0,102623:0,102624:0,102625:0,102626:0,102627:0,102628:0,102629:2,102630:2,102631:2,102632:2,102633:2,102634:2,102635:2,102636:2,102637:2,102638:2,102639:2,102640:2,102641:2,102642:2,102643:2,102644:2,102645:2,102646:2,102647:0,102648:2,102649:2,102650:2,102651:2,102652:2,102653:2,102654:2,102655:2,102656:2,102657:2,102658:2,102659:2,102660:2,102661:2,102662:2,102663:2,102664:2,102665:2,102666:2,102667:2,102668:2,102669:2,102670:2,102671:2,102672:2,102673:2,102674:2,102675:2,102676:2,102677:2,102678:2,102679:2,102680:2,102681:2,102682:2,102683:2,102684:2,102685:2,102686:2,102687:2,102688:2,102689:2,102690:2,102691:2,102692:2,102693:2,102694:2,102695:2,102696:2,102697:2,102698:2,102699:2,102700:2,102701:0,102702:0,102703:0,102704:2,102705:2,102707:2,102708:2,102709:2,102710:2,102711:2,102712:2,102713:2,102714:2,102715:2,102716:2,102717:2,102718:2,102719:2,102720:2,102721:2,102722:2,102723:2,102724:2,102725:2,102726:2,102727:2,102728:2,102729:2,102730:2,102733:2,102734:2,102735:2,102736:2,102737:2,102738:2,102739:2,102740:2,102741:2,102742:2,102743:2,102744:2,102745:2,102746:2,102747:2,102748:2,102749:2,102750:2,102751:2,102752:2,102753:2,102754:2,102755:2,102756:2,102757:2,102758:2,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102767:0,102768:0,102769:0,102770:0,102771:0,102772:0,102773:0,102774:0,102775:0,102776:0,102777:0,102778:0,102779:0,102780:0,102781:0,102782:0,102783:0,102784:0,102785:0,102786:0,102787:0,102788:0,102789:0,102790:0,102791:0,102792:0,102793:0,102794:0,102795:0,102796:0,102797:0,102798:0,102962:0,102963:0,102964:0,102965:0,102966:0,102967:0,102968:0,102969:0,102970:1,102971:0,102972:0,102973:0,102974:2,102975:0,102976:0,102977:0,102978:0,102979:0,102980:0,102981:0,102982:0,102983:0,102984:0,102985:0,102986:0,102987:0,102988:0,102989:0,102990:1,102991:1,102992:1,102993:0,102994:0,102995:2,102996:2,102997:0,102998:0,102999:0,103000:0,103001:0,103002:0,103003:2,103004:2,103005:2,103006:2,103007:2,103008:2,103009:0,103010:0,103011:0,103012:2,103013:2,103014:2,103015:0,103016:2,103017:0,103018:2,103019:0,103020:0,103021:0,103022:2,103023:2,103024:2,103025:0,103026:0,103027:2,103028:2,103029:0,103030:0,103031:0,103032:2,103033:2,103034:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103065:0,103066:0,103067:0,103068:0,103069:2,103070:0,103071:0,103072:2,103073:2,103074:0,103075:0,103076:0,103077:1,103078:1,103079:1,103080:0,103081:0,103082:0,103083:2,103084:2,103085:2,103086:0,103087:0,103088:2,103089:2,103090:0,103091:0,103092:0,103093:0,103094:1,103095:0,103096:2,103097:0,103098:0,103099:0,103100:2,103101:2,103102:2,103103:0,103104:2,103105:0,103106:2,103107:0,103108:0,103109:0,103110:2,103111:2,103112:2,103113:0,103114:0,103115:0,103116:0,103117:2,103118:2,103119:2,103120:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103153:0,103154:0,103155:0,103156:0,103157:0,103158:2,103159:2,103160:2,103161:2,103162:2,103163:0,103164:0,103165:0,103166:1,103167:1,103168:1,103169:2,103170:2,103171:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103186:0,103187:0,103188:0,103189:2,103190:2,103191:2,103192:0,103193:0,103194:0,103195:0,103196:2,103197:2,103198:2,103199:2,103200:0,103201:0,103202:0,103203:0,103204:0,103205:0,103206:0,103207:0,103208:0,103209:0,103210:0,103211:0,103212:0,103213:0,103214:0,103215:0,103216:0,103217:0,103218:0,103219:0,103220:0,103221:0,103222:0,103223:0,103224:0,103225:1,103226:1,103227:1,103228:0,103229:0,103230:2,103231:2,103232:0,103233:0,103234:0,103235:0,103236:0,103237:0,103238:2,103239:2,103240:2,103241:2,103242:2,103243:2,103244:0,103245:0,103246:0,103247:2,103248:2,103249:2,103250:0,103251:2,103252:0,103253:2,103254:0,103255:0,103256:0,103257:2,103258:2,103259:2,103260:0,103261:0,103262:2,103263:2,103264:0,103265:0,103266:0,103267:2,103268:2,103269:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103372:0,103373:0,103374:0,103375:0,103376:2,103377:0,103378:0,103379:2,103380:2,103381:0,103382:0,103383:0,103384:1,103385:1,103386:1,103387:0,103388:0,103389:0,103390:2,103391:2,103392:2,103393:0,103394:0,103395:2,103396:2,103397:0,103398:0,103399:0,103400:2,103401:2,103402:2,103403:2,103404:2,103405:2,103406:2,103407:2,103408:2,103409:2,103410:2,103411:2,103412:2,103413:2,103414:2,103415:2,103416:2,103417:2,103418:2,103419:2,103420:2,103421:2,103422:2,103423:2,103424:2,103425:2,103426:2,103427:2,103428:2,103429:2,103430:2,103431:2,103432:2,103433:2,103434:2,103435:2,103436:2,103437:2,103438:2,103439:2,103440:2,103441:2,103442:2,103443:2,103444:2,103445:2,103446:2,103447:2,103448:2,103449:2,103450:2,103451:2,103452:2,103453:2,103454:2,103455:2,103456:2,103457:2,103458:2,103459:2,103460:2,103461:2,103462:2,103463:2,103464:2,103465:2,103466:2,103467:2,103468:2,103469:2,103470:2,103471:2,103472:0,103473:1,103474:0,103475:2,103476:0,103477:0,103478:0,103479:2,103480:2,103481:2,103482:0,103483:2,103484:0,103485:2,103486:0,103487:0,103488:0,103489:2,103490:2,103491:2,103492:0,103493:0,103494:0,103495:0,103496:2,103497:2,103498:2,103499:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103539:0,103540:0,103541:0,103542:0,103543:0,103544:2,103545:2,103546:2,103547:2,103548:2,103549:0,103550:0,103551:0,103552:1,103553:1,103554:1,103555:2,103556:2,103557:2,103558:0,103559:0,103560:0,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103571:0,103572:0,103573:0,103574:2,103575:2,103576:2,103577:0,103578:0,103579:0,103580:0,103581:2,103582:2,103583:2,103584:0,103585:2,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103694:0,103695:2,103700:2,103701:2,103702:2,103703:2,103704:2,103705:2,103706:2,103707:2,103708:2,103709:2,103710:2,103711:2,103712:2,103713:2,103714:2,103715:2,103716:2,103717:2,103718:2,103719:2,103720:2,103721:2,103722:2,103723:2,103724:2,103725:2,103726:2,103727:2,103728:2,103729:2,103730:2,103731:2,103732:2,103733:2,103734:2,103735:2,103736:2,103737:2,103738:2,103739:2,103740:2,103741:2,103742:2,103743:2,103744:2,103745:2,103746:2,103747:2,103748:2,103749:2,103750:2,103751:2,103752:2,103753:2,103754:2,103755:2,103756:2,103757:2,103758:2,103759:2,103760:2,103761:2,103762:2,103763:2,103764:2,103765:2,103766:2,103767:2,103768:2,103769:2,103770:2,103771:2,103772:2,103773:2,103774:2,103775:2,103776:2,103777:2,103778:2,103779:2,103780:2,103781:2,103782:2,103783:2,103784:2,103785:2,103786:2,103787:2,103788:2,103789:2,103790:2,103791:2,103792:2,103793:2,103794:0,103795:0,103796:0,103797:0,103798:0,103799:0,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:2,103901:2,103902:2,103903:2,103904:2,103905:2,103906:2,103907:2,103908:2,103909:2,103910:2,103911:2,103912:2,103913:2,103914:2,103915:2,103916:2,103917:2,103918:2,103919:2,103920:2,103921:2,103922:2,103923:2,103924:2,103925:2,103926:2,103927:2,103928:2,103929:2,103930:2,103931:2,103932:2,103933:2,103934:2,103935:2,103936:2,103937:2,103938:2,103939:2,103940:2,103941:2,103942:2,103943:2,103944:2,103945:2,103946:2,103947:2,103948:2,103949:2,103950:2,103951:2,103952:2,103953:2,103954:2,103955:2,103956:2,103957:2,103958:2,103959:2,103960:2,103961:2,103962:2,103963:2,103964:2,103965:2,103966:2,103967:2,103968:2,103969:2,103970:2,103971:2};});},"esri/geometry/screenUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff","../kernel","./Point","./ScreenPoint","./Polyline","./Polygon","./Multipoint","./Extent"],function(B,F,C,G,t,D,x,y,z,A){var E=function(){return 9>C("ie")?function(b,n,p,a,g,e,f,c,h){var d=[],l=Math.round,r,s=f.length,m,k,u,q,v,w;for(r=0;r<s;r++){if(m=f[r],q=c?c(m[0][0],m[0][1],h):m[0],1<(u=m.length)){v=l((q[0]-b)*p+g);w=l((n-q[1])*a+e);q=c?c(m[1][0],m[1][1],h):m[1];k=l((q[0]-b)*p+g);q=l((n-q[1])*a+e);d.push("M",v+","+w,"L",k+","+q);for(k=2;k<u;k++){q=c?c(m[k][0],m[k][1],h):m[k],v=l((q[0]-b)*p+g),w=l((n-q[1])*a+e),d.push(v+","+w);}}else{v=l((q[0]-b)*p+g),w=l((n-q[1])*a+e),d.push("M",v+","+w);}}return d;}:function(b,n,p,a,g,e,f,c,h){var d=[],l,r,s,m,k,u,q=Math.round;l=0;for(s=f?f.length:0;l<s;l++){k=f[l];d.push("M");r=0;for(m=k?k.length:0;r<m;r++){u=c?c(k[r][0],k[r][1],h):k[r],d.push(q((u[0]-b)*p+g)+","+q((n-u[1])*a+e));}}return d;};}();return {toScreenPoint:function(b,n,p,a,g){var e=b.spatialReference,f=a.spatialReference,c=a.x;a=a.y;e&&(f&&!e.equals(f)&&e._canProject(f))&&(e=e.isWebMercator()?t.lngLatToXY(c,a):t.xyToLngLat(c,a,!0),c=e[0],a=e[1]);c=(c-b.xmin)*(n/b.getWidth());a=(b.ymax-a)*(p/b.getHeight());g||(c=Math.round(c),a=Math.round(a));return new D(c,a);},toScreenGeometry:function(b,n,p,a){var g=b.xmin,e=b.ymax,f=n/b.getWidth(),c=p/b.getHeight(),h=B.forEach,d=Math.round;if(a instanceof t){return new t(d((a.x-g)*f),d((e-a.y)*c));}if(a instanceof z){b=new z;var l=b.points;h(a.points,function(a,b){l[b]=[d((a[0]-g)*f),d((e-a[1])*c)];});return b;}if(a instanceof A){return new A(d((a.xmin-g)*f),d((e-a.ymin)*c),d((a.xmax-g)*f),d((e-a.ymax)*f));}if(a instanceof x){b=new x;var r=b.paths,s;h(a.paths,function(a,b){s=r[b]=[];h(a,function(a,b){s[b]=[d((a[0]-g)*f),d((e-a[1])*c)];});});return b;}if(a instanceof y){b=new y;var m=b.rings,k;h(a.rings,function(a,b){k=m[b]=[];h(a,function(a,b){k[b]=[d((a[0]-g)*f),d((e-a[1])*c)];});});return b;}},_toScreenPath:function(b,n,p,a,g,e){var f=a instanceof x,c=b.spatialReference,h=a.spatialReference,d,l;c&&(h&&!c.equals(h)&&c._canProject(h))&&(c.isWebMercator()?d=t.lngLatToXY:(d=t.xyToLngLat,l=!0));return E(b.xmin,b.ymax,n/b.getWidth(),p/b.getHeight(),g,e,f?a.paths:a.rings,d,l);},toMapPoint:function(b,n,p,a){return new t(b.xmin+a.x/(n/b.getWidth()),b.ymax-a.y/(p/b.getHeight()),b.spatialReference);},toMapGeometry:function(b,n,p,a){var g=b.xmin,e=b.ymax,f=b.spatialReference,c=n/b.getWidth(),h=p/b.getHeight(),d=B.forEach;if(a instanceof t){return new t(g+a.x/c,e-a.y/h,f);}if(a instanceof z){b=new z(f);var l=b.points;d(a.points,function(a,b){l[b]=[g+a[0]/c,e-a[1]/h];});return b;}if(a instanceof A){return new A(g+a.xmin/c,e-a.ymin/h,g+a.xmax/c,e-a.ymax/h,f);}if(a instanceof x){b=new x(f);var r=b.paths,s;d(a.paths,function(a,b){s=r[b]=[];d(a,function(a,b){s[b]=[g+a[0]/c,e-a[1]/h];});});return b;}if(a instanceof y){b=new y(f);var m=b.rings,k;d(a.rings,function(a,b){k=m[b]=[];d(a,function(a,b){k[b]=[g+a[0]/c,e-a[1]/h];});});return b;}}};});},"esri/geometry/Polyline":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../lang","../SpatialReference","./Geometry","./Point","./Extent"],function(f,h,d,C,D,z,A,B,g,v){var y={type:"polyline",paths:null};f=f(B,{declaredClass:"esri.geometry.Polyline",constructor:function(a){d.mixin(this,y);this.paths=[];this._path=0;a&&(d.isArray(a)?this.paths=d.isArray(a[0][0])?a:[a]:a.paths?d.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=new A(this.spatialReference)));this.verifySR();},_extent:null,addPath:function(a){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];d.isArray(a[0])?h.forEach(a,this._addPointArr,this):h.forEach(a,this._addPoint,this);return this;},_addPointArr:function(a){this.paths[this._path].push(a);},_addPoint:function(a){this.paths[this._path].push([a.x,a.y]);},_insertPoints:function(a,b){this._extent=null;this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);h.forEach(a,this._addPoint,this);},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0;},getPoint:function(a,b){if(this._validateInputs(a,b)){return new g(this.paths[a][b],this.spatialReference);}},setPoint:function(a,b,c){if(this._validateInputs(a,b)){return this._extent=null,this.paths[a][b]=[c.x,c.y],this;}},insertPoint:function(a,b,c){if(this._validateInputs(a)&&z.isDefined(b)&&0<=b&&b<=this.paths[a].length){return this._extent=null,this.paths[a].splice(b,0,[c.x,c.y]),this;}},removePath:function(a){if(this._validateInputs(a,null)){this._extent=null;a=this.paths.splice(a,1)[0];var b,c=a.length,e=this.spatialReference;for(b=0;b<c;b++){a[b]=new g(a[b],e);}return a;}},removePoint:function(a,b){if(this._validateInputs(a,b)){return this._extent=null,new g(this.paths[a].splice(b,1)[0],this.spatialReference);}},getExtent:function(){var a;if(this._extent){return a=new v(this._extent),a._partwise=this._partwise,a;}a=this.paths;var b=a.length;if(b&&a[0].length){var c,e,d,f,k,l,m,h,g=f=a[0][0][0],w=k=a[0][0][1],n=Math.min,p=Math.max,q=this.spatialReference,x=[],r,s,t,u;for(l=0;l<b;l++){c=a[l];r=s=c[0]&&c[0][0];t=u=c[0]&&c[0][1];h=c.length;for(m=0;m<h;m++){e=c[m],d=e[0],e=e[1],g=n(g,d),w=n(w,e),f=p(f,d),k=p(k,e),r=n(r,d),t=n(t,e),s=p(s,d),u=p(u,e);}x.push(new v({xmin:r,ymin:t,xmax:s,ymax:u,spatialReference:q?q.toJson():null}));}this._extent={xmin:g,ymin:w,xmax:f,ymax:k,spatialReference:q?q.toJson():null};this._partwise=1<x.length?x:null;a=new v(this._extent);a._partwise=this._partwise;return a;}},toJson:function(){var a={paths:d.clone(this.paths)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a;}});f.defaultProps=y;return f;});},"esri/geometry/Polygon":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../lang","../SpatialReference","./Geometry","./Point","./Extent","./mathUtils"],function(A,m,k,E,F,B,C,D,n,v,y){var z={type:"polygon",rings:null},l=A(D,{declaredClass:"esri.geometry.Polygon",constructor:function(a){k.mixin(this,z);this.rings=[];this._ring=0;a&&(k.isArray(a)?this.rings=k.isArray(a[0][0])?a:[a]:a.rings?k.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=new C(this.spatialReference)));this.verifySR();},_extent:null,addRing:function(a){this._extent=this._centroid=null;this._ring=this.rings.length;this.rings[this._ring]=[];k.isArray(a[0])?m.forEach(a,this._addPointArr,this):m.forEach(a,this._addPoint,this);return this;},_addPointArr:function(a){this.rings[this._ring].push(a);},_addPoint:function(a){this.rings[this._ring].push([a.x,a.y]);},_insertPoints:function(a,b){this._extent=this._centroid=null;this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);m.forEach(a,this._addPoint,this);},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0;},getPoint:function(a,b){if(this._validateInputs(a,b)){return new n(this.rings[a][b],this.spatialReference);}},setPoint:function(a,b,c){if(this._validateInputs(a,b)){return this._extent=this._centroid=null,this.rings[a][b]=[c.x,c.y],this;}},insertPoint:function(a,b,c){if(this._validateInputs(a)&&B.isDefined(b)&&0<=b&&b<=this.rings[a].length){return this._extent=this._centroid=null,this.rings[a].splice(b,0,[c.x,c.y]),this;}},removeRing:function(a){if(this._validateInputs(a,null)){this._extent=this._centroid=null;a=this.rings.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++){a[b]=new n(a[b],d);}return a;}},removePoint:function(a,b){if(this._validateInputs(a,b)){return this._extent=this._centroid=null,new n(this.rings[a].splice(b,1)[0],this.spatialReference);}},getExtent:function(){var a;if(this._extent){return a=new v(this._extent),a._partwise=this._partwise,a;}a=this.rings;var b=a.length;if(b&&a[0].length){var c,d,e,g,h,f,p,q,l=g=a[0][0][0],w=h=a[0][0][1],k=Math.min,m=Math.max,n=this.spatialReference,x=[],r,s,t,u;for(f=0;f<b;f++){c=a[f];r=s=c[0]&&c[0][0];t=u=c[0]&&c[0][1];q=c.length;for(p=0;p<q;p++){d=c[p],e=d[0],d=d[1],l=k(l,e),w=k(w,d),g=m(g,e),h=m(h,d),r=k(r,e),t=k(t,d),s=m(s,e),u=m(u,d);}x.push(new v({xmin:r,ymin:t,xmax:s,ymax:u,spatialReference:n?n.toJson():null}));}this._extent={xmin:l,ymin:w,xmax:g,ymax:h,spatialReference:n?n.toJson():null};this._partwise=1<x.length?x:null;a=new v(this._extent);a._partwise=this._partwise;return a;}},contains:function(a){var b=this.rings,c,d=!1,e,g,h,f,p,q,k=b.length;c=this.spatialReference;e=a.spatialReference;var l=a.x;a=a.y;c&&(e&&!c.equals(e)&&c._canProject(e))&&(a=c.isWebMercator()?n.lngLatToXY(l,a):n.xyToLngLat(l,a,!0),l=a[0],a=a[1]);for(q=0;q<k;q++){c=b[q];h=c.length;for(p=f=0;p<h;p++){if(f++,f===h&&(f=0),e=c[p],g=c[f],(e[1]<a&&g[1]>=a||g[1]<a&&e[1]>=a)&&e[0]+(a-e[1])/(g[1]-e[1])*(g[0]-e[0])<l){d=!d;}}}return d;},getCentroid:function(){if(null!=this._centroid){return this._centroid;}var a,b,c,d,e=[],g,h;m.forEach(this.rings,function(d){a=b=c=0;m.forEach(d,function(e,l){l<d.length-1&&(g=d[l+1],h=e[0]*g[1]-g[0]*e[1],a+=(e[0]+g[0])*h,b+=(e[1]+g[1])*h,c+=h);});0<c&&(c*=-1);e.push([a,b,c/2]);});e.sort(function(a,c){return a[2]-c[2];});d=6*e[0][2];return this._centroid=new n(e[0][0]/d,e[0][1]/d,this.spatialReference);},isClockwise:function(a){var b=0,c,d=a.length,e=k.isArray(a[0])?function(a,c){return a[0]*c[1]-c[0]*a[1];}:function(a,c){return a.x*c.y-c.x*a.y;};for(c=0;c<d;c++){b+=e(a[c],a[(c+1)%d]);}return 0>=b/2;},isSelfIntersecting:function(a){a=a||this;var b,c,d,e,g,h,f,l=a.rings.length,k;for(d=0;d<l;d++){for(b=0;b<a.rings[d].length-1;b++){g=[[a.rings[d][b][0],a.rings[d][b][1]],[a.rings[d][b+1][0],a.rings[d][b+1][1]]];for(c=d+1;c<l;c++){for(e=0;e<a.rings[c].length-1;e++){if(h=[[a.rings[c][e][0],a.rings[c][e][1]],[a.rings[c][e+1][0],a.rings[c][e+1][1]]],(f=y._getLineIntersection2(g,h))&&!(f[0]===g[0][0]&&f[1]===g[0][1]||f[0]===h[0][0]&&f[1]===h[0][1]||f[0]===g[1][0]&&f[1]===g[1][1]||f[0]===h[1][0]&&f[1]===h[1][1])){return !0;}}}}e=a.rings[d].length;if(!(4>=e)){for(b=0;b<e-3;b++){k=e-1;0===b&&(k=e-2);g=[[a.rings[d][b][0],a.rings[d][b][1]],[a.rings[d][b+1][0],a.rings[d][b+1][1]]];for(c=b+2;c<k;c++){if(h=[[a.rings[d][c][0],a.rings[d][c][1]],[a.rings[d][c+1][0],a.rings[d][c+1][1]]],(f=y._getLineIntersection2(g,h))&&!(f[0]===g[0][0]&&f[1]===g[0][1]||f[0]===h[0][0]&&f[1]===h[0][1]||f[0]===g[1][0]&&f[1]===g[1][1]||f[0]===h[1][0]&&f[1]===h[1][1])){return !0;}}}}}return !1;},toJson:function(){var a={rings:k.clone(this.rings)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a;}});l.defaultProps=z;l.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.longAxis,e=a.shortAxis,g=a.numberOfPoints,h=a.map,f,k,m;a=[];var n=2*Math.PI/g;for(k=0;k<g;k++){f=Math.cos(k*n),m=Math.sin(k*n),f=h.toMap({x:d*f+b,y:e*m+c}),a.push(f);}a.push(a[0]);b=new l(h.spatialReference);b.addRing(a);return b;};l.createCircle=function(a){return l.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map});};l.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new l({rings:m.map(b,function(a){return [[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];}),spatialReference:a?a.toJson():null});};return l;});},"esri/geometry/Multipoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference","./Geometry","./Point","./Extent"],function(b,c,s,t,q,r,e,m){var f={type:"multipoint",points:null};b=b(r,{declaredClass:"esri.geometry.Multipoint",constructor:function(a){c.mixin(this,f);this.points=[];a&&(a.points?c.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=new q(this.spatialReference)));this.verifySR();},_extent:null,addPoint:function(a){this._extent=null;c.isArray(a)?this.points.push(a):this.points.push([a.x,a.y]);return this;},removePoint:function(a){if(this._validateInputs(a)){return this._extent=null,new e(this.points.splice(a,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new m(this._extent);}var a=this.points,n=a.length;if(n){var d=a[0],b,c,h=b=d[0],k=c=d[1],e=Math.min,f=Math.max,p=this.spatialReference,l,g;for(g=0;g<n;g++){d=a[g],l=d[0],d=d[1],h=e(h,l),k=e(k,d),b=f(b,l),c=f(c,d);}this._extent={xmin:h,ymin:k,xmax:b,ymax:c,spatialReference:p?p.toJson():null};return new m(this._extent);}},_validateInputs:function(a){return null===a||0>a||a>=this.points.length?!1:!0;},getPoint:function(a){if(this._validateInputs(a)){return a=this.points[a],new e(a[0],a[1],this.spatialReference);}},setPoint:function(a,b){if(this._validateInputs(a)){return this._extent=null,this.points[a]=[b.x,b.y],this;}},toJson:function(){var a={points:c.clone(this.points)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a;}});b.defaultProps=f;return b;});},"esri/layers/GraphicsLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojox/gfx","dojox/gfx/matrix","./layer","../kernel","../lang","../sniff","../Color","../domUtils","../symbols/MarkerSymbol","../symbols/SimpleMarkerSymbol","../geometry/Point","../geometry/ScreenPoint","../geometry/Extent","../geometry/mathUtils","../geometry/screenUtils","../PluginTarget"],function(x,v,y,n,I,N,G,A,u,S,T,O,H,U,D,V,w,P,J,B,Q,K,W){var L,M=-1!==A.renderer.toLowerCase().indexOf("svg"),E=-1!==A.renderer.toLowerCase().indexOf("canvas"),t=9>H("ie"),R=H("esri-touch"),X=x(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(a,b){var c,e=this._connects=[];this._map=a;E?(c=N.create("div",{style:"overflow: visible; position: absolute;"},b),this._surface={getEventSource:function(){return c;}},e.push(v.connect(c,"onmousedown",this,this._canvasDownHandler)),e.push(v.connect(c,"onmouseup",this,this._canvasUpHandler)),e.push(v.connect(c,"onclick",this,this._canvasClickHandler)),L.prototype._canvas=!0):(c=(this._surface=A.createSurface(b,a.width,a.height)).getEventSource(),G.set(c=t?c.parentNode:c,{overflow:"visible",position:"absolute"}));e.push(v.connect(a,"onResize",this,"_onResizeHandler"));return c;},_onResizeHandler:function(a,b,c){a=this._surface.getEventSource();var e=this._map,d;t&&G.set(a=a.parentNode,{width:b+"px",height:c+"px",clip:"rect(0px "+b+"px "+c+"px 0px)"});I.set(a,"width",b);I.set(a,"height",c);this._surface.declaredClass||n.forEach(a.childNodes,function(a){I.set(a,"width",b);I.set(a,"height",c);});e.loaded&&(e.graphics.suspended||(e.graphics._resized=!0),n.forEach(e.graphicsLayerIds,function(a){d=e.getLayer(a);d.suspended||(d._resized=!0);}));},_cleanUp:function(){n.forEach(this._connects,v.disconnect,v);this._map=this._surface=null;},_processEvent:function(a){var b=this._map;a.screenPoint=new J(a.pageX-b.position.x,a.pageY-b.position.y);a.mapPoint=b.toMap(a.screenPoint);},_canvasDownHandler:function(a){this._processEvent(a);this._downPt=a.screenPoint.x+","+a.screenPoint.y;},_canvasUpHandler:function(a){this._processEvent(a);this._upPt=a.screenPoint.x+","+a.screenPoint.y;},_tolerance:15,_isPrimaryMatch:function(a,b,c,e){if(!a.visible||!b){return !1;}var d=b.getTransformedBoundingBox(),g;return d?(g=new B(d[0].x,d[0].y,d[2].x,d[2].y),delete g.spatialReference,R?g.intersects(c):g.contains(e)):n.some(b.children||[],function(a){d=a.getTransformedBoundingBox();g=new B(d[0].x,d[0].y,d[2].x,d[2].y);delete g.spatialReference;return R?g.intersects(c):g.contains(e);});},_canvasClickHandler:function(a){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(a);var b=this._map,c=n.map(b.graphicsLayerIds,function(a){return b.getLayer(a);});c.push(b.graphics);c.reverse();var c=n.filter(c,function(a){return a.loaded&&a._mouseEvents&&!a.suspended&&(!O.isDefined(a.opacity)||0<a.opacity);}),e=a.screenPoint,d=this._tolerance,g=e.x-d,f=e.y+d,h=e.x+d,d=e.y-d,k=new B(g,d,h,f),g=b.toMap(new J(g,f)),h=b.toMap(new J(h,d)),f=g.spatialReference._getInfo(),l=new B(B.prototype._normalizeX(g.x,f).x,g.y,B.prototype._normalizeX(h.x,f).x,h.y,g.spatialReference),m;delete k.spatialReference;n.some(c,function(a){a=n.filter(a.graphics,function(a){return this._isPrimaryMatch(a,a.getDojoShape(),k,e)||!(!a._bgShape||!this._isPrimaryMatch(a,a._bgShape,k,e));},this);a.reverse();if(0<a.length){var c;n.some(a,function(a){return a.geometry&&l.intersects(a.geometry)?(c=a,!0):!1;});if(c){return m=c,!0;}}return !1;},this);if(m&&(c=m.getLayer())){a.graphic=m,c.onClick(a);}}}});L=x(S,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:E?"canvas-2d":A.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},constructor:function(a,b){if(a&&(y.isString(a)||y.isObject(a)&&(a.layerDefinition||a.query))){a=b;}this._params=y.mixin({displayOnPan:!0,drawMode:!0,styling:!0},a||{});var c=this._params.dataAttributes;"string"===typeof c&&(c=[c]);this.styling=M?this._params.styling:!0;this.dataAttributes=c;this.infoTemplate=a&&a.infoTemplate;this.graphics=[];this._draw=y.hitch(this,this._draw);this._refresh=y.hitch(this,this._refresh);this.registerConnectEvents();},getNode:function(){return this._div&&this._div.getEventSource();},setDrawMode:function(a){this._params.drawMode=a;},renderer:null,_setMap:function(a,b){this.inherited(arguments);this._map=a;this._wrap=a.wrapAround180;this._srInfo=a.spatialReference._getInfo();this._canvas?(b=A.createSurface(b.getEventSource(),a.width,a.height),G.set(b.rawNode,"position","absolute"),this._div=b.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=y.hitch(this,this._canvasRender)):this._div=b.createGroup();this._bgGroup=this._div.createGroup();this._div.getEventSource().id=this.id+"_layer";var c=this.opacity;O.isDefined(c)&&1>c&&this.setOpacity(c,!0);return this._div;},_unsetMap:function(a,b){n.forEach(this.graphics,function(a){a._shape=null;});this._canvas?(b=this._div.getParent(),b._parent={},N.destroy(b.rawNode),b.destroy()):(this._div.clear(),b.remove(this._div),N.destroy(this._div.getEventSource()));this._map=this._div=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onZoomStartHandler:function(){D.hide(this._div.getEventSource());},_onExtentChangeHandler:function(a,b,c,e){clearTimeout(this._wakeTimer);this._wakeTimer=null;c?(a=this._map.__visibleRect,b=this._div,this._evalSDRenderer(),this._refresh(!0),b.setTransform(u.translate({x:a.x,y:a.y})),this._renderProto&&b.surface.pendingRender?this._dirty=!0:this.suspended||D.show(b.getEventSource())):this._resized&&(this._refresh(!1),this._resized=!1);if(0<this.graphics.length){this.onUpdate();}},_canvasRender:function(){var a=this._div;this._dirty&&(delete this._dirty,this.suspended||D.show(a.getEventSource()));return this._renderProto.apply(a,arguments);},_refresh:function(a){var b=this.graphics,c=b.length,e,d=this._draw;for(e=0;e<c;e++){d(b[e],a);}},refresh:function(){this._refresh(!0);},redraw:function(){this._refresh(!0);},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._map.__visibleRect;this._div.setTransform(u.translate({x:c.x+b.x,y:c.y+b.y}));},_onPanEndUpdateHandler:function(a,b){if(!this._params._child&&(b.x!==this._panDx||b.y!==this._panDy)){var c=this._map.__visibleRect;this._div.setTransform(u.translate({x:c.x,y:c.y}));}this._refresh(!1);if(this.graphics.length){this.onUpdate();}},_onPanStartHandler:function(){D.hide(this._div.getEventSource());},_onPanEndHandler:function(){var a=this._map.__visibleRect,b=this._div;b.setTransform(u.translate({x:a.x,y:a.y}));this._refresh(!1);this._renderProto&&b.surface.pendingRender?this._dirty=!0:D.show(b.getEventSource());if(this.graphics.length){this.onUpdate();}},onSuspend:function(){this.inherited(arguments);D.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(a){this.inherited(arguments);a.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(y.hitch(this,function(){this.suspended||this._onExtentChangeHandler(null,null,!0);}),0);},_enableDrawConnectors:function(){var a=this._map,b=v.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=b(a,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=b(a,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var a=v.disconnect;a(this._onExtentChangeHandler_connect);a(this._onZoomStartHandler_connect);a(this._onPanHandler_connect);a(this._onPanStartHandler_connect);a(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null;},_updateExtent:function(a){var b=a.geometry;if(b){if(!(a._extent=b.getExtent())){var c,e;if("esri.geometry.Point"===b.declaredClass){c=b.x,e=b.y;}else{if("esri.geometry.Multipoint"===b.declaredClass){c=b.points[0][0],e=b.points[0][1];}else{a._extent=null;return;}}a._extent=new B(c,e,c,e,b.spatialReference);}}else{a._extent=null;}},_intersects:function(a,b,c){var e=a.spatialReference,d=b.spatialReference,g=e&&d&&!e.equals(d)&&e._canProject(d)&&4326===d.wkid;if(this._wrap&&!c){c=[];var e=a._getFrameWidth(),f=this._srInfo,h=a._clip?a._getAvailExtent():a.extent,k,l,m,q,p=[];k=b._partwise;g&&(h=a.geographicExtent,f=d._getInfo());a=h._getParts(f);if(k&&k.length){b=[];d=0;for(g=k.length;d<g;d++){b=b.concat(k[d]._getParts(f));}}else{b=b._getParts(f);}d=0;for(g=b.length;d<g;d++){m=b[d];f=0;for(h=a.length;f<h;f++){if(q=a[f],q.extent.intersects(m.extent)){k=0;for(l=m.frameIds.length;k<l;k++){c.push((q.frameIds[0]-m.frameIds[k])*e);}}}}d=0;for(g=c.length;d<g;d++){k=c[d],n.indexOf(c,k)===d&&p.push(k);}return p.length?p:null;}return (g?a.geographicExtent:a.extent).intersects(b)?[0]:null;},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(a,b){if(this._params.drawMode&&this._map&&!this.suspended){try{var c=a._extent,e,d,g=!M||this.styling,f=M&&this.dataAttributes,h=a.getDojoShape(),k;if(a.visible&&c&&(e=this._intersects(this._map,c,a.geometry._originOnly))&&(d=g?this._getSymbol(a):this._defaultMarker)){if(!a._offsets||a._offsets.join(",")!==e.join(",")?a._offsets=e:k=!0,!h||b||!k){var l=a.geometry.type,c={graphic:a},m=a._bgShape,q=g&&!a.symbol?this._getRenderer(a):null,p=q&&q.backgroundFillSymbol;if("point"===l){this._isInvalidShape(d,h)&&this._removeShape(a),a._shape=this._drawPoint(this._div,a.geometry,d,a.getDojoShape(),e,q,a),g&&this._symbolizePoint(a.getDojoShape(),d,q,a);}else{if("multipoint"===l){this._drawMarkers(a,d,e,q),g&&this._symbolizeMarkers(a,d,q);}else{var n,l=d,C,F;g&&(l=(n=d.isInstanceOf(V)?d:null)?p:d);l&&l===p&&(C=this._bgGroup);m&&!C&&this._removeBgShape(a);l&&(!C&&this._isInvalidShape(l,a._shape)&&this._removeShape(a,!1),F=this._drawShape(a,e,C||this._div,C?m:a.getDojoShape()),g&&this._symbolizeShape(F,l,!p&&q,a),a[C?"_bgShape":"_shape"]=F);n&&(this._isInvalidShape(n,a._shape)&&this._removeShape(a,!1),F=this._drawPoint(this._div,a.geometry.getCentroid(),n,a._shape,e,q,a),this._symbolizePoint(F,n,q,a),a._shape=F);}}E||(a._bgShape&&this._initNode(a,a._bgShape,a._bgShape!==m,c,f),a._shape&&this._initNode(a,a._shape,a._shape!==h,c,f));c.node=a.getNode();this.onGraphicDraw(c);}}else{h&&this._removeShape(a);}}catch(Y){this._errorHandler(Y,a);}}},_initNode:function(a,b,c,e,d){if(b=b&&b.getNode()){b.e_graphic=a,this._addDataAttrs(a,d,b),c&&(e.node=b,this.onGraphicNodeAdd(e));}},_removeShape:function(a,b){var c=a.getDojoShape(),e=c&&c.getNode();c&&(c.removeShape(),c.destroy());a._shape=a._offsets=null;!1!==b&&this._removeBgShape(a);if(e&&(e.e_graphic=null,!E)){this.onGraphicNodeRemove({graphic:a,node:e});}},_removeBgShape:function(a){var b=a._bgShape,c=b&&b.getNode();b&&(b.removeShape(),b.destroy(),a._bgShape=null);if(c&&(c.e_graphic=null,!E)){this.onGraphicNodeRemove({graphic:a,node:c});}},_addDataAttrs:function(a,b,c){var e=a.attributes,d,g=b?b.length:0,f=this._getRenderer(a);if(c&&e){for(d=0;d<g;d++){(c=b[d])&&a.attr("data-"+c,e[c]);}!this.styling&&f&&(f.getBreakIndex?(b=f.getBreakIndex(a),a.attr("data-class-break",-1!==b?b:null)):f.getUniqueValueInfo&&(b=f.getUniqueValueInfo(a),a.attr("data-unique-value",b?b.value:null)));}},_drawShape:function(a,b,c,e){a=a.geometry;var d=a.type,g=this._map,f=g.extent,h=g.width,k=g.height,g=g.__visibleRect,l=[],m,q;m="extent"===d;if("rect"===d||m){l={x:0,y:0,spatialReference:a.spatialReference},l.x=m?a.xmin:a.x,l.y=m?a.ymax:a.y,d=K.toScreenPoint(f,h,k,l),l.x=m?a.xmax:a.x+a.width,l.y=m?a.ymin:a.y+a.height,a=K.toScreenPoint(f,h,k,l),b={x:d.x-g.x+b[0],y:d.y-g.y,width:Math.abs(a.x-d.x),height:Math.abs(a.y-d.y)},0===b.width&&(b.width=1),0===b.height&&(b.height=1),e=this._drawRect(c,e,b);}else{if("polyline"===d||"polygon"===d){m=0;for(q=b.length;m<q;m++){l=l.concat(K._toScreenPath(f,h,k,a,-g.x+b[m],-g.y));}e=this._drawPath(c,e,l);this._rendererLimits&&("polyline"===d?this._clipPolyline(e,a):this._clipPolygon(e,a));}}return e;},_drawRect:function(a,b,c){return b?b.setShape(c):a.createRect(c);},_drawImage:function(a,b,c){return b?b.setShape(c):a.createImage(c);},_drawCircle:function(a,b,c){return b?b.setShape(c):a.createCircle(c);},_drawPath:function(){return t?function(a,b,c,e){c=e?c:c.join(" ");if(b){return b.setShape(c);}b=a.createObject(e?A.Path:A.EsriPath,c);a._overrideSize(b.getEventSource());return b;}:function(a,b,c,e){c=e?c:c.join(" ");return b?b.setShape(c):a.createPath(c);};}(),_drawText:function(a,b,c){return b?b.setShape(c):a.createText(c);},_evalSDRenderer:function(a){var b=this._map,c=this.renderer,e,d=this._rndForScale;b&&(b.loaded&&c&&c.getRendererInfo)&&(e="zoom"===c.rangeType?c.getRendererInfoByZoom(b.getZoom()):c.getRendererInfoByScale(b.getScale()));this._rndForScale=e&&e.renderer;!a&&this._rndForScale!=d&&this.emit("renderer-change",{renderer:this._rndForScale});},_getRenderer:function(a){var b=this._rndForScale||this.renderer;a&&(b&&b.getObservationRenderer)&&(b=b.getObservationRenderer(a));return b;},_getSymbol:function(a){var b=this._getRenderer();return a.symbol||b&&b.getSymbol(a);},_getVariable:function(a,b){return a?a[b]||n.filter(a.visualVariables,function(a){return a.type===b;})[0]:null;},_applyOpacity:function(a,b,c,e){b=b.getOpacity(e,{opacityInfo:c});null!=b&&(a=new U(a),a.a=b);return a;},_symbolizeShape:function(a,b,c,e){var d=b.getStroke(),g=b.getFill();b=b.type;var f,h,k=this._getVariable(c,"sizeInfo"),l=this._getVariable(c,"colorInfo"),m=this._getVariable(c,"opacityInfo"),k=k?c.getSize(e,{sizeInfo:k,resolution:this._map.getResolutionInMeters()}):null;if(c&&(l||m)&&"picturefillsymbol"!==b){-1!==b.indexOf("linesymbol")?(f=d&&d.color,l&&(f=c.getColor(e,{colorInfo:l})||f),f&&m&&(f=this._applyOpacity(f,c,m,e))):g&&g.toCss&&(h=g,l&&(h=c.getColor(e,{colorInfo:l})||h),h&&m&&(h=this._applyOpacity(h,c,m,e)));}a.setStroke(null==k&&!f?d:y.mixin({},d,k&&{width:k},f&&{color:f})).setFill(h||g);},_smsToPath:function(){return t?function(a,b,c,e,d,g,f,h,k){switch(b){case a.STYLE_SQUARE:return ["M",d+","+f,"L",g+","+f,g+","+h,d+","+h,"X","E"];case a.STYLE_CROSS:return ["M",c+","+f,"L",c+","+h,"M",d+","+e,"L",g+","+e,"E"];case a.STYLE_X:return ["M",d+","+f,"L",g+","+h,"M",d+","+h,"L",g+","+f,"E"];case a.STYLE_DIAMOND:return ["M",c+","+f,"L",g+","+e,c+","+h,d+","+e,"X","E"];case a.STYLE_TARGET:return ["M",d+","+f,"L",g+","+f,g+","+h,d+","+h,d+","+f,"M",d-k+","+e,"L",d+","+e,"M",c+","+(f-k),"L",c+","+f,"M",g+k+","+e,"L",g+","+e,"M",c+","+(h+k),"L",c+","+h,"E"];}}:function(a,b,c,e,d,g,f,h,k){switch(b){case a.STYLE_SQUARE:return ["M",d+","+f,g+","+f,g+","+h,d+","+h,"Z"];case a.STYLE_CROSS:return ["M",c+","+f,c+","+h,"M",d+","+e,g+","+e];case a.STYLE_X:return ["M",d+","+f,g+","+h,"M",d+","+h,g+","+f];case a.STYLE_DIAMOND:return ["M",c+","+f,g+","+e,c+","+h,d+","+e,"Z"];case a.STYLE_TARGET:return ["M",d+","+f,g+","+f,g+","+h,d+","+h,d+","+f,"M",d-k+","+e,d+","+e,"M",c+","+(f-k),c+","+f,"M",g+k+","+e,g+","+e,"M",c+","+(h+k),c+","+h];}};}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(a,b){var c=b&&b.shape&&b.shape.type,e=a&&a.type,d=a&&a.style;"rect"===c&&(c="path");e&&(d=this._typeMaps[e]||d);this._pathStyles[d]&&(d="path");return "shieldlabelsymbol"===e?!0:!(!c||!(d&&c!==d));},_drawPoint:function(a,b,c,e,d,g,f){var h=c.type,k=this._map,l=k.__visibleRect,m=K.toScreenPoint(k.extent,k.width,k.height,b).offset(-l.x+d[0],-l.y),l=m.x,q=m.y,p;b=[];var n=g&&g.rotationInfo?g.getRotationAngle(f):null,C=this._getVariable(g,"sizeInfo");g=C?g.getSize(f,{sizeInfo:C,shape:c.style,resolution:k.getResolutionInMeters()}):null;n&&b.push(u.rotategAt(n,m));(0!==c.xoffset||0!==c.yoffset)&&b.push(u.translate(c.xoffset,-c.yoffset));0!==c.angle&&b.push(u.rotategAt(c.angle,m));if("simplemarkersymbol"===h){switch(p=c.style,h=Math.round,g=null!=g?g:c.size,p){case w.STYLE_SQUARE:case w.STYLE_CROSS:case w.STYLE_X:case w.STYLE_DIAMOND:c=isNaN(g)?16:g/2;p=this._drawPath(a,e,this._smsToPath(w,p,l,q,h(l-c),h(l+c),h(q-c),h(q+c)));break;case w.STYLE_TARGET:m=c._targetWidth/2;g=c._targetHeight/2;p=this._drawPath(a,e,this._smsToPath(w,p,l,q,h(l-m),h(l+m),h(q-g),h(q+g),c._spikeSize));break;case w.STYLE_PATH:p=this._drawPath(a,e,c.path,!0);c=p.getBoundingBox();a=this._getScaleMatrix(c,g);(1!==a.xx||1!==a.yy)&&b.push(u.scaleAt(a.xx,a.yy,m));b.push(u.translate(-(c.x+c.width/2)+l,-(c.y+c.height/2)+q));break;default:c=isNaN(g)?16:g/2,p=this._drawCircle(a,e,{cx:l,cy:q,r:c});}}else{"shieldlabelsymbol"===h?(p=c.width,m=c.height,e=a.createGroup(),p=a.createImage({x:l-p/2,y:q-m/2,width:p,height:m,src:c.url}),e.add(p),null!=c.font&&(q+=0.2*c.getHeight(),a=a.createText({type:"text",text:c.text,x:l,y:q,align:"middle",decoration:c.decoration,rotated:c.rotated,kerning:c.kerning}),a.setFont(c.font),a.setFill(c.color),e.add(a)),p=e):"picturemarkersymbol"===h?(p=null!=g?g:c.width,m=null!=g?g:c.height,p=this._drawImage(a,e,{x:l-p/2,y:q-m/2,width:p,height:m,src:c.url})):"textsymbol"===h&&(p=this._drawText(a,e,{type:"text",text:c.text,x:l,y:q,align:c.getSVGAlign(),decoration:c.decoration||c.font&&c.font.decoration,rotated:c.rotated,kerning:c.kerning}),M&&(a=p.getNode(),l=c.getSVGBaseline(),c=c.getSVGBaselineShift(),a&&(a.setAttribute("dominant-baseline",l),c&&a.setAttribute("baseline-shift",c))));}p.setTransform(u.multiply(b));p._wrapOffsets=d;return p;},_getScaleMatrix:function(a,b){var c=a.width/a.height,e=1,d=1;isNaN(b)||(1<c?(e=b/a.width,d=b/c/a.height):(d=b/a.height,e=b*c/a.width));return {xx:e,yy:d};},_symbolizePoint:function(a,b,c,e){var d=b.type;if(!("shieldlabelsymbol"===d||"picturemarkersymbol"===d)){var g;if("textsymbol"===d){a.setFont(b.font).setFill(b.getFill());}else{g=b.getStroke();b=b.getFill();if(c){var f=this._getVariable(c,"colorInfo"),h=this._getVariable(c,"opacityInfo");f&&(b=c.getColor(e,{colorInfo:f})||b);b&&h&&(b=this._applyOpacity(b,c,h,e));}"simplemarkersymbol"===d&&a.setFill(b).setStroke(g);}}},_drawMarkers:function(a,b,c,e){var d=a.geometry,g=d.points,f=a.getDojoShape()||this._div.createGroup(),h,k,l=g.length,m=[],q=0,p,n=c?c.length:0;f.children[0]&&this._isInvalidShape(b,f.children[0])&&f.clear();for(k=0;k<l;k++){h=g[k];for(p=0;p<n;p++){m[0]=c[p],this._drawPoint(f,{x:h[0],y:h[1],spatialReference:d.spatialReference},b,f.children[q++],m,e,a);}}b=f.children.length;if(l*c.length<b){for(k=b-1;k>=l*c.length;k--){f.children[k].removeShape();}}a._shape=f;},_symbolizeMarkers:function(a,b,c){var e=a.getDojoShape().children,d,g=e.length;for(d=0;d<g;d++){this._symbolizePoint(e[d],b,c,a);}},_errorHandler:function(a,b){a.message=b?"Unable to draw graphic (geometry:"+(b.geometry?b.geometry.declaredClass:null)+", symbol:"+(b.symbol?b.symbol.declaredClass:null)+"): "+a.message:"Unable to draw graphic (null): "+a.message;this.inherited(arguments);},_rendererLimits:function(){var a,b,c;H("ff")?(a=16125,b=-32250,c=32250):t?(a=100000,b=-100000,c=100000):H("chrome")&&6>H("chrome")&&(a=8150,b=-10000,c=10000);if(a){return {clipLimit:a,rangeMin:b,rangeMax:c,clipBBox:[-a,-a,a,a],clipSegments:[[[-a,-a],[a,-a]],[[a,-a],[a,a]],[[a,a],[-a,a]],[[-a,a],[-a,-a]]]};}}(),_clipPolyline:function(a,b){var c=this._getCorners(a,b),e=c.br,d=this._rendererLimits,g=d.rangeMin,f=d.rangeMax,h=d.clipBBox,k=d.clipSegments,d=this._isPointWithinRange,l=this._isPointWithinBBox,m=this._getClipperIntersection,q=this._getPlaneIndex;if(!d(c.tl,g,f)||!d(e,g,f)){t&&this._createSegments(a);var p=[];n.forEach(a.segments,function(a){a=a.args;var c=a.length,b=[],e;for(e=0;e<c;e+=2){var d=[a[e],a[e+1]],g=[a[e+2],a[e+3]],f=l(d,h),n=l(g,h);if(f^n){if(n=m([d,g],k)){f?(e?b.push(n[1]):b.push(d,n[1]),p.push(b),b=[]):b.push(n[1],g);}}else{f?e?b.push(g):b.push(d,g):(n=q(d,h),f=q(g,h),-1===n||(-1===f||n===f)||(d=m([d,g],k,!0),0<d.length&&(d[n]||(n=d[n[0]]?n[0]:n[1]),d[f]||(f=d[f[0]]?f[0]:f[1]),g=d[n],d=d[f],g&&b.push(g),d&&(b.push(d),p.push(b),b=[]))));}}p.push(b);});a.setShape(this._getPathStringFromPaths(p));}},_clipPolygon:function(a,b){var c=this._getCorners(a,b),e=c.br,d=this._rendererLimits,g=d.clipLimit,f=d.rangeMin,h=d.rangeMax,k=d.clipBBox,l=d.clipSegments,d=this._isPointWithinRange,m=this._isPointWithinBBox,q=this._getClipperIntersection,p=this._getPlaneIndex,v=Q._pointLineDistance;if(!d(c.tl,f,h)||!d(e,f,h)){t&&this._createSegments(a),c=n.map(a.segments,function(a){var b=a.args,c=b.length,e=[];a=[];var d;for(d=0;d<c;d+=2){var f=[b[d],b[d+1]],h=[b[d+2],b[d+3]];if(d===c-2){e.push(f);break;}var s=m(f,k),r=m(h,k);e.push(f);if(s^r){if(r=q([f,h],l)){f=r[1],f[s?"inOut":"outIn"]=!0,e.push(f),a.push([s?"INOUT":"OUTIN",e.length-1,r[0]]);}}else{if(!s){var s=p(f,k),z=p(h,k);-1===s||(-1===z||s===z)||(r=q([f,h],l,!0),0<r.length?(r[s]||(s=r[s[0]]?s[0]:s[1]),r[z]||(z=r[z[0]]?z[0]:z[1]),f=r[s],h=r[z],f&&(f.outIn=!0,e.push(f),a.push(["OUTIN",e.length-1,s])),h&&(h.inOut=!0,e.push(h),a.push(["INOUT",e.length-1,z]))):y.isArray(s)&&y.isArray(z)&&(r=s.concat(z),r.sort(),"0123"===r.join("")&&(r=[],3===s[0]+s[1]?r.push([g,-g],[-g,g]):r.push([-g,-g],[g,g]),s=v(r[0],[f,h]),f=v(r[1],[f,h]),e.push(s<f?r[0]:r[1]))));}}}var t=k[0],u=k[1],w=k[2],x=k[3];n.forEach(e,function(a){a[0]<t&&(a[1]>=u&&a[1]<=x?a[0]=t:(a[0]=t,a[1]=a[1]<u?u:x));});n.forEach(e,function(a){a[1]<u&&(a[0]>=t&&a[0]<=w?a[1]=u:(a[1]=u,a[0]=a[0]<t?t:w));});n.forEach(e,function(a){a[0]>w&&(a[1]>=u&&a[1]<=x?a[0]=w:(a[0]=w,a[1]=a[1]<u?u:x));});n.forEach(e,function(a){a[1]>x&&(a[0]>=t&&a[0]<=w?a[1]=x:(a[1]=x,a[0]=a[0]<t?t:w));});b=0;c=a.length;if(0<c){do{h=a[b];d=a[(b+1)%c];if(h[2]===d[2]&&"INOUT"===h[0]&&"OUTIN"===d[0]){if(f=h[1],d=d[1],f<d){for(f+=1;f<d;f++){e[f][2]=!0;}}else{if(f>d){for(f+=1;f<e.length;f++){e[f][2]=!0;}for(f=0;f<d;f++){e[f][2]=!0;}}}}b=(b+1)%c;}while(0!==b);}c=e[0];b=e[e.length-1];c[2]&&(b[2]=!0,n.some(a,function(a){return 1===a[1]?(e.splice(e.length-1,0,y.clone(e[1])),!0):!1;}));e=n.filter(e,function(a){return a[2]?!1:!0;});for(b=0;b<e.length-1;b++){if(c=e[b],(d=e[b+1])&&!(c[0]!==d[0]||c[1]!==d[1])){d.outIn?c.outIn=!0:d.inOut&&(c.inOut=!0),e.splice(b+1,1);}}c=Math.abs;a=[];for(b=0;b<e.length-1;b++){h=e[b];f=h[0];h=h[1];s=c(f)===g;r=c(h)===g;d=e[b+1];z=d[0];d=d[1];var A=c(z)===g,B=c(d)===g;s&&B?a.push([b+1,[f,d]]):r&&A&&a.push([b+1,[z,h]]);}for(b=a.length-1;0<=b;b--){d=a[b],f=e[d[0]-1],c=e[d[0]],!f.outIn&&(!f.inOut&&!c.outIn&&!c.inOut)&&e.splice(d[0],0,d[1]);}c=e[0];b=e[e.length-1];(c[0]!==b[0]||c[1]!==b[1])&&e.push(c);return e;}),a.setShape(this._getPathStringFromPaths(c));}},_getCorners:function(a,b){if(t){var c=this._map,e=b.getExtent(),d=e.spatialReference,g=c.toScreen(new P(e.xmin,e.ymax,d)),c=c.toScreen(new P(e.xmax,e.ymin,d));return {tl:g,br:c};}g=a.getTransformedBoundingBox();return {tl:g[0],br:g[2]};},_createSegments:function(a){a.shape.path=a.vmlPath;a.segmented=!1;a._confirmSegmented();var b=a.segments;1<b.length&&(a.segments=n.filter(b,function(a,b,d){b=d[b+1];return "M"===a.action&&b&&"L"===b.action?(a.args=a.args.concat(b.args),!0):!1;}));},_getPathStringFromPaths:function(a){t?(a=n.map(a,function(a){return "m "+n.map(a,function(a,b){return (1===b?"l ":"")+a.join(",");}).join(" ");}),a.push("e")):a=n.map(a,function(a){return "M "+n.map(a,function(a){return a.join(",");}).join(" ");});return a.join(" ");},_isPointWithinBBox:function(a,b){var c=b[1],e=b[2],d=b[3],g=a[0],f=a[1];return g>b[0]&&g<e&&f>c&&f<d?!0:!1;},_isPointWithinRange:function(a,b,c){var e=a.x;a=a.y;return e<b||a<b||e>c||a>c?!1:!0;},_getClipperIntersection:function(a,b,c){var e,d=Q._getLineIntersection2,g=Math.round,f={length:0};for(e=0;4>e;e++){var h=d(a,b[e]);if(h){if(h[0]=g(h[0]),h[1]=g(h[1]),c){f[e]=h,f.length++;}else{return [e,h];}}}return c?f:null;},_getPlaneIndex:function(a,b){var c=a[0],e=a[1],d=b[0],g=b[1],f=b[2],h=b[3];return c<=d?e>=g&&e<=h?3:e<g?[0,3]:[2,3]:e<=g?c>=d&&c<=f?0:c<d?[3,0]:[1,0]:c>=f?e>=g&&e<=h?1:e<g?[0,1]:[2,1]:e>=h?c>=d&&c<=f?2:c<d?[3,2]:[1,2]:-1;},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},setInfoTemplate:function(a){this.infoTemplate=a;},add:function(a,b){if(a._graphicsLayer===this){return a;}b||this.graphics.push(a);a._graphicsLayer=this;a._layer=this;this._updateExtent(a);this._draw(a);if(!b){this.onGraphicAdd(a);}return a;},remove:function(a,b){if(!b){var c;if(-1===(c=n.indexOf(this.graphics,a))){return null;}a=this.graphics.splice(c,1)[0];}a.getDojoShape()&&this._removeShape(a);a._shape=a._graphicsLayer=null;this.onGraphicRemove(a);return a;},clear:function(a,b){for(var c=this.graphics;0<c.length;){this.remove(c[0]);}if(!b){this.onGraphicsClear();}},_setIEOpacity:function(a,b){var c=a&&a.getNode();if(c){var e=a.strokeStyle,d=c.stroke;e&&d&&(d.opacity=e.color.a*b);e=a.fillStyle;d=c.fill;e&&d&&("tile"===d.type?G.set(c,"opacity",b):d.opacity=e.a*b);}},setOpacity:function(a,b){if(b||this.opacity!=a){var c=this._div;c&&(t?(n.forEach(this.graphics,function(b){this._setIEOpacity(b._shape,a);this._setIEOpacity(b._bgShape,a);},this),c._esriIeOpacity=a,this._bgGroup._esriIeOpacity=a):this._canvas?G.set(c.getEventSource(),"opacity",a):c.getEventSource().setAttribute("opacity",a));this.opacity=a;if(!b){this.onOpacityChange(a);}}},setRenderer:function(a){this.renderer=a;this._evalSDRenderer(!0);this.emit("renderer-change",{renderer:this._rndForScale||a});}});x=x([L,W],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=y.hitch(this,this.enableMouseEvents);this.disableMouseEvents=y.hitch(this,this.disableMouseEvents);this._processEvent=y.hitch(this,this._processEvent);this._initLayer();},_initLayer:function(){this.loaded=!0;this.onLoad(this);},_setMap:function(){var a=this.inherited("_setMap",arguments);this.enableMouseEvents();return a;},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments);},_processEvent:function(a){var b=this._map,c=a.target,e;a.screenPoint=new J(a.pageX-b.position.x,a.pageY-b.position.y);for(a.mapPoint=b.toMap(a.screenPoint);c&&!(e=c.e_graphic);){c=c.parentNode;}if(e){return a.graphic=e,a;}},_onMouseOverHandler:function(a){if(this._processEvent(a)){this.onMouseOver(a);}},_onMouseMoveHandler:function(a){if(this._processEvent(a)){this.onMouseMove(a);}},_onMouseDragHandler:function(a){if(this._processEvent(a)){this.onMouseDrag(a);}},_onMouseOutHandler:function(a){if(this._processEvent(a)){this.onMouseOut(a);}},_onMouseDownHandler:function(a){this._downGr=this._downPt=null;this._processEvent(a)&&(v.disconnect(this._onmousemove_connect),v.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=v.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=a.graphic,this._downPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseDown(a));},_onMouseUpHandler:function(a){this._upGr=this._upPt=null;this._processEvent(a)&&(v.disconnect(this._onmousedrag_connect),v.disconnect(this._onmousemove_connect),this._onmousemove_connect=v.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=a.graphic,this._upPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseUp(a));},_onClickHandler:function(a){if(this._processEvent(a)){var b=this._downGr,c=this._upGr;b&&(c&&b===c&&this._downPt===this._upPt)&&(t&&(T._ieGraphic=a.graphic),this.onClick(a));}},_onDblClickHandler:function(a){if(this._processEvent(a)){this.onDblClick(a);}},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var a=v.connect,b=this._div.getEventSource();E||(this._onmouseover_connect=a(b,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=a(b,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=a(b,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=a(b,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=a(b,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=a(b,"onclick",this,"_onClickHandler"),this._ondblclick_connect=a(b,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0;}},disableMouseEvents:function(){if(this._mouseEvents){var a=v.disconnect;a(this._onmouseover_connect);a(this._onmousemove_connect);a(this._onmousedrag_connect);a(this._onmouseout_connect);a(this._onmousedown_connect);a(this._onmouseup_connect);a(this._onclick_connect);a(this._ondblclick_connect);this._mouseEvents=!1;}}});x._GraphicsContainer=X;x._GraphicsLayer=L;return x;});},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(lang,_123a,_123b){_123a.switchTo(_123b);return _123a;});},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,lang,has,win,_123c){var _123d=null;has.add("vml",function(_123e,_123f,_1240){_1240.innerHTML="<v:shape adj=\"1\"/>";var _1241=("adj" in _1240.firstChild);_1240.innerHTML="";return _1241;});return {load:function(id,_1242,load){if(_123d&&id!="force"){load(_123d);return;}var _1243=_123c.forceGfxRenderer,_1244=!_1243&&(lang.isString(_123c.gfxRenderer)?_123c.gfxRenderer:"svg,vml,canvas,silverlight").split(","),_1245,_1246;while(!_1243&&_1244.length){switch(_1244.shift()){case "svg":if("SVGAngle" in win.global){_1243="svg";}break;case "vml":if(has("vml")){_1243="vml";}break;case "silverlight":try{if(has("ie")){_1245=new ActiveXObject("AgControl.AgControl");if(_1245&&_1245.IsVersionSupported("1.0")){_1246=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_1246=true;}}}catch(e){_1246=false;}finally{_1245=null;}if(_1246){_1243="silverlight";}break;case "canvas":if(win.global.CanvasRenderingContext2D){_1243="canvas";}break;}}if(_1243==="canvas"&&_123c.canvasEvents!==false){_1243="canvasWithEvents";}if(_123c.isDebug){}function _1247(){_1242(["dojox/gfx/"+_1243],function(_1248){g.renderer=_1243;_123d=_1248;load(_1248);});};if(_1243=="svg"&&typeof window.svgweb!="undefined"){window.svgweb.addOnLoad(_1247);}else{_1247();}}};});},"esri/layers/layer":function(){define(["dojo/_base/declare","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/json","dojo/has","../Evented","../kernel","../lang","../request","../deferredUtils","../urlUtils","../SpatialReference","../geometry/Extent"],function(m,n,d,f,p,q,w,r,h,c,s,t,u,k,v){var l=m([r],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(a,b){if(a&&f.isString(a)){this._url=u.urlToObject(this.url=a);}else{if(this.url=this._url=null,(b=b||a)&&(b.layerDefinition||b.query)){b=null;}}this.spatialReference=new k(4326);this.initialExtent=new v(-180,-90,180,90,new k(4326));this._map=this._div=null;this.normalization=!0;b&&(b.id&&(this.id=b.id),!1===b.visible&&(this.visible=!1),c.isDefined(b.opacity)&&(this.opacity=b.opacity),c.isDefined(b.minScale)&&this.setMinScale(b.minScale),c.isDefined(b.maxScale)&&this.setMaxScale(b.maxScale),this.attributionDataUrl=b.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,c.isDefined(b.showAttribution)&&(this.showAttribution=b.showAttribution),this.className=b.className,this.refreshInterval=b.refreshInterval||0);this._errorHandler=f.hitch(this,this._errorHandler);this.refresh=f.hitch(this,this.refresh);if(this.managedSuspension){var e=this._setMap;this._setMap=function(a){var b=e.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!a.loaded){var c=d.connect(a,"onLoad",this,function(){d.disconnect(c);c=null;this.evaluateSuspension();});}return b;};}this.registerConnectEvents();},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a);},_setMap:function(a,b,e,g){this._map=a;this._lyrZEHandle=d.connect(a,"onZoomEnd",this,this._processMapScale);if(a.loaded){this.visibleAtMapScale=this._isMapAtVisibleScale();}else{var c=d.connect(a,"onLoad",this,function(){d.disconnect(c);c=null;this._processMapScale();});}},_unsetMap:function(a,b){d.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this.suspended=!0;},_cleanUp:function(){this._map=this._div=null;},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr());},_fireUpdateEnd:function(a,b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr());},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0;},_findCredential:function(){this.credential=h.id&&this._url&&h.id.findCredential(this._url.path);},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"));},refresh:function(){},show:function(){this.setVisibility(!0);},hide:function(){this.setVisibility(!1);},setMinScale:function(a){this.setScaleRange(a);},setMaxScale:function(a){this.setScaleRange(null,a);},setScaleRange:function(a,b){var e=c.isDefined(a),g=c.isDefined(b);this.loaded||(this._hasMin=this._hasMin||e,this._hasMax=this._hasMax||g);var d=this.minScale,f=this.maxScale;this.minScale=(e?a:this.minScale)||0;this.maxScale=(g?b:this.maxScale)||0;if(d!==this.minScale||f!==this.maxScale){this.onScaleRangeChange(),this._processMapScale();}},suspend:function(){this._suspended=!0;this.evaluateSuspension();},resume:function(){this._suspended=!1;this.evaluateSuspension();},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended;},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend();},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map){this._map.onLayerSuspend(this);}},_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,e=this.getNode();if(a&&(this._resumedOnce=!0,b&&e)){var c=e.getAttribute("class")||"";RegExp("(^|\\s)"+b+"(\\s|$)","i").test(c)||e.setAttribute("class",c+((c?" ":"")+b));}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map){this._map.onLayerResume(this);}},_processMapScale:function(){var a=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension());},isVisibleAtScale:function(a){return a?l.prototype._isMapAtVisibleScale.apply(this,arguments):!1;},_isMapAtVisibleScale:function(a){if(!a&&(!this._map||!this._map.loaded)){return !1;}a=a||this._map.getScale();var b=this.minScale,e=this.maxScale,c=!b,d=!e;!c&&a<=b&&(c=!0);!d&&a>=e&&(d=!0);return c&&d;},getAttributionData:function(){var a=this.attributionDataUrl,b=new p(t._dfdCanceller);this.hasAttributionData&&a?(b._pendingDfd=s({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(function(a){b.callback(a);},function(a){b.errback(a);})):(a=Error("Layer does not have attribution data"),a.log=n.isDebug,b.errback(a));return b;},getResourceInfo:function(){var a=this.resourceInfo;return f.isString(a)?q.fromJson(a):f.clone(a);},getMap:function(){return this._map;},getNode:function(){return this._div;},attr:function(a,b){var c=this.getNode();c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));return this;},setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=a;this._toggleRT();a&&!this.updating&&!this.suspended&&this._toggleRT(!0);if(b!==a){this.onRefreshIntervalChange();}return this;},_toggleRT:function(a){a&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,60000*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null);},setNormalization:function(a){this.normalization=a;},setVisibility:function(a){this.visible!==a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",a?null:"");},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});return l;});},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(b,e,c,d){b=b([e],{declaredClass:"esri.Color"});b.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)];};b.toDojoColor=function(a){return a&&new e([a[0],a[1],a[2],a[3]/255]);};d="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(c=0;c<d.length;c++){b[d[c]]=e[d[c]];}return b;});},"esri/domUtils":function(){define(["dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has","./kernel"],function(n,r,p,q,s){return {show:function(a){a&&(a.style.display="block");},hide:function(a){a&&(a.style.display="none");},toggle:function(a){a.style.display="none"===a.style.display?"block":"none";},documentBox:8>=q("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(a){var f=0,g=0,h=0,k=0,l=0,m=0;return [n.connect(a,"ontouchstart",function(d){f=d.touches[0].screenX;g=d.touches[0].screenY;h=a.scrollWidth;k=a.scrollHeight;l=a.clientWidth;m=a.clientHeight;}),n.connect(a,"ontouchmove",function(d){d.preventDefault();var e=a.firstChild;e instanceof Text&&(e=a.childNodes[1]);var b=e._currentX||0,c=e._currentY||0,b=b+(d.touches[0].screenX-f);0<b?b=0:0>b&&Math.abs(b)+l>h&&(b=-1*(h-l));e._currentX=b;c+=d.touches[0].screenY-g;0<c?c=0:0>c&&Math.abs(c)+m>k&&(c=-1*(k-m));e._currentY=c;p.set(e,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+b+"px, "+c+"px)"});f=d.touches[0].screenX;g=d.touches[0].screenY;})];}};});},"esri/symbols/MarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","../kernel","./Symbol"],function(f,e,h,b,k,g){return f(g,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(a){a&&e.isObject(a)&&(this.size="auto"===this.size?this.size:b.pt2px(this.size),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&(this.angle*=-1));},setAngle:function(a){this.angle=a;return this;},setSize:function(a){this.size=a;return this;},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this;},toJson:function(){var a=b.px2pt(this.size),a=isNaN(a)?void 0:a,c=b.px2pt(this.xoffset),c=isNaN(c)?void 0:c,d=b.px2pt(this.yoffset),d=isNaN(d)?void 0:d;return e.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:a,angle:this.angle&&-1*this.angle,xoffset:c,yoffset:d});}});});},"esri/symbols/Symbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang","../Color"],function(d,c,f,g,e,b){return d(null,{declaredClass:"esri.symbol.Symbol",color:new b([0,0,0,1]),type:null,constructor:function(a){if(a&&c.isObject(a)&&(c.mixin(this,a),this.color&&e.isDefined(this.color[0])&&(this.color=b.toDojoColor(this.color)),(a=this.type)&&0===a.indexOf("esri"))){this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[a];}},setColor:function(a){this.color=a;return this;},toJson:function(){return {color:b.toJsonColor(this.color)};}});});},"esri/symbols/SimpleMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","../kernel","../lang","./MarkerSymbol","./SimpleLineSymbol"],function(d,m,s,u,p,v,q,t,r){var e={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},n={style:e.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};d=d(t,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(a,b,c,d){a?m.isString(a)?(this.style=a,b&&(this.size=b),c&&(this.outline=c),d&&(this.color=d)):(this.style=q.valueOf(this._styles,this.style),a.outline&&(this.outline=new r(a.outline))):(m.mixin(this,n),this.size=p.pt2px(this.size),this.outline=new r(this.outline),this.color=new s(this.color));this.style||(this.style=e.STYLE_CIRCLE);},setStyle:function(a){this.style=a;return this;},setPath:function(a){this.path=a;this.setStyle(e.STYLE_PATH);return this;},setOutline:function(a){this.outline=a;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(a,b,c){this._targetWidth=a;this._targetHeight=b;this._spikeSize=c;},getShapeDescriptors:function(){var a,b,c,d=this.style,l=(this.size||p.pt2px(n.size))/2,f=0-l,h=0+l,k=0-l,g=0+l;switch(d){case e.STYLE_CIRCLE:a={type:"circle",cx:0,cy:0,r:l};b=this.getFill();if(c=this.getStroke()){c.style=c.style||"Solid";}break;case e.STYLE_CROSS:a={type:"path",path:"M "+f+",0 L "+h+",0 M 0,"+k+" L 0,"+g+" E"};b=null;c=this.getStroke();break;case e.STYLE_DIAMOND:a={type:"path",path:"M "+f+",0 L 0,"+k+" L "+h+",0 L 0,"+g+" L "+f+",0 E"};b=this.getFill();c=this.getStroke();break;case e.STYLE_SQUARE:a={type:"path",path:"M "+f+","+g+" L "+f+","+k+" L "+h+","+k+" L "+h+","+g+" L "+f+","+g+" E"};b=this.getFill();c=this.getStroke();break;case e.STYLE_X:a={type:"path",path:"M "+f+","+g+" L "+h+","+k+" M "+f+","+k+" L "+h+","+g+" E"};b=null;c=this.getStroke();break;case e.STYLE_PATH:a={type:"path",path:this.path||""},b=this.getFill(),c=this.getStroke();}return {defaultShape:a,fill:b,stroke:c};},toJson:function(){var a=m.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),b=this.outline;b&&(a.outline=b.toJson());a.path=this.path;return q.fixJson(a);}});m.mixin(d,e);d.defaultProps=n;return d;});},"esri/symbols/SimpleLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","../kernel","../lang","./LineSymbol"],function(a,b,h,m,k,n,e,l){var c={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},f={color:[0,0,0,1],style:c.STYLE_SOLID,width:1};a=a(l,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(d,a,g){d?b.isString(d)?(this.style=d,a&&(this.color=a),g&&(this.width=g)):this.style=e.valueOf(this._styles,d.style)||c.STYLE_SOLID:(b.mixin(this,f),this.color=new h(this.color),this.width=k.pt2px(this.width));},setStyle:function(a){this.style=a;return this;},getStroke:function(){return this.style===c.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){return e.fixJson(b.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));}});b.mixin(a,c);a.defaultProps=f;return a;});},"esri/symbols/LineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","../kernel","./Symbol"],function(d,b,f,c,g,e){return d(e,{declaredClass:"esri.symbol.LineSymbol",constructor:function(a){b.isObject(a)?this.width=c.pt2px(this.width):this.width=12;},setWidth:function(a){this.width=a;return this;},toJson:function(){var a=c.px2pt(this.width),a=isNaN(a)?void 0:a;return b.mixin(this.inherited("toJson",arguments),{width:a});}});});},"esri/layers/TileInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../lang","../SpatialReference","../geometry/Point","./LOD"],function(e,f,c,l,m,g,d,h,k){return e(null,{declaredClass:"esri.layers.TileInfo",constructor:function(a){f.mixin(this,a);this.width=this.cols;this.height=this.rows;a=this.spatialReference;var b=this.origin;a&&(a=this.spatialReference=new d(a.toJson?a.toJson():a));b&&(this.origin=new h(b.toJson?b.toJson():b),!b.spatialReference&&a&&this.origin.setSpatialReference(new d(a.toJson())));this.lods=c.map(this.lods,function(a){return new k(a);});},toJson:function(){return g.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&c.map(this.lods,function(a){return a.toJson();})});}});});},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(a,b,d,e,c){return a(null,{declaredClass:"esri.layers.LOD",constructor:function(a){b.mixin(this,a);},toJson:function(){return c.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale});}});});},"esri/layers/ArcGISTiledMapServiceLayer":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","dojo/io-query","../kernel","../urlUtils","../SpatialReference","./TiledMapServiceLayer","./ArcGISMapServiceLayer","./TileInfo","./TimeInfo","./TileMap"],function(l,m,e,n,p,x,h,y,k,q,r,s,t,u,v){return m([r,s],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),constructor:function(a,b){b&&(b.roundrobin&&(l.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),b.tileServers=b.roundrobin),this._setTileServers(b.tileServers),this._loadCallback=b.loadCallback);this._params=e.mixin({},this._url.query);if(n.some(["servicesdev.arcgisonline.com/arcgis/rest/services","services.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],function(b){return -1<a.toLowerCase().indexOf(b.toLowerCase());})){if(this.resampling=!(b&&!1===b.resampling)){this.tileMap=new v(this);}}else{this.resampling=b&&null!=b.resampling?b.resampling:void 0;}this._initLayer=e.hitch(this,this._initLayer);var c=b&&b.resourceInfo;c?this._initLayer(c):(this._load=e.hitch(this,this._load),this._load());},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(a){if(a&&0<a.length){this.tileServers=a;var b,c=a.length;for(b=0;b<c;b++){a[b]=k.urlToObject(a[b]).path;}}},_initLayer:function(a,b){this.inherited(arguments);this.resourceInfo=p.toJson(a);this.tileInfo=new t(a.tileInfo);this.resampling=null==this.resampling?!!a.resampling:this.resampling;!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new q(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;a.timeInfo&&(this.timeInfo=new u(a.timeInfo));var c=this._url.path,f=this._loadCallback,w="file:"===window.location.protocol?"http:":window.location.protocol,d=c.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),d=d&&d[2];if(!this.tileServers){if(a.tileServers){this._setTileServers(a.tileServers);}else{var g=-1!==c.search(/^https?\:\/\/server\.arcgisonline\.com/i),e=-1!==c.search(/^https?\:\/\/services\.arcgisonline\.com/i);if(g||e){this._setTileServers([c,c.replace(g?/server\.arcgisonline/i:/services\.arcgisonline/i,g?"services.arcgisonline":"server.arcgisonline")]);}}}if(d){d=d.toLowerCase();for(c=0;c<this._agolAttrs.length;c++){if(g=this._agolAttrs[c],g.toLowerCase()===d){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||w+"//static.arcgis.com/attribution/"+g;break;}}}this.loaded=!0;this.onLoad(this);f&&(delete this._loadCallback,f(this));},getTileUrl:function(a,b,c){var f=this.tileServers,e=this._getToken(),d=this._url.query;a=(f?f[b%f.length]:this._url.path)+"/tile/"+a+"/"+b+"/"+c;this.resampling&&!this.tileMap&&(a+="?blankTile=false");d&&(a=this.resampling&&!this.tileMap?a+("&"+h.objectToQuery(d)):a+("?"+h.objectToQuery(d)));if(e&&(!d||!d.token)){a+=(-1===a.indexOf("?")?"?":"&")+"token="+e;}a=this.addTimestampToURL(a);return k.addProxy(a);}});});},"esri/layers/TiledMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojox/collections/ArrayList","dojox/gfx/matrix","../kernel","../config","../sniff","../domUtils","../tileUtils","../geometry/Point","../geometry/Rect","../geometry/Extent","./layer"],function(P,s,E,A,J,q,K,L,m,M,N,v,Q,x,O,F,z,B,R,S){var C=Q.defaults.map.zoomDuration;return P(S,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(a,c){s.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=c?c.displayLevels:null)?this._displayLevels[0]:0;this.resampling=c?c.resampling:void 0;this._resamplingTolerance=c?c.resamplingTolerance:null;this.exclusionAreas=c?c.exclusionAreas:null;var d=E.hitch;this._addImage=d(this,this._addImage);this._tileLoadHandler=d(this,this._tileLoadHandler);this._tileErrorHandler=d(this,this._tileErrorHandler);this._tilePopPop=d(this,this._tilePopPop);this._cleanUpRemovedImages=d(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=d(this,this._fireOnUpdateEvent);this._transitionEnd=d(this,this._transitionEnd);this._tileMapCallback=d(this,this._tileMapCallback);},opacity:1,isPNG32:!1,_multiple:1,_initTiledLayer:function(){var a=this.tileInfo,c=a.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=a.width;this._tileH=a.height;var d=this.scales=[],b=this._displayLevels,e="esri.layers.WMTSLayer"===this.declaredClass&&96!=a.dpi,f=-Infinity,h=Infinity,g=this.fullExtent,m=new z(g.xmin,g.ymax),g=new z(g.xmax,g.ymin),l=F.getContainingTileCoords,k,p,r,q=c.length;for(r=0;r<q;r++){if(p=c[r],e&&(p.scale=96*p.scale/a.dpi),k=l(a,m,p),p.startTileRow=0>k.row?0:k.row,p.startTileCol=0>k.col?0:k.col,k=l(a,g,p),p.endTileRow=k.row,p.endTileCol=k.col,!b||-1!==A.indexOf(b,p.level)){d[r]=p.scale,f=p.scale>f?p.scale:f,h=p.scale<h?p.scale:h;}}e&&(a.dpi=96);-Infinity!==f&&!this._hasMin&&this.setMinScale(f);Infinity!==h&&!this._hasMax&&this.setMaxScale(h);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=x("ie")&&7>x("ie")&&(this.isPNG32||"Mixed"===a.format);},_isMapAtVisibleScale:function(){var a=this.inherited(arguments);if(a){var c;c=this._map;var a=this.scales,d=c.getScale(),b=!1,e=c.width>c.height?c.width:c.height;for(c=0;c<a.length;c++){if(Math.abs(a[c]-d)/a[c]<1/e){b=!0;break;}}a=b;}return a;},_setMap:function(a,c,d,b){this.inherited(arguments);this._map=a;var e=this._div=q.create("div",null,c),f=a.__visibleDelta,h=s.connect,g=v._css.names,u={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"};"css-transforms"===a.navigationMode?(u[g.transform]=v._css.translate(-f.x,-f.y),m.set(e,u),delete u[g.transform],u[g.transition]=g.transformName+" "+C+"ms ease",m.set(this._active=q.create("div",null,e),u),this._active._remove=0,this._passives=[]):(u.left=-f.x+"px",u.top=-f.y+"px",m.set(e,u));this._onResizeHandler_connect=h(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=h(this,"onOpacityChange",this,"_opacityChangeHandler");f=this.tileInfo;h=f.spatialReference;g=h._getInfo();(this._wrap=a.wrapAround180&&h._isWrappable()&&Math.abs(g.origin[0]-f.origin.x)<=g.dx)&&F._addFrameInfo(f,g);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!a.loaded){var l=s.connect(a,"onLoad",this,function(){s.disconnect(l);l=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();});}return e;},_unsetMap:function(a,c){this.suspended||this._suspendImpl();q.destroy(this._div);this._map=this._div=null;var d=s.disconnect;d(this._onResizeHandler_connect);d(this._opacityChangeHandler_connect);this.inherited(arguments);},onSuspend:function(){this.inherited(arguments);this._suspendImpl();},_suspendImpl:function(){O.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var a=this._tiles,c=this._tileIds,d=this._loadingList,b,e,f=s.disconnect,h=q.destroy;d&&0<d.count&&(d.forEach(function(c){if(b=a[c]){f(b._onload_connect),f(b._onerror_connect),f(b._onabort_connect),b._onload_connect=b._onerror_connect=b._onabort_connect=null;}}),d.clear(),this._fireUpdateEnd());this._removeList.clear();for(d=c.length-1;0<=d;d--){(b=(e=c[d])&&a[e])&&h(b);}if("css-transforms"===this._map.navigationMode){c=this._active;e=this._passives;var g;this._noDom=0;for(d=e.length-1;0<=d;d--){g=e[d],g._endHandle&&f(g._endHandle),g._matrix=g._multiply=g._endHandle=null,g._marked=g._remove=0,e.splice(d,1),h(g);}c._matrix=c._multiply=null;c._marked=c._remove=0;}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null;},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new M;this._loadingList=new M;O.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(E.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD);}),0);},_enableDrawConnectors:function(){var a=this._map,c=s.connect;if("css-transforms"===a.navigationMode){if(this._onScaleHandler_connect=c(a,"onScale",this,this._onScaleHandler),x("esri-touch")||x("esri-pointer")){this._standby=[];var d=this,b=function(){d._noDom=1;};this._onPanStartHandler_connect=c(a,"onPanStart",b);this._onZoomStartHandler_connect=c(a,"onZoomStart",b);}}else{this._onZoomHandler_connect=c(a,"onZoom",this,"_onZoomHandler");}this._onPanHandler_connect=c(a,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=c(a,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var a=s.disconnect;a(this._onPanHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onPanStartHandler_connect);a(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null;},_onResizeHandler:function(a,c,d){a={width:c+"px",height:d+"px"};c=m.set;c(this._div,a);if("css-transforms"===this._map.navigationMode){this._active&&c(this._active,a);for(d=this._passives.length-1;0<=d;d--){c(this._passives[d],a);}}},_onExtentChangeHandler:function(a,c,d,b){c=this._map;var e=this._standby,f;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!c._isPanningOrZooming()){if("css-transforms"===c.navigationMode){if(d){for(b=this._passives.length-1;0<=b;b--){f=this._passives[b],m.set(f,v._css.names.transition,"none"),f._marked?(this._passives.splice(b,1),f.parentNode&&f.parentNode.removeChild(f),q.destroy(f)):0<f.childNodes.length&&(f._multiply=f._multiply?N.multiply(f._matrix,f._multiply):f._matrix);}}this._noDom=0;if(e&&e.length){for(b=e.length-1;0<=b;b--){f=e[b],m.set(f,"visibility","visible"),this._tilePopPop(f),e.splice(b,1);}}}this._fireUpdateStart();this._rrIndex=0;b=F.getCandidateTileInfo(c,this.tileInfo,a);a=c.__visibleDelta;if(!this._ct||b.lod.level!==this._ct.lod.level||d){f=b&&this._ct&&b.lod.level!==this._ct.lod.level;this._ct=b;var h=this._tiles,g=this._tileIds,u=this._tileBounds,l=this._removeList,k,p=g.length;this._cleanUpRemovedImages();for(b=0;b<p;b++){e=g[b],k=h[e],u[e]=g[b]=null,"css-transforms"===c.navigationMode&&(f&&k.parentNode&&c.fadeOnZoom)&&(k._fadeOut=f,k.parentNode._remove++),l.add(k);}d&&(this._tileIds=[],this._tiles=[],this._tileBounds=[]);}b=a.x;d=a.y;"css-transforms"===c.navigationMode?(e={},e[v._css.names.transform]=v._css.translate(b,d),m.set(this._div,e)):m.set(this._div,{left:b+"px",top:d+"px"});this.__coords_dx=b;this.__coords_dy=d;this._updateImages(new B(0,0,a.width,a.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;d=this._tileW;h=this._tileH;a=new B(-a.x,-a.y,a.width,a.height);for(b=this._tileIds.length-1;0<=b;b--){(e=this._tileIds[b])?(f=this._tiles[e],g=L.getMarginBox(f),g=new B(g.l,g.t,d,h),"css-transforms"===c.navigationMode&&(g.x=f._left,g.y=f._top),a.intersects(g)?this._tileBounds[e]=g:(this._loadingList.contains(e)&&this._tilePopPop(f),q.destroy(f),this._tileIds.splice(b,1),delete this._tileBounds[e],delete this._tiles[e])):(this._tileIds.splice(b,1),delete this._tileBounds[e],delete this._tiles[e]);}}},_onPanHandler:function(a,c){var d=this._map,b=d.__visibleDelta.offset(c.x,c.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===d.navigationMode?(d={},d[v._css.names.transform]=v._css.translate(b.x,b.y),m.set(this._div,d),!x("esri-touch")&&!x("esri-pointer")&&this._updateImages({x:-b.x,y:-b.y,width:b.width,height:b.height})):(m.set(this._div,{left:b.x+"px",top:b.y+"px"}),this._updateImages({x:-b.x,y:-b.y,width:b.width,height:b.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0);},_onScaleHandler:function(a,c){var d,b={},e=v._css.names,f=this._map;for(d=this._passives.length-1;0<=d;d--){var h=this._passives[d];0===h.childNodes.length?(this._passives.splice(d,1),q.destroy(h)):("none"===h.style[e.transition]&&m.set(h,e.transition,e.transformName+" "+C+"ms ease"),m.set(h,e.transition,c?"none":e.transformName+" "+C+"ms ease"),h._matrix=a,b[e.transform]=v._css.matrix(h._multiply?N.multiply(a,h._multiply):a),m.set(h,b));}this._active&&0===this._active.childNodes.length||(m.set(this._active,e.transition,c?"none":e.transformName+" "+C+"ms ease"),this._active._matrix=a,b[e.transform]=v._css.matrix(this._active._matrix),m.set(this._active,b),this._passives.push(this._active),b={position:"absolute",width:f.width+"px",height:f.height+"px",overflow:"visible"},b[e.transition]=e.transformName+" "+C+"ms ease",m.set(this._active=q.create("div",null,this._div),b),this._active._remove=0,f.fadeOnZoom&&q.place(this._active,this._div,"first"));},_onZoomHandler:function(a,c,d){a=L.getMarginBox(this._div);d=d.offset(-a.l,-a.t);if(!this._previousScale||1===c){this._previousScale=1;}var b,e=this._tileW*c,f=this._tileH*c,h=this._tileBounds,g=this._tiles,u=this._previousScale,l=this._multiple,k=m.set,p,r;if((a=x("ie"))&&8>a){A.forEach(this._tileIds,function(a){r="";b=h[a];p=g[a].style.margin.split(" ");A.forEach(p,function(a){""!==r&&(r+=" ");a=parseFloat(a);r+=a/u*c+"px";});k(g[a],{left:b.x-(e-b.width)*(d.x-b.x)/b.width+"px",top:b.y-(f-b.height)*(d.y-b.y)/b.height+"px",margin:1!==l&&-1===r.indexOf("NaN")?r:"",zoom:c});});}else{var q=e*l,T=f*l,n,v;A.forEach(this._tileIds,function(a){r="";b=h[a];n=b.x-(e-b.width)*(d.x-b.x)/b.width;v=b.y-(f-b.height)*(d.y-b.y)/b.height;p=g[a].style.margin.split(" ");A.forEach(p,function(a){""!==r&&(r+=" ");a=parseFloat(a);r+=a/u*c+"px";});k(g[a],{left:n+"px",top:v+"px",margin:1!==l&&-1===r.indexOf("NaN")?r:"",width:q+"px",height:T+"px"});});}this._previousScale=c;},_updateImages:function(a){if(this._ct){var c,d=this._tileW,b=this._tileH,e=this._ct;c=e.lod;var e=e.tile,f=e.offsets,h=e.coords,g=h.row,h=h.col,m=c.level,l=this.opacity,k=this._tileIds,p=this._loadingList,r=this._addImage,q=this._map.id,v=this.id,n=a.x,s=a.y,x=c.startTileRow,z=c.endTileRow,C=c.startTileCol,E=c.endTileCol,F=A.indexOf,y,t,B=f.x-this.__coords_dx,G=f.y-this.__coords_dy;t=d-B+-a.x;var w=b-G+-a.y;y=Math.ceil;t=0<t?t%d:d-Math.abs(t)%d;w=0<w?w%b:b-Math.abs(w)%b;n=0<n?Math.floor((n+B)/d):y((n-(d-B))/d);s=0<s?Math.floor((s+G)/b):y((s-(b-G))/b);G=n+y((a.width-t)/d);a=s+y((a.height-w)/b);var D,H,I;this._wrap&&(D=c._frameInfo,H=D[0],I=D[1],D=D[2]);for(w=n;w<=G;w++){for(n=s;n<=a;n++){y=g+n,t=h+w,this._wrap&&(t<I?(t%=H,t=t<I?t+H:t):t>D&&(t%=H)),!this._isExcluded(m,y,t)&&(y>=x&&y<=z&&t>=C&&t<=E)&&(c=q+"_"+v+"_tile_"+m+"_"+n+"_"+w,-1===F(k,c)&&(p.add(c),k.push(c),r(m,n,y,w,t,c,d,b,l,e,f)));}}}},_cleanUpRemovedImages:function(){var a=this._removeList,c=q.destroy,d,b=v._css.names;a.forEach(function(a){a._fadeOut||(a.style.filter="",a.style.zoom=1,c(a));});if("css-transforms"===this._map.navigationMode){for(d=this._passives.length-1;0<=d;d--){var e=this._passives[d];0===e.childNodes.length?(this._passives.splice(d,1),c(e)):this._map.fadeOnZoom&&(!e._marked&&e._remove===e.childNodes.length)&&(e._marked=1,2048>v._css.getScaleFromMatrix(m.get(e,b.transform))?(m.set(e,b.transition,"opacity 0.65s"),m.set(e,"opacity",0),s.disconnect(e._endHandle),e._endHandle=s.connect(e,b.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:e}));}}a.clear();},_transitionEnd:function(a){var c=a.target;"opacity"===a.propertyName&&(s.disconnect(c._endHandle),c._endHandle=null,a=A.indexOf(this._passives,c),-1<a&&this._passives.splice(a,1),c.parentNode&&c.parentNode.removeChild(c),q.destroy(c));},_addImage:function(a,c,d,b,e,f,h,g,u,l,k){if(this._patchIE){l=this._tiles[f]=q.create("div"),l.id=f,K.add(l,"layerTile"),m.set(l,{left:h*b-k.x+"px",top:g*c-k.y+"px",width:h+"px",height:g+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.getTileUrl(a,d,e)+"', sizingMethod='scale')"}),1>u&&m.set(l,"opacity",u),a=l.appendChild(q.create("div")),m.set(a,{opacity:0,width:h+"px",height:g+"px"}),this._div.appendChild(l),this._loadingList.remove(f),this._fireOnUpdateEvent();}else{l=this._tiles[f]=q.create("img");var p=s.connect;l.id=f;K.add(l,"layerTile");b=h*b-k.x;k=g*c-k.y;c=this._map;var r=v._css.names;h={width:h+"px",height:g+"px",visibility:"hidden"};"css-transforms"===c.navigationMode?(h[r.transform]=v._css.translate(b,k),m.set(l,h),l._left=b,l._top=k):(h.left=b+"px",h.top=k+"px",m.set(l,h));1>u&&m.set(l,"opacity",u);l._onload_connect=p(l,"onload",this,"_tileLoadHandler");l._onerror_connect=p(l,"onerror",E.hitch(this,"_tileErrorHandler",d,e));l._onabort_connect=p(l,"onabort",this,"_tileAbortHandler");if(this.tileMap){this.tileMap.getTile(a,d,e,f,this._tileMapCallback);}else{if(f=this.getTileUrl(a,d,e,l)){this._failedRequests&&this._failedRequests[f]?(m.set(l,this._failedRequests[f].css),l.src=this._failedRequests[f].src,this._multiple=parseInt(this._failedRequests[f].css.width)/this._tileW):(this._multiple=1,l.src=f);}}"css-transforms"===c.navigationMode?this._active.appendChild(l):this._div.appendChild(l);}},_tileMapCallback:function(a,c){var d,b;!this.suspended&&this._tiles[c.id]&&(this._multiple=2*(c.level-a.level)||1,b=this._tiles[c.id],d=this.tileMap.style(a,c),m.set(b,d),b.src=this.getTileUrl(a.level,a.row,a.col));},getTileUrl:function(a,c,d){},_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(a){var c=this._refreshTS;c&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+c):a+((-1===a.indexOf("?")?"?":"&")+"_ts="+c));return a;},refresh:function(){this.suspended||(this._refreshTS=(new Date).getTime(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD));},_tilePopPop:function(a){var c=s.disconnect;c(a._onload_connect);c(a._onerror_connect);c(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList.remove(a.id);this._fireOnUpdateEvent();},_tileLoadHandler:function(a){a=a.currentTarget;this._noDom?this._standby.push(a):(m.set(a,"visibility","visible"),this._tilePopPop(a));},_tileAbortHandler:function(a){a=a.currentTarget;this.onError(Error("Unable to load tile: "+a.src));m.set(a,"visibility","hidden");this._tilePopPop(a);},_tileErrorHandler:function(a,c,d){d=d.currentTarget;var b,e,f=!0;if(this.tileMap||!this.resampling){f=!1;}else{if(b=new J(d.src),b=b.path.split("/"),b=parseInt(b[b.length-3]),e=this._ct.lod.level-b+1,this._multiple=Math.pow(2,e),b===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance){f=!1;}}f?this._resample(d,a,c):(this.onError(Error("Unable to load tile: "+d.src)),m.set(d,"visibility","hidden"),this._tilePopPop(d));},_resample:function(a,c,d){var b=(new J(a.src)).path.split("/"),e=this._multiple,f=parseInt(b[b.length-3])-1,h=parseInt(c/e),g=parseInt(d/e),b=d%e,u=c%e,h=this.getTileUrl(f,h,g);c=this.getTileUrl(f+Math.log(e)/Math.LN2,c,d);e={width:this._tileW*e+"px",height:this._tileH*e+"px",margin:"-"+this._tileW*u+"px 0 0 "+("-"+this._tileH*b+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[c]={src:h,css:e};m.set(a,e);x("chrome")&&a.setAttribute("src",null);a.src=h;},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()));},setOpacity:function(a){if(this.opacity!=a){this.onOpacityChange(this.opacity=a);}},onOpacityChange:function(){},_opacityChangeHandler:function(a){var c=m.set,d,b,e;if("css-transforms"===this._map.navigationMode){if(this._active){e=this._active.childNodes;for(d=e.length-1;0<=d;d--){c(e[d],"opacity",a);}}for(d=this._passives.length-1;0<=d;d--){e=this._passives[d].childNodes;for(b=e.length-1;0<=b;b--){c(e[b],"opacity",a);}}}else{e=this._div.childNodes;for(d=e.length-1;0<=d;d--){c(e[d],"opacity",a);}}},setExclusionAreas:function(a){this.exclusionAreas=a;if(this.loaded&&this._map&&this._map.loaded){var c=this._map.spatialReference,d=this.tileInfo,b=d.origin,e=d.lods,f=e[0].level,h=e[e.length-1].level,g,m,l,k,p,r,s,q,n;if(!this.exclusionAreas||!this.exclusionAreas.length){this._exclusionsPerZoom=null;}else{this._exclusionsPerZoom=[];m=0;for(l=a.length;m<l;m++){if(g=a[m],(n=g.geometry)&&"extent"===n.type&&n.xmin<=n.xmax&&n.ymin<=n.ymax){if(!c.equals(n.spatialReference)){if(c._canProject(n.spatialReference)){c.isWebMercator()?(q=z.lngLatToXY(n.xmin,n.ymin),n=z.lngLatToXY(n.xmax,n.ymax)):(q=z.xyToLngLat(n.xmin,n.ymin,!0),n=z.xyToLngLat(n.xmax,n.ymax,!0)),n=new R(q[0],q[1],n[0],n[1],c);}else{continue;}}s=-1;if(g.minZoom&&-1!==g.minZoom){s=g.minZoom;}else{if(g.minScale&&-1!==g.minScale){k=0;for(p=e.length;k<p;k++){if(e[k].scale<=g.minScale){s=e[k].level;break;}}}}s=Math.max(s,f);q=-1;if(g.maxZoom&&-1!==g.maxZoom){q=g.maxZoom;}else{if(g.maxScale&&-1!==g.maxScale){k=0;for(p=e.length;k<p;k++){if(e[k].scale<g.maxScale){q=e[k-1].level;break;}else{if(e[k].scale===g.maxScale){q=e[k].level;break;}}}}}q=-1===q?h:Math.min(q,h);for(g=s;g<=q;g++){k=0;for(p=e.length;k<p;k++){if(e[k].level===g){r=e[k];break;}}r&&(this._exclusionsPerZoom[g]||(this._exclusionsPerZoom[g]=[]),k=1/r.resolution/d.rows,p=1/r.resolution/d.cols,this._exclusionsPerZoom[g].push({rowFrom:Math.floor((b.y-n.ymax)*k),rowTo:Math.ceil((b.y-n.ymin)*k),colFrom:Math.floor((n.xmin-b.x)*p),colTo:Math.ceil((n.xmax-b.x)*p)}));}}}}this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD);}},_isExcluded:function(a,c,d){var b,e,f;if(!this._exclusionsPerZoom){return !1;}b=this._exclusionsPerZoom[a];if(!b){return !1;}e=0;for(f=b.length;e<f;e++){if(a=b[e],c>=a.rowFrom&&c<a.rowTo&&d>=a.colFrom&&d<a.colTo){return !0;}}return !1;}});});},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(dojo,_1249,dxc){dxc.ArrayList=function(arr){var items=[];if(arr){items=items.concat(arr);}this.count=items.length;this.add=function(obj){items.push(obj);this.count=items.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=items.length;}else{for(var i=0;i<a.length;i++){items.push(a[i]);}this.count=items.length;}};this.clear=function(){items.splice(0,items.length);this.count=0;};this.clone=function(){return new dxc.ArrayList(items);};this.contains=function(obj){for(var i=0;i<items.length;i++){if(items[i]==obj){return true;}}return false;};this.forEach=function(fn,scope){dojo.forEach(items,fn,scope);};this.getIterator=function(){return new dxc.Iterator(items);};this.indexOf=function(obj){for(var i=0;i<items.length;i++){if(items[i]==obj){return i;}}return -1;};this.insert=function(i,obj){items.splice(i,0,obj);this.count=items.length;};this.item=function(i){return items[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){items.splice(i,1);}this.count=items.length;};this.removeAt=function(i){items.splice(i,1);this.count=items.length;};this.reverse=function(){items.reverse();};this.sort=function(fn){if(fn){items.sort(fn);}else{items.sort();}};this.setByIndex=function(i,obj){items[i]=obj;this.count=items.length;};this.toArray=function(){return [].concat(items);};this.toString=function(delim){return items.join((delim||","));};};return dxc.ArrayList;});},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(dojo,lang,arr){var _124a=lang.getObject("dojox.collections",true);_124a.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};_124a.Iterator=function(a){var _124b=0;this.element=a[_124b]||null;this.atEnd=function(){return (_124b>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_124b++];return this.element;};this.map=function(fn,scope){return arr.map(a,fn,scope);};this.reset=function(){_124b=0;this.element=a[_124b];};};_124a.DictionaryIterator=function(obj){var a=[];var _124c={};for(var p in obj){if(!_124c[p]){a.push(obj[p]);}}var _124d=0;this.element=a[_124d]||null;this.atEnd=function(){return (_124d>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_124d++];return this.element;};this.map=function(fn,scope){return arr.map(a,fn,scope);};this.reset=function(){_124d=0;this.element=a[_124d];};};return _124a;});},"esri/layers/ArcGISMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../lang","../request","../SpatialReference","../geometry/Extent","./LayerInfo"],function(c,k,l,q,r,f,m,n,g,p){return c(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,d){this.layerInfos=[];d&&(this.infoTemplates=d.infoTemplates||null);var e=this._params={},b=this._url.query?this._url.query.token:null;b&&(e.token=b);},setInfoTemplates:function(a){this.infoTemplates=a;},_load:function(){m({url:this._url.path,content:k.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(a,d){try{this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();this.description=a.description;this.copyright=a.copyrightText;this.spatialReference=a.spatialReference&&new n(a.spatialReference);this.initialExtent=a.initialExtent&&new g(a.initialExtent);this.fullExtent=a.fullExtent&&new g(a.fullExtent);this.units=a.units;this.maxRecordCount=a.maxRecordCount;this.maxImageHeight=a.maxImageHeight;this.maxImageWidth=a.maxImageWidth;this.supportsDynamicLayers=a.supportsDynamicLayers;var e=this.layerInfos=[],b=a.layers,h=this._defaultVisibleLayers=[];l.forEach(b,function(a,b){e[b]=new p(a);a.defaultVisibility&&h.push(a.id);});this.visibleLayers||(this.visibleLayers=h);this.version=a.currentVersion;this.version||(this.version="capabilities" in a||"tables" in a?10:"supportedImageFormatTypes" in a?9.31:9.3);this.capabilities=a.capabilities;f.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);f.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale);}catch(c){this._errorHandler(c);}}});});},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(a,b,d,e,c){return a(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(a){b.mixin(this,a);},toJson:function(){return c.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds});}});});},"esri/layers/TimeInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../TimeExtent","./TimeReference","./LayerTimeOptions"],function(b,c,g,h,d,e,f){b=b(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(a){null!==a&&(c.mixin(this,a),a.exportOptions&&(this.exportOptions=new f(a.exportOptions)),this.timeExtent=null,a.timeExtent&&2===a.timeExtent.length&&(this.timeExtent=new d(a.timeExtent)),this.timeReference=new e(a.timeReference));}});c.mixin(b,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});return b;});},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(l,m,n,p){var k=l(null,{declaredClass:"esri.TimeExtent",constructor:function(a){if(1<arguments.length){this._create(arguments[0],arguments[1]);}else{if(a){if(m.isArray(a)){var c=a[0],b=a[1];this.startTime=null===c||"null"===c?null:new Date(c);this.endTime=null===b||"null"===b?null:new Date(b);}else{a instanceof Date&&this._create(a,null);}}}},offset:function(a,c){var b=new k,d=this.startTime,e=this.endTime;d&&(b.startTime=this._getOffsettedDate(d,a,c));e&&(b.endTime=this._getOffsettedDate(e,a,c));return b;},intersection:function(a){return this._intersection(this,a);},toJson:function(){var a=[],c=this.startTime;a.push(c?c.getTime():"null");c=this.endTime;a.push(c?c.getTime():"null");return a;},_create:function(a,c){this.startTime=a?new Date(a.getTime()):null;this.endTime=c?new Date(c.getTime()):null;},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(a,c){if(a&&c){var b=a.startTime,d=a.endTime,e=c.startTime,f=c.endTime,b=b?b.getTime():-Infinity,e=e?e.getTime():-Infinity,d=d?d.getTime():Infinity,f=f?f.getTime():Infinity,g,h;e>=b&&e<=d?g=e:b>=e&&b<=f&&(g=b);d>=e&&d<=f?h=d:f>=b&&f<=d&&(h=f);if(!isNaN(g)&&!isNaN(h)){return b=new k,b.startTime=-Infinity===g?null:new Date(g),b.endTime=Infinity===h?null:new Date(h),b;}}return null;},_getOffsettedDate:function(a,c,b){var d=this._refData;a=new Date(a.getTime());c&&b&&(d=d[b],a[d.setter](a[d.getter]()+c*d.multiplier));return a;}});return k;});},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,c,d,e){return b(null,{declaredClass:"esri.layers.TimeReference",constructor:function(a){a&&c.mixin(this,a);}});});},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,c,e,f,d){return b(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(a){a&&c.mixin(this,a);},toJson:function(){return d.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime});}});});},"esri/layers/TileMap":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/Deferred","dojo/io-query","../request","../urlUtils"],function(l,k,m,n,p,q,r){return l(null,{declaredClass:"esri.layers.TileMap",constructor:function(a){this.layer=a;this._tileMaps={};},getTile:function(a,b,c,d,e){a={id:d,level:a,row:b,col:c};b=this._getResamplingBudget();0<b?this._process({tile:a,requestedTile:a,callback:e,resamplingBudget:b}):(e||this.callback).call(this,a,a);},statusOf:function(a,b,c){var d=this._getResamplingBudget();a={level:a,row:b,col:c};if(0===d){return 1;}for(;0<=d;){b=this._tileToTileMap(a);if(!this._tileMaps[b.uid]){return -1;}b=this._tileMaps[b.uid];if(!b.promise.isFulfilled()){return -1;}if(this._isTileAvailable(a,b)){return 1;}a=this._parentTile(a);if(!a){break;}d--;}return 0;},style:function(a,b){if(!(a.level===b.level&&a.row===b.row&&a.col===b.col)){for(var c=this.layer.tileInfo,d=c.lods,e=c.cols,c=c.rows,f,g,h=d.length-1;!f||!g;){!f&&d[h].level===a.level&&(f=d[h]),!g&&d[h].level===b.level&&(g=d[h]),h--;}d=Math.round(f.resolution/g.resolution);return {width:e*d+"px",height:c*d+"px",margin:"-"+b.row%d*c+"px 0 0 -"+b.col%d*e+"px"};}},_process:function(a){var b=a.tile,c=this._tileToTileMap(b),d=this._parentTile(b);this._getTileMap(c).then(k.hitch(this,function(e){c=e;this._isTileAvailable(b,c)?(a.callback||this.callback).call(this,b,a.requestedTile):0<a.resamplingBudget&&d?(a.resamplingBudget--,a.tile=d,this._process(a)):(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile);}),k.hitch(this,function(){(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile);}));},_getTileMap:function(a){var b,c,d,e,f=null;this._tileMaps[a.uid]?(a=this._tileMaps[a.uid],b=a.promise):(this._tileMaps[a.uid]=a,c=new n,q({url:this._getTileMapUrl(a.level,a.row,a.col),handleAs:"json",callbackParamName:"callback",timeout:3000,load:function(b){k.mixin(a,b);if(a.data&&0<a.data.length){e=a.data.length;if(1===e){f=a.data[0];}else{f=a.data[0];for(d=1;d<e;d++){if(a.data[d]!==f){f=null;break;}}}null!==f&&(delete a.data,a.value=f);}c.resolve(a);},error:function(a){c.reject();}}),b=a.promise=c.promise);return b;},_parentTile:function(a){var b=this.layer.tileInfo.lods,c,d,e=null;m.some(b,function(b,e){return a.level===b.level?(c=b,d=e,!0):!1;});0<d&&(b=b[d-1],e={id:a.id,level:b.level,row:Math.floor(a.row*c.resolution/b.resolution+0.01),col:Math.floor(a.col*c.resolution/b.resolution+0.01)});return e;},_tileToTileMap:function(a){var b=8*Math.floor(a.row/8),c=8*Math.floor(a.col/8);return {uid:a.level+"_"+b+"_"+c,level:a.level,row:b,col:c};},_isTileAvailable:function(a,b){var c,d;b.valid?void 0!==b.value?c=b.value:(c=b.location.left,d=b.location.top,c=(a.row-d)*b.location.width+(a.col-c),c=c<b.data.length?b.data[c]:0):c=0;return c;},_getTileMapUrl:function(a,b,c){var d=this.layer,e=d.tileServers,f=d._getToken(),g=d._url.query;a=(e?e[b%e.length]:d._url.path)+"/tilemap/"+a+"/"+b+"/"+c+"/8/8";g&&(a+="?"+p.objectToQuery(g));if(f&&(!g||!g.token)){a+=(-1===a.indexOf("?")?"?":"&")+"token="+f;}a=d.addTimestampToURL(a);return r.addProxy(a);},_getResamplingBudget:function(){var a=this.layer,b=0;if(a.resampling&&(b=a._resamplingTolerance,null===b||void 0===b)){b=a.tileInfo.lods.length;}return b;}});});},"esri/layers/OpenStreetMapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../urlUtils","../SpatialReference","../geometry/Extent","./TiledMapServiceLayer","./TileInfo"],function(c,h,k,l,d,e,b,f,g){return c(f,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(a){this.spatialReference=new e({wkid:102100});this.tileInfo=new g({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817},{level:19,scale:1128.497176,resolution:0.298582141647617}]});this.fullExtent=new b({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new b({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=a&&a.tileServers||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=a?a.displayLevels:null;this.copyright=a&&a.copyright||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(a=a&&a.loadCallback)&&a(this);},getTileUrl:function(a,b,c){a=this.tileServers[b%this.serversLength]+"/"+a+"/"+c+"/"+b+".png";a=this.addTimestampToURL(a);return d.addProxy(a);}});});},"esri/dijit/Popup":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/window","dojo/Stateful","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","../kernel","../lang","../domUtils","../geometry/Polyline","../geometry/Polygon","../InfoWindowBase","../PopupBase","dojo/i18n!../nls/jsapi","dojo/NodeList-dom","require","require"],function(D,y,q,f,g,E,F,G,O,B,t,e,C,A,n,H,P,u,I,J,K,L,M,N){return D([L,M,G],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1000,location:null,constructor:function(a,c){this.initialize();y.mixin(this,a);this.domNode=B.byId(c);var b=this._nls=y.mixin({},N.widgets.popup),d=this.domNode;e.add(d,"esriPopup");(this._isRTL=!A.isBodyLtr())&&n.set(d,"direction","rtl");t.set(d,"innerHTML","<div class='esriPopupWrapper' style='position: absolute;'><div class='sizer'><div class='titlePane'><div class='spinner hidden' title='"+b.NLS_searching+"...'></div><div class='title'></div><div class='titleButton prev hidden' title='"+b.NLS_prevFeature+"'></div><div class='titleButton next hidden' title='"+b.NLS_nextFeature+"'></div><div class='titleButton maximize' title='"+b.NLS_maximize+"'></div><div class='titleButton close' title='"+b.NLS_close+"'></div></div></div><div class='sizer content'><div class='contentPane'></div></div><div class='sizer'><div class='actionsPane'><div class='actionList hidden'><a title="+b.NLS_zoomTo+" class='action zoomTo' href='javascript:void(0);'><span>"+b.NLS_zoomTo+"</span></a></div></div></div><div class='pointer hidden'></div></div><div class='outerPointer hidden'></div>");this._sizers=g.query(".sizer",d);b=g.query(".titlePane",d)[0];B.setSelectable(b,!1);this._title=g.query(".title",b)[0];this._prevFeatureButton=g.query(".prev",b)[0];this._nextFeatureButton=g.query(".next",b)[0];this._maxButton=g.query(".maximize",b)[0];this._spinner=g.query(".spinner",b)[0];this._contentPane=g.query(".contentPane",d)[0];this._positioner=g.query(".esriPopupWrapper",d)[0];this._pointer=g.query(".pointer",d)[0];this._outerPointer=g.query(".outerPointer",d)[0];this._actionList=g.query(".actionsPane .actionList",d)[0];this._eventConnections=[f.connect(g.query(".close",b)[0],"onclick",this,this.hide),f.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),f.connect(this._nextFeatureButton,"onclick",this,this.selectNext),f.connect(this._maxButton,"onclick",this,this._toggleSize),f.connect(g.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),f.connect(this,"onClearFeatures",this,this._featuresCleared),f.connect(this,"onSelectionChange",this,this._featureSelected),f.connect(this,"onDfdComplete",this,this._updateUI)];E("esri-touch")&&(d=I.setScrollable(this._contentPane),this._eventConnections.push(d[0],d[1]));this._toggleVisibility(!1);},onMaximize:function(){},onRestore:function(){},setMap:function(a){this.inherited(arguments);C.place(this.domNode,a.root);this.highlight&&this.enableHighlight(a);this._maxHeight=n.get(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(a){if(this.popupWindow){if(!u.isDefined(a)||""===a){a="&nbsp;";}this.destroyDijits(this._title);this.place(a,this._title);this.isShowing&&(this.startupDijits(this._title),this.reposition());}},setContent:function(a){if(this.popupWindow){if(!u.isDefined(a)||""===a){a="&nbsp;";}this.destroyDijits(this._contentPane);this.place(a,this._contentPane);this.isShowing&&(this.startupDijits(this._contentPane),this.reposition());}},show:function(a,c){if(this.popupWindow){if(this._delayHide=!1,a){var b=this.map,d;a.spatialReference?(this.location=a,d=b.toScreen(a)):(this.location=b.toMap(a),d=a);var p=b._getFrameWidth();if(-1!==p&&(d.x%=p,0>d.x&&(d.x+=p),b.width>p)){for(b=(b.width-p)/2;d.x<b;){d.x+=p;}}this._maximized?this.restore():this._setPosition(d);c&&c.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this.startupDijits(this._contentPane),this.reposition(),this.showHighlight(),this.onShow());}else{this._toggleVisibility(!0);}}},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),this.keepHighlightOnHide||this.hideHighlight(),this.onHide());},resize:function(a,c){this.popupWindow&&(this._sizers.style({width:a+"px"}),n.set(this._contentPane,"maxHeight",c+"px"),this._maxHeight=c,this.isShowing&&this.reposition());},reposition:function(){this.popupWindow&&this.map&&(this.location&&!this._maximized&&this.isShowing)&&this._setPosition(this.map.toScreen(this.location));},maximize:function(){var a=this.map;if(a&&!this._maximized&&this.popupWindow){this._maximized=!0;var c=this._maxButton;e.remove(c,"maximize");e.add(c,"restore");t.set(c,"title",this._nls.NLS_restore);var c=this.marginLeft,b=this.marginTop,d=a.width-2*c,a=a.height-2*b;n.set(this.domNode,{left:this._isRTL?null:c+"px",right:this._isRTL?c+"px":null,top:b+"px",bottom:null});n.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=n.get(this._sizers[0],"width");this._savedHeight=n.get(this._contentPane,"maxHeight");this._sizers.style({width:d+"px"});n.set(this._contentPane,{maxHeight:a-65+"px",height:a-65+"px"});this._showPointer("");this._unfollowMap();e.add(this.domNode,"esriPopupMaximized");this.onMaximize();}},restore:function(){if(this.map&&this._maximized&&this.popupWindow){this._maximized=!1;var a=this._maxButton;e.remove(a,"restore");e.add(a,"maximize");t.set(a,"title",this._nls.NLS_maximize);n.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();e.remove(this.domNode,"esriPopupMaximized");this.onRestore();}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);this.destroyDijits(this._content);q.forEach(this._eventConnections,f.disconnect);C.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},postscript:null,_highlightSetter:function(a){var c=this.highlight,b=this.map;this.highlight=a;if(b&&a!==c){if(a){if(this.enableHighlight(b),a=this.features&&this.features[this.selectedIndex]){this.updateHighlight(b,a),this.showHighlight();}}else{this.disableHighlight(b);}}},_pagingControlsSetter:function(a){var c=this.pagingControls,b=this.map;this.pagingControls=a;b&&a!==c&&this._updatePagingControls();},_pagingInfoSetter:function(a){var c=this.pagingInfo,b=this.map;this.pagingInfo=a;b&&(a!==c&&this.features&&this.features.length)&&this._updatePagingInfo();},_popupWindowSetter:function(a){var c=this.popupWindow,b=this.map;this.popupWindow=a;b&&a!==c&&(a?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()));},_anchorSetter:function(a){var c=this.anchor;this.anchor=a;this.map&&a!==c&&this.reposition();},_featuresCleared:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},_featureSelected:function(){this._updateUI();this._updateWindow();},_updateWindow:function(){var a=this.selectedIndex;if(0<=a){var c=this.features[a].getContent(),b;!this.titleInBody&&c&&y.isString(c.id)&&(b=H.byId(c.id))&&(b.set&&/_PopupRenderer/.test(b.declaredClass))&&b.set("showTitle",!1);this.setContent(c);this.updateHighlight(this.map,this.features[a]);this.showHighlight();}},_toggleVisibility:function(a){this._setVisibility(a);this.isShowing=a;},_setVisibility:function(a){n.set(this.domNode,"visibility",a?"visible":"hidden");e.toggle(this.domNode,"esriPopupVisible",a);},_waitAndHide:function(a){var c=this;this._delayHide=!0;setTimeout(function(){c._delayHide&&(c._delayHide=!1,c.hide());},a);},_followMap:function(){this._unfollowMap();var a=this.map;this._handles=[f.connect(a,"onPanStart",this,this._onPanStart),f.connect(a,"onPan",this,this._onPan),f.connect(a,"onZoomStart",this,this._onZoomStart),f.connect(a,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var a=this._handles;a&&(q.forEach(a,f.disconnect),this._handles=null);},_onPanStart:function(){var a=this.domNode.style;this._panOrigin={left:a.left,top:a.top,right:a.right,bottom:a.bottom};},_onPan:function(a,c){var b=this._panOrigin,d=c.x,p=c.y,e=b.left,h=b.top,r=b.right,b=b.bottom;e&&(e=parseFloat(e)+d+"px");h&&(h=parseFloat(h)+p+"px");r&&(r=parseFloat(r)-d+"px");b&&(b=parseFloat(b)-p+"px");n.set(this.domNode,{left:e,top:h,right:r,bottom:b});},_onZoomStart:function(){this._setVisibility(!1);},_onExtentChange:function(a,c,b){b&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null;},_toggleSize:function(){this._maximized?this.restore():this.maximize();},_setPosition:function(a){var c=a.x,b=a.y;a=this.offsetX||0;var d=this.offsetY||0,e=0,f=0,h=A.position(this.map.container,!0),r=h.w,g=h.h,l="Left",m="bottom",s=A.getContentBox(this._positioner),q=s.w/2,y=s.h/2,v=n.get(this._sizers[0],"height")+this._maxHeight+n.get(this._sizers[2],"height"),z=v/2,t=0,u=0,w=c,x=b,k=this.anchor.toLowerCase();if("auto"===k){if(k=F.getBox){k=k(),t=Math.max(k.l,h.x),r=Math.min(k.l+k.w,h.x+h.w),u=Math.max(k.t,h.y),g=Math.min(k.t+k.h,h.y+h.h),w+=h.x,x+=h.y;}h=x-u>=v;v=g-x>=v;k=r-w>=s.w;s=w-t>=s.w;x-u>z&&g-x>=z&&(k?(m="",l="Left"):s&&(m="",l="Right"));l&&m&&(w-t>q&&r-w>=q)&&(h?(l="",m="bottom"):v&&(l="",m="top"));l&&m&&(k&&h?(l="Left",m="bottom"):k&&v?(l="Left",m="top"):s&&v?(l="Right",m="top"):s&&h&&(l="Right",m="bottom"));}else{m=l="",-1!==k.indexOf("top")?m="bottom":-1!==k.indexOf("bottom")&&(m="top"),-1!==k.indexOf("left")?l="Right":-1!==k.indexOf("right")&&(l="Left");}z=m+l;switch(z){case "top":case "bottom":f=14;break;case "Left":case "Right":e=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":f=14,e=-16;}n.set(this.domNode,{left:c+"px",top:b+"px",right:null,bottom:null});c={left:null,right:null,top:null,bottom:null};l?c[l.toLowerCase()]=e+a+"px":c.left=-q+"px";m?c[m]=f+d+"px":c.top=-y+"px";n.set(this._positioner,c);this._showPointer(z);},_showPointer:function(a){e.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));e.remove(this._outerPointer,["right","left","hidden"]);"Right"===a||"Left"===a?(a=a.toLowerCase(),e.add(this._outerPointer,a)):e.add(this._pointer,a);},_setPagerCallbacks:function(a,c,b){if(this.pagingControls&&!(a===this&&(!this._pagerScope||this._pagerScope===this))&&a!==this._pagerScope){this._pagerScope=a;a===this&&(c=this.selectPrevious,b=this.selectNext);var d=this._eventConnections;f.disconnect(d[1]);f.disconnect(d[2]);c&&(d[1]=f.connect(this._prevFeatureButton,"onclick",a,c));b&&(d[2]=f.connect(this._nextFeatureButton,"onclick",a,b));}},_getLocation:function(a){var c=this.map,b,d,e=0,f;if(a=a&&a.geometry){switch(a.type){case "point":b=a;break;case "multipoint":b=a.getPoint(0);d=a.getExtent();break;case "polyline":b=a.getPoint(0,0);d=a.getExtent();-1!==c._getFrameWidth()&&(q.forEach(a.paths,function(a){a=(new J({paths:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),b=d>b?d:b;b>e&&(e=b,f=a);}),f.spatialReference=d.spatialReference,d=f);break;case "polygon":b=a.getPoint(0,0),d=a.getExtent(),-1!==c._getFrameWidth()&&(q.forEach(a.rings,function(a){a=(new K({rings:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),b=d>b?d:b;b>e&&(e=b,f=a);}),f.spatialReference=d.spatialReference,d=f);}}return [b,d];},_zoomToFeature:function(a){a.preventDefault();var c=this.features,b=this.selectedIndex;a=this.map;if(c){b=this._getLocation(c[b]);c=b[0];b=b[1];c||(c=this.location);if(!b||!b.intersects(this.location)){this.location=c;}if(b&&b.getWidth()&&b.getHeight()){a.setExtent(b,!0);}else{var d=a.getNumLevels(),b=a.getLevel(),e=a.getMaxZoom(),f=this.zoomFactor||1;0<d?b!==e&&(d=b+f,d>e&&(d=e),a.navigationManager._wheelZoom({value:d-b,mapPoint:c},!0)):a.navigationManager._wheelZoom({value:2*(1/Math.pow(2,f)),mapPoint:c},!0);}}},_updatePagingControls:function(){var a=this._prevFeatureButton,c=this._nextFeatureButton,b=this.selectedIndex,d=this.features?this.features.length:0;this.pagingControls&&1<d?(0===b?e.add(a,"hidden"):e.remove(a,"hidden"),b===d-1?e.add(c,"hidden"):e.remove(c,"hidden")):(e.add(a,"hidden"),e.add(c,"hidden"));},_updatePagingInfo:function(){var a=this.features?this.features.length:0,c=this._nls,b="&nbsp;";this.pagingInfo&&(1<a&&c.NLS_pagingInfo)&&(b=u.substitute({index:this.selectedIndex+1,total:a},c.NLS_pagingInfo));if(a&&(c=this.getSelectedFeature(),a=c.getInfoTemplate(),c=c.getTitle(),(!a||/esri\.InfoTemplate/.test(a.declaredClass)||!this.titleInBody)&&c)){b=c+("&nbsp;"===b?"":" "+b);}this.setTitle(b);},_updateUI:function(){if(this.popupWindow){var a=this.features,c=this.deferreds,b=a?a.length:0,d=this._spinner,f=this._actionList,g=this._nls;this._updatePagingControls();this._updatePagingInfo();b?e.remove(f,"hidden"):e.add(f,"hidden");c&&c.length?a?e.remove(d,"hidden"):this.setContent("<div style='text-align: center;'>"+g.NLS_searching+"...</div>"):(e.add(d,"hidden"),b||(this.setContent("<div style='text-align: center;'>"+g.NLS_noInfo+".</div>"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay)));}}});});},"esri/InfoWindowBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Deferred","dojo/dom-construct","dojo/has","dijit/registry","./kernel","./lang","./geometry/ScreenPoint"],function(l,f,g,e,m,n,q,h,r,k,p){return l(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var a=f.hitch;this.__set_title=a(this,this.__set_title);this.__err_title=a(this,this.__err_title);this.__set_content=a(this,this.__set_content);this.__err_content=a(this,this.__err_content);},setMap:function(a){this.map=a;},unsetMap:function(a){delete this.map;},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(a,b){k.isDefined(a)?f.isObject(a)?n.place(a,b,"only"):b.innerHTML=a:b.innerHTML="";},startupDijits:function(a){this._processDijits(a);},destroyDijits:function(a){this._processDijits(a,!0);},_processDijits:function(a,b){if(a&&1===a.children.length){var c=a.children[0];if(c){var d=h.byNode(c),c=d?[d]:h.findWidgets(c);g.forEach(c,function(a){if(b){if(a._started&&!a._destroyed){try{a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy();}catch(c){}}}else{if(!a._started){try{a.startup();}catch(d){}}}});}}},__registerMapListeners:function(){this.__unregisterMapListeners();var a=this.map;this.__handles=[e.connect(a,"onPan",this,this.__onMapPan),e.connect(a,"onZoomStart",this,this.__onMapZmStart),e.connect(a,"onExtentChange",this,this.__onMapExtChg)];},__unregisterMapListeners:function(){var a=this.__handles;a&&(g.forEach(a,e.disconnect,e),this.__handles=null);},__onMapPan:function(a,b){this.move(b,!0);},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new p(this.coords));this.hide(null,!0);},__onMapExtChg:function(a,b,c){a=this.map;var d=this.mapCoords;d?this.show(d,null,!0):(b=c?a.toScreen(this.__mcoords):this.coords.offset(b&&b.x||0,b&&b.y||0),this.show(b,null,!0));},__setValue:function(a,b){this[a].innerHTML="";var c="_dfd"+a,d=this[c];d&&-1===d.fired&&(d.cancel(),this[c]=null);k.isDefined(b)&&(b instanceof m?(this[c]=b,b.addCallbacks(this["__set"+a],this["__err"+a])):this.__render(a,b));},__set_title:function(a){this._dfd_title=null;this.__render("_title",a);},__err_title:function(a){this._dfd_title=null;},__set_content:function(a){this._dfd_content=null;this.__render("_content",a);},__err_content:function(a){this._dfd_content=null;},__render:function(a,b){var c=this[a];this.place(b,c);this.isShowing&&(this.startupDijits(c),"_title"===a&&this._adjustContentArea&&this._adjustContentArea());}});});},"esri/PopupBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/Deferred","dojo/has","./kernel","./graphic","./geometry/Point","./geometry/jsonUtils","./geometry/mathUtils","./geometry/webMercatorUtils","./symbols/SimpleMarkerSymbol","./symbols/SimpleLineSymbol","./symbols/CartographicLineSymbol","./symbols/SimpleFillSymbol","./tasks/query","./Evented","require"],function(v,n,d,p,w,E,F,x,y,z,A,s,t,q,r,u,B,C){function D(a){return "sizeInfo"===a.type;};return v(C,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",n.hitch(this,this._resetUpdateEndListeners));this.on("dfd-complete",n.hitch(this,this._processFeatures));this.on("set-features",n.hitch(this,this._processFeatures));},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();},setFeatures:function(a){if(a&&a.length){this.clearFeatures();var b,c;a[0] instanceof w?c=a:b=a;b?this._updateFeatures(null,b):(this.deferreds=c,c=c.slice(0),d.forEach(c,function(a){a.addBoth(n.hitch(this,this._updateFeatures,a));},this));}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var a=this.selectedIndex;this.selectedIndex=-1;if(-1<a){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var a=this.features;if(a){return a[this.selectedIndex];}},select:function(a){0>a||a>=this.count||(this.selectedIndex=a,this.onSelectionChange());},enableHighlight:function(a){this._highlighted=a.graphics.add(new x(new y(0,0,a.spatialReference)));this._highlighted.hide();this.markerSymbol||(a=this.markerSymbol=new t,a.setStyle(t.STYLE_TARGET),a._setDim(16,16,0),a.setOutline(new r(q.STYLE_SOLID,new p([0,255,255]),2,r.CAP_ROUND,r.JOIN_ROUND)),a.setColor(new p([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new q(q.STYLE_SOLID,new p([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new u(u.STYLE_NULL,new q(q.STYLE_SOLID,new p([0,255,255]),2),new p([0,0,0,0])));},disableHighlight:function(a){var b=this._highlighted;b&&(b.hide(),a.graphics.remove(b),delete this._highlighted);this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){var a=this.features&&this.features[this.selectedIndex];this._highlighted&&(a&&a.geometry)&&this._highlighted.show();},hideHighlight:function(){this._highlighted&&this._highlighted.hide();},updateHighlight:function(a,b){var c=b.geometry,f=this._highlighted;if(!c||!f){f&&f.hide();}else{f.hide();!f._graphicsLayer&&a&&a.graphics.add(f);f.setGeometry(z.fromJson(c.toJson()));var e;switch(c.type){case "point":case "multipoint":e=this.markerSymbol;e.setOffset(0,0);e.setAngle(0);var g=b.getLayer();if(g){var c=g._getSymbol(b),l,h,d=0,m=0,k=0;if(c){g=!b.symbol?g._getRenderer(b):null;if(d=this._getSizeInfo(g)){l=h=g.getSize(b,{sizeInfo:d,shape:c.style,resolution:a&&a.getResolutionInMeters&&a.getResolutionInMeters()});}else{switch(c.type){case "simplemarkersymbol":l=h=c.size||0;break;case "picturemarkersymbol":l=c.width||0,h=c.height||0;}}d=c.xoffset||0;m=c.yoffset||0;k=c.angle||0;}l&&h&&e._setDim(l+1,h+1,0);e.setOffset(d,m);e.setAngle(k);}break;case "polyline":e=this.lineSymbol;break;case "polygon":e=this.fillSymbol;}f.setSymbol(e);}},showClosestFirst:function(a){var b=this.features;if(b&&b.length){if(1<b.length){var c,f=Infinity,e=-1,g,l=A.getLength,h,d=a.spatialReference,m,k;a=a.normalize();for(c=b.length-1;0<=c;c--){if(g=b[c].geometry){m=g.spatialReference;h=0;try{k="point"===g.type?g:g.getExtent().getCenter(),k=k.normalize(),d&&(m&&!d.equals(m)&&d._canProject(m))&&(k=d.isWebMercator()?s.geographicToWebMercator(k):s.webMercatorToGeographic(k)),h=l(a,k);}catch(n){}0<h&&h<f&&(f=h,e=c);}}0<e&&(b.splice(0,0,b.splice(e,1)[0]),this.select(0));}}else{this.deferreds&&(this._marked=a);}},_unbind:function(a){a=d.indexOf(this.deferreds,a);if(-1!==a){return this.deferreds.splice(a,1),!this.deferreds.length?(this.deferreds=null,2):1;}},_fireComplete:function(a){var b=this._marked;b&&(this._marked=null,this.showClosestFirst(b));this.onDfdComplete(a);},_updateFeatures:function(a,b){if(a){if(this.deferreds){var c=this._unbind(a);if(c){if(b&&b instanceof Error){if(this._fireComplete(b),2===c){this.onSetFeatures();}}else{if(b&&b.length){if(this.features){var f=d.filter(b,function(a){return -1===d.indexOf(this.features,a);},this);this.features=this.features.concat(f);this.count=this.features.length;this._fireComplete();if(2===c){this.onSetFeatures();}}else{this.features=b;this.count=b.length;this.selectedIndex=0;this._fireComplete();if(2===c){this.onSetFeatures();}this.select(0);}}else{if(this._fireComplete(),2===c){this.onSetFeatures();}}}}}}else{this.features=b,this.count=b.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0);}},_getSizeInfo:function(a){return a?a.sizeInfo||d.filter(a.visualVariables,D)[0]:null;},_resetUpdateEndListeners:function(){this._featureLayers={};d.forEach(this._updateEndHandles,function(a){a.remove();});this._updateEndHandles=[];},_processFeatures:function(){d.forEach(this.features,function(a){if((a=a.getLayer())&&!this._featureLayers[a.id]&&1===a.currentMode&&a.objectIdField&&a.hasXYFootprint&&a.queryFeatures&&("esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"===a.geometryType||a.hasXYFootprint())){this._featureLayers[a.id]=a,a=a.on("update-end",n.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(a);}},this);},_fLyrUpdateEndHandler:function(a){if(!a.error){var b=this,c=a.target,f={},e=[];d.forEach(this.features,function(a){if(a.getLayer()===c){var b=a.attributes[c.objectIdField];f[b]=a;e.push(b);}});e.length&&(a=new B,a.objectIds=e,c.queryFeatures(a,function(a){d.forEach(a.features,function(a){var b=f[a.attributes[c.objectIdField]];b.geometry!==a.geometry&&(b.setGeometry(a.geometry),this._highlighted&&b===this.getSelectedFeature()&&this._highlighted.setGeometry(a.geometry));},b);}));}}});});},"esri/graphic":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./domUtils","./lang","./InfoTemplate","./geometry/jsonUtils","./symbols/jsonUtils"],function(e,f,n,p,g,h,k,l,m){e=e(null,{declaredClass:"esri.Graphic",constructor:function(a,b,c,d){a&&!a.declaredClass?(this.geometry=a.geometry?l.fromJson(a.geometry):null,this.symbol=a.symbol?m.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new k(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=c,this.infoTemplate=d);},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape;},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a;},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null;},getNodes:function(){var a=this.getShapes(),b,c,d=a.length,e=[];for(c=0;c<d;c++){(b=a[c]&&a[c].getNode())&&b.nodeType&&e.push(b);}return e;},getLayer:function(){return this._layer;},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this;},setGeometry:function(a){this.geometry=a;if(a=this._graphicsLayer){a._updateExtent(this),a._draw(this,!0);}return this;},setSymbol:function(a,b){var c=this._graphicsLayer,d=this._shape;this.symbol=a;c&&(b&&d&&c._removeShape(this),c._draw(this,!0));return this;},setAttributes:function(a){this.attributes=a;return this;},setInfoTemplate:function(a){this.infoTemplate=a;return this;},getInfoTemplate:function(){return this._getEffInfoTemplate();},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate;},getTitle:function(){var a=this.getInfoTemplate(),b=a&&a.title;if(f.isFunction(b)){b=b.call(a,this);}else{if(f.isString(b)){var c=(a=this.getLayer())&&a._getDateOpts,b=h.substitute(this.attributes,b,{first:!0,dateFormat:c&&c.call(a)});}}return b;},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(f.isFunction(b)){b=b.call(a,this);}else{if(f.isString(b)){var c=(a=this.getLayer())&&a._getDateOpts,b=h.substitute(this.attributes,b,{dateFormat:c&&c.call(a)});}}return b;},attr:function(a,b){var c=this.getNodes(),d,e=c.length;for(d=0;d<e;d++){null==b?c[d].removeAttribute(a):c[d].setAttribute(a,b);}return this;},show:function(){this.visible=this._visible=!0;var a,b,c;if(this.getShapes().length){a=this.getNodes();c=a.length;this.attr("data-hidden");for(b=0;b<c;b++){g.show(a[b]);}}else{this._graphicsLayer&&this._graphicsLayer._draw(this,!0);}return this;},hide:function(){this.visible=this._visible=!1;var a=this._graphicsLayer,b,c;if(a){if("canvas-2d"===a.surfaceType){a._removeShape(this);}else{if(a=this.getNodes(),c=a.length){this.attr("data-hidden","");for(b=0;b<c;b++){g.hide(a[b]);}}}}return this;},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=f.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a;}});e.prototype.getShape=e.prototype.getDojoShape;return e;});},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(b,c,e,f,d){return b(null,{declaredClass:"esri.InfoTemplate",constructor:function(a,b){a&&c.isObject(a)&&!c.isFunction(a)?c.mixin(this,a):(this.title=a||"${*}",this.content=b||"${*}");},setTitle:function(a){this.title=a;return this;},setContent:function(a){this.content=a;return this;},toJson:function(){return d.fixJson({title:this.title,content:this.content});}});});},"esri/geometry/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point","./Polyline","./Polygon","./Multipoint","./Extent"],function(g,h,k,b,c,d,e,f){return {fromJson:function(a){if(void 0!==a.x&&void 0!==a.y){return new b(a);}if(void 0!==a.paths){return new c(a);}if(void 0!==a.rings){return new d(a);}if(void 0!==a.points){return new e(a);}if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax){return new f(a);}},getJsonType:function(a){return a instanceof b?"esriGeometryPoint":a instanceof c?"esriGeometryPolyline":a instanceof d?"esriGeometryPolygon":a instanceof f?"esriGeometryEnvelope":a instanceof e?"esriGeometryMultipoint":null;},getGeometryType:function(a){return "esriGeometryPoint"===a?b:"esriGeometryPolyline"===a?c:"esriGeometryPolygon"===a?d:"esriGeometryEnvelope"===a?f:"esriGeometryMultipoint"===a?e:null;}};});},"esri/symbols/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./SimpleMarkerSymbol","./PictureMarkerSymbol","./SimpleLineSymbol","./CartographicLineSymbol","./SimpleFillSymbol","./PictureFillSymbol","./TextSymbol"],function(l,m,n,d,e,f,c,g,h,k){return {fromJson:function(a){var b=null;switch(a.type){case "esriSMS":b=new d(a);break;case "esriPMS":b=new e(a);break;case "esriTS":b=new k(a);break;case "esriSLS":b=void 0!==a.cap?new c(a):new f(a);break;case "esriCLS":b=new c(a);break;case "esriSFS":b=new g(a);break;case "esriPFS":b=new h(a);}return b;},getShapeDescriptors:function(a){return a&&a.getShapeDescriptors?a.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null};}};});},"esri/symbols/PictureMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","../kernel","../lang","../urlUtils","./MarkerSymbol"],function(d,f,h,e,n,k,l,m){var g={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};d=d(m,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(a,c,b){a?f.isString(a)?(this.url=a,c&&(this.width=c),b&&(this.height=b)):(this.width=e.pt2px(a.width),this.height=e.pt2px(a.height),c=a.imageData,!(9>h("ie"))&&c&&(b=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+c,this.imageData=b)):(f.mixin(this,g),this.width=e.pt2px(this.width),this.height=e.pt2px(this.height));},getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(a){this.width=a;return this;},setHeight:function(a){this.height=a;return this;},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this;},getShapeDescriptors:function(){return {defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null};},toJson:function(){var a=this.url,c=this.imageData;if(0===a.indexOf("data:")){var b=a,a=c,c=b.indexOf(";base64,")+8,c=b.substr(c);}if(f.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../"))){a=l.getAbsoluteUrl(a);}var b=e.px2pt(this.width),b=isNaN(b)?void 0:b,d=e.px2pt(this.height),d=isNaN(d)?void 0:d,a=k.fixJson(f.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:a,imageData:c,contentType:this.contentType,width:b,height:d}));delete a.color;delete a.size;a.imageData||delete a.imageData;return a;}});d.defaultProps=g;return d;});},"esri/symbols/CartographicLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","../kernel","../lang","./SimpleLineSymbol"],function(b,d,m,p,e,q,f,n){var c={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},g={color:[0,0,0,1],style:c.STYLE_SOLID,width:1,cap:c.CAP_BUTT,join:c.JOIN_MITER,miterLimit:10};b=b(n,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(a,b,c,h,k,l){a?d.isString(a)?(this.style=a,b&&(this.color=b),void 0!==c&&(this.width=c),h&&(this.cap=h),k&&(this.join=k),void 0!==l&&(this.miterLimit=l)):(this.cap=f.valueOf(this._caps,a.cap),this.join=f.valueOf(this._joins,a.join),this.width=e.pt2px(a.width),this.miterLimit=e.pt2px(a.miterLimit)):(d.mixin(this,g),this.color=new m(this.color),this.width=e.pt2px(this.width),this.miterLimit=e.pt2px(this.miterLimit));},setCap:function(a){this.cap=a;return this;},setJoin:function(a){this.join=a;return this;},setMiterLimit:function(a){this.miterLimit=a;return this;},getStroke:function(){return d.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===c.JOIN_MITER?this.miterLimit:this.join});},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){var a=e.px2pt(this.miterLimit),a=isNaN(a)?void 0:a;return f.fixJson(d.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}));}});d.mixin(b,c);b.defaultProps=g;return b;});},"esri/symbols/SimpleFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","../kernel","../lang","./FillSymbol","./SimpleLineSymbol","require"],function(b,d,g,n,h,p,e,k,l,m){var c={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},f={style:c.STYLE_SOLID,color:[0,0,0,0.25]};b=b(k,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",patternUrlPrefix:m.toUrl("../images/symbol/sfs/"),_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(a,b,c){a?d.isString(a)?(this.style=a,void 0!==b&&(this.outline=b),void 0!==c&&(this.color=c)):this.style=e.valueOf(this._styles,a.style):(d.mixin(this,f),this.outline=new l(this.outline),this.color=new g(this.color));},setStyle:function(a){this.style=a;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var a=this.style;return a===c.STYLE_NULL?null:a===c.STYLE_SOLID?this.color:d.mixin({},h.defaultPattern,{src:this.patternUrlPrefix+a+".png",width:10,height:10});},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){return e.fixJson(d.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));}});d.mixin(b,c);b.defaultProps=f;return b;});},"esri/symbols/FillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Symbol","./SimpleLineSymbol"],function(b,c,f,g,d,e){return b(d,{declaredClass:"esri.symbol.FillSymbol",constructor:function(a){a&&(c.isObject(a)&&a.outline)&&(this.outline=new e(a.outline));},setOutline:function(a){this.outline=a;return this;},toJson:function(){var a=this.inherited("toJson",arguments);this.outline&&(a.outline=this.outline.toJson());return a;}});});},"esri/symbols/PictureFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","../kernel","../lang","../urlUtils","./FillSymbol"],function(e,g,l,d,q,m,n,p){var k={xoffset:0,yoffset:0,width:12,height:12};e=e(p,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(a,b,c,f){a?g.isString(a)?(this.url=a,void 0!==b&&(this.outline=b),void 0!==c&&(this.width=c),void 0!==f&&(this.height=f)):(this.xoffset=d.pt2px(a.xoffset),this.yoffset=d.pt2px(a.yoffset),this.width=d.pt2px(a.width),this.height=d.pt2px(a.height),b=a.imageData,!(9>l("ie"))&&b&&(c=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+b,this.imageData=c)):(g.mixin(this,k),this.width=d.pt2px(this.width),this.height=d.pt2px(this.height));},setWidth:function(a){this.width=a;return this;},setHeight:function(a){this.height=a;return this;},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this;},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this;},setXScale:function(a){this.xscale=a;return this;},setYScale:function(a){this.yscale=a;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return g.mixin({},d.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset});},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:")){var c=a,a=b,b=c.indexOf(";base64,")+8,b=c.substr(b);}if(g.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../"))){a=n.getAbsoluteUrl(a);}var c=d.px2pt(this.width),c=isNaN(c)?void 0:c,f=d.px2pt(this.height),f=isNaN(f)?void 0:f,e=d.px2pt(this.xoffset),e=isNaN(e)?void 0:e,h=d.px2pt(this.yoffset),h=isNaN(h)?void 0:h,a=m.fixJson(g.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:a,imageData:b,contentType:this.contentType,width:c,height:f,xoffset:e,yoffset:h,xscale:this.xscale,yscale:this.yscale}));a.imageData||delete a.imageData;return a;}});e.defaultProps=k;return e;});},"esri/symbols/TextSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","../kernel","../lang","../Color","./Symbol","./Font"],function(d,f,s,c,t,k,l,n,g){var m={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:c.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},p={start:"left",middle:"center",end:"right"},q={left:"start",center:"middle",right:"end",justify:"start"},r={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},h=document.createElement("canvas");d=d(n,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(a,b,e){f.mixin(this,m);this.font=new g(this.font);this.color=new l(this.color);a&&(f.isObject(a)?(f.mixin(this,a),this.color&&k.isDefined(this.color[0])&&(this.color=l.toDojoColor(this.color)),this.type="textsymbol",this.font=new g(this.font),this.xoffset=c.pt2px(this.xoffset),this.yoffset=c.pt2px(this.yoffset),this.angle&&(this.angle*=-1)):(this.text=a,b&&(this.font=b),e&&(this.color=e)));this.setAlign(this.align||this.getSVGAlign());},setFont:function(a){this.font=a;return this;},setSize:function(a){this.font.size=a;return this;},setAngle:function(a){this.angle=a;return this;},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this;},setAlign:function(a){this.align=a;this.setHorizontalAlignment(a&&p[a.toLowerCase()]||"center");return this;},setHorizontalAlignment:function(a){this.horizontalAlignment=a;return this;},getSVGAlign:function(){var a=this.horizontalAlignment;return a=a&&q[a.toLowerCase()]||"middle";},setVerticalAlignment:function(a){this.verticalAlignment=a;return this;},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&r[a.toLowerCase()]||"alphabetic";},getSVGBaselineShift:function(){return "bottom"===this.verticalAlignment?"super":null;},setDecoration:function(a){this.decoration=a;this.font||this.setFont(new g);this.font.setDecoration(a);return this;},setRotated:function(a){this.rotated=a;return this;},setKerning:function(a){this.kerning=a;return this;},setText:function(a){this.text=a;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},getWidth:function(){var a=h&&h.getContext&&h.getContext("2d");if(a){var b=this.font;a.font=(b.style?b.style:c.defaultFont.style)+" "+(b.weight?b.weight:c.defaultFont.weight)+" "+(b.size?b.size:c.defaultFont.size)+"px "+(b.family?b.family:c.defaultFont.family);return a.measureText(this.text).width;}var a=this.getHeight(),b=0,e,d;for(e=0;e<this.text.length;e++){d=this.text.charAt(e),b=d==d.toUpperCase()?b+0.7*a:b+0.5*a;}return b;},getHeight:function(){return c.normalizedLength(this.font.size);},toJson:function(){var a=c.px2pt(this.xoffset),b=c.px2pt(this.yoffset),a=isNaN(a)?void 0:a,b=isNaN(b)?void 0:b;return k.fixJson(f.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:this.haloSize,haloColor:this.haloColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:b,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});f.mixin(d,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});d.defaultProps=m;return d;});},"esri/symbols/Font":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","../kernel","../lang"],function(c,d,h,e,l,k){c=c(null,{declaredClass:"esri.symbol.Font",constructor:function(a,b,c,f,g){a?d.isObject(a)?d.mixin(this,a):(this.size=a,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==b&&(this.style=b),void 0!==c&&(this.variant=c),void 0!==f&&(this.weight=f),void 0!==g&&(this.family=g)):d.mixin(this,e.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>h("ie")&&(this.size&&d.isString(this.size)&&-1<this.size.indexOf("em"))&&(this.size=e.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size);},setSize:function(a){this.size=this._convert2PxSize(a);return this;},_convert2PxSize:function(a){var b;parseFloat(a)==a?b=a:d.isString(a)&&(-1<a.indexOf("pt")?b=e.pt2px(parseFloat(a)):-1<a.indexOf("px")?b=parseFloat(a):-1<a.indexOf("em")?b=e.pt2px(12*parseFloat(a)):-1<a.indexOf("%")&&(b=e.pt2px(0.12*parseFloat(a))));return b;},setStyle:function(a){this.style=a;return this;},setVariant:function(a){this.variant=a;return this;},setWeight:function(a){this.weight=a;return this;},setFamily:function(a){this.family=a;return this;},setDecoration:function(a){this.decoration=a;return this;},toJson:function(){return k.fixJson({size:e.px2pt(this.size),style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});d.mixin(c,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return c;});},"esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","../kernel","../geometry/jsonUtils","./SpatialRelationship","require","require","require"],function(p,q,r,c,u,v,s,t){var d=p(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=d.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(e){var a={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},b=e&&e.geometry||this.geometry,g=this.objectIds,h=this.outFields,f=this.outSpatialReference,k=this.groupByFieldsForStatistics,l=this.orderByFields,m=this.outStatistics;e=this.distance;b&&(a.geometry=b,a.geometryType=s.getJsonType(b),a.inSR=b.spatialReference.wkid||c.toJson(b.spatialReference.toJson()));g&&(a.objectIds=g.join(","));h&&(a.outFields=h.join(","));this.returnDistinctValues&&(a.returnDistinctValues=!0);k&&(a.groupByFieldsForStatistics=k.join(","));l&&(a.orderByFields=l.join(","));if(m){var n=[];r.forEach(m,function(a){n.push(a.toJson());});a.outStatistics=c.toJson(n);}null!==f?a.outSR=f.wkid||c.toJson(f.toJson()):b&&(a.outSR=b.spatialReference.wkid||c.toJson(b.spatialReference.toJson()));b=this.timeExtent;a.time=b?b.toJson().join(","):null;if((b=this.relationParam)&&this.spatialRelationship===d.SPATIAL_REL_RELATION){a.relationParam=b;}e&&(a.distance=this.distance,this.hasOwnProperty("units")?a.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),a.units=this._units.meters));this.hasOwnProperty("start")&&(a.resultOffset=this.start,a.resultRecordCount=10,""===a.where&&(a.where="1=1"));this.hasOwnProperty("num")&&(a.resultRecordCount=this.num);a.pixelSize=this.pixelSize?c.toJson(this.pixelSize.toJson()):null;a.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a.quantizationParameters=c.toJson(this.quantizationParameters));a._ts=this._ts;return a;}});q.mixin(d,t);return d;});},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(a,b,c){return {SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};});},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(c){return {add:function(a,b){a.popupManager||(a.popupManager=new c(b),a.popupManager.setMap(a));},remove:function(a){var b=a.popupManager;b&&(b.unsetMap(),a.popupManager=void 0);}};});},"esri/PopupManager":function(){define(["./geometry/Extent","./geometry/ScreenPoint","./kernel","./layerUtils","./tasks/query","dijit/registry","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/has","dojo/on","dojo/promise/all","dojo/Stateful","require"],function(E,u,M,C,F,G,f,H,v,w,N,I,J,K,L){var x;return H(K,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(a){this._mapClickHandler=w.hitch(this,this._mapClickHandler);},setMap:function(a){if(this.map){if(a!==this.map){this.unsetMap();}else{return;}}this.map=a;this._setupClickHandler();},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);},getMapLayer:function(a){var c;if(a&&(c=a.getLayer())){if(a=c.id,this._featureLayersCache[a]){var b=a.lastIndexOf("_");-1<b&&(a=a.substring(0,b),c=this.map.getLayer(a));}}return c;},_enabledSetter:function(a){this.enabled=a;this._setupClickHandler();},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler));},_mapClickHandler:function(a){var c=this.map.infoWindow,b=a.graphic;c&&this.map.loaded&&(c.clearFeatures&&c.setFeatures?this._showPopup(a):b&&b.getInfoTemplate()&&this._showInfoWindow(b,a.mapPoint));},_showPopup:function(a){var c=this.map,b=c.infoWindow,d=this,m=[],g=[c.graphics].concat(f.map(c.graphicsLayerIds,c.getLayer,c));f.forEach(g,function(a){a&&(a.loaded&&a.infoTemplate&&!a.suspended)&&m.push(a);});var n=[];f.forEach(c.layerIds,function(a){(a=c.getLayer(a))&&(a.loaded&&!a.suspended)&&("esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&a.infoTemplate?m.push(a):("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass)&&a.infoTemplates&&n.push(a));});this._getSubLayerFeatureLayers(n).then(function(g){m=m.concat(g);g=null;a.graphic&&a.graphic.getInfoTemplate()&&(g=a.graphic);if(m.length||g){var k=d._calculateClickTolerance(m),r=a.screenPoint,e=c.toMap(new u(r.x-k,r.y+k)),k=c.toMap(new u(r.x+k,r.y-k)),s=new E(e.x,e.y,k.x,k.y,c.spatialReference),l=new F,p=!!g,n=!0,e=f.map(m,function(b){var e;l.timeExtent=b.useMapTime?c.timeExtent:null;if("esri.layers.ArcGISImageServiceLayer"===b.declaredClass){l.geometry=a.mapPoint,n=!1,e=b.queryVisibleRasters(l,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),e.addCallback(function(){var a=b.getVisibleRasters();p=p||0<a.length;return a;});}else{if(d._featureLayersCache[b.id]||"function"===typeof b.queryFeatures&&(0===b.currentMode||1===b.currentMode)){l.geometry=s,e=b.queryFeatures(l),e.addCallback(function(a){a=a.features;p=p||0<a.length;return a;});}else{e=new v;var g=f.filter(b.graphics,function(a){return a&&a.visible&&s.intersects(a.geometry);});p=p||0<g.length;e.resolve(g);}}return e;});g&&(k=new v,k.resolve([g]),e.unshift(k));!f.some(e,function(a){return !a.isFulfilled();})&&!p?(b.hide(),b.clearFeatures()):(b.setFeatures(e),b.show(a.mapPoint,{closestFirst:n}));}});},_getSubLayerFeatureLayers:function(a,c){var b=c||new v,d=[],m=a.length,g=Math.floor(this.map.extent.getWidth()/this.map.width),n=this.map.getScale(),u=!1,k=this,r=0;a:for(;r<m;r++){var e=a[r],s=e.dynamicLayerInfos||e.layerInfos;if(s){var l=null;if(e._params&&(e._params.layers||e._params.dynamicLayers)){l=e.visibleLayers;}for(var l=C._getVisibleLayers(s,l),p=C._getLayersForScale(n,s),w=s.length,z=0;z<w;z++){var y=s[z],q=y.id,t=e.infoTemplates[q];if(!y.subLayerIds&&t&&t.infoTemplate&&-1<f.indexOf(l,q)&&-1<f.indexOf(p,q)){if(!x){u=!0;break a;}var A=e.id+"_"+q,h=this._featureLayersCache[A];if(!h||!h.loadError){h||((h=t.layerUrl)||(h=y.source?this._getLayerUrl(e.url,"/dynamicLayer"):this._getLayerUrl(e.url,q)),h=new x(h,{id:A,drawMode:!1,mode:x.MODE_SELECTION,outFields:this._getOutFields(t.infoTemplate),resourceInfo:t.resourceInfo,source:y.source}),this._featureLayersCache[A]=h),h.setDefinitionExpression(e.layerDefinitions&&e.layerDefinitions[q]),h.setGDBVersion(e.gdbVersion),h.setInfoTemplate(t.infoTemplate),h.setMaxAllowableOffset(g),h.setUseMapTime(!!e.useMapTime),e.layerDrawingOptions&&(e.layerDrawingOptions[q]&&e.layerDrawingOptions[q].renderer)&&h.setRenderer(e.layerDrawingOptions[q].renderer),d.push(h);}}}}}if(u){var D=new v;L(["./layers/FeatureLayer"],function(a){x=a;D.resolve();});D.then(function(){k._getSubLayerFeatureLayers(a,b);});}else{var B=[];f.forEach(d,function(a){if(!a.loaded){var b=new v;I.once(a,"load, error",function(){b.resolve();});B.push(b.promise);}});B.length?J(B).then(function(){d=f.filter(d,function(a){return !a.loadError&&a.isVisibleAtScale(n);});b.resolve(d);}):(d=f.filter(d,function(a){return a.isVisibleAtScale(n);}),b.resolve(d));}return b.promise;},_getLayerUrl:function(a,c){var b=a.indexOf("?");return -1===b?a+"/"+c:a.substring(0,b)+"/"+c+a.substring(b);},_getOutFields:function(a){var c;a.info&&"esri.dijit.PopupTemplate"===a.declaredClass?(c=[],f.forEach(a.info.fieldInfos,function(a){var d=a.fieldName&&a.fieldName.toLowerCase();d&&("shape"!==d&&0!==d.indexOf("relationships/"))&&c.push(a.fieldName);})):c=["*"];return c;},_calculateClickTolerance:function(a){var c=6,b,d;f.forEach(a,function(a){if(b=a.renderer){"esri.renderer.SimpleRenderer"===b.declaredClass?((d=b.symbol)&&d.xoffset&&(c=Math.max(c,Math.abs(d.xoffset))),d&&d.yoffset&&(c=Math.max(c,Math.abs(d.yoffset)))):("esri.renderer.UniqueValueRenderer"===b.declaredClass||"esri.renderer.ClassBreaksRenderer"===b.declaredClass)&&f.forEach(b.infos,function(a){(d=a.symbol)&&d.xoffset&&(c=Math.max(c,Math.abs(d.xoffset)));d&&d.yoffset&&(c=Math.max(c,Math.abs(d.yoffset)));});}});return c;},_showInfoWindow:function(a,c){var b=this.map.infoWindow,d=a.geometry,d=d&&"point"===d.type?d:c,f=a.getContent();b.setTitle(a.getTitle());if(f&&w.isString(f.id)){var g=G.byId(f.id);g&&(g.set&&/_PopupRenderer/.test(g.declaredClass))&&g.set("showTitle",!1);}b.setContent(f);b.show(d);}});});},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(l,g,k,m,n){return {_serializeLayerDefinitions:function(a){var b=[],c=!1,e=/[:;]/;if(a&&(g.forEach(a,function(a,d){a&&(b.push([d,a]),!c&&e.test(a)&&(c=!0));}),0<b.length)){var d;c?(d={},g.forEach(b,function(a){d[a[0]]=a[1];}),d=k.toJson(d)):(d=[],g.forEach(b,function(a){d.push(a[0]+":"+a[1]);}),d=d.join(";"));return d;}return null;},_serializeTimeOptions:function(a,b){if(a){var c=[];g.forEach(a,function(a,d){if(a){var f=a.toJson();b&&-1!==g.indexOf(b,d)&&(f.useTime=!1);c.push("\""+d+"\":"+k.toJson(f));}});if(c.length){return "{"+c.join(",")+"}";}}},_getVisibleLayers:function(a,b){var c=[],e,d,f;if(!a){return c;}if(b){c=b.concat();for(f=0;f<a.length;f++){e=a[f],d=g.indexOf(a,e.id),e.subLayerIds&&-1<d&&(c.splice(d,1),c=c.concat(e.subLayerIds));}}else{c=this._getDefaultVisibleLayers(a);}return c;},_getDefaultVisibleLayers:function(a){var b=[],c;if(!a){return b;}for(c=0;c<a.length;c++){0<=a[c].parentLayerId&&-1===g.indexOf(b,a[c].parentLayerId)&&g.some(a,function(b){return b.id===a[c].parentLayerId;})||a[c].defaultVisibility&&b.push(a[c].id);}return b;},_getLayersForScale:function(a,b){var c=[];if(0<a&&b){var e;for(e=0;e<b.length;e++){if(!(0<=b[e].parentLayerId&&-1===g.indexOf(c,b[e].parentLayerId)&&g.some(b,function(a){return a.id===b[e].parentLayerId;}))&&0<=b[e].id){var d=!0,f=b[e].maxScale,h=b[e].minScale;if(0<f||0<h){0<f&&0<h?d=f<=a&&a<=h:0<f?d=f<=a:0<h&&(d=a<=h);}d&&c.push(b[e].id);}}}return c;}};});},"esri/MapNavigationManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/mouse","dojo/keys","./kernel","./MouseEvents","./TouchEvents","./PointerEvents","./config","./sniff","./lang","./fx","./graphic","./tileUtils","./geometry/ScreenPoint","./geometry/Extent","./geometry/Rect","./geometry/mathUtils","./symbols/SimpleFillSymbol"],function(u,g,v,p,w,q,d,H,r,x,y,n,k,z,A,B,C,h,m,s,D,E){var e=p.connect,f=p.disconnect,t=k("chrome"),F=k("safari"),G=[d.NUMPAD_PLUS,61,d.NUMPAD_MINUS,d.UP_ARROW,d.NUMPAD_8,d.RIGHT_ARROW,d.NUMPAD_6,d.DOWN_ARROW,d.NUMPAD_2,d.LEFT_ARROW,d.NUMPAD_4,d.PAGE_UP,d.NUMPAD_9,d.PAGE_DOWN,d.NUMPAD_3,d.END,d.NUMPAD_1,d.HOME,d.NUMPAD_7];return u(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(a,b){this.map=a;g.mixin(this,b);var c=a.__container;k("esri-pointer")?(this.pointerEvents=new y(c,{map:a}),this.eventModel="pointer"):k("esri-touch")?(k("ios")||(this.mouseEvents=new r(c,{map:a})),this.touchEvents=new x(c,{map:a,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new r(c,{map:a}),this.eventModel="mouse");this._zoomRect=new B(null,new E(n.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=g.hitch(this,this._adjustPinch);this._adjustPinchEnd=g.hitch(this,this._adjustPinchEnd);},_panInit:function(a){var b=this.mouseEvents;q.isLeft(a)&&(this.map.isPan&&!a.shiftKey)&&(this._dragOrigin=new h(0,0),g.mixin(this._dragOrigin,a.screenPoint),this._panStartHandle=e(b,"onMouseDragStart",this,this._panStart),this._panHandle=e(b,"onMouseDrag",this,this._pan),this._panEndHandle=e(b,"onMouseUp",this,this._panEnd),(t||F)&&a.preventDefault());},_panStart:function(a){this.map.setCursor("move");this.map.__panStart(a.screenPoint.x,a.screenPoint.y);},_pan:function(a){this.map.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y);},_panEnd:function(a){f(this._panStartHandle);f(this._panHandle);f(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var b=this.map;b.__panning&&(b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y),b.resetMapCursor());},_zoomInit:function(a){var b=this.map,c=this.pointerEvents||this.mouseEvents;if((q.isLeft(a)||a.pointerType)&&b.isRubberBandZoom&&a.shiftKey){b.setCursor("crosshair"),this._dragOrigin=g.mixin({},a.screenPoint),this._zoomDir=a.ctrlKey||a.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=e(c,"onSwipeMove",this,this._zoom),this._zoomEndHandle=e(c,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=e(c,"onMouseDrag",this,this._zoom),this._zoomEndHandle=e(c,"onMouseUp",this,this._zoomEnd)),t&&a.preventDefault();}},_zoom:function(a){var b=this.map,c=this._normalizeRect(a).offset(b.__visibleRect.x,b.__visibleRect.y);a=b.graphics;var d=this._zoomRect;d.geometry||b.setCursor("crosshair");d.geometry&&a.remove(d,!0);var e=b.toMap(new h(c.x,c.y)),c=b.toMap(new h(c.x+c.width,c.y+c.height)),c=new s(e.x,e.y,c.x-e.x,e.y-c.y,b.spatialReference);c._originOnly=!0;d.setGeometry(c);a.add(d,!0);},_zoomEnd:function(a){var b=this._zoomRect,c=this.map,d=c.extent,e=c.spatialReference;f(this._zoomHandle);f(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(c._canZoom(this._zoomDir)&&b.getDojoShape()){c.graphics.remove(b);b.geometry=null;a=this._normalizeRect(a);a.x+=c.__visibleRect.x;a.y+=c.__visibleRect.y;if(-1===this._zoomDir){var g=d.getWidth();a=(g*c.width/a.width-g)/2;e=new m(d.xmin-a,d.ymin-a,d.xmax+a,d.ymax+a,e);}else{d=c.toMap({x:a.x,y:a.y+a.height}),a=c.toMap({x:a.x+a.width,y:a.y}),e=new m(d.x,d.y,a.x,a.y,e);}c._extentUtil(null,null,e);}b.getDojoShape()&&c.graphics.remove(b,!0);this._zoomDir=0;c.resetMapCursor();},_wheelZoom:function(a,b){var c=this.map;if(!b){if(c.smartNavigation&&!a.shiftKey&&!c._isPanningOrZooming()){c.disableScrollWheelZoom();this._setScrollWheelPan(!0);this._wheelPan(a);return;}var d=a.timeStamp;if(!z.isDefined(d)||0>=d){d=(new Date).getTime();}if(100>(this._mwts?d-this._mwts:d)){return;}this._mwts=d;}c._canZoom(a.value)&&c._extentUtil({numLevels:a.value,mapAnchor:a.mapPoint,screenAnchor:a.screenPoint});},_wheelPan:function(a){var b=this.map;if(a.shiftKey&&!b._isPanningOrZooming()){this._setScrollWheelPan(!1),b.enableScrollWheelZoom(),this._wheelZoom(a);}else{var c=0,d=0;k("ff")?a.axis===a.HORIZONTAL_AXIS?c=-a.detail:d=-a.detail:(c=a.wheelDeltaX,d=a.wheelDeltaY);b.translate(c,d);}},_setScrollWheelPan:function(a){this.map.isScrollWheelPan=a;this.mouseEvents.enableMouseWheel(a);f(this._mwMacHandle);this._mwMacHandle=null;a&&(this._mwMacHandle=e(this.mouseEvents,"onMouseWheel",this,this._wheelPan));},_recenter:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(a.mapPoint);},_recenterZoom:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&(a.value=a.ctrlKey||a.metaKey?-1:1,this._wheelZoom(a,!0));},_dblClickZoom:function(a){this.map._isPanningOrZooming()||(a.value=1,this._wheelZoom(a,!0));},_twoFingerTap:function(a){this.map._isPanningOrZooming()||(a.value=-1,this._wheelZoom(a,!0));},_keyDown:function(a){var b=a.keyCode,c=this.map;if(-1!==v.indexOf(G,b)){if(b===d.NUMPAD_PLUS||61===b){c._extentUtil({numLevels:1});}else{if(b===d.NUMPAD_MINUS){c._extentUtil({numLevels:-1});}else{c.__panning||c.__panStart(0,0);switch(b){case d.UP_ARROW:case d.NUMPAD_8:this._keyDy+=10;break;case d.RIGHT_ARROW:case d.NUMPAD_6:this._keyDx-=10;break;case d.DOWN_ARROW:case d.NUMPAD_2:this._keyDy-=10;break;case d.LEFT_ARROW:case d.NUMPAD_4:this._keyDx+=10;break;case d.PAGE_UP:case d.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case d.PAGE_DOWN:case d.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case d.END:case d.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case d.HOME:case d.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return;}c.__pan(this._keyDx,this._keyDy);}}w.stop(a);}},_keyEnd:function(a){var b=this.map;b.__panning&&a.keyCode!==d.SHIFT&&(b.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0);},_swipeInit:function(a){var b=this.map,b=b._zoomAnim||b._panAnim;if(a.shiftKey){return !1;}b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]));this._dragOrigin=new h(0,0);g.mixin(this._dragOrigin,a.screenPoint);f(this._swipeHandle);f(this._swipeEndHandle);this._swipeHandle=e(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=e(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd);},_swipe:function(a){var b=this.map;b.__panning?(this._panX=a.screenPoint.x,this._panY=a.screenPoint.y,b.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)):(b.setCursor("move"),b.__panStart(a.screenPoint.x,a.screenPoint.y));},_swipeEnd:function(a){f(this._swipeHandle);f(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var b=this.map;b.__panning&&(b.resetMapCursor(),b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y));},_pinchInit:function(a){var b=this.map,c=b._zoomAnim||b._panAnim;c&&c._active?(c.stop(),c._fire("onEnd",[c.node])):b.__panning&&(a.screenPoint=new h(this._panX,this._panY),a.mapPoint=b.toMap(a.screenPoint),this._swipeEnd(a));f(this._pinchHandle);f(this._pinchEndHandle);this._pinchHandle=e(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=e(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd);},_pinch:function(a){var b=this.map;a.screenPoints&&(this.currLength=D.getLength(a.screenPoints[0],a.screenPoints[1]),b.__zooming?(a=this.currLength/this._length,this._zoomStartExtent=this.__scaleExtent(b.extent,a,this._dragOrigin),b.__zoom(this._zoomStartExtent,a,this._dragOrigin)):(this._dragOrigin=new h((a.screenPoints[0].x+a.screenPoints[1].x)/2,(a.screenPoints[0].y+a.screenPoints[1].y)/2),this._length=this.currLength,b.__zoomStart(b.extent,this._dragOrigin)),b._fireOnScale(this.currLength/this._length,this._dragOrigin,!0));},_pinchEnd:function(a){a=this.map;f(this._pinchHandle);f(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(a.__zooming&&null===a._zoomAnim){var b=this.currLength/this._length,c=a.extent.getWidth();this._zoomAnimAnchor=a.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor);if(a.__tileInfo){var d=C.getCandidateTileInfo(a,a.__tileInfo,this._zoomStartExtent),e=a.__getExtentForLevel(d.lod.level,this._zoomAnimAnchor),g=a.getMinZoom(),k=a.getMaxZoom(),h=e.extent,e=e.lod,m=c/h.getWidth(),l=d.lod.level;1>b?m>b&&l--:m<b&&l++;l<g?l=g:l>k&&(l=k);l!==d.lod.level&&(e=a.__getExtentForLevel(l,this._zoomAnimAnchor),h=e.extent,e=e.lod);this._zoomEndExtent=h;this._zoomEndLod=e;a._zoomAnim=A.animateRange({range:{start:c/this._zoomStartExtent.getWidth(),end:m},duration:n.defaults.map.zoomDuration,rate:n.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});a._zoomAnim.play();a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);}else{this._zoomEndExtent=this._zoomStartExtent,a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd();}}},_adjustPinch:function(a){var b=this.__scaleExtent(this.map.extent,a,this._zoomAnimAnchor);this.map.__zoom(b,a,this._dragOrigin);},_adjustPinchEnd:function(){var a=this.map,b=a.extent.getWidth()/this._zoomEndExtent.getWidth(),c=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor),d=this._dragOrigin,e=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=a._zoomAnim=this._zoomAnimAnchor=null;a.__zoomEnd(c,b,d,e,!0);},__scaleExtent:function(a,b,c){c=c||a.getCenter();b=a.expand(b);var d=a.xmin-(b.getWidth()-a.getWidth())*(c.x-a.xmin)/a.getWidth();c=a.ymax-(b.getHeight()-a.getHeight())*(c.y-a.ymax)/a.getHeight();return new m(d,c-b.getHeight(),d+b.getWidth(),c,a.spatialReference);},_normalizeRect:function(a){a=a.screenPoint;var b=this._dragOrigin.x,c=this._dragOrigin.y;a=new s((a.x<b?a.x:b)-this.map.__visibleRect.x,(a.y<c?a.y:c)-this.map.__visibleRect.y,Math.abs(a.x-b),Math.abs(a.y-c));delete a.spatialReference;0===a.width&&(a.width=1);0===a.height&&(a.height=1);return a;},setImmediateClick:function(a){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(a);break;case "touch":this.touchEvents.setImmediateTap(a);this.mouseEvents&&this.mouseEvents.setImmediateClick(a);break;case "pointer":this.pointerEvents.setImmediateTap(a);}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=e(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=e(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=e(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=e(this.pointerEvents,"onSwipeStart",this,this._swipeInit);}},disablePan:function(){f(this._panInitHandle);this._panInitHandle=null;f(this._swipeInitHandle);this._swipeInitHandle=null;},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?e(this.pointerEvents,"onSwipeStart",this,this._zoomInit):e(this.mouseEvents,"onMouseDown",this,this._zoomInit);},disableRubberBandZoom:function(){f(this._zoomInitHandle);this._zoomInitHandle=null;},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel){this._pinchInitHandle=e(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit);}},disablePinchZoom:function(){f(this._pinchInitHandle);this._pinchInitHandle=null;},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=e(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom);},disableScrollWheelZoom:function(){f(this._wheelHandle);this._wheelHandle=null;},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=e(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=e(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=e(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=e(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=e(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=e(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap);}},disableDoubleClickZoom:function(){f(this._dblClickHandle);f(this._zoomOutHandle);this._dblTapHandle&&f(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null;},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=e(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom);},disableShiftDoubleClickZoom:function(){f(this._sDblClickHandle);this._sDblClickHandle=null;},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=e(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter);},disableClickRecenter:function(){f(this._recenterHandle);this._recenterHandle=null;},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=e(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=e(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd);},disableKeyboardNavigation:function(){f(this._keyHandle);f(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null;},enableNavigation:function(){var a=this.map;a&&a.loaded&&(a.enableDoubleClickZoom(),a.enableClickRecenter(),a.enablePan(),a.enableRubberBandZoom(),this.enablePinchZoom(),a.enableKeyboardNavigation(),a.smartNavigation?this._setScrollWheelPan(!0):a.enableScrollWheelZoom());},disableNavigation:function(){var a=this.map;a&&a.loaded&&(a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),this.disablePinchZoom(),a.disableKeyboardNavigation(),a.disableScrollWheelZoom(),a.smartNavigation&&this._setScrollWheelPan(!1));},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var a,b=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(a=0;a<b.length;a++){f(b[a]);}this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null;}});});},"esri/MouseEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/_base/connect","dojo/_base/event","./kernel","./Evented","./geometry/Point","./geometry/ScreenPoint"],function(n,p,h,e,k,g,l,q,r,m){var c=k.connect,d=k.disconnect;return n([q],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==e("mac")?1:3,wheelDivisor:2>e("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(a,b){this.node=a;h.mixin(this,b);var f=function(a){g.stop(a);return !1;};e("mozilla")&&p.style(a,"MozUserSelect","none");this._handles=[c(a,"onselectstart",f),c(a,"ondragstart",f),c(a,"onmouseenter",this,this._onMouseEnterHandler),c(a,"onmouseleave",this,this._onMouseLeaveHandler),c(a,"onmousedown",this,this._onMouseDownHandler),c(a,"onclick",this,this._onClickHandler),c(a,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=c(a,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=c(a,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=h.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(f=this.map)?f.isScrollWheelZoom||f.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1);},_fire:function(a,b){if(!this._preventClick||!("onClick"===a||"onDblClick"===a)){if(this[a]){this[a](b);}if(this.map&&this.map[a]){this.map[a](b);}}},_processEvent:function(a){a=g.fix(a,a.target);var b=this.map,c=b&&b.position;c&&("DOMMouseScroll"===a.type&&3>e("ff")?a.screenPoint=new m(window.scrollX+a.screenX-c.x,window.scrollY+a.screenY-c.y):a.screenPoint=new m(a.pageX-c.x,a.pageY-c.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new r);a.numPoints=0;return a;},_onMouseEnterHandler:function(a){d(this._onKeyDown_connect);d(this._onKeyUp_connect);this._onKeyDown_connect=c(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=c(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(a));},_onMouseLeaveHandler:function(a){d(this._onKeyDown_connect);d(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(a));},_onMouseMoveHandler:function(a){this._dragEnd?this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(a));},_onMouseDownHandler:function(a){d(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);this._onMouseDragHandler_connect=c(document,"onmousemove",this,this._onMouseDragHandler);this._startX=a.pageX;this._startY=a.pageY;this._fire("onMouseDown",this._processEvent(a));},_onMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;d(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=c(b,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(a));},_onMouseDragHandler:function(a){d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=c(document,"onmousemove",this,this._onMouseDraggingHandler);d(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=c(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=c(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(a));},_onMouseDraggingHandler:function(a){g.stop(a);this._fire("onMouseDrag",this._processEvent(a));},_onDragMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();this._dragEnd=!0;d(this._docLeaveConnect);d(this._onMouseDragHandler_connect);d(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=c(b,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=c(b,"onmouseup",this,this._onMouseUpHandler);a=this._processEvent(a);this._fire("onMouseDragEnd",a);this._fire("onMouseUp",a);},_onDocMouseOut:function(a){var b=9>e("ie")?a.toElement:a.relatedTarget,c=b&&b.nodeName.toLowerCase();(!b||e("chrome")&&"html"===c)&&this._onDragMouseUpHandler(a);},_onClickHandler:function(a){a=this._processEvent(a);a.pageX!==this._startX||a.pageY!==this._startY||(clearTimeout(this._clickTimer),this._clickEvent=h.mixin({},a),this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration));},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>e("ie")&&(this._clickEvent.graphic=l._ieGraphic,delete l._ieGraphic);this._fire("onClick",this._clickEvent);},_onDblClickHandler:function(a){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(a));},_onMouseWheelHandler:function(a){var b=this.map;(b?b.isScrollWheelZoom||b.isScrollWheelPan:this.preventPageScroll)&&g.stop(a);var b=e("ff")||e("mozilla")?-a.detail/this.mozWheelDivisor:a.wheelDelta/this.wheelDivisor,c=Math.abs(b),c=c<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>b?-c:c;this._fire("onMouseWheel",this._processEvent(a));},_onKeyDownHandler:function(a){this._fire("onKeyDown",a);},_onKeyUpHandler:function(a){this._fire("onKeyUp",a);},enableMouseWheel:function(a){d(this._scrollHandle);this._scrollHandle=c(this.node,e("ff")||e("mozilla")?a?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler);},setImmediateClick:function(a){this.doubleClickDuration=a?0:this._initialDuration;},preventClickEvents:function(a){this._preventClick=a;},destroy:function(){var a=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),b;for(b=0;b<a.length;b++){d(a[b]);}clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null;}});});},"esri/TouchEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/dom","./kernel","./Evented","./geometry/Point","./geometry/ScreenPoint"],function(r,q,k,l,s,u,t,m,n){return r([t],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(a,b){this.node=a;k.mixin(this,b);q.setSelectable(a,!1);this._touchStart=k.hitch(this,this._touchStart);this._touchMove=k.hitch(this,this._touchMove);this._touchEnd=k.hitch(this,this._touchEnd);this._touchCancel=k.hitch(this,this._touchCancel);a.addEventListener("touchstart",this._touchStart,!1);a.addEventListener("touchmove",this._touchMove,!1);a.addEventListener("touchend",this._touchEnd,!1);a.addEventListener("touchcancel",this._touchCancel,!1);this.map&&l("ios")&&(this._mouseOver=k.hitch(this,this._mouseOver),this._mouseOut=k.hitch(this,this._mouseOut),this._mouseDown=k.hitch(this,this._mouseDown),this._mouseUp=k.hitch(this,this._mouseUp),this._mouseClick=k.hitch(this,this._mouseClick),a.addEventListener("mouseover",this._mouseOver,!1),a.addEventListener("mouseout",this._mouseOut,!1),a.addEventListener("mousedown",this._mouseDown,!1),a.addEventListener("mouseup",this._mouseUp,!1),a.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1;},_touchStart:function(a){var b=this._touches,c,d=a.changedTouches.length,f,e,g,h,k=(new Date).getTime();if(!l("android")||!l("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&b[a.changedTouches[0].identifier])){this._addTouch(a);for(c=0;c<d;c++){f=a.changedTouches[c],e=b[f.identifier]={},e.startX=f.pageX,e.startY=f.pageY,e.startTS=k,-1===this._touchIds.indexOf(f.identifier)&&this._touchIds.push(f.identifier);}this._swipeActive&&(g=this._nodeTouches[0]);this._pinchActive&&(h=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,g))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[g,h]))):2===this._numTouches?this._swipeActive&&(g&&(e=b[this._touchIds[0]],e.startX=g.pageX,e.startY=g.pageY,e.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,g))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,g))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[g,h])));}},_touchMove:function(a){a.preventDefault();this._updateTouch(a);var b=this._touches,c,d=a.changedTouches.length,f,e,g,h;if(!l("android")||!l("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&b[a.changedTouches[0].identifier]&&1<this._touchIds.length)){for(c=0;c<d;c++){if(f=a.changedTouches[c],e=b[f.identifier]){g=Math.abs(f.pageX-e.startX);f=Math.abs(f.pageY-e.startY);if(!e.moved&&(g>=this.tapRadius||f>=this.tapRadius)){e.moved=e.absMoved=!0;}h=h?h:e.moved;}}1===this._numTouches?(c=a.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,c)):h&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,c)))):2===this._numTouches&&(c=this._nodeTouches[0],d=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(a,[c,d])):h&&(h=b[c.identifier],e=b[d.identifier],b=Math.abs(h.startX-e.startX),h=Math.abs(h.startY-e.startY),b=Math.sqrt(b*b+h*h),h=Math.abs(c.pageX-d.pageX),e=Math.abs(c.pageY-d.pageY),h=Math.sqrt(h*h+e*e),Math.abs(h-b)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,[c,d])))));}},_touchEnd:function(a){this._removeTouch(a);var b=this._touches,c=a.changedTouches,d,f=c.length,e,g,h=(new Date).getTime(),k=this._touchIds;for(d=0;d<f;d++){if(g=b[c[d].identifier]){g.absMoved&&(e=!0),g.pageX=c[d].pageX,g.pageY=c[d].pageY,g.endTS=h;}}if(0===this._numTouches){if(this._touches={},this._touchIds=[],this._swipeActive){this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,c[0]));}else{if(this._pinchActive){this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,c));}else{if(!e){f=Infinity;e=-Infinity;var h=Infinity,l=-Infinity,m=this.tapStartTolerance,p=[],n=!0;for(d=0;d<k.length;d++){g=b[k[d]],p.push(g),g.startTS<f&&(f=g.startTS),g.startTS>e&&(e=g.startTS),g.endTS<h&&(h=g.endTS),g.endTS>l&&(l=g.endTS),delete b[k[d]];}if(1===p.length&&c[0]&&(b=Math.abs(c[0].pageX-p[0].startX),c=Math.abs(c[0].pageY-p[0].startY),b>=this.tapRadius||c>=this.tapRadius)){n=!1;}n&&(Math.abs(e-f)<=m&&Math.abs(l-h)<=m)&&this._basicTap(a,p);}}}}else{1===this._numTouches&&this._pinchActive&&(d=this._nodeTouches[0],g=b[d.identifier],g.startX=d.pageX,g.startY=d.pageY,this._pinchActive=g.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[c[0],d])));}},_touchCancel:function(a){this._numTouches&&this._touchEnd(a);},_basicTap:function(a,b){var c=(new Date).getTime(),d=this;a=this._processTouchEvent(a,b);this._taps.push({touchInfos:b,ts:c,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var a=d;d=null;clearTimeout(a._tapTimer);a._analyzeTap();},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration);},_analyzeTap:function(a){var b=this._taps,c=b[0],d=b[1],f=c.touchInfos,e=d&&d.touchInfos;b.length&&(a||(this._taps=[]),c&&d?f.length===e.length?d.ts-c.ts<=this.doubleTapDuration?(1===f.length?(a=Math.abs(f[0].startX-e[0].startX),f=Math.abs(f[0].startY-e[0].startY),f=a<=this.doubleTapRadius&&f<=this.doubleTapRadius):f=!0,f?this._processedDoubleTap(b):this._processedTap(d)):this._processedTap(d):this._processedTap(d):this._processedTap(c||d));},_processedTap:function(a){var b=a.event;this._fire("onProcessedTap",b);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",b);},_processedDoubleTap:function(a){var b=1===a[1].touchInfos.length,c;b&&(c=[this._fixEvent(a[0].event),this._fixEvent(a[1].event)],c[1].relatedEvents=c);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",a[1]);b&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]));},_addTouch:function(a){var b=a.changedTouches,c=this._nodeTouches,d,f,e;this._numTouches+=b.length;for(a=0;a<b.length;a++){f=c.length;e=!1;for(d=0;d<f&&!(e=c[d].identifier===b[a].identifier);d++){}e?this._numTouches--:c.push(b[a]);}for(a=c.length-1;0<=a;a--){s.isDescendant(c[a].target,document.body)||(c.splice(a,1),this._numTouches--);}0>this._numTouches&&(this._numTouches=0);},_removeTouch:function(a){var b=[],c=[],d=a.changedTouches,f=this._nodeTouches;this._numTouches-=d.length;0>this._numTouches&&(this._numTouches=0);for(a=0;a<d.length;a++){b.push(d[a].identifier);}for(a=f.length-1;0<=a;a--){-1!==b.indexOf(f[a].identifier)&&c.push(f.splice(a,1)[0]);}return c;},_updateTouch:function(a){var b=[],c,d=a.changedTouches,f=this._nodeTouches;for(a=0;a<d.length;a++){b.push(d[a].identifier);}for(a=0;a<f.length;a++){c=b.indexOf(f[a].identifier),-1!==c&&f.splice(a,1,d[c]);}},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a));},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a));},_mouseDown:function(a){this._fire("onMouseDown",this._processMouseEvent(a));},_mouseUp:function(a){this._fire("onMouseUp",this._processMouseEvent(a));},_mouseClick:function(a){this._fire("onClick",this._processMouseEvent(a));},_fire:function(a,b){if("onDblClick"===a&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1);},350);}if(this[a]){this[a](b);}if(this.map&&this.map[a]){this.map[a](b);}},_fixEvent:function(a){var b={},c;for(c in a){b[c]=a[c];}this.map&&(b.screenPoint=b.screenPoints[0],b.mapPoint=b.mapPoints[0]);return b;},_processTouchEvent:function(a,b){var c=this.map,d=c&&c.position,f=0;if(d&&b){if(k.isArray(b)){var e,g;a.screenPoints=[];a.mapPoints=[];for(e=0;e<b.length;e++){b[e]?(g=new n(b[e].pageX-d.x,b[e].pageY-d.y),a.screenPoints.push(g),a.mapPoints.push(c.extent?c.toMap(g):new m)):f++;}}else{a.screenPoint=new n(b.pageX-d.x,b.pageY-d.y),a.mapPoint=c.extent?c.toMap(a.screenPoint):new m;}}a.numPoints=b?k.isArray(b)?b.length-f:1:0;return a;},_processMouseEvent:function(a){var b=this.map,c=b&&b.position;c&&(a.screenPoint=new n(a.pageX-c.x,a.pageY-c.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new m);return a;},setImmediateTap:function(a){this._immediate=a;},destroy:function(){var a=this.node;a.removeEventListener("touchstart",this._touchStart,!1);a.removeEventListener("touchmove",this._touchMove,!1);a.removeEventListener("touchend",this._touchEnd,!1);a.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1));q.setSelectable(a,!0);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null;}});});},"esri/PointerEvents":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./Evented","./geometry/Point","./geometry/ScreenPoint"],function(q,g,h,r,t,s,k,l){return q([s],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==r("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,constructor:function(a,c){this.node=a;g.mixin(this,c);void 0!==a.style.msTouchAction?a.style.msTouchAction="none":void 0!==a.style.touchAction&&(a.style.touchAction="none");var b=navigator.msPointerEnabled,d=function(a){a.preventDefault();};a.addEventListener("selectstart",d,!1);a.addEventListener("dragstart",d,!1);this._pointerDown=g.hitch(this,this._pointerDown);this._pointerMove=g.hitch(this,this._pointerMove);this._pointerUp=g.hitch(this,this._pointerUp);this._pointerCancel=g.hitch(this,this._pointerCancel);a.addEventListener(b?"MSPointerDown":"pointerdown",this._pointerDown,!1);a.addEventListener(b?"MSPointerMove":"pointermove",this._pointerMove,!1);a.addEventListener(b?"MSPointerUp":"pointerup",this._pointerUp,!1);a.addEventListener(b?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=g.hitch(this,this._mouseOver),this._mouseOut=g.hitch(this,this._mouseOut),this._mouseLeave=g.hitch(this,this._mouseLeave),this._mouseDown=g.hitch(this,this._mouseDown),this._mouseUp=g.hitch(this,this._mouseUp),this._mouseClick=g.hitch(this,this._mouseClick),this._mouseWheel=g.hitch(this,this._mouseWheel),this._mouseMove=g.hitch(this,this._mouseMove),this._mouseEnter=g.hitch(this,this._mouseEnter),this._onKeyDown=g.hitch(this,this._onKeyDown),this._onKeyUp=g.hitch(this,this._onKeyUp),a.addEventListener("mouseover",this._mouseOver,!1),a.addEventListener("mouseout",this._mouseOut,!1),a.addEventListener("mouseleave",this._mouseLeave,!1),a.addEventListener("mousedown",this._mouseDown,!1),a.addEventListener("mouseup",this._mouseUp,!1),a.addEventListener("click",this._mouseClick,!1),a.addEventListener("mousewheel",this._mouseWheel,!1),a.addEventListener("mousemove",this._mouseMove,!1),a.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1;},_pointerDown:function(a){if(-1<h.indexOf(this._touchIds,a.pointerId)){this._pointerUp(a);}else{var c=this._touches,b=a.target,d=a.pointerId,e=this._touchIds,f,g=(new Date).getTime();f=c[d]={};f.pointerId=d;f.startX=f.pageX=a.pageX;f.startY=f.pageY=a.pageY;f.startTS=g;e.push(d);this._numTouches++;b.setPointerCapture?b.setPointerCapture(d):b.msSetPointerCapture&&b.msSetPointerCapture(d);b=c[e[0]];c=c[e[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(b&&(b.startX=b.pageX,b.startY=b.pageY,b.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,b))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,b))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[b,c]))));}},_pointerMove:function(a){var c=this._touches,b=this._touchIds,d,e,f;if((d=c[a.pointerId])&&!(d.pageX===a.pageX&&d.pageY===a.pageY)){d.pageX=a.pageX;d.pageY=a.pageY;e=Math.abs(d.pageX-d.startX);f=Math.abs(d.pageY-d.startY);if(!d.moved&&(e>=this.tapRadius||f>=this.tapRadius)){d.moved=d.absMoved=!0;}if(1===this._numTouches){this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,a)):d.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,a)));}else{if(2===this._numTouches){if(d=c[b[0]],c=c[b[1]],this._pinchActive){this._fire("onPinchMove",this._processTouchEvent(a,[d,c]));}else{if(d.moved||c.moved){b=Math.abs(d.startX-c.startX),e=Math.abs(d.startY-c.startY),b=Math.sqrt(b*b+e*e),e=Math.abs(d.pageX-c.pageX),f=Math.abs(d.pageY-c.pageY),e=Math.sqrt(e*e+f*f),Math.abs(e-b)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,[d,c])));}}}}}},_pointerUp:function(a){var c=this._touches,b,d=this.node,e=a.target,f=a.pointerId,g=this._touchIds,n=g.slice(0),k=h.map(n,function(a){return c[a];}),m=(new Date).getTime();if(b=c[f]){if(b.pageX=a.pageX,b.pageY=a.pageY,b.endTS=m,this._numTouches--,e.releasePointerCapture?e.releasePointerCapture(f):e.msReleasePointerCapture&&e.msReleasePointerCapture(f),0===this._numTouches){if(this._touches={},this._touchIds=[],this._swipeActive){this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,a));}else{if(this._pinchActive){this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,a));}else{if(!b.absMoved){var e=Infinity,f=-Infinity,g=Infinity,m=-Infinity,l=this.tapStartTolerance,p;for(p=0;p<n.length;p++){b=k[p],b.startTS<e&&(e=b.startTS),b.startTS>f&&(f=b.startTS),b.endTS<g&&(g=b.endTS),b.endTS>m&&(m=b.endTS);}Math.abs(f-e)<=l&&Math.abs(m-g)<=l&&this._basicTap(a,k);}}}}else{1===this._numTouches&&this._pinchActive&&(g.splice(h.indexOf(g,a.pointerId),1),delete c[a.pointerId],b=c[g[0]],b.startX=b.pageX,b.startY=b.pageY,b.moved=!1,document.msElementsFromPoint&&(n=document.msElementsFromPoint(b.pageX,b.pageY),h.some(n,function(a){return a===d;})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[a,b])));}}},_pointerCancel:function(a){this._numTouches&&this._pointerUp(a);},_basicTap:function(a,c){var b=(new Date).getTime(),d=this,e=this._immediate;a=this._processTouchEvent(a,c);this._taps.push({touchInfos:c,ts:b,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);b=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var a=d;d=null;clearTimeout(a._tapTimer);a._analyzeTap(e);},e?0:b);},_analyzeTap:function(a){var c=this._taps,b=c[0],d=c[1],e=b.touchInfos,f=d&&d.touchInfos;c.length&&(a||(this._taps=[]),b&&d?e.length===f.length?d.ts-b.ts<=this.doubleTapDuration?(1===e.length?(a=Math.abs(e[0].startX-f[0].startX),e=Math.abs(e[0].startY-f[0].startY),e=a<=this.doubleTapRadius&&e<=this.doubleTapRadius):e=!0,e?this._processedDoubleTap(c):this._processedTap(d)):this._processedTap(d):this._processedTap(d):this._processedTap(b||d));},_processedTap:function(a){var c=a.event;this._fire("onProcessedTap",c);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(c)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",c);},_processedDoubleTap:function(a){var c=1===a[1].touchInfos.length,b;c&&(b=[this._fixEvent(a[0].event),this._fixEvent(a[1].event)],b[1].relatedEvents=b);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",a[1]);c&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]));},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a));},_mouseMove:function(a){this._fire("onMouseMove",this._processMouseEvent(a));},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a));},_mouseLeave:function(a){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(event));},_mouseDown:function(a){this._downX=a.pageX;this._downY=a.pageY;this._fire("onMouseDown",this._processMouseEvent(a));},_mouseUp:function(a){this._fire("onMouseUp",this._processMouseEvent(a));},_mouseClick:function(a){Math.abs(a.pageX-this._downX)<=this.clickRadius&&Math.abs(a.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(a));},_mouseWheel:function(a){var c=this.map;(c?c.isScrollWheelZoom||c.isScrollWheelPan:this.preventPageScroll)&&a.preventDefault();var c=a.wheelDelta?a.wheelDelta/this.wheelDivisor:-a.detail/this.mozWheelDivisor,b=Math.abs(c),b=b<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>c?-b:b;this._fire("onMouseWheel",this._processMouseEvent(a));},_mouseEnter:function(a){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(a));},_onKeyDown:function(a){this._fire("onKeyDown",a);},_onKeyUp:function(a){this._fire("onKeyUp",a);},_fire:function(a,c){if(this[a]){this[a](c);}if(this.map&&this.map[a]){this.map[a](c);}},_fixEvent:function(a){var c={},b;for(b in a){c[b]=a[b];}this.map&&(c.screenPoint=c.screenPoints[0],c.mapPoint=c.mapPoints[0]);return c;},_processTouchEvent:function(a,c){var b=this.map,d=b&&b.position,e=0;if(d&&c){if(g.isArray(c)){var f,h;a.screenPoints=[];a.mapPoints=[];for(f=0;f<c.length;f++){c[f]?(h=new l(c[f].pageX-d.x,c[f].pageY-d.y),a.screenPoints.push(h),a.mapPoints.push(b.extent?b.toMap(h):new k)):e++;}}else{a.screenPoint=new l(c.pageX-d.x,c.pageY-d.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new k;}}a.numPoints=c?g.isArray(c)?c.length-e:1:0;return a;},_processMouseEvent:function(a){var c=this.map,b=c&&c.position;b&&(a.screenPoint=new l(a.pageX-b.x,a.pageY-b.y),a.mapPoint=c.extent?c.toMap(a.screenPoint):new k);return a;},setImmediateTap:function(a){this._immediate=a;},destroy:function(){var a=this.node;a.removeEventListener("MSPointerDown",this._pointerDown,!1);a.removeEventListener("MSPointerMove",this._pointerMove,!1);a.removeEventListener("MSPointerUp",this._pointerUp,!1);a.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mousemove",this._mouseMove,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mouseleave",this._mouseLeave,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1),a.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null;}});});},"esri/renderers/jsonUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","dojox/gfx/_base","../kernel","../Color","../symbols/jsonUtils","./SimpleRenderer","./UniqueValueRenderer","./ClassBreaksRenderer","./DotDensityRenderer","./ScaleDependentRenderer","./TimeClassBreaksAger","./TimeRampAger","./TemporalRenderer","./HeatmapRenderer"],function(g,k,w,m,x,f,l,n,p,q,r,s,e,t,u,v){return {fromJson:function(a){var b;switch(a.type||""){case "simple":b=new n(a);break;case "uniqueValue":b=new p(a);break;case "classBreaks":b=new q(a);break;case "scaleDependent":b=this._scaleDependentFromJson(a);break;case "dotDensity":b=this._dotDensityFromJson(a);break;case "temporal":b=this._temporalFromJson(a);break;case "heatmap":b=this._heatmapFromJson(a);}return b;},_scaleDependentFromJson:function(a){var b={},c=a.minScale;b.rendererInfos=g.map(a.rendererInfos,function(a){var b=a.maxScale;a={minScale:c,maxScale:b,renderer:a.renderer&&this.fromJson(a.renderer)};c=b;return a;},this);return new s(b);},_dotDensityFromJson:function(a){a.backgroundColor&&k.isArray(a.backgroundColor)&&(a.backgroundColor=f.toDojoColor(a.backgroundColor));0<a.dotSize&&(a.dotSize=m.pt2px(a.dotSize));a.fields&&g.forEach(a.fields,function(a){a&&k.isArray(a.color)&&(a.color=f.toDojoColor(a.color));});a.legendOptions&&(a.legendOptions.backgroundColor&&k.isArray(a.legendOptions.backgroundColor)&&(a.legendOptions.backgroundColor=f.toDojoColor(a.legendOptions.backgroundColor)),a.legendOptions.outline&&(a.legendOptions.outline=l.fromJson(a.legendOptions.outline)));a.outline&&(a.outline=l.fromJson(a.outline));return new r(a);},_temporalFromJson:function(a){var b,c,d;a=a||{};b=this.fromJson(a.observationRenderer);c=a.latestObservationRenderer?this.fromJson(a.latestObservationRenderer):null;d=a.trackRenderer?this.fromJson(a.trackRenderer):null;a=this._agerFromJson(a.observationAger);return new u(b,c,d,a);},_agerFromJson:function(a){var b;a=a||{};a.colorRange||a.sizeRange||a.alphaRange?b=this._timeRampFromJson(a):a.agerClassBreakInfos&&(b=this._timeClassBreaksFromJson(a));return b;},_timeRampFromJson:function(a){var b,c,d;a.colorRange&&1<a.colorRange.length&&(b=[f.toDojoColor(a.colorRange[0]),f.toDojoColor(a.colorRange[1])]);a.sizeRange&&1<a.sizeRange.length&&(c=[a.sizeRange[0],a.sizeRange[1]]);a.alphaRange&&1<a.alphaRange.length&&(d=[a.alphaRange[0]/255,a.alphaRange[1]/255]);return new t(b,c,d);},_timeClassBreaksFromJson:function(a){var b=a.agerClassBreakInfos,c,d,g=[],h;c=e.UNIT_DAYS;switch(a.timeUnits){case "esriTimeUnitsSeconds":c=e.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":c=e.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":c=e.UNIT_HOURS;break;case "esriTimeUnitsMinutes":c=e.UNIT_MINUTES;break;case "esriTimeUnitsMonths":c=e.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":c=e.UNIT_WEEKS;break;case "esriTimeUnitsYears":c=e.UNIT_YEARS;}for(h=0;h<b.length;h+=1){a=b[h],d={minAge:0,maxAge:a.oldestAge||Infinity},a.color&&(d.color=f.toDojoColor(a.color)),a.alpha&&(d.alpha=a.alpha/255),d.size=a.size,g[h]=d;}return new e(g,c);},_heatmapFromJson:function(a){var b=a.colorStops;b&&b instanceof Array&&g.forEach(b,function(a){a.color=f.toDojoColor(a.color);});return new v(a);}};});},"esri/renderers/SimpleRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang","../symbols/jsonUtils","./Renderer"],function(c,d,h,k,e,f,g){return c(g,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(a){if(a&&!a.declaredClass){var b=a;this.symbol=(a=b.symbol)&&(a.declaredClass?a:f.fromJson(a));this.label=b.label;this.description=b.description;}else{this.symbol=a;}},getSymbol:function(a){return this.symbol;},toJson:function(){var a=d.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return e.fixJson(a);}});});},"esri/renderers/Renderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojox/gfx/_base","../kernel","../Color"],function(u,l,e,v,q,w,n){return u(null,{declaredClass:"esri.renderer.Renderer",constructor:function(a){this._ipDataCache={};if(a&&!a.declaredClass){this.rotationInfo=a.rotationInfo;if(!this.rotationInfo){var b=a.rotationType,c=a.rotationExpression;if(b||c){this.rotationInfo={type:b,expression:c};}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(a.sizeInfo));this.setColorInfo(this._readColorInfo(a.colorInfo));this.setOpacityInfo(this._readOpacityInfo(a.transparencyInfo));this.setVisualVariables(this._readVariables(a.visualVariables));}this.getSymbol=l.hitch(this,this.getSymbol);},getSymbol:function(a){},_readSizeInfo:function(a){a&&(a.minSize&&(a.minSize=q.pt2px(a.minSize)),a.maxSize&&(a.maxSize=q.pt2px(a.maxSize)));return a;},_readColorInfo:function(a){a&&(e.forEach(a.colors,function(b,c){l.isArray(b)&&(a.colors[c]=n.toDojoColor(b));}),e.forEach(a.stops,function(b,c){b.color&&l.isArray(b.color)&&(a.stops[c].color=n.toDojoColor(b.color));}));return a;},_readOpacityInfo:function(a){var b;a&&(b=l.mixin({},a),b.transparencyValues&&(b.opacityValues=e.map(b.transparencyValues,function(a){return 1-a/100;}),delete b.transparencyValues),b.stops&&(b.stops=e.map(b.stops,function(a){a=l.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a;})));return b;},_readVariables:function(a){a&&(a=e.map(a,function(a){"sizeInfo"===a.type?a=this._readSizeInfo(a):"colorInfo"===a.type?a=this._readColorInfo(a):"transparencyInfo"===a.type&&(a=this._readOpacityInfo(a),a.type="opacityInfo");return a;},this));return a;},setRotationInfo:function(a){if((a=this.rotationInfo="string"===typeof a?{field:a}:a)&&a.expression&&!a.field){var b=a.expression.match(this.rotationRE);b&&b[1]&&(a.field=b[1]);}return this;},rotationRE:/^\[([^\]]+)\]$/i,getRotationAngle:function(a){var b=this.rotationInfo,c="arithmetic"===b.type,b=b.field,d=a.attributes,f=0;b&&(l.isFunction(b)?f=b.apply(this,arguments):d&&(f=d[b]||0),f=(f+(c?-90:0))*(c?-1:1));return f;},setVisualVariables:function(a){var b=this._ipDataCache;e.forEach(this.visualVariables,function(a,d){b.hasOwnProperty(d)&&(b[d]=null);},this);this.visualVariables=a;e.forEach(a,function(a,d){"colorInfo"===a.type?b[d]=this._processColorInfo(a):"opacityInfo"===a.type&&(b[d]=this._processOpacityInfo(a));},this);return this;},getVisualVariableValues:function(a){var b=this.visualVariables,c;b&&(c=e.map(b,function(b){var c;switch(b.type){case "sizeInfo":c=this.getSize(a,{sizeInfo:b});break;case "colorInfo":c=this.getColor(a,{colorInfo:b});break;case "opacityInfo":c=this.getOpacity(a,{opacityInfo:b});}return {variable:b,value:c};},this));return c;},setSizeInfo:function(a){this.sizeInfo=this.proportionalSymbolInfo=a;return this;},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this;},getSize:function(a,b){var c=a.attributes,d=b&&b.sizeInfo||this.sizeInfo,f=d&&d.field,g=0,e="number"===typeof a,h=e?a:null;if(f){var k=d.minSize,m=d.maxSize,p=d.minDataValue,n=d.maxDataValue,q=d.valueUnit||"unknown",s=d.valueRepresentation,t=d.normalizationField,r=c?parseFloat(c[t]):void 0,d=b&&b.shape;"number"!==typeof h&&(l.isFunction(f)?h=f.apply(this,arguments):c&&(h=c[f]));if(null==h||t&&!e&&(isNaN(r)||0===r)){return null;}!isNaN(r)&&!e&&(h/=r);if(null!=k&&null!=m&&null!=p&&null!=n){g=h<=p?k:h>=n?m:k+(h-p)/(n-p)*(m-k);}else{if("unknown"===q){null!=k&&null!=p&&(k&&p?(h/=p,g="circle"===d?2*Math.sqrt(h*Math.pow(k/2,2)):"square"===d||"diamond"===d||"image"===d?Math.sqrt(h*Math.pow(k,2)):h*k):g=h+(k||p),g=g<k?k:g,null!=m&&g>m&&(g=m));}else{c=(b&&b.resolution?b.resolution:1)*this._meterIn[q];if("area"===s){g=Math.sqrt(h/Math.PI)/c,g*=2;}else{if(g=h/c,"radius"===s||"distance"===s){g*=2;}}null!=k&&g<k&&(g=k);null!=m&&g>m&&(g=m);}}}else{d&&(g=d.minSize);}return g=isNaN(g)?0:g;},setColorInfo:function(a){this.colorInfo=a;this._ipDataCache.colorInfo=this._processColorInfo(a);return this;},_processColorInfo:function(a){a&&(e.forEach(a.colors,function(b,c){l.isArray(b)&&(a.colors[c]=new n(b));}),e.forEach(a.stops,function(b,c){b.color&&l.isArray(b.color)&&(a.stops[c].color=new n(b.color));}));return this._interpolateData(a);},getColor:function(a,b){var c,d=b&&b.colorInfo;d&&"colorInfo"===d.type?(c=e.indexOf(this.visualVariables,d),d=this.visualVariables[c]):(c="colorInfo",d=this.colorInfo);return this._getColorComponent(a,d,this._ipDataCache[c]);},setOpacityInfo:function(a){this.opacityInfo=a;this._ipDataCache.opacityInfo=this._processOpacityInfo(a);return this;},_processOpacityInfo:function(a){return this._interpolateData(a);},getOpacity:function(a,b){var c,d=b&&b.opacityInfo;d&&"opacityInfo"===d.type?(c=e.indexOf(this.visualVariables,d),d=this.visualVariables[c]):(c="opacityInfo",d=this.opacityInfo);return this._getColorComponent(a,d,this._ipDataCache[c],!0);},_getColorComponent:function(a,b,c,d){var f=a.attributes,g=b&&b.field,e="number"===typeof a?a:null,h;if(g){var k=b.normalizationField,m=f?parseFloat(f[k]):void 0;"number"!==typeof e&&(l.isFunction(g)?e=g.apply(this,arguments):f&&(e=f[g]));null!=e&&(k&&(!isNaN(m)&&0!==m)&&(e/=m),h=d?this._getOpacity(e,b,c):this._getColor(e,b,c));}else{b&&(f=b.stops,d?(h=f&&f[0]&&f[0].opacity,null==h&&(h=b.opacityValues&&b.opacityValues[0])):h=f&&f[0]&&f[0].color||b.colors&&b.colors[0]);}return h;},_interpolateData:function(a){var b;if(a&&a.field){if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,f=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++){b[a]=d+a*f;}}else{a.stops&&(b=e.map(a.stops,function(a){return a.value;}));}}return b;},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d;},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity;},_getColor:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):n.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]));return d;},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color;},_lookupData:function(a,b){var c;if(b){var d=0,f=b.length-1;e.some(b,function(b,c){if(a<b){return f=c,!0;}d=c;return !1;});c=[d,f,(a-b[d])/(b[f]-b[d])];}return c;},_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:0.000621371,"nautical-miles":0.000539957,millimeters:1000,centimeters:100,decimeters:10,meters:1,kilometers:0.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(a){if(a){a=l.mixin({},a);a.minSize&&(a.minSize=q.px2pt(a.minSize));a.maxSize&&(a.maxSize=q.px2pt(a.maxSize));var b=a.legendOptions;if(b&&(a.legendOptions=l.mixin({},b),b=b.customValues)){a.legendOptions.customValues=b.slice(0);}}return a;},_writeColorInfo:function(a){a&&(a=l.mixin({},a),a.colors&&(a.colors=e.map(a.colors,function(a){return n.toJsonColor(a);})),a.stops&&(a.stops=e.map(a.stops,function(a){a=l.mixin({},a);a.color&&(a.color=n.toJsonColor(a.color));return a;})));return a;},_writeOpacityInfo:function(a){var b;a&&(b=l.mixin({},a),b.opacityValues&&(b.transparencyValues=e.map(b.opacityValues,function(a){return 100*(1-a);}),delete b.opacityValues),b.stops&&(b.stops=e.map(b.stops,function(a){a=l.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a;})));return b;},toJson:function(){var a=this.visualVariables,b=this.rotationInfo,c=b&&b.field,c=b&&(b.expression||c&&(l.isFunction(c)?c:"["+c+"]"));a&&(a=e.map(a,function(a){"sizeInfo"===a.type?a=this._writeSizeInfo(a):"colorInfo"===a.type?a=this._writeColorInfo(a):"opacityInfo"===a.type&&(a=this._writeOpacityInfo(a),a.type="transparencyInfo");return a;},this));return {rotationType:c&&(b.type||"geographic"),rotationExpression:c,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:a};}});});},"esri/renderers/UniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../lang","../symbols/jsonUtils","./Renderer"],function(k,g,f,n,p,l,h,m){return k(m,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(b,a,c,e,d){this.values=[];this._symbols={};this.infos=[];b&&!b.declaredClass?(a=b,this.defaultSymbol=(b=a.defaultSymbol)&&(b.declaredClass?b:h.fromJson(b)),this.attributeField=a.field1,this.attributeField2=a.field2,this.attributeField3=a.field3,this.fieldDelimiter=a.fieldDelimiter,this.defaultLabel=a.defaultLabel,g.forEach(a.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=b,this.attributeField=a,this.attributeField2=c,this.attributeField3=e,this.fieldDelimiter=d);this._multiple=!!this.attributeField2;},addValue:function(b,a){var c=f.isObject(b)?b:{value:b,symbol:a};this._addValueInfo(c);},removeValue:function(b){var a=g.indexOf(this.values,b);-1!==a&&(this.values.splice(a,1),delete this._symbols[b],this.infos.splice(a,1));},getUniqueValueInfo:function(b){var a=this.attributeField,c=b.attributes,e,d;this._multiple?(b=this.attributeField2,e=this.attributeField3,d=[],a&&d.push(c[a]),b&&d.push(c[b]),e&&d.push(c[e]),a=d.join(this.fieldDelimiter||"")):a=f.isFunction(a)?a(b):c[a];return this._symbols[a];},getSymbol:function(b){return (b=this.getUniqueValueInfo(b))&&b.symbol||this.defaultSymbol;},_addValueInfo:function(b){var a=b.value;this.values.push(a);this.infos.push(b);var c=b.symbol;c&&!c.declaredClass&&(b.symbol=h.fromJson(c));this._symbols[a]=b;},toJson:function(){var b=l.fixJson,a=f.mixin(this.inherited(arguments),{type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:g.map(this.infos||[],function(a){a=f.mixin({},a);a.symbol=a.symbol&&a.symbol.toJson();a.value+="";return b(a);})});return b(a);}});});},"esri/renderers/ClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../lang","../symbols/jsonUtils","./Renderer"],function(p,h,k,r,s,n,m,q){return p(q,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(a,c){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(a&&!a.declaredClass){var b=a;this.attributeField=b.field;this.defaultSymbol=(a=b.defaultSymbol)&&(a.declaredClass?a:m.fromJson(a));this.backgroundFillSymbol=(a=b.backgroundFillSymbol)&&(a.declaredClass?a:m.fromJson(a));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],b,this);var e=b.minValue;(b=b.classBreakInfos)&&(b[0]&&n.isDefined(b[0].classMaxValue))&&h.forEach(b,function(a){var b=a.classMaxValue;a.minValue=e;e=a.maxValue=b;},this);h.forEach(b,this._addBreakInfo,this);}else{this.defaultSymbol=a,this.attributeField=c;}},addBreak:function(a,c,b){a=k.isObject(a)?a:{minValue:a,maxValue:c,symbol:b};this._addBreakInfo(a);},removeBreak:function(a,c){var b,e=this.breaks,d,g=e.length,f=this._symbols;for(d=0;d<g;d++){if(b=e[d],b[0]==a&&b[1]==c){e.splice(d,1);delete f[a+"-"+c];this.infos.splice(d,1);break;}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[];},getBreakIndex:function(a){var c=this.attributeField,b=a.attributes,e=this.breaks,d=e.length,g=this.isMaxInclusive;if(k.isFunction(c)){a=c(a);}else{a=parseFloat(b[c]);var c=this.normalizationType,f;c&&(f=parseFloat(this.normalizationTotal),b=parseFloat(b[this.normalizationField]),"log"===c?a=Math.log(a)*Math.LOG10E:"percent-of-total"===c&&!isNaN(f)?a=100*(a/f):"field"===c&&!isNaN(b)&&(a/=b));}for(b=0;b<d;b++){if(c=e[b],c[0]<=a&&(g?a<=c[1]:a<c[1])){return b;}}return -1;},getBreakInfo:function(a){a=this.getBreakIndex(a);return -1!==a?this.infos[a]:null;},getSymbol:function(a){return (a=this.breaks[this.getBreakIndex(a)])?this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol;},setMaxInclusive:function(a){this.isMaxInclusive=a;},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(a,c,b){h.forEach(a,function(a){var d=a.split(":"),g,f,h;1<d.length&&(a=d[0],g=this["_"+a+"Enums"],"rest"===d[1]?(f="1",h="0"):"sdk"===d[1]&&(f="0",h="1"));d=c[a];if(void 0!==d&&(b[a]=d,g&&f)){var l,k=g.length;for(l=0;l<k;l++){if(g[l][f]===d){b[a]=g[l][h];break;}}}},this);},_addBreakInfo:function(a){var c=a.minValue,b=a.maxValue;this.breaks.push([c,b]);this.infos.push(a);var e=a.symbol;e&&!e.declaredClass&&(a.symbol=m.fromJson(e));this._symbols[c+"-"+b]=a.symbol;},toJson:function(){var a=this.infos||[],c=n.fixJson,b=a[0]&&a[0].minValue,e=this.backgroundFillSymbol,a=k.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:e&&e.toJson(),minValue:-Infinity===b?-Number.MAX_VALUE:b,classBreakInfos:h.map(a,function(a){a=k.mixin({},a);a.symbol=a.symbol&&a.symbol.toJson();a.classMaxValue=Infinity===a.maxValue?Number.MAX_VALUE:a.maxValue;delete a.minValue;delete a.maxValue;return c(a);})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,a);return c(a);}});});},"esri/renderers/DotDensityRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/has","dojox/gfx/_base","../kernel","../lang","../Color","./Renderer","../symbols/PictureFillSymbol","../geometry/ScreenPoint","../geometry/Point"],function(p,m,q,r,w,s,x,h,k,t,u,v,n){return p(t,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(a){this.dotSize=a.dotSize||3;this.dotValue=a.dotValue;this.fields=a.fields;this.outline=a.outline;this.backgroundColor=a.backgroundColor;this.exactCount=a.exactCount||!0;this.dotShape=a.dotShape||"square";this.legendOptions=a.legendOptions;this._exactCountMinArea=10000;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1;window.CanvasRenderingContext2D||undefined;},getSymbol:function(a){var b,c;this._currentGraphic=a;if(!this._supportsCanvas){return null;}this._map||(this._map=a.getLayer()._map,this._objectIdField=a.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",m.hitch(this,function(a){this._currentMapScale=this._map.getScale();this._currentResolution=a.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={};})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]){return b=this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]],c=this._getShapeProperties(a),b.setOffset(c.dx,c.dy),b;}b=this._generateFieldsCount(this.fields,a.attributes,this.dotValue);c=this._getShapeProperties(a);b=new u(this._generateImageSrc(c.width,c.height,b,c.minXY,c.maxXY),this.outline,c.width,c.height);b.setOffset(c.dx,c.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]=b;},_generateFieldsCount:function(a,b,c){var e,d;for(d=a.length-1;0<=d;d--){e=b[a[d].name]/c,a[d].numPoints=Math.round(e);}return a;},_getShapeProperties:function(a){var b,c,e,d;b=a.geometry.getExtent();b.contains(this._map.extent)&&(b=this._map.extent);e=Math.ceil(b.getWidth()/this._currentResolution);d=Math.ceil(b.getHeight()/this._currentResolution);c=this._map.toScreen(new n(b.xmin,b.ymin,b.spatialReference));b=this._map.toScreen(new n(b.xmax,b.ymax,b.spatialReference));a=a.getLayer().getNode().getCTM();return {minXY:c,maxXY:b,dx:(c.x-a.e)%e,dy:(b.y-a.f)%d,width:e,height:d};},_generateImageSrc:function(a,b,c,e,d,f){var h=this.dotSize,g,k,l;this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);g=this._canvas.getContext("2d");if(f=f||this.backgroundColor){g.fillStyle=f.toCss(!0),g.fillRect(0,0,a,b),g.fill();}for(f=c.length-1;0<=f;f--){g.fillStyle=c[f].color.toCss(!0);for(k=c[f].numPoints-1;0<=k;k--){l=this._getRandomPoint(a,b,e,d),"square"===this.dotShape?g.fillRect(l.x,l.y,h,h):"circle"===this.dotShape&&(g.beginPath(),g.arc(l.x,l.y,h/2,0,2*Math.PI,!0)),g.fill();}}return this._canvas.toDataURL();},_initCanvas:function(a,b){var c=r.create("canvas",{id:"canvas",width:a+"px",height:b+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(c);return c;},_getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1)+a);},_getRandomPoint:function(a,b,c,e){var d={},f=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&a*b>this._exactCountMinArea){do{d.x=this._getRandomInt(c.x,e.x),d.y=this._getRandomInt(e.y,c.y),a=new v(d.x,d.y),a=this._checkPointShapeBounds(a,this.dotSize+f,this._currentGraphic.geometry),!0===a&&(d.x-=c.x,d.y-=e.y);}while(!1===a);}else{d.x=this._getRandomInt(0,a),d.y=this._getRandomInt(0,b);}return d;},_checkPointShapeBounds:function(a,b,c){var e=null,e=!1,d=!0,f=0;do{switch(f){case 1:a.x+=b;break;case 2:a.y+=b;break;case 3:a.x-=b;}e=this._map.toMap(a);e=c.contains(e);!1===e&&(d=!1);f+=1;}while(3>=f&&!0===d);return e;},setDotSize:function(a){0<a&&(this.dotSize=a);},setDotValue:function(a){0<a&&(this.dotValue=a);},setOutline:function(a){this.outline=a;},setBackgroundColor:function(a){this.backgroundColor=a;},toJson:function(){var a=m.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:k.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?s.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:q.map(this.fields,function(a){return h.fixJson({color:k.toJsonColor(a.color),name:a.name});}),legendOptions:this.legendOptions&&h.fixJson({backgroundColor:k.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return h.fixJson(a);}});});},"esri/renderers/ScaleDependentRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../lang","./Renderer"],function(m,n,p,r,s,l,q){return m(q,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(a){this.setRendererInfos(a&&a.rendererInfos||[]);},setRendererInfos:function(a){this.rendererInfos=a;this._setRangeType();return this;},getSymbol:function(a){var b=this.getRendererInfo(a);return b&&b.renderer&&b.renderer.getSymbol(a);},getRendererInfo:function(a){a=a.getLayer().getMap();return "zoom"===this.rangeType?this.getRendererInfoByZoom(a.getZoom()):this.getRendererInfoByScale(a.getScale());},getRendererInfoByZoom:function(a){var b,c=this.rendererInfos,e,d=0;do{b=c[d],a>=b.minZoom&&a<=b.maxZoom&&(e=b),d++;}while(!e&&d<c.length);return e;},getRendererInfoByScale:function(a){var b,c=this.rendererInfos,e,d=0,f,g,h,k;do{b=c[d],f=b.minScale,g=b.maxScale,h=!f,k=!g,!h&&a<=f&&(h=!0),!k&&a>=g&&(k=!0),h&&k&&(e=b),d++;}while(!e&&d<c.length);return e;},addRendererInfo:function(a){var b,c=0,e,d=this.rendererInfos,f=a.hasOwnProperty("minZoom")?"minZoom":"minScale",g=d.length;do{e=d[c];if(g===c||a[f]<e[f]){d.splice(c,0,a),this._setRangeType(),b=!0;}c++;}while(!b&&c<g);return this;},_setRangeType:function(){var a=this.rendererInfos;if(a=a&&a[0]){this.rangeType=a.hasOwnProperty("minZoom")?"zoom":a.hasOwnProperty("minScale")?"scale":"";}},toJson:function(){if("zoom"===this.rangeType){return null;}var a=this.rendererInfos||[],b=a[0]&&a[0].minScale,a=p.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<b?b:0,rendererInfos:n.map(a,function(a){return l.fixJson({maxScale:0<a.maxScale?a.maxScale:0,renderer:a.renderer&&a.renderer.toJson()});})});return l.fixJson(a);}});});},"esri/renderers/TimeClassBreaksAger":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","dojo/date","../kernel","../lang","../symbols/jsonUtils","../Color","./SymbolAger"],function(k,l,m,t,n,u,p,q,r,s){var b=k(s,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(c,a){this.infos=c;this.timeUnits=a||"day";c.sort(function(a,c){return a.minAge<c.minAge?-1:a.minAge>c.minAge?1:0;});},getAgedSymbol:function(c,a){var e=a.getLayer(),b=a.attributes,f=p.isDefined;c=q.fromJson(c.toJson());var g=e._map.timeExtent.endTime;if(!g){return c;}var h=n.difference(new Date(b[e._startTimeField]),g,this.timeUnits);l.some(this.infos,function(a){if(h>=a.minAge&&h<=a.maxAge){var e=a.color,b=a.size;a=a.alpha;e&&c.setColor(e);f(b)&&this._setSymbolSize(c,b);f(a)&&c.color&&(c.color.a=a);return !0;}},this);return c;},toJson:function(){var c={agerClassBreakInfos:[]},a,b,d;c.timeUnits=this._getRestUnits(this.timeUnits);for(a=0;a<this.infos.length;a+=1){b=this.infos[a],d={},d.oldestAge=Infinity===b.maxAge?null:b.maxAge,d.size=b.size,b.color&&(d.color=r.toJsonColor(b.color)),b.alpha&&(d.alpha=Math.round(255*b.alpha)),c.agerClassBreakInfos[a]=d;}return c;},_getRestUnits:function(c){var a="esriTimeUnitsDays";switch(c){case b.UNIT_SECONDS:a="esriTimeUnitsSeconds";break;case b.UNIT_MILLISECONDS:a="esriTimeUnitsMilliseconds";break;case b.UNIT_HOURS:a="esriTimeUnitsHours";break;case b.UNIT_MINUTES:a="esriTimeUnitsMinutes";break;case b.UNIT_MONTHS:a="esriTimeUnitsMonths";break;case b.UNIT_WEEKS:a="esriTimeUnitsWeeks";break;case b.UNIT_YEARS:a="esriTimeUnitsYears";}return a;}});m.mixin(b,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});return b;});},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(c,d,e,f){return c(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(a,b){},_setSymbolSize:function(a,b){switch(a.type){case "simplemarkersymbol":a.setSize(b);break;case "picturemarkersymbol":a.setWidth(b);a.setHeight(b);break;case "simplelinesymbol":case "cartographiclinesymbol":a.setWidth(b);break;case "simplefillsymbol":case "picturefillsymbol":a.outline&&a.outline.setWidth(b);}}});});},"esri/renderers/TimeRampAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","../kernel","../symbols/jsonUtils","../Color","./SymbolAger"],function(n,s,p,t,u,q,m,r){return n(r,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(e,k,a){this.colorRange=e;this.sizeRange=k;this.alphaRange=a;},getAgedSymbol:function(e,k){var a=k.getLayer(),c=k.attributes;e=q.fromJson(e.toJson());var b=a._map.timeExtent,d=b.startTime,b=b.endTime;if(!d||!b){return e;}d=d.getTime();b=b.getTime();a=new Date(c[a._startTimeField]);a=a.getTime();a<d&&(a=d);d=b===d?1:(a-d)/(b-d);if(a=this.sizeRange){c=a[0],b=a[1],a=Math.abs(b-c)*d,this._setSymbolSize(e,c<b?c+a:c-a);}if(a=this.colorRange){var b=a[0],g=a[1],l=Math.round,c=new p,f=b.r,h=g.r,a=Math.abs(h-f)*d;c.r=l(f<h?f+a:f-a);f=b.g;h=g.g;a=Math.abs(h-f)*d;c.g=l(f<h?f+a:f-a);f=b.b;h=g.b;a=Math.abs(h-f)*d;c.b=l(f<h?f+a:f-a);b=b.a;g=g.a;a=Math.abs(g-b)*d;c.a=b<g?b+a:b-a;e.setColor(c);}c=e.color;if((a=this.alphaRange)&&c){b=a[0],g=a[1],a=Math.abs(g-b)*d,c.a=b<g?b+a:b-a;}return e;},toJson:function(){var e={};this.sizeRange&&(e.sizeRange=this.sizeRange);this.colorRange&&(e.colorRange=[m.toJsonColor(this.colorRange[0]),m.toJsonColor(this.colorRange[1])]);this.alphaRange&&(e.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return e;}});});},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(f,h,k,l,g){return f(g,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(a,d,c,b){this.observationRenderer=a;this.latestObservationRenderer=d;this.trackRenderer=c;this.observationAger=b;},getSymbol:function(a){var d=a.getLayer(),c=this.getObservationRenderer(a),b=c&&c.getSymbol(a),e=this.observationAger;d.timeInfo&&(d._map.timeExtent&&c===this.observationRenderer&&e&&b)&&(b=e.getAgedSymbol(b,a));return b;},getObservationRenderer:function(a){return 0===a.getLayer()._getKind(a)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer;},toJson:function(){var a={type:"temporal"};a.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(a.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(a.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(a.observationAger=this.observationAger.toJson());return a;}});});},"esri/renderers/HeatmapRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","../sniff","../kernel","../lang","../symbols/PictureMarkerSymbol","../Color","./Renderer"],function(m,h,k,n,s,t,p,q,l,r){return m([r],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,colorStops:null,constructor:function(a){(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)?("string"==typeof a&&(a=JSON.parse(a)),h.mixin(this,a),this._canvas=null,!this.colors&&!this.colorStops&&(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:0.75,color:"rgba(255, 140, 0, 1)"},{ratio:0.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)):undefined;},getSymbol:function(a){if(!this._supportsCanvas){return !1;}var b=a.attributes.imageData;a=a.attributes.size;if(!a){return null;}var c=this._getContext(a[0],a[1]),d=c.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&d.data instanceof window.CanvasPixelArray){for(var f=d.data,e=f.length;e--;){f[e]=b[e];}}else{d.data.set(b);}c.putImageData(d,0,0);return new q(c.canvas.toDataURL(),a[0],a[1]);},setColors:function(a){if(a&&(a instanceof Array||a.colors)){this.gradient=this._generateGradient(a.colors||a),this.colors=a;}return this;},setColorStops:function(a){if(a&&(a instanceof Array||a.colorStops)){this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a;}return this;},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this;},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this;},setField:function(a){this.field=a;return this;},setBlurRadius:function(a){this.blurRadius=a;return this;},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=h.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});k.forEach(a.colorStops,function(a){a.color=l.toJsonColor(a.color);});return p.fixJson(a);},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d");},_initCanvas:function(a,b){var c=n.create("canvas",{id:"hm_canvas-"+Math.floor(1000*Math.random()),style:"position: absolute; left: -10000px; top: 0px;"},null);c.width=a;c.height=b;document.body.appendChild(c);return c;},_generateGradient:function(a,b){b||(b=512);for(var c=this._colorsToStops(a),d=this._getContext(1,b||512),f=d.createLinearGradient(0,0,0,b),e=0,g;e<c.length;e++){g=c[e],f.addColorStop(g.ratio,g.color.toCss(!0));}d.fillStyle=f;d.fillRect(0,0,1,b);return d.getImageData(0,0,1,b).data;},_colorsToStops:function(a){function b(a){!a.toRgba&&!a.declaredClass&&(a=new l(a));return a;};var c=[];if(!a[0]){return c;}if(null!=a[0].ratio){c=k.map(a,function(a){a.color=b(a.color);return a;});}else{if(null!=a[0].value){var d=Infinity,c=-Infinity,f=0,e;for(e=0;e<a.length;e++){var g=a[e].value;g<d&&(d=g);g>c&&(c=g);}f=c-d;this.maxPixelIntensity=c;this.minPixelIntensity=d;c=k.map(a,function(a){var c=a.value;a=b(a.color);return {value:c,ratio:(c-d)/f,color:a};});}else{var h=a.length-1,c=k.map(a,function(a,c){return {color:b(a),ratio:c/h};});}}return c;}});});},"esri/dijit/PopupTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/dom-construct","../kernel","../InfoTemplate","../PopupInfo","./PopupRenderer"],function(c,d,k,e,l,f,g,h){return c([f,g],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(a,b){d.mixin(this,b);this.initialize(a,b);},getTitle:function(a){var b;this.info&&(b=this.titleHasRelatedFields?"":this._getPopupValues(a,!0).title);return b||"";},getContent:function(a){return this.info?(new h({template:this,graphic:a,chartTheme:this.chartTheme},e.create("div"))).domNode:"";}});});},"esri/PopupInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/i18n","dojo/has","dojo/Deferred","dojo/sniff","dojo/promise/all","./lang","./kernel","./request","./tasks/query","./tasks/QueryTask","./tasks/StatisticDefinition","dojo/i18n!dojo/cldr/nls/number"],function(F,m,p,z,K,L,C,G,t,g,M,H,D,I,J,E){return F(null,{declaredClass:"esri.PopupInfo",initialize:function(a,b){if(a){m.mixin(this,b);this.info=a;this.title=this.getTitle;this.content=this.getContent;var d=this._fieldLabels={},c=this._fieldsMap={};a.fieldInfos&&p.forEach(a.fieldInfos,function(a){d[a.fieldName]=a.label;c[a.fieldName]=a;});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix));}},toJson:function(){return z.fromJson(z.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(a){var b=this.info,d=new C,c,e;b.fieldInfos&&(e=p.filter(b.fieldInfos,function(a){return -1!==a.fieldName.indexOf(this._relatedFieldPrefix);},this));e&&0<e.length&&(c=this._getRelatedRecords({graphic:a,fieldsInfo:e}));c?c.always(m.hitch(this,function(){d.resolve(this._getPopupValues(a));})):d.resolve(this._getPopupValues(a));return d.promise;},_getPopupValues:function(a,b){var d=this.info,c=a.getLayer(),e=m.clone(a.attributes)||{},f=m.clone(e),q=d.fieldInfos,h="",k="",w,n,l,u,r,A=c&&c._getDateOpts&&c._getDateOpts().properties,s={dateFormat:{properties:A,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo){for(u in this._relatedInfo){if(this._relatedInfo.hasOwnProperty(u)){var v=this._relatedInfo[u],t=this._relatedLayersInfo[u];v&&(p.forEach(v.relatedFeatures,function(a){for(r in a.attributes){if(a.attributes.hasOwnProperty(r)&&"esriRelCardinalityOneToOne"===t.relation.cardinality){var b=this._toRelatedFieldName([t.relation.id,r]);e[b]=f[b]=a.attributes[r];}}},this),p.forEach(v.relatedStatsFeatures,function(a){for(r in a.attributes){if(a.attributes.hasOwnProperty(r)){var b=this._toRelatedFieldName([t.relation.id,r]);e[b]=f[b]=a.attributes[r];}}},this));}}}q&&p.forEach(q,function(a){n=a.fieldName;f[n]=this._formatValue(f[n],n,s);A&&(a.format&&a.format.dateFormat)&&(a=p.indexOf(A,n),-1<a&&A.splice(a,1));},this);if(c){u=c.types;var z=(v=c.typeIdField)&&e[v];for(n in e){if(e.hasOwnProperty(n)&&-1===n.indexOf(this._relatedFieldPrefix)&&(l=e[n],g.isDefined(l))){var x=this._getDomainName(c,a,u,z,n,l);g.isDefined(x)?f[n]=x:n===v&&(x=this._getTypeName(c,a,l),g.isDefined(x)&&(f[n]=x));}}}d.title&&(h=this._processFieldsInLinks(this._fixTokens(d.title),e),h=m.trim(g.substitute(f,h,s)||""));if(b){return {title:h};}d.description&&(k=this._processFieldsInLinks(this._fixTokens(d.description),e),k=m.trim(g.substitute(f,k,s)||""));q&&(w=[],p.forEach(q,function(a){(n=a.fieldName)&&a.visible&&w.push([a.label||n,g.substitute(f,"${"+n+"}",s)||""]);}));var y,B;d.mediaInfos&&(y=[],p.forEach(d.mediaInfos,function(a){B=0;l=a.value;switch(a.type){case "image":var b=l.sourceURL,b=b&&m.trim(g.substitute(e,this._fixTokens(b)));B=!!b;break;case "piechart":case "linechart":case "columnchart":case "barchart":B=p.some(l.fields,function(a){return g.isDefined(e[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&this._relatedInfo;},this);break;default:return;}if(B){a=m.clone(a);l=a.value;var b=a.title?this._processFieldsInLinks(this._fixTokens(a.title),e):"",d=a.caption?this._processFieldsInLinks(this._fixTokens(a.caption),e):"";a.title=b?m.trim(g.substitute(f,b,s)||""):"";a.caption=d?m.trim(g.substitute(f,d,s)||""):"";if("image"===a.type){l.sourceURL=g.substitute(e,this._fixTokens(l.sourceURL)),l.linkURL&&(l.linkURL=m.trim(g.substitute(e,this._fixTokens(l.linkURL))||""));}else{var c,h;p.forEach(l.fields,function(a,b){if(-1!==a.indexOf(this._relatedFieldPrefix)){h=this._getRelatedChartInfos(a,l,e,s),h instanceof Array?l.fields=h:l.fields[b]=h;}else{var d=e[a],d=void 0===d?null:d;c=e[l.normalizeField]||0;d&&c&&(d/=c);l.fields[b]={y:d,tooltip:(this._fieldLabels[a]||a)+":<br/>"+this._formatValue(d,a,s,!!c)};}},this);}y.push(a);}},this));return {title:h,description:k,fields:w&&w.length?w:null,mediaInfos:y&&y.length?y:null,formatted:f,editSummary:c&&c.getEditSummary?c.getEditSummary(a):""};},_getRelatedChartInfos:function(a,b,d,c){var e,f,q,h,k,g;e=[];g=this._fromRelatedFieldName(a);k=g[0];f=this._relatedInfo[k];k=this._relatedLayersInfo[k];f&&p.forEach(f.relatedFeatures,function(f){f=f.attributes;var l,k;for(k in f){if(f.hasOwnProperty(k)&&k===g[1]){l={};h=f[k];b.normalizeField&&(q=-1!==b.normalizeField.indexOf(this._relatedFieldPrefix)?f[this._fromRelatedFieldName(b.normalizeField)[1]]:d[b.normalizeField]);h&&q&&(h/=q);if(b.tooltipField){if(-1!==b.tooltipField.indexOf(this._relatedFieldPrefix)){var m=this._fromRelatedFieldName(b.tooltipField)[1];l.tooltip=f[m]+":<br/>"+this._formatValue(h,f[m],c,!!q);}else{l.tooltip=(this._fieldLabels[a]||a)+":<br/>"+this._formatValue(h,b.tooltipField,c,!!q);}}else{l.tooltip=h;}l.y=h;e.push(l);}}},this);return "esriRelCardinalityOneToMany"===k.relation.cardinality||"esriRelCardinalityManyToMany"===k.relation.cardinality?e:e[0];},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField])){return b.queryAttachmentInfos(a);}},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"[^\"]+\"/ig,_fixTokens:function(a){return a.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_processFieldsInLinks:function(a,b){return a&&a.replace(this._reHref,function(a){return a=g.substitute(b,a);});},_formatValue:function(a,b,d,c){var e=this._fieldsMap[b],f=e&&e.format;b="number"===typeof a&&-1===p.indexOf(d.dateFormat.properties,b)&&(!f||!f.dateFormat);if(!g.isDefined(a)||!e||!g.isDefined(f)){return b?this._forceLTR(a):a;}var q="",h=[],e=f.hasOwnProperty("places")||f.hasOwnProperty("digitSeparator"),k=f.hasOwnProperty("digitSeparator")?f.digitSeparator:!0;if(e){q="NumberFormat",h.push("places: "+(g.isDefined(f.places)&&(!c||0<f.places)?Number(f.places):"Infinity")),h.length&&(q+="("+h.join(",")+")");}else{if(f.dateFormat){q="DateFormat"+this._insertOffset(this._dateFormats[f.dateFormat]||this._dateFormats.shortDateShortTime);}else{return b?this._forceLTR(a):a;}}a=g.substitute({myKey:a},"${myKey:"+q+"}",d)||"";e&&!k&&E.group&&(a=a.replace(RegExp("\\"+E.group,"g"),""));return b?this._forceLTR(a):a;},_forceLTR:function(a){var b=G("ie");return b&&10>=b?a:"<span class='esriNumericValue'>"+a+"</span>";},_insertOffset:function(a){a&&(a=g.isDefined(this.utcOffset)?a.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):a);return a;},_getDomainName:function(a,b,d,c,e,f){return (a=a.getDomain&&a.getDomain(e,{feature:b}))&&a.codedValues?a.getName(f):null;},_getTypeName:function(a,b,d){return (a=a.getType&&a.getType(b))&&a.name;},_getRelatedRecords:function(a){var b=a.graphic,d=new C,c;this._relatedLayersInfo?this._queryRelatedLayers(b).then(m.hitch(this,function(a){this._setRelatedRecords(b,a);d.resolve(a);}),m.hitch(this,this._handlerErrorResponse,d)):this._getRelatedLayersInfo(a).then(m.hitch(this,function(a){for(c in a){a.hasOwnProperty(c)&&a[c]&&(this._relatedLayersInfo[c].relatedLayerInfo=a[c]);}this._queryRelatedLayers(b).then(m.hitch(this,function(a){this._setRelatedRecords(b,a);d.resolve(a);}),m.hitch(this,this._handlerErrorResponse,d));}),m.hitch(this,this._handlerErrorResponse,d));return d.promise;},_getRelatedLayersInfo:function(a){var b=a.fieldsInfo,d,c,e={};d=a.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});p.forEach(b,function(a){var b,c,e,g;b=this._fromRelatedFieldName(a.fieldName);c=b[0];b=b[1];c&&(this._relatedLayersInfo[c]||(p.some(d.relationships,function(a){if(a.id==c){return g=a,!0;}}),g&&(this._relatedLayersInfo[c]={relation:g,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[c]&&(this._relatedLayersInfo[c].relatedFields.push(b),a.statisticType&&(e=new J,e.statisticType=a.statisticType,e.onStatisticField=b,e.outStatisticFieldName=b,this._relatedLayersInfo[c].outStatistics.push(e))));},this);for(c in this._relatedLayersInfo){this._relatedLayersInfo.hasOwnProperty(c)&&this._relatedLayersInfo[c]&&(a=this._relatedLayersInfo[c].relation,a=d.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[c].relatedLayerUrl=a,e[c]=H({url:a,content:{f:"json"},callbackParamName:"callback"}));}return t(e);},_queryRelatedLayers:function(a){var b={},d;for(d in this._relatedLayersInfo){this._relatedLayersInfo.hasOwnProperty(d)&&(b[d]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[d]}));}return t(b);},_queryRelatedLayer:function(a){var b,d,c,e,f,g,h,k,m,n;b=a.graphic;d=b.getLayer().url.match(/[0-9]+$/g)[0];k=a.relatedInfo;h=k.relatedLayerInfo;m=k.relatedLayerUrl;n=k.relation;p.some(h.relationships,function(a){if(a.relatedTableId===parseInt(d,10)){return c=a,!0;}},this);c&&(a=new D,p.some(h.fields,function(a){if(a.name===c.keyField){return f=-1!==p.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0;}}),e="string"===f?c.keyField+"='"+b.attributes[n.keyField]+"'":c.keyField+"="+b.attributes[n.keyField],a.where=e,a.outFields=k.relatedFields,k.outStatistics&&(0<k.outStatistics.length&&h.supportsStatistics)&&(g=new D,g.where=a.where,g.outFields=a.outFields,g.outStatistics=k.outStatistics),b=new I(m),e=[],e.push(b.execute(a)),g&&e.push(b.execute(g)));return t(e);},_setRelatedRecords:function(a,b){this._relatedInfo=[];for(var d in b){if(b.hasOwnProperty(d)&&b[d]){var c=b[d];this._relatedInfo[d]={};this._relatedInfo[d].relatedFeatures=c[0].features;g.isDefined(c[1])&&(this._relatedInfo[d].relatedStatsFeatures=c[1].features);}}},_handlerErrorResponse:function(a,b){a.reject(b);},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b;},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b;}});});},"esri/tasks/QueryTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","../kernel","../request","../deferredUtils","../geometry/Extent","../geometry/normalizeUtils","./Task","./FeatureSet"],function(l,g,p,q,m,w,x,k,r,s,t,u,n){l=l(u,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(a,f){this._handler=g.hitch(this,this._handler);this._relationshipQueryHandler=g.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=g.hitch(this,this._executeForIdsHandler);this._countHandler=g.hitch(this,this._countHandler);this._extentHandler=g.hitch(this,this._extentHandler);this.source=f&&f.source;this.gdbVersion=f&&f.gdbVersion;this.registerConnectEvents();},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,f,e,c,b){var d=b.assembly;a=this._encode(g.mixin({},this._url.query,{f:"json"},a.toJson(d&&d[0])));var h=this._handler,v=this._errorHandler;this.source&&(d={source:this.source.toJson()},a.layer=m.toJson(d));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return k({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,d){h(a,d,f,e,b.dfd);},error:function(a){v(a,e,b.dfd);},callbackSuffix:c},this.requestOptions);},executeRelationshipQuery:function(a,f,e){a=this._encode(g.mixin({},this._url.query,{f:"json"},a.toJson()));var c=this._relationshipQueryHandler,b=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var d=new q(r._dfdCanceller);d._pendingDfd=k({url:this._url.path+"/queryRelatedRecords",content:a,callbackParamName:"callback",load:function(a,b){c(a,b,f,e,d);},error:function(a){b(a,e,d);}},this.requestOptions);return d;},executeForIds:function(a,f,e,c){var b=c.assembly;a=this._encode(g.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(b&&b[0])));var d=this._executeForIdsHandler,h=this._errorHandler;this.source&&(b={source:this.source.toJson()},a.layer=m.toJson(b));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return k({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){d(a,b,f,e,c.dfd);},error:function(a){h(a,e,c.dfd);}},this.requestOptions);},executeForCount:function(a,f,e,c){var b=c.assembly;a=this._encode(g.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(b&&b[0])));var d=this._countHandler,h=this._errorHandler;this.source&&(b={source:this.source.toJson()},a.layer=m.toJson(b));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return k({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){d(a,b,f,e,c.dfd);},error:function(a){h(a,e,c.dfd);}},this.requestOptions);},executeForExtent:function(a,f,e,c){var b=c.assembly;a=this._encode(g.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(b&&b[0])));var d=this._extentHandler,h=this._errorHandler;this.source&&(b={source:this.source.toJson()},a.layer=m.toJson(b));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return k({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,b){d(a,b,f,e,c.dfd);},error:function(a){h(a,e,c.dfd);}},this.requestOptions);},_handler:function(a,f,e,c,b){try{var d=new n(a);this._successHandler([d],"onComplete",e,b);}catch(h){this._errorHandler(h,c,b);}},_relationshipQueryHandler:function(a,f,e,c,b){try{var d=a.geometryType,h=a.spatialReference,g={};p.forEach(a.relatedRecordGroups,function(a){var b={};b.geometryType=d;b.spatialReference=h;b.features=a.relatedRecords;b=new n(b);if(null!=a.objectId){g[a.objectId]=b;}else{for(var c in a){a.hasOwnProperty(c)&&"relatedRecords"!==c&&(g[a[c]]=b);}}});this._successHandler([g],"onExecuteRelationshipQueryComplete",e,b);}catch(k){this._errorHandler(k,c,b);}},_executeForIdsHandler:function(a,f,e,c,b){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",e,b);}catch(d){this._errorHandler(d,c,b);}},_countHandler:function(a,f,e,c,b){try{var d,g=a.features,k=a.objectIds;if(k){d=k.length;}else{if(g){throw Error("Unable to perform query. Please check your parameters.");}d=a.count;}this._successHandler([d],"onExecuteForCountComplete",e,b);}catch(l){this._errorHandler(l,c,b);}},_extentHandler:function(a,f,e,c,b){try{a.extent&&(a.extent=new s(a.extent)),this._successHandler([a],"onExecuteForExtentComplete",e,b);}catch(d){this._errorHandler(d,c,b);}}});t._createWrappers(l);return l;});},"esri/geometry/normalizeUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/has","../kernel","../config","../deferredUtils","./Polyline","./Polygon","./webMercatorUtils","./jsonUtils"],function(h,m,E,M,N,K,y,v,A,z,L){function w(a,f){return Math.ceil((a-f)/(2*f));};function B(a,f){var c=a.paths||a.rings,b,e,d=c.length,n;for(b=0;b<d;b++){n=c[b].length;for(e=0;e<n;e++){var p=a.getPoint(b,e);a.setPoint(b,e,p.offset(f,0));}}return a;};function F(a,f){if(!(a instanceof v||a instanceof A)){throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");}var c=a instanceof v,b=[],e;h.forEach(c?a.paths:a.rings,function(a){b.push(e=[]);e.push([a[0][0],a[0][1]]);var n,c,q,l,k,g,h,x,m,r,s,t;for(k=0;k<a.length-1;k++){n=a[k][0];c=a[k][1];q=a[k+1][0];l=a[k+1][1];h=Math.sqrt((q-n)*(q-n)+(l-c)*(l-c));x=(l-c)/h;m=(q-n)/h;r=h/f;if(1<r){for(g=1;g<=r-1;g++){t=g*f,s=m*t+n,t=x*t+c,e.push([s,t]);}g=(h+Math.floor(r-1)*f)/2;s=m*g+n;t=x*g+c;e.push([s,t]);}e.push([q,l]);}});return c?new v({paths:b,spatialReference:a.spatialReference}):new A({rings:b,spatialReference:a.spatialReference});};function C(a,f,c){f&&(a=F(a,1000000),a=z.webMercatorToGeographic(a,!0));c&&(a=B(a,c));return a;};function D(a,f,c){var b=a.x||a[0],e;b>f?(e=w(b,f),a.x?a=a.offset(e*-2*f,0):a[0]=b+e*-2*f):b<c&&(e=w(b,c),a.x?a=a.offset(e*-2*c,0):a[0]=b+e*-2*c);return a;};function G(a,f){var c=-1;h.forEach(f.cutIndexes,function(b,e){var d=f.geometries[e];h.forEach(d.rings||d.paths,function(a,e){h.some(a,function(b){if(!(180>b[0])){b=0;var c,f=a.length,g;for(c=0;c<f;c++){g=a[c][0],b=g>b?g:b;}b=Number(b.toFixed(9));b=-360*w(b,180);f=a.length;for(c=0;c<f;c++){g=d.getPoint(e,c),d.setPoint(e,c,g.offset(b,0));}}return !0;});});b===c?d.rings?h.forEach(d.rings,function(d,c){a[b]=a[b].addRing(d);}):h.forEach(d.paths,function(d,c){a[b]=a[b].addPath(d);}):(c=b,a[b]=d);});return a;};function H(a,f,c,b){var e=new E;e.addCallbacks(c,b);var d=[],n=[],p,q,l,k,g,m,x,u,r=0;h.forEach(a,function(a){if(a){if(p||(p=a.spatialReference,q=p._getInfo(),k=(l=p._isWebMercator())?20037508.342788905:180,g=l?-20037508.342788905:-180,m=l?102100:4326,x=new v({paths:[[[k,g],[k,k]]],spatialReference:{wkid:m}}),u=new v({paths:[[[g,g],[g,k]]],spatialReference:{wkid:m}})),q){var b=L.fromJson(a.toJson()),c=a.getExtent();"point"===a.type?d.push(D(b,k,g)):"multipoint"===a.type?(b.points=h.map(b.points,function(a){return D(a,k,g);}),d.push(b)):"extent"===a.type?(b=c._normalize(null,null,q),d.push(b.rings?new A(b):b)):c?(a=w(c.xmin,g)*2*k,b=0===a?b:B(b,a),c=c.offset(a,0),c.intersects(x)&&c.xmax!==k?(r=c.xmax>r?c.xmax:r,b=C(b,l),n.push(b),d.push("cut")):c.intersects(u)&&c.xmin!==g?(r=c.xmax*2*k>r?c.xmax*2*k:r,b=C(b,l,360),n.push(b),d.push("cut")):d.push(b)):d.push(b);}else{d.push(a);}}else{d.push(a);}});c=new v;b=w(r,k);for(var s=-90,t=b;0<b;){var y=-180+360*b;c.addPath([[y,s],[y,-1*s]]);s*=-1;b--;}0<n.length&&0<t?f?f.cut(n,c,function(b){n=G(n,b);var c=[];h.forEach(d,function(b,e){if("cut"===b){var f=n.shift();a[e].rings&&1<a[e].rings.length&&f.rings.length>=a[e].rings.length?(d[e]="simplify",c.push(f)):d[e]=!0===l?z.geographicToWebMercator(f):f;}});0<c.length?f.simplify(c,function(a){h.forEach(d,function(b,c){"simplify"===b&&(d[c]=!0===l?z.geographicToWebMercator(a.shift()):a.shift());});e.callback(d);},function(a){e.errback(a);}):e.callback(d);},function(a){e.errback(a);}):e.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(h.forEach(d,function(a,b){if("cut"===a){var c=n.shift();d[b]=!0===l?z.geographicToWebMercator(c):c;}}),e.callback(d));return e;};function u(a,f,c,b){var e=!1,d;m.isObject(a)&&a&&(m.isArray(a)?a.length&&((d=a[0]&&a[0].declaredClass)&&-1!==d.indexOf("Graphic")?(a=h.map(a,function(a){return a.geometry;}),e=a.length?!0:!1):d&&-1!==d.indexOf("esri.geometry.")&&(e=!0)):(d=a.declaredClass)&&-1!==d.indexOf("FeatureSet")?(a=h.map(a.features||[],function(a){return a.geometry;}),e=a.length?!0:!1):d&&-1!==d.indexOf("esri.geometry.")&&(e=!0));e&&f.push({index:c,property:b,value:a});};function I(a,f){var c=[];h.forEach(f,function(b){var e=b.i,d=a[e];b=b.p;var f;if(m.isObject(d)&&d){if(b){if("*"===b[0]){for(f in d){d.hasOwnProperty(f)&&u(d[f],c,e,f);}}else{h.forEach(b,function(a){u(m.getObject(a,!1,d),c,e,a);});}}else{u(d,c,e);}}});return c;};function J(a,f){var c=0,b={};h.forEach(f,function(e){var d=e.index,f=e.property,h=e.value,q=h.length||1,l=a.slice(c,c+q);m.isArray(h)||(l=l[0]);c+=q;delete e.value;f?(b[d]=b[d]||{},b[d][f]=l):b[d]=l;});return b;};return {normalizeCentralMeridian:H,_foldCutResults:G,_prepareGeometryForCut:C,_offsetMagnitude:w,_pointNormalization:D,_updatePolyGeometry:B,_straightLineDensify:F,_createWrappers:function(a){var f=m.isObject(a)?a.prototype:m.getObject(a+".prototype");h.forEach(f.__msigns,function(a){var b=f[a.n];f[a.n]=function(){var e=this,d=[],f,p=new E(y._dfdCanceller);a.f&&y._fixDfd(p);for(f=0;f<a.c;f++){d[f]=arguments[f];}var m={dfd:p};d.push(m);var l,k=[],g;e.normalization&&!e._isTable&&(l=I(d,a.a),h.forEach(l,function(a){k=k.concat(a.value);}),k.length&&(g=H(k,K.defaults.geometryService)));g?(p._pendingDfd=g,g.addCallbacks(function(a){p.canceled||(m.assembly=J(a,l),p._pendingDfd=b.apply(e,d));},function(b){var f=e.declaredClass;f&&-1!==f.indexOf("FeatureLayer")?e._resolve([b],null,d[a.e],p,!0):e._errorHandler(b,d[a.e],p);})):p._pendingDfd=b.apply(e,d);return p;};});},_disassemble:I,_addToBucket:u,_reassemble:J};});},"esri/tasks/Task":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel","../deferredUtils","../urlUtils","../Evented"],function(l,h,m,r,s,n,p,q){return l(q,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,c){a&&h.isString(a)&&(this._url=p.urlToObject(this.url=a));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);this.normalization=!0;this._errorHandler=h.hitch(this,this._errorHandler);this.registerConnectEvents();},_useSSL:function(){var a=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));a&&a.path&&(a.path=a.path.replace(c,"https:"));},_encode:function(a,c,e){var d,b,g={},f,k;for(f in a){if("declaredClass"!==f&&(d=a[f],b=typeof d,null!==d&&void 0!==d&&"function"!==b)){if(h.isArray(d)){g[f]=[];k=d.length;for(b=0;b<k;b++){g[f][b]=this._encode(d[b]);}}else{"object"===b?d.toJson&&(b=d.toJson(e&&e[f]),"esri.tasks.FeatureSet"===d.declaredClass&&b.spatialReference&&(b.sr=b.spatialReference,delete b.spatialReference),g[f]=c?b:m.toJson(b)):g[f]=d;}}}return g;},_successHandler:function(a,c,e,d){c&&this[c].apply(this,a);e&&e.apply(null,a);d&&n._resDfd(d,a);},_errorHandler:function(a,c,e){this.onError(a);c&&c(a);e&&e.errback(a);},setNormalization:function(a){this.normalization=a;},onError:function(){}});});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../lang","../graphic","../SpatialReference","../graphicsUtils","../geometry/jsonUtils","../symbols/jsonUtils"],function(n,q,r,x,y,s,t,u,v,h,w){return n(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(a){if(a){q.mixin(this,a);var b=this.features,c=a.spatialReference,d=h.getGeometryType(a.geometryType),c=this.spatialReference=new u(c);this.geometryType=a.geometryType;a.fields&&(this.fields=a.fields);r.forEach(b,function(a,g){var p=a.geometry&&a.geometry.spatialReference;b[g]=new t(d&&a.geometry?new d(a.geometry):null,a.symbol&&w.fromJson(a.symbol),a.attributes);b[g].geometry&&!p&&b[g].geometry.setSpatialReference(c);});this._hydrate();}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(a){var b={};this.displayFieldName&&(b.displayFieldName=this.displayFieldName);this.fields&&(b.fields=this.fields);this.spatialReference?b.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(b.geometryType=h.getJsonType(this.features[0].geometry)),b.features=v._encodeGraphics(this.features,a));b.exceededTransferLimit=this.exceededTransferLimit;return s.fixJson(b);},_hydrate:function(){var a=this.transform;if(a){var b=this.features,c,d=a.translate[0],h=a.translate[1],g=a.scale[0],p=a.scale[1],n=function(a,b,c){if("esriGeometryPoint"===a){return function(a){a.x=b(a.x);a.y=c(a.y);};}if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a){return function(a){a=a.rings||a.paths;var e,g,f,h,d,k,l,m;e=0;for(g=a.length;e<g;e++){d=a[e];f=0;for(h=d.length;f<h;f++){k=d[f],0<f?(l+=k[0],m+=k[1]):(l=k[0],m=k[1]),k[0]=b(l),k[1]=c(m);}}};}if("esriGeometryEnvelope"===a){return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax);};}if("esriGeometryMultipoint"===a){return function(a){a=a.points;var e,d,f;e=0;for(d=a.length;e<d;e++){f=a[e],f[0]=b(void 0),f[1]=c(void 0);}};}}(this.geometryType,function(a){return a*g+d;},function(a){return h-a*p;}),a=0;for(c=b.length;a<c;a++){b[a].geometry&&n(b[a].geometry);}this.transform=null;}}});});},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(k,f,l,m,h){return {graphicsExtent:function(d){var a=d[0].geometry,b=a.getExtent(),c,e,g=d.length;null===b&&(b=new h(a.x,a.y,a.x,a.y,a.spatialReference));for(e=1;e<g;e++){c=(a=d[e].geometry).getExtent(),null===c&&(c=new h(a.x,a.y,a.x,a.y,a.spatialReference)),b=b.union(c);}return 0>b.getWidth()&&0>b.getHeight()?null:b;},getGeometries:function(d){return f.map(d,function(a){return a.geometry;});},_encodeGraphics:function(d,a){var b=[],c,e,g;f.forEach(d,function(d,f){c=d.toJson();e={};c.geometry&&(g=a&&a[f],e.geometry=g&&g.toJson()||c.geometry);c.attributes&&(e.attributes=c.attributes);b[f]=e;});return b;}};});},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(a,b,c,d){return a(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return {statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount};}});});},"esri/dijit/PopupRenderer":function(){define(["require","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","dojo/sniff","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/_Widget","dijit/_Templated","../kernel","./_EventedWidget","dojo/i18n!../nls/jsapi","dojo/NodeList-dom"],function(r,s,n,m,p,k,A,B,t,h,e,u,q,v,w,C,x,y){var z=0;return s([x,v,w],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=m.mixin({},y.widgets.popup);},templateString:"<div class='esriViewPopup'><div class='mainSection'><div class='header' dojoAttachPoint='_title'></div><div class='hzLine'></div><div dojoAttachPoint='_description'></div><div class='break'></div></div><div class='attachmentsSection hidden'><div>${_nls.NLS_attach}:</div><ul dojoAttachPoint='_attachmentsList'></ul><div class='break'></div></div><div class='mediaSection hidden'><div class='header' dojoAttachPoint='_mediaTitle'></div><div class='hzLine'></div><div class='caption' dojoAttachPoint='_mediaCaption'></div><div class='gallery' dojoAttachPoint='_gallery'><div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div><div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div><ul class='summary'><li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li><li class='image mediaIcon hidden'></li><li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li><li class='chart mediaIcon hidden'></li></ul><div class='frame' dojoAttachPoint='_mediaFrame'></div></div></div><div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'><div class='break'></div><div class='break hidden' dojoAttachPoint='_mediaBreak'></div><div class='editSummary' dojoAttachPoint='_editSummary'></div></div></div>",showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(m.hitch(this,this._handleComponentsSuccess),m.hitch(this,this._handleComponentsError));},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia());},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia());},_updateUI:function(){var b=this._mediaInfos,c=b.length,a=this.domNode,f=this._prevMedia,d=this._nextMedia;if(1<c){var g=0,l=0;p.forEach(b,function(a){"image"===a.type?g++:-1!==a.type.indexOf("chart")&&l++;});g&&(h.set(this._imageCount,"innerHTML",g),k.query(".summary .image",a).removeClass("hidden"));l&&(h.set(this._chartCount,"innerHTML",l),k.query(".summary .chart",a).removeClass("hidden"));}else{k.query(".summary",a).addClass("hidden"),e.add(f,"hidden"),e.add(d,"hidden");}b=this._mediaPtr;0===b?e.add(f,"hidden"):e.remove(f,"hidden");b===c-1?e.add(d,"hidden"):e.remove(d,"hidden");this._destroyFrame();},_displayMedia:function(){var b=this._mediaInfos[this._mediaPtr],c=b.title,a=b.caption,f=k.query(".mediaSection .hzLine",this.domNode)[0];h.set(this._mediaTitle,"innerHTML",c);e[c?"remove":"add"](this._mediaTitle,"hidden");h.set(this._mediaCaption,"innerHTML",a);e[a?"remove":"add"](this._mediaCaption,"hidden");e[c&&a?"remove":"add"](f,"hidden");this._rid=null;if("image"===b.type){this._showImage(b.value);}else{var d=this,c=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],a=b.value.theme||this.chartTheme;m.isString(a)&&(a=a.replace(/\./gi,"/"),-1===a.indexOf("/")&&(a="dojox/charting/themes/"+a));a||(a="./Rainbow");c.push(a);try{var g=this._rid=z++;r(c,function(a,c,f){g===d._rid&&(d._rid=null,d._showChart(b.type,b.value,a,c,f));});}catch(l){}}},_preventNewTab:function(b){return (b=b&&m.trim(b).toLowerCase())&&(0===b.indexOf("mailto:")||0===b.indexOf("tel:"));},_showImage:function(b){e.add(this._mediaFrame,"image");var c=q.get(this._gallery,"height"),a="<img class='esriPopupMediaImage' src='"+b.sourceURL+"' />";b.linkURL&&(a="<a "+(this._preventNewTab(b.linkURL)?"":"target='_blank' ")+"href='"+b.linkURL+"'>"+a+"</a>");h.set(this._mediaFrame,"innerHTML",a);var f=k.query(".esriPopupMediaImage",this._mediaFrame)[0],d=this,g;g=n.connect(f,"onload",function(){n.disconnect(g);g=null;d._imageLoaded(f,c);});},_showChart:function(b,c,a,f,d){e.remove(this._mediaFrame,"image");a=this._chart=new a(u.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});d&&a.setTheme(d);switch(b){case "piechart":a.addPlot("default",{type:"Pie",labels:!1});a.addSeries("Series A",c.fields);break;case "linechart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});p.forEach(c.fields,function(a,b){a.x=b+1;});a.addSeries("Series A",c.fields);break;case "columnchart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",c.fields);break;case "barchart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",c.fields);}this._action=new f(a);a.render();},_destroyFrame:function(){this._rid=null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);h.set(this._mediaFrame,"innerHTML","");},_imageLoaded:function(b,c){var a=b.height;a<c&&(a=Math.round((c-a)/2),q.set(b,"marginTop",a+"px"));},_attListHandler:function(b,c){if(b===this._dfd){this._dfd=null;var a="";!(c instanceof Error)&&(c&&c.length)&&p.forEach(c,function(b){a+="<li>";a+="<a href='"+b.url+"' target='_blank'>"+(b.name||"[No name]")+"</a>";a+="</li>";});h.set(this._attachmentsList,"innerHTML",a||"<li>"+this._nls.NLS_noAttach+"</li>");}},_handleComponentsSuccess:function(b){if(b){var c=this.showTitle?b.title:"",a=b.description,f=b.fields,d=b.mediaInfos,g=this.domNode,l=this._nls,n=this,q=this.template,r=this.graphic;this._prevMedia.title=l.NLS_prevMedia;this._nextMedia.title=l.NLS_nextMedia;h.set(this._title,"innerHTML",c);c||e.add(this._title,"hidden");!a&&f&&(a="",p.forEach(f,function(b){a+="<tr valign='top'>";a+="<td class='attrName'>"+b[0]+"</td>";a+="<td class='attrValue'>"+b[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+l.NLS_moreInfo+"</a>")+"</td>";a+="</tr>";}),a&&(a="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+a+"</table>"));h.set(this._description,"innerHTML",a);a||e.add(this._description,"hidden");k.query("a",this._description).forEach(function(a){n._preventNewTab(a.href)?"_blank"===a.target&&h.remove(a,"target"):h.set(a,"target","_blank");});c&&a?k.query(".mainSection .hzLine",g).removeClass("hidden"):c||a?k.query(".mainSection .hzLine",g).addClass("hidden"):k.query(".mainSection",g).addClass("hidden");if(c=this._dfd=q.getAttachments(r)){c.addBoth(m.hitch(this,this._attListHandler,c)),h.set(this._attachmentsList,"innerHTML","<li>"+l.NLS_searching+"...</li>"),k.query(".attachmentsSection",g).removeClass("hidden");}d&&d.length&&(k.query(".mediaSection",g).removeClass("hidden"),t.setSelectable(this._mediaFrame,!1),this._mediaInfos=d,this._mediaPtr=0,this._updateUI(),this._displayMedia());b.editSummary&&(h.set(this._editSummary,"innerHTML",b.editSummary),d&&d.length&&e.remove(this._mediaBreak,"hidden"),e.remove(this._editSummarySection,"hidden"));}},_handleComponentsError:function(b){}});});},"esri/dijit/_EventedWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/on","../Evented","dijit/_WidgetBase"],function(k,l,q,m,n,p){return k([p,n],{_onMap:function(b){var a=this.constructor._onMap,c;if(!a||!a.FINAL){delete this.constructor._onMap,a=this.registerConnectEvents(),a.FINAL=!0;}b=b.toLowerCase();a[b]?c=this[a[b].method]:(b=this._onCamelCase(b),this[b]&&(c=b));return c;},on:function(b,a){var c=this._onMap(b),d=b.replace(/\-/g,""),e="on"+d in this.domNode;return c||!e?this.inherited(arguments):this.own(m(this.domNode,d,a))[0];},emit:function(b,a,c){var d,e,f,g=b.toLowerCase(),h=this.constructor._onMap||this.registerConnectEvents();e=this[this._onMap(g)];a=a||{};a.target||(a.target=this);e&&(h&&h[g])&&(this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments);},h[g].argKeys)(a),f=l.mixin({},arguments),f[2]=d,f[0]=h[g].name.replace(/^on/,""));return this.inherited(f||arguments);}});});},"esri/tasks/GeometryService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/has","../kernel","../request","../deferredUtils","./Task","../geometry/Extent","../geometry/Polyline","../geometry/Polygon","../geometry/Multipoint","../geometry/jsonUtils"],function(u,l,s,k,n,A,B,p,q,y,w,x,v,z,r){u=u(y,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=l.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents();},_encodeGeometries:function(a){var h=[],e,b=a.length;for(e=0;e<b;e++){h.push(a[e].toJson());}return {geometryType:r.getJsonType(a[0]),geometries:h};},_decodeGeometries:function(a,h,e){var b=r.getGeometryType(h);a=a.geometries;var f=[],c={spatialReference:e.toJson()},g=l.mixin;s.forEach(a,function(a,e){f[e]=new b(g(a,c));});return f;},_toProjectGeometry:function(a){var h=a.spatialReference.toJson();return a instanceof w?new v({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:h}):new x({paths:[[].concat(a.points)],spatialReference:h});},_fromProjectedGeometry:function(a,h,e){return "esriGeometryEnvelope"===h?(a=a.rings[0],new w(a[0][0],a[0][1],a[2][0],a[2][1],e)):new z({points:a.paths[0],spatialReference:e.toJson()});},project:function(a,h,e,b){var f=l.mixin({},this._url.query,{f:"json"}),c;a.geometries?(b=e,e=h,h=a.outSR,c=a.geometries[0],f=l.mixin(f,a.toJson())):(c=a[0],f=l.mixin(f,{outSR:h.wkid||k.toJson(h.toJson()),inSR:c.spatialReference.wkid||k.toJson(c.spatialReference.toJson()),geometries:k.toJson(this._encodeGeometries(a))}));var g=r.getJsonType(c),d=this._projectHandler,m=this._errorHandler,t=new n(q._dfdCanceller);t._pendingDfd=p({url:this._url.path+"/project",content:f,callbackParamName:"callback",load:function(a,c){d(a,c,g,h,e,b,t);},error:function(a){m(a,b,t);}});return t;},_projectHandler:function(a,h,e,b,f,c,g){try{var d=this._decodeGeometries(a,e,b);this._successHandler([d],"onProjectComplete",f,g);}catch(m){this._errorHandler(m,c,g);}},onProjectComplete:function(){},simplify:function(a,h,e){var b=a[0].spatialReference,f=l.mixin({},this._url.query,{f:"json",sr:b.wkid?b.wkid:k.toJson(b.toJson()),geometries:k.toJson(this._encodeGeometries(a))}),c=r.getJsonType(a[0]),g=this._simplifyHandler,d=this._errorHandler,m=new n(q._dfdCanceller);m._pendingDfd=p({url:this._url.path+"/simplify",content:f,callbackParamName:"callback",load:function(a,d){g(a,d,c,b,h,e,m);},error:function(a){d(a,e,m);}});return m;},_simplifyHandler:function(a,h,e,b,f,c,g){try{var d=this._decodeGeometries(a,e,b);this._successHandler([d],"onSimplifyComplete",f,g);}catch(m){this._errorHandler(m,c,g);}},onSimplifyComplete:function(){},convexHull:function(a,h,e){var b=a[0].spatialReference;a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(b.toJson()),geometries:k.toJson(this._encodeGeometries(a))});var f=this._convexHullHandler,c=this._errorHandler,g=new n(q._dfdCanceller);g._pendingDfd=p({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,h,e,g);},error:function(a){c(a,e,g);}});return g;},_convexHullHandler:function(a,h,e,b,f,c){try{var g=r.fromJson(a.geometry).setSpatialReference(e);this._successHandler([g],"onConvexHullComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onConvexHullComplete:function(){},union:function(a,h,e){var b=a[0].spatialReference;a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(b.toJson()),geometries:k.toJson(this._encodeGeometries(a))});var f=this._unionHandler,c=this._errorHandler,g=new n(q._dfdCanceller);g._pendingDfd=p({url:this._url.path+"/union",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,h,e,g);},error:function(a){c(a,e,g);}});return g;},_unionHandler:function(a,h,e,b,f,c){try{var g=r.fromJson(a.geometry).setSpatialReference(e);this._successHandler([g],"onUnionComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onUnionComplete:function(){},autoComplete:function(a,h,e,b){var f=a[0].spatialReference;a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),polygons:k.toJson(this._encodeGeometries(a).geometries),polylines:k.toJson(this._encodeGeometries(h).geometries)});var c=this._autoCompleteHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,g){c(a,g,f,e,b,d);},error:function(a){g(a,b,d);}});return d;},_autoCompleteHandler:function(a,h,e,b,f,c){try{var g=a.geometries;a=[];var d,m=g.length;for(d=0;d<m;d++){a[d]=new v({spatialReference:e,rings:g[d].rings});}this._successHandler([a],"onAutoCompleteComplete",b,c);}catch(t){this._errorHandler(t,f,c);}},onAutoCompleteComplete:function(){},reshape:function(a,h,e,b){var f=a.spatialReference;a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),target:k.toJson({geometryType:r.getJsonType(a),geometry:a.toJson()}),reshaper:k.toJson(h.toJson())});var c=this._reshapeHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,g){c(a,g,f,e,b,d);},error:function(a){g(a,b,d);}});return d;},_reshapeHandler:function(a,h,e,b,f,c){try{var g=r.fromJson(a.geometry).setSpatialReference(e);this._successHandler([g],"onReshapeComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onReshapeComplete:function(){},cut:function(a,h,e,b){var f=a[0].spatialReference,c=s.map(a,function(a){return a.toJson();});a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),target:k.toJson({geometryType:r.getJsonType(a[0]),geometries:c}),cutter:k.toJson(h.toJson())});var g=this._cutHandler,d=this._errorHandler,m=new n(q._dfdCanceller);m._pendingDfd=p({url:this._url.path+"/cut",content:a,callbackParamName:"callback",load:function(a,d){g(a,d,f,e,b,m);},error:function(a){d(a,b,m);}});return m;},_cutHandler:function(a,h,e,b,f,c){try{var g=a.geometries,d={};d.cutIndexes=a.cutIndexes;d.geometries=[];s.forEach(g,function(a){d.geometries.push(r.fromJson(a).setSpatialReference(e));});this._successHandler([d],"onCutComplete",b,c);}catch(m){this._errorHandler(m,f,c);}},onCutComplete:function(){},intersect:function(a,h,e,b){var f=a[0].spatialReference;a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),geometries:k.toJson(this._encodeGeometries(a)),geometry:k.toJson({geometryType:r.getJsonType(h),geometry:h.toJson()})});var c=this._intersectHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,g){c(a,g,f,e,b,d);},error:function(a){g(a,b,d);}});return d;},_intersectHandler:function(a,h,e,b,f,c){try{var g=[];s.forEach(a.geometries,function(a){g.push(r.fromJson(a).setSpatialReference(e));});this._successHandler([g],"onIntersectComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onIntersectComplete:function(){},difference:function(a,h,e,b){var f=a[0].spatialReference;a=l.mixin({},this._url.query,{f:"json",sr:k.toJson(f.toJson()),geometries:k.toJson(this._encodeGeometries(a)),geometry:k.toJson({geometryType:r.getJsonType(h),geometry:h.toJson()})});var c=this._differenceHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,g){c(a,g,f,e,b,d);},error:function(a){g(a,b,d);}});return d;},_differenceHandler:function(a,h,e,b,f,c){try{var g=[];s.forEach(a.geometries,function(a){g.push(r.fromJson(a).setSpatialReference(e));});this._successHandler([g],"onDifferenceComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onDifferenceComplete:function(){},buffer:function(a,h,e){var b=l.mixin({},this._url.query,{f:"json"},a.toJson()),f=a.outSpatialReference||a.geometries[0].spatialReference,c=this._bufferHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/buffer",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_bufferHandler:function(a,h,e,b,f,c){try{var g=a.geometries;a=[];var d,m=g.length;for(d=0;d<m;d++){a[d]=new v({spatialReference:e,rings:g[d].rings});}this._successHandler([a],"onBufferComplete",b,c);}catch(k){this._errorHandler(k,f,c);}},onBufferComplete:function(){},areasAndLengths:function(a,h,e){a=l.mixin({},this._url.query,{f:"json"},a.toJson());var b=this._areasAndLengthsHandler,f=this._errorHandler,c=new n(q._dfdCanceller);c._pendingDfd=p({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,d){b(a,d,h,e,c);},error:function(a){f(a,e,c);}});return c;},_areasAndLengthsHandler:function(a,h,e,b,f){try{this._successHandler([a],"onAreasAndLengthsComplete",e,f);}catch(c){this._errorHandler(c,b,f);}},onAreasAndLengthsComplete:function(){},lengths:function(a,h,e){a=l.mixin({},this._url.query,{f:"json"},a.toJson());var b=this._lengthsHandler,f=this._errorHandler,c=new n(q._dfdCanceller);c._pendingDfd=p({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,d){b(a,d,h,e,c);},error:function(a){f(a,e,c);}});return c;},_lengthsHandler:function(a,h,e,b,f){try{this._successHandler([a],"onLengthsComplete",e,f);}catch(c){this._errorHandler(c,b,f);}},onLengthsComplete:function(){},labelPoints:function(a,h,e){var b=s.map(a,function(a){return a.toJson();}),f=a[0].spatialReference,b=l.mixin({},this._url.query,{f:"json",sr:f.wkid?f.wkid:k.toJson(f.toJson()),polygons:k.toJson(b)}),c=this._labelPointsHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/labelPoints",content:b,callbackParamName:"callback",load:function(b,g){c(b,g,a,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_labelPointsHandler:function(a,h,e,b,f,c,g){try{var d=[];s.forEach(a.labelPoints,function(a){d.push(r.fromJson(a).setSpatialReference(b));});this._successHandler([d],"onLabelPointsComplete",f,g);}catch(m){this._errorHandler(m,c,g);}},onLabelPointsComplete:function(){},relation:function(a,h,e){a=l.mixin({},this._url.query,{f:"json"},a.toJson());var b=this._relationHandler,f=this._errorHandler,c=new n(q._dfdCanceller);c._pendingDfd=p({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,d){b(a,d,h,e,c);},error:function(a){f(a,e,c);}});return c;},_relationHandler:function(a,h,e,b,f){try{this._successHandler([a.relations],"onRelationComplete",e,f);}catch(c){this._errorHandler(c,b,f);}},onRelationComplete:function(){},trimExtend:function(a,h,e){var b=l.mixin({},this._url.query,{f:"json"},a.toJson()),f=a.sr,c=this._trimExtendHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/trimExtend",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_trimExtendHandler:function(a,h,e,b,f,c){try{var g=a.geometries;a=[];var d,m=g.length;for(d=0;d<m;d++){a[d]=new x({spatialReference:e,paths:g[d].paths});}this._successHandler([a],"onTrimExtendComplete",b,c);}catch(k){this._errorHandler(k,f,c);}},onTrimExtendComplete:function(){},densify:function(a,h,e){var b=l.mixin({},this._url.query,{f:"json"},a.toJson()),f=a.geometries[0].spatialReference,c=this._densifyHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/densify",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_densifyHandler:function(a,h,e,b,f,c){try{var g=[];s.forEach(a.geometries,function(a){g.push(r.fromJson(a).setSpatialReference(e));});this._successHandler([g],"onDensifyComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onDensifyComplete:function(){},generalize:function(a,h,e){var b=l.mixin({},this._url.query,{f:"json"},a.toJson()),f=a.geometries[0].spatialReference,c=this._generalizeHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/generalize",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_generalizeHandler:function(a,h,e,b,f,c){try{var g=[];s.forEach(a.geometries,function(a){g.push(r.fromJson(a).setSpatialReference(e));});this._successHandler([g],"onGeneralizeComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onGeneralizeComplete:function(){},offset:function(a,h,e){var b=l.mixin({},this._url.query,{f:"json"},a.toJson()),f=a.geometries[0].spatialReference,c=this._offsetHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/offset",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_offsetHandler:function(a,h,e,b,f,c){try{var g=[];s.forEach(a.geometries,function(a){g.push(r.fromJson(a).setSpatialReference(e));});this._successHandler([g],"onOffsetComplete",b,c);}catch(d){this._errorHandler(d,f,c);}},onOffsetComplete:function(){},distance:function(a,h,e){var b=l.mixin({},this._url.query,{f:"json"},a.toJson()),f=a.geometry1.spatialReference,c=this._distanceHandler,g=this._errorHandler,d=new n(q._dfdCanceller);d._pendingDfd=p({url:this._url.path+"/distance",content:b,callbackParamName:"callback",load:function(a,b){c(a,b,f,h,e,d);},error:function(a){g(a,e,d);}});return d;},_distanceHandler:function(a,h,e,b,f,c){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",b,c);}catch(g){this._errorHandler(g,f,c);}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,h,e){var b={};l.isObject(a.sr)?b.sr=a.sr.wkid||k.toJson(a.sr.toJson()):b.sr=a.sr;b.coordinates=k.toJson(a.coordinates);b.conversionType=a.conversionType||"MGRS";b.conversionMode=a.conversionMode;b.numOfDigits=a.numOfDigits;b.rounding=a.rounding;b.addSpaces=a.addSpaces;a=l.mixin({},this._url.query,{f:"json"},b);var f=this._toGeoCoordinateHandler,c=this._errorHandler,g=new n(q._dfdCanceller);g._pendingDfd=p({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,b){f(a,b,h,e,g);},error:function(a){c(a,e,g);}});return g;},_toGeoCoordinateHandler:function(a,h,e,b,f){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",e,f);}catch(c){this._errorHandler(c,b,f);}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,h,e){var b={};l.isObject(a.sr)?b.sr=a.sr.wkid||k.toJson(a.sr.toJson()):b.sr=a.sr;b.strings=k.toJson(a.strings);b.conversionType=a.conversionType||"MGRS";b.conversionMode=a.conversionMode;a=l.mixin({},this._url.query,{f:"json"},b);var f=this._fromGeoCoordinateHandler,c=this._errorHandler,g=new n(q._dfdCanceller);g._pendingDfd=p({url:this._url.path+"/fromGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,b){f(a,b,h,e,g);},error:function(a){c(a,e,g);}});return g;},_fromGeoCoordinateHandler:function(a,h,e,b,f){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",e,f);}catch(c){this._errorHandler(c,b,f);}},onFromGeoCoordinateStringComplete:function(){}});l.mixin(u,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return u;});},"esri/layers/FeatureLayer":function(){define(["require","module","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","dojo/when","dojo/promise/all","../kernel","../lang","../request","../config","../deferredUtils","../SpatialReference","../symbols/SimpleMarkerSymbol","../symbols/SimpleLineSymbol","../symbols/SimpleFillSymbol","../symbols/jsonUtils","../renderers/SimpleRenderer","../renderers/UniqueValueRenderer","../renderers/jsonUtils","../tasks/QueryTask","../tasks/query","../tasks/FeatureSet","../tasks/StatisticDefinition","../geometry/Extent","../geometry/jsonUtils","../geometry/normalizeUtils","../geometry/scaleUtils","./GraphicsLayer","./Field","./TimeInfo","./FeatureType","./FeatureTemplate","./FeatureEditResult","./LabelClass","./SnapshotMode","./OnDemandMode","./SelectionMode","./StreamMode","./TrackManager","./HeatmapManager","dojo/i18n!../nls/jsapi","require"],function(M,S,T,C,q,k,F,u,U,H,V,W,ua,N,X,G,r,D,Y,A,I,Z,$,O,aa,P,ba,ca,da,J,K,ea,Q,fa,ga,ha,ia,ja,ka,la,ma,E,na,L,oa,pa,qa,ra,R,sa){var ta=Y.defaults,t=T(ia,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4000,maxRecordCountForAuto:2000,maxVertexCountForAuto:250000,generalizeForScale:4000,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(a,b){this._preventInit||this._initFeatureLayer(a,b);},_initFeatureLayer:function(a,b){this.i18n=sa;b=b||{};this.showLabels=null!=b.showLabels?b.showLabels:!0;this._outFields=b.outFields;this._defnExpr=b.definitionExpression;this._loadCallback=b.loadCallback;var c=b._usePatch;this._usePatch=null===c||void 0===c?!0:c;this._trackIdField=b.trackIdField;this.objectIdField=b.objectIdField;this._maxOffset=null!=b.maxAllowableOffset?b.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=b.quantize?b.quantize:!0;this._optEditable=b.editable;this._optAutoGen=b.autoGeneralize;this.editSummaryCallback=b.editSummaryCallback;this.userId=b.userId;this.userIsAdmin=b.userIsAdmin;this.useMapTime=b.hasOwnProperty("useMapTime")?!!b.useMapTime:!0;this.source=b.source;this.gdbVersion=b.gdbVersion;this.orderByFields=b.orderByFields;this.maxPointCountForAuto=null!=b.maxPointCountForAuto?b.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=b.maxRecordCountForAuto?b.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=b.maxVertexCountForAuto?b.maxVertexCountForAuto:this.maxVertexCountForAuto;this.generalizeForScale=null!=b.generalizeForScale?b.generalizeForScale:this.generalizeForScale;this.queryPagination=null!=b.queryPagination?b.queryPagination:this.url?this.reHostedFS.test(this.url):!1;this.multipatchOption=b.multipatchOption;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var d=t,c=this.mode=r.isDefined(b.mode)?b.mode:d.MODE_ONDEMAND;this._isStream&&(this.mode=c=d.MODE_STREAM);switch(c){case d.MODE_SNAPSHOT:this.currentMode=d.MODE_SNAPSHOT;this._mode=new L(this);this._isSnapshot=!0;break;case d.MODE_ONDEMAND:case d.MODE_AUTO:this.currentMode=d.MODE_ONDEMAND;this._tileWidth=b.tileWidth||512;this._tileHeight=b.tileHeight||512;this._mode=new oa(this);this.latticeTiling=b.latticeTiling;break;case d.MODE_SELECTION:this.currentMode=d.MODE_SELECTION;this._mode=new pa(this);this._isSelOnly=!0;break;case d.MODE_STREAM:this.currentMode=d.MODE_STREAM,this._mode=new qa(this),this._isStream=!0;}this._initLayer=q.hitch(this,this._initLayer);this._selectHandler=q.hitch(this,this._selectHandler);this._editable=!1;if(q.isObject(a)&&a.layerDefinition){return this._collection=!0,this.mode=this._isStream?d.MODE_STREAM:d.MODE_SNAPSHOT,this._initLayer(a),this;}this._task=new da(this.url,{source:this.source,gdbVersion:this.gdbVersion});c=this._url.path;this._fserver=!1;-1!==c.search(/\/FeatureServer\//i)&&(this._fserver=!0);this.mode===d.MODE_AUTO&&this.reHostedFS.test(this.url)&&this._queryLimit();(d=b.resourceInfo)?this._initLayer(d):(this.source&&(d={source:this.source.toJson()},this._url.query=q.mixin(this._url.query,{layer:F.toJson(d)})),this.gdbVersion&&(this._url.query=q.mixin(this._url.query,{gdbVersion:this.gdbVersion})),D({url:c,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}));this.registerConnectEvents();},_initLayer:function(a,b){if(a||b){this._json=a;this._findCredential();if(this.credential&&this.credential.ssl||a&&a._ssl){this._useSSL(),this._task._useSSL();}this._collection&&(this._isStream||(this.currentMode=t.MODE_SNAPSHOT,this._mode=new L(this)),this._isSnapshot=!0,this._featureSet=a.featureSet,this._nextId=a.nextObjectId,a=a.layerDefinition);this.geometryType=a.geometryType;"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(a.hasOwnProperty("capabilities")){var c=this.capabilities=a.capabilities;c&&-1!==c.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1;}else{this._collection||(this._editable=this._fserver);}r.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._json=F.toJson(this._json);if(this.isEditable()){this._setMaxOffset(null);}else{if(this.currentMode!==t.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())){this._autoGeneralize=r.isDefined(this._optAutoGen)?this._optAutoGen:this.currentMode===t.MODE_ONDEMAND,delete this._optAutoGen;}}var c=a.effectiveMinScale||a.minScale,d=a.effectiveMaxScale||a.maxScale;!this._hasMin&&c&&this.setMinScale(c);!this._hasMax&&d&&this.setMaxScale(d);this.layerId=a.id;this.name=a.name;this.description=a.description;this.copyright=a.copyrightText;this.type=a.type;this.displayField=a.displayField;this.defaultDefinitionExpression=a.definitionExpression;this.fullExtent=new Q(a.extent);this.initialExtent=new Q(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new I(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=a.defaultVisibility;if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType){this.latticeTiling=!1;}this.indexedFields=a.indexedFields;this.maxRecordCount=a.maxRecordCount;this.canModifyLayer=a.canModifyLayer;this.supportsStatistics=a.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:a.supportsAdvancedQueries;this.supportsCalculate=a.supportsCalculate;this.supportsAttachmentsByUploadId=a.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=a.supportsCoordinatesQuantization;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=a.hasLabels;this.canScaleSymbols=a.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=a.supportsRollbackOnFailure;this.syncCanReturnChanges=a.syncCanReturnChanges;this.isDataVersioned=a.isDataVersioned;this.editFieldsInfo=a.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=a.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=a.relationships;this.allowGeometryUpdates=r.isDefined(a.allowGeometryUpdates)?a.allowGeometryUpdates:!0;this.advancedQueryCapabilities=a.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;for(var e=this.fields=[],d=a.fields,c=0;c<d.length;c++){e.push(new ja(d[c]));}if(!this.objectIdField){this.objectIdField=a.objectIdField;if(!this.objectIdField){d=a.fields;for(c=0;c<d.length;c++){if(e=d[c],"esriFieldTypeOID"===e.type){this.objectIdField=e.name;break;}}}!this.objectIdField&&!this._isStream&&undefined;}if(!r.isDefined(this._nextId)){d=this.objectIdField;e=-1;if(this._collection&&d){for(var f=(c=this._featureSet)&&c.features,l=f?f.length:0,g,c=0;c<l;c++){g=(g=f[c].attributes)&&g[d],g>e&&(e=g);}}this._nextId=e+1;}this.globalIdField=a.globalIdField;if(c=this.typeIdField=a.typeIdField){if(c=!this._getField(c)&&this._getField(c,!0)){this.typeIdField=c.name;}}this.visibilityField=a.visibilityField;if(d=a.defaultSymbol){this.defaultSymbol=aa.fromJson(d);}var h=this.types=[],n=a.types,m,w,e=(c=this.editFieldsInfo)&&c.creatorField,f=c&&c.editorField;g=e||f;l=[];if(n){for(c=0;c<n.length;c++){m=new la(n[c]),w=m.templates,g&&(w&&w.length)&&(l=l.concat(w)),h.push(m);}}n=a.templates;m=this.templates=[];if(n){for(c=0;c<n.length;c++){h=new ma(n[c]),g&&l.push(h),m.push(h);}}for(c=0;c<l.length;c++){if(g=q.getObject("prototype.attributes",!1,l[c])){e&&delete g[e],f&&delete g[f];}}if(c=a.timeInfo){this.timeInfo=new ka(c),this._startTimeField=c.startTimeField,this._endTimeField=c.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?c.trackIdField=this._trackIdField:this._trackIdField=c.trackIdField;}this.hasAttachments=!this._collection&&a.hasAttachments?!0:!1;this.htmlPopupType=a.htmlPopupType;var c=a.drawingInfo,p;if((e=c&&c.labelingInfo)&&!this.labelingInfo){this.labelingInfo=k.map(e,function(a){return new na(a);}),this._fixLabelExpr();}if(!this.renderer){if(c&&c.renderer){if(p=c.renderer,this.setRenderer(ca.fromJson(p)),"classBreaks"===p.type&&this.renderer.setMaxInclusive(!0),!this._collection){var s=p.type,d=[];p=this.renderer;switch(s){case "simple":d.push(p.symbol);break;case "uniqueValue":case "classBreaks":d.push(p.defaultSymbol),d=d.concat(k.map(p.infos,function(a){return a.symbol;}));}var d=k.filter(d,r.isDefined),B=this._url.path+"/images/",x=this._getToken();k.forEach(d,function(a){var b=a.url;b&&(-1===b.search(/https?\:/)&&-1===b.indexOf("data:")&&(a.url=B+b),x&&-1!==a.url.search(/https?\:/)&&(a.url+="?token="+x));});}}else{if(d){n=this.types,0<n.length?(p=new ba(this.defaultSymbol,this.typeIdField),k.forEach(n,function(a){p.addValue(a.id,a.symbol);})):p=new P(this.defaultSymbol),this.setRenderer(p);}else{if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":s=new Z;break;case "esriGeometryPolyline":s=new $;break;case "esriGeometryPolygon":s=new O;break;default:this.hasXYFootprint()&&(s=new O);}this.setRenderer(s?new P(s):null);}}}}s=c&&c.transparency||0;!this.hasOwnProperty("opacity")&&0<s&&(this.opacity=1-s/100);this.version=a.currentVersion;this.version||(this.version="capabilities" in a||"drawingInfo" in a||"hasAttachments" in a||"htmlPopupType" in a||"relationships" in a||"timeInfo" in a||"typeIdField" in a||"types" in a?10:9.3);if((H("ie")||7<=H("trident")||H("safari"))&&this.isEditable()&&10.02>this.version){this._ts=!0;}this.statistics=a.statistics;this._fixRendererFields();this._checkFields();this._updateCaps();var v=function(){this.currentMode!==t.MODE_SNAPSHOT&&(this.queryPagination=!1);this.loaded=!0;this.onLoad(this);var a=this._loadCallback;a&&(delete this._loadCallback,a(this));};this._collection?(s=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new K(s)),this._fcAdded=!0,v.call(this)):this._forceIdentity(this._limitPromise?function(){var a=this;this._limitPromise.then(function(b){a._checkMode(b);});this._limitPromise.always(function(){a._limitPromise=null;v.call(a);});}:v);}},setShowLabels:function(a){this.showLabels=a;this.onShowLabelsChange();},onShowLabelsChange:function(){},onRendererChange:function(a){this.inherited(arguments);var b=this._map;this._ager=!(!a||!a.observationAger||!a.observationRenderer);a&&"colors" in a&&"blurRadius" in a&&"maxPixelIntensity" in a?"esriGeometryPoint"==this.geometryType&&(!this._heatmapManager&&b)&&(this._heatmapManager=new R(this),this._heatmapManager.initialize(b)):this.renderer&&this.renderer.getRendererInfo?k.some(this.renderer.rendererInfos,function(a){return a.renderer&&"colors" in a.renderer&&"blurRadius" in a.renderer;})||(this._heatmapManager=null):this._heatmapManager=null;if(a){var c=[],b=k.filter([a,a.observationRenderer,a.latestObservationRenderer,a.trackRenderer],r.isDefined),d=function(a){return null!=a&&"function"!=typeof a&&a;};k.forEach(b,function(a){var b=d(a.attributeField),l=d(a.attributeField2);a=d(a.attributeField3);!1!==b&&c.push(b);!1!==l&&c.push(l);!1!==a&&c.push(a);});this._rendererFields=c;}else{this._rendererFields=[];}this.loaded&&(this._fixRendererFields(),this._checkFields(this._rendererFields),this._collection&&(this._typesDirty=!0));},redraw:function(){this.inherited(arguments);this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw();},_evalSDRenderer:function(){this.inherited(arguments);var a=this._getRenderer();this._ager=!(!a||!a.observationAger||!a.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(a&&a.trackRenderer);},_setMap:function(a){var b=this.inherited(arguments),c=this._mode,d=this;c&&c.initialize(a);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(a){a=a.graphic.attributes;(a=d._selectedFeatures[a&&a[d.objectIdField]])&&a.attr("data-selected","");});return b;},_unsetMap:function(a){var b=this._mode;b&&b.suspend();this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);C.disconnect(this._zoomConnect);C.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this._toggleTime(!1);this.inherited("_unsetMap",arguments);},refresh:function(){var a=this._mode;a&&a.refresh();},hasXYFootprint:function(){return "esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption;},getOutFields:function(){return k.filter(this._getOutFields(),function(a){return "*"===a||!!this._getField(a);},this);},getField:function(a){return this._getField(a,!0);},getDomain:function(a,b){var c,d,e=b&&b.feature,f=e&&this.typeIdField&&e.attributes&&e.attributes[this.typeIdField];null!=f&&k.some(this.types,function(b){if(b.id==f){if((c=b.domains&&b.domains[a])&&"inherited"===c.type){c=this._getLayerDomain(a),d=!0;}return !0;}return !1;},this);!d&&!c&&(c=this._getLayerDomain(a));return c;},_getLayerDomain:function(a){var b;k.some(this.fields,function(c){c.name===a&&(b=c.domain);return !!b;});return b;},getType:function(a){var b,c=a&&this.typeIdField&&a.attributes&&a.attributes[this.typeIdField];k.some(this.types,function(a){a.id==c&&(b=a);return !!b;});return b;},setEditable:function(a){if(!this._collection){return undefined,this;}if(!this.loaded){return this._optEditable=a,this;}var b=this._editable;this._editable=a;this._updateCaps();if(b!==a){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(a){var b={canCreate:!1,canUpdate:!1,canDelete:!1};if(!this.loaded||!this.isEditable()){return b;}var c=a&&a.feature;a=a&&a.userId;var d=k.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],q.trim),e=-1<k.indexOf(d,"editing"),f=e&&-1<k.indexOf(d,"create"),b=e&&-1<k.indexOf(d,"update"),d=e&&-1<k.indexOf(d,"delete"),l=this.ownershipBasedAccessControlForFeatures,g=this.editFieldsInfo,h=g&&g.creatorField,g=g&&g.realm,c=(c=c&&c.attributes)&&h?c[h]:void 0,n=!!this.userIsAdmin,h=!l||n||!(!l.allowOthersToUpdate&&!l.allowUpdateToOthers),l=!l||n||!(!l.allowOthersToDelete&&!l.allowDeleteToOthers);if(n||e&&!f&&!b&&!d){f=b=d=!0;}e={canCreate:f,canUpdate:b,canDelete:d};null===c?(e.canUpdate=b&&h,e.canDelete=d&&l):""!==c&&c&&((a=a||this.getUserId())&&g&&(a=a+"@"+g),a.toLowerCase()!==c.toLowerCase()&&(e.canUpdate=b&&h,e.canDelete=d&&l));return e;},getUserId:function(){var a;this.loaded&&(a=this.credential&&this.credential.userId||this.userId||"");return a;},setUserIsAdmin:function(a){this.userIsAdmin=a;},setEditSummaryCallback:function(a){this.editSummaryCallback=a;},getEditSummary:function(a,b,c){c=r.isDefined(c)?c:(new Date).getTime();var d="";c=this.getEditInfo(a,b,c);(b=b&&b.callback||this.editSummaryCallback)&&(c=b(a,c)||"");if(q.isString(c)){d=c;}else{if(c){a=c.action;b=c.userId;var e=c.timeValue,f=0;a&&f++;b&&f++;r.isDefined(e)&&f++;1<f&&(d=("edit"===a?"edit":"create")+(b?"User":"")+(r.isDefined(e)?c.displayPattern:""));}d=d&&r.substitute(c,this.i18n.layers.FeatureLayer[d]);}return d;},getEditInfo:function(a,b,c){if(this.loaded){c=r.isDefined(c)?c:(new Date).getTime();b=b&&b.action||"last";var d=this.editFieldsInfo,e=d&&d.creatorField,f=d&&d.creationDateField,l=d&&d.editorField,d=d&&d.editDateField,l=(a=a&&a.attributes)&&l?a[l]:void 0,d=a&&d?a[d]:null,e=this._getEditData(a&&e?a[e]:void 0,a&&f?a[f]:null,c);c=this._getEditData(l,d,c);var g;switch(b){case "creation":g=e;break;case "edit":g=c;break;case "last":g=c||e;}g&&(g.action=g===c?"edit":"creation");return g;}},_getEditData:function(a,b,c){var d,e,f;r.isDefined(b)&&(e=c-b,f=0>e?"Full":60000>e?"Seconds":120000>e?"Minute":3600000>e?"Minutes":7200000>e?"Hour":86400000>e?"Hours":604800000>e?"WeekDay":"Full");if(void 0!==a||f){d=d||{},d.userId=a,f&&(a=U.format,c=new Date(b),d.minutes=Math.floor(e/60000),d.hours=Math.floor(e/3600000),d.weekDay=a(c,{datePattern:"EEEE",selector:"date"}),d.formattedDate=a(c,{selector:"date"}),d.formattedTime=a(c,{selector:"time"}),d.displayPattern=f,d.timeValue=b);}return d;},isEditable:function(){return !(!this._editable&&!this.userIsAdmin);},setMaxAllowableOffset:function(a){this.isEditable()||this._setMaxOffset(a,!0);return this;},getMaxAllowableOffset:function(){var a=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:a;},_setMaxOffset:function(a,b){if(null==a){return delete this._maxOffset,delete this._quantizationParameters,this;}this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=a:delete this._maxOffset,this._quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:a,extent:this.fullExtent}):(b||(a=Math.floor(a)),this._maxOffset=a,delete this._quantizationParameters);return this;},setAutoGeneralize:function(a){if(this.loaded){if(!this.isEditable()&&this.currentMode!==t.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())){(this._autoGeneralize=a)?(a=this._map)&&a.loaded&&this._setMaxOffset(a.extent.getWidth()/a.width):this._setMaxOffset(null);}}else{this._optAutoGen=a;}return this;},setGDBVersion:function(a){if(!this._collection&&a!==this.gdbVersion&&(a||this.gdbVersion)){this.gdbVersion=a,this._task.gdbVersion=a,this._url.query=q.mixin(this._url.query,{gdbVersion:a}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange();}return this;},setDefinitionExpression:function(a){this._defnExpr=a;(a=this._mode)&&a.propertyChangeHandler(1);return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(a){this._isSnapshot?(this._timeDefn=a,(a=this._mode)&&a.propertyChangeHandler(2)):undefined;return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(a,b){this._timeOffset=a;this._timeOffsetUnits=b;var c=this._mode;c&&c.propertyChangeHandler(0);return this;},setUseMapTime:function(a){this.useMapTime=a;this._toggleTime(!this.suspended);(a=this._mode)&&a.propertyChangeHandler(0);},selectFeatures:function(a,b,c,d){b=b||t.SELECTION_NEW;a=this._getShallowClone(a);var e=this._map,f,l=this,g=A._fixDfd(new u(A._dfdCanceller));a.outFields=this.getOutFields();a.returnGeometry=!0;a.multipatchOption=this.multipatchOption;e&&(a.outSpatialReference=new I(e.spatialReference.toJson()));if(!this._applyQueryFilters(a,!0)){return f={features:[]},this._selectHandler(f,b,c,d,g),g;}if(e=this._canDoClientSideQuery(a)){g._pendingDfd=N(this._doQuery(a,e)),g._pendingDfd.then(function(a){f={features:a};l._selectHandler(f,b,c,d,g);});}else{if(this._collection){return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,d,g,!0),g;}var h=this;this._ts&&(a._ts=(new Date).getTime());(g._pendingDfd=this._task.execute(a)).addCallbacks(function(a){h._selectHandler(a,b,c,d,g);},function(a){h._resolve([a],null,d,g,!0);});}return g;},getSelectedFeatures:function(){var a=this._selectedFeatures,b=[],c;for(c in a){a.hasOwnProperty(c)&&b.push(a[c]);}return b;},clearSelection:function(a){var b=this._selectedFeatures,c=this._mode,d;for(d in b){b.hasOwnProperty(d)&&(this._unSelectFeatureIIf(d,c),c._removeFeatureIIf(d));}this._selectedFeatures={};this._isSelOnly&&c._applyTimeFilter(!0);if(!a){this.onSelectionClear();}return this;},setSelectionSymbol:function(a){if(this._selectionSymbol=a){var b=this._selectedFeatures,c;for(c in b){b.hasOwnProperty(c)&&b[c].setSymbol(a);}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},setLabelingInfo:function(a){a?(this.labelingInfo=a,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this.onLabelingInfoChange();},_fixLabelExpr:function(){var a=/\[([^\[\]]+)\]/ig,b,c=this,d=function(a,b){var d=c._getField(b,!0);return "["+(d&&d.name||b)+"]";};k.forEach(this.labelingInfo,function(c){if(b=c.labelExpression){c.labelExpression=b.replace(a,d);}});},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(a,b,c,d,e,f){var l=f.assembly,g=f.dfd;this._applyNormalized(a,l&&l[0]);this._applyNormalized(b,l&&l[1]);this.onBeforeApplyEdits(a,b,c);var h={},n=this.objectIdField,l={f:"json"},m=!1;if(this._collection){f={},f.addResults=a?k.map(a,function(){m=!0;return {objectId:this._nextId++,success:!0};},this):null,f.updateResults=b?k.map(b,function(a){m=!0;var b=a.attributes[n];h[b]=a;return {objectId:b,success:!0};},this):null,f.deleteResults=c?k.map(c,function(a){m=!0;return {objectId:a.attributes[n],success:!0};},this):null,m?this._editHandler(f,a,h,d,e,g):this._resolve([f.addResults,f.updateResults,f.deleteResults],null,d,g);}else{a&&0<a.length&&(l.adds=this._convertFeaturesToJson(a,0,1),m=!0);if(b&&0<b.length){for(f=0;f<b.length;f++){var w=b[f];h[w.attributes[n]]=w;}l.updates=this._convertFeaturesToJson(b,0,0,1);m=!0;}if(c&&0<c.length){b=[];for(f=0;f<c.length;f++){b.push(c[f].attributes[n]);}l.deletes=b.join(",");m=!0;}if(m){var p=this;return D({url:this._url.path+"/applyEdits",content:q.mixin(l,this._url.query),callbackParamName:"callback",load:function(b){p._editHandler(b,a,h,d,e,g);},error:function(a){p._resolve([a],null,e,g,!0);}},{usePost:!0});}this._resolve([],null,d,g);}},queryFeatures:function(a,b,c){return this._query("execute","onQueryFeaturesComplete",a,b,c);},queryRelatedFeatures:function(a,b,c){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",a,b,c);},queryIds:function(a,b,c){return this._query("executeForIds","onQueryIdsComplete",a,b,c);},queryCount:function(a,b,c){return this._query("executeForCount","onQueryCountComplete",a,b,c);},queryExtent:function(a,b,c){return this._query("executeForExtent","onQueryExtentComplete",a,b,c);},queryAttachmentInfos:function(a,b,c){var d=this._url.path+"/"+a+"/attachments",e=new u(A._dfdCanceller),f=this;e._pendingDfd=D({url:d,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(c){c=c.attachmentInfos;var g;k.forEach(c,function(b){g=V.objectToQuery({gdbVersion:f._url.query&&f._url.query.gdbVersion,layer:f._url.query&&f._url.query.layer,token:f._getToken()});b.url=d+"/"+b.id+(g?"?"+g:"");b.objectId=a;});f._resolve([c],"onQueryAttachmentInfosComplete",b,e);},error:function(a){f._resolve([a],null,c,e,!0);}});return e;},addAttachment:function(a,b,c,d){return this._sendAttachment("add",a,b,c,d);},updateAttachment:function(a,b,c,d,e){c.appendChild(W.create("input",{type:"hidden",name:"attachmentId",value:b}));return this._sendAttachment("update",a,c,d,e);},deleteAttachments:function(a,b,c,d){var e=this._url.path+"/"+a+"/deleteAttachments",f=new u(A._dfdCanceller),l=this;b={f:"json",attachmentIds:b.join(",")};f._pendingDfd=D({url:e,content:q.mixin(b,this._url.query),callbackParamName:"callback",load:q.hitch(this,function(b){b=b.deleteAttachmentResults;b=k.map(b,function(b){b=new E(b);b.attachmentId=b.objectId;b.objectId=a;return b;});l._resolve([b],"onDeleteAttachmentsComplete",c,f);}),error:function(a){l._resolve([a],null,d,f,!0);}},{usePost:!0});return f;},addType:function(a){var b=this.types;if(b){if(k.some(b,function(b){return b.id==a.id?!0:!1;})){return !1;}b.push(a);}else{this.types=[a];}return this._typesDirty=!0;},deleteType:function(a){if(this._collection){var b=this.types;if(b){var c=-1;k.some(b,function(b,e){return b.id==a?(c=e,!0):!1;});if(-1<c){return this._typesDirty=!0,b.splice(c,1)[0];}}}},toJson:function(){var a=this._json;if(a=q.isString(a)?F.fromJson(a):q.clone(a)){var a=a.layerDefinition?a:{layerDefinition:a},b=a.layerDefinition,c=this._collection;if(c&&this._typesDirty){b.types=k.map(this.types||[],function(a){return a.toJson();});var d=this.renderer,e=this.labelingInfo,f=b.drawingInfo;if((d||e)&&!f){f=b.drawingInfo={};}f&&(d&&-1===d.declaredClass.indexOf("TemporalRenderer"))&&(f.renderer=d.toJson());e&&(f.labelingInfo=k.map(e,function(a){return a.toJson();}));}d=null;if(!c||this._fcAdded){d={geometryType:b.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};}a.featureSet=q.mixin({},a.featureSet||{},d);c&&(a.nextObjectId=this._nextId,b.capabilities=this.capabilities);return a;}},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},_forceIdentity:function(a){var b=this,c=this._url&&this._url.path;(this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&c&&G.id&&G.id._hasPortalSession()&&G.id._doPortalSignIn(c)?G.id.getCredential(c).then(function(){b._findCredential();a.call(b);},function(){a.call(b);}):a.call(this);},_checkMode:function(a){var b=this.geometryType,c=this.maxRecordCount;a=(a=a&&a.features&&a.features[0])&&a.attributes&&a.attributes.exceedslimit;if(this.mode===t.MODE_AUTO&&!this.isEditable()&&0===a&&(this.queryPagination||("esriGeometryPolyline"===b||"esriGeometryPolygon"===b||"esriGeometryMultipoint"===b||this.hasXYFootprint())&&c>=this.maxRecordCountForAuto||"esriGeometryPoint"===b&&c>=this.maxPointCountForAuto)){this.currentMode=t.MODE_SNAPSHOT,this._mode=new L(this),this._isSnapshot=!0,this._autoGeneralize=!1;}},_queryLimit:function(){var a=this,b=new u;this._limitPromise=b.promise;setTimeout(function(){var c=new J,d=new ea;d.statisticType="exceedslimit";d.maxPointCount=a.maxPointCountForAuto;d.maxRecordCount=a.maxRecordCountForAuto;d.maxVertexCount=a.maxVertexCountForAuto;d.outStatisticFieldName="exceedslimit";c.outStatistics=[d];a.queryFeatures(c).promise.then(function(a){b.resolve(a);},function(a){b.reject(a);});},0);},_updateCaps:function(){var a=this._editable,b=q.trim(this.capabilities||""),c=k.map(b?b.split(","):[],q.trim),d=k.map(b?b.toLowerCase().split(","):[],q.trim),b=k.indexOf(d,"editing"),e,d={Create:k.indexOf(d,"create"),Update:k.indexOf(d,"update"),Delete:k.indexOf(d,"delete")};if(a&&-1===b){c.push("Editing");}else{if(!a&&-1<b){a=[b];for(e in d){-1<d[e]&&a.push(d[e]);}a.sort();for(e=a.length-1;0<=e;e--){c.splice(a[e],1);}}}this.capabilities=c.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(!1);var a=this._mode;a&&a.suspend();},onResume:function(a){this.inherited(arguments);this._toggleTime(!0);this._updateMaxOffset();var b=this._mode,c=this._map,d=this._getRenderer();if(a.firstOccurrence){this._fixRendererFields();this._checkFields();this.clearSelection();if(this.timeInfo&&!this._trackManager&&(this._trackIdField||d&&(d.latestObservationRenderer||d.trackRenderer))){this._trackManager=new ra(this),this._trackManager.initialize(c);}d&&("colors" in d&&"blurRadius" in d&&"maxPixelIntensity" in d)&&("esriGeometryPoint"==this.geometryType&&!this._heatmapManager)&&(this._heatmapManager=new R(this),this._heatmapManager.initialize(c));if(this.mode===t.MODE_AUTO&&this.currentMode===t.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())&&!this.getMaxAllowableOffset()){d=this.generalizeForScale,d=this.maxScale?this.maxScale:this.minScale?Math.min(d,this.minScale):Math.min(d,ha.getScale(c,this.initialExtent)),this.isEditable()||this._setMaxOffset(c.extent.getWidth()/c.width/c.getScale()*d,!0);}this._zoomConnect=C.connect(c,"onZoomEnd",this,this._updateMaxOffset);}b&&(a.firstOccurrence?b.startup():b.resume());},_updateMaxOffset:function(){var a=this._map;a&&a.loaded&&this._autoGeneralize&&this._setMaxOffset(a.extent.getWidth()/a.width);},_toggleTime:function(a){var b=this._map;a&&this.timeInfo&&this.useMapTime&&b?(this._mapTimeExtent=b.timeExtent,this._timeConnect||(this._timeConnect=C.connect(b,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,C.disconnect(this._timeConnect),this._timeConnect=null);},_timeChangeHandler:function(a){this._mapTimeExtent=a;(a=this._mode)&&a.propertyChangeHandler(0);},_getOffsettedTE:function(a){var b=this._timeOffset,c=this._timeOffsetUnits;return a&&b&&c?a.offset(-1*b,c):a;},_getTimeOverlap:function(a,b){return a&&b?a.intersection(b):a||b;},_getTimeFilter:function(a){var b=this.getTimeDefinition(),c;if(b&&(c=this._getTimeOverlap(b,null),!c)){return [!1];}if(a){if(a=c?this._getTimeOverlap(a,c):a,!a){return [!1];}}else{a=c;}return [!0,a];},_getAttributeFilter:function(a){var b=this.getDefinitionExpression();return a?b?"("+b+") AND ("+a+")":a:b;},_applyQueryFilters:function(a,b){a.where=this._getAttributeFilter(a.where);a.maxAllowableOffset=this._maxOffset;a.quantizationParameters=this._quantizationParameters;b&&this.supportsAdvancedQueries&&(a.orderByFields=a.orderByFields||this.getOrderByFields());if(this.timeInfo){var c=this._getTimeFilter(a.timeExtent);if(c[0]){a.timeExtent=c[1];}else{return !1;}}return !0;},_add:function(a){var b=this._selectionSymbol,c=a.attributes,d=this.visibilityField;b&&this._isSelOnly&&a.setSymbol(b);if(d&&c&&c.hasOwnProperty(d)){a[c[d]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(a){var b=[],c=this._map;if(!(this._isTable||!c&&!this._collection)){if(!a.text&&!(a.where&&a.where!==this.getDefinitionExpression()||a.orderByFields&&a.orderByFields.length||a.outStatistics||a.returnDistinctValues)){var d=this._isSnapshot,e=this._isSelOnly,f=a.geometry;if(f){if(!e&&a.spatialRelationship===J.SPATIAL_REL_INTERSECTS&&"extent"===f.type&&(d||c.extent.contains(f))){b.push(1);}else{return;}}if(c=a.objectIds){if(d){b.push(2);}else{var f=c.length,l=this._mode,g=0,h;for(h=0;h<f;h++){l._getFeature(c[h])&&g++;}if(g===f){b.push(2);}else{return;}}}if(this.timeInfo){if(a=a.timeExtent,c=this._mapTimeExtent,d){a&&b.push(3);}else{if(e){if(a){return;}}else{if(c){if(-1!==k.indexOf(b,2)){a&&b.push(3);}else{if(-1!==k.indexOf(b,1)){a==c&&b.push(3);}else{return;}}}else{if(0<b.length){a&&b.push(3);}else{if(a){return;}}}}}}return 0<b.length?b:null;}}},_getAbsMid:function(a){return M.toAbsMid?M.toAbsMid(a):S.id.replace(/\/[^\/]*$/ig,"/")+a;},_doQuery:function(a,b,c){var d=[],e=this._mode,f=this.objectIdField,l=this,g,h,n=new u,m=new u,w=function(a,b){if(!a.length||!b.length){return a.length?a:b;}var c,d,e={};a.length>b.length?(d=a,c=b):(d=b,c=a);for(var g=d.length,l=c.length,h;g--;){h=d[g],e[h.attributes[f]]=!0;}for(;l--;){h=c[l],e[h.attributes[f]]||d.push(h);}return d;};if(-1!==k.indexOf(b,1)){h=this.graphics;g=h.length;var p=this.spatialIndex||this._map&&this._map.spatialIndex,s,B=a.geometry._normalize(null,!0);null==p&&ta.autoSpatialIndexing?s=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(q.hitch(this,q.partial(this._getFromIndex,B,p)),function(a){m.resolve(q.hitch(this,q.partial(this._filterByExtent,h,B)));}):p&&(s=this._getFromIndex(B,p));s?s.then(function(a){for(var b=0;b<a.length;b++){a[b].results&&(d=d.concat(a[b].results));}m.resolve(d);}).otherwise(function(a){m.reject(a);}):m.resolve(this._filterByExtent(h,B));}else{m.resolve([]);}m.then(function(d){var h=[];if(-1!==k.indexOf(b,2)){var m=a.objectIds;for(g=m.length;g--;){var p=e._getFeature(m[g]);p&&h.push(p);}h=w(d,h);}else{h=d;}-1!==k.indexOf(b,3)&&l.timeInfo&&(d=a.timeExtent,h=l._filterByTime(0<h.length?h:l.graphics,d.startTime,d.endTime).match);c&&(h=k.map(h,function(a){return a.attributes[f];},this));n.resolve(h);});return n;},_getFromIndex:function(a,b){b=b||this.spatialIndex||this._map.spatialIndex;a instanceof Array||(a=[a]);var c=this.id;return X(k.map(a,function(a){return b.intersects(a,c);}));},_filterByExtent:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d],l=f.geometry;l&&(this.normalization&&b.length?(b[0].intersects(l)||b[1].intersects(l))&&c.push(f):b.intersects(l)&&c.push(f));}return c;},_filterByTime:function(a,b,c){var d=this._startTimeField,e=this._endTimeField,f;this._twoTimeFields||(f=d||e);var l=r.isDefined,g=[],h=[],n,m=a.length,k,p;b=b?b.getTime():-Infinity;c=c?c.getTime():Infinity;if(f){for(n=0;n<m;n++){k=a[n],p=k.attributes,d=p[f],d>=b&&d<=c?g.push(k):h.push(k);}}else{for(n=0;n<m;n++){k=a[n],p=k.attributes,f=p[d],p=p[e],f=l(f)?f:-Infinity,p=l(p)?p:Infinity,f>=b&&f<=c||p>=b&&p<=c||b>=f&&c<=p?g.push(k):h.push(k);}}return {match:g,noMatch:h};},_resolve:function(a,b,c,d,e){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&A._resDfd(d,a,e);},_getShallowClone:function(a){var b=new J,c;for(c in a){a.hasOwnProperty(c)&&(b[c]=a[c]);}return b;},_query:function(a,b,c,d,e){var f=this,l=this._map,g=new u(A._dfdCanceller),h=c,k=function(c,e){if(!e&&("execute"===a||"executeRelationshipQuery"===a)){var h,l;if("execute"===a){h=c.features;l=h.length;for(l-=1;0<=l;l--){if(h[l]._layer=f,!f._isTable){var k=f._mode._getFeature(h[l].attributes[f.objectIdField]);k&&h.splice(l,1,k);}}}else{for(k in c){if(c.hasOwnProperty(k)){h=c[k].features;l=h.length;for(l-=1;0<=l;l--){h[l]._layer=f;}}}}}f._resolve([c],b,d,g);};if("executeRelationshipQuery"!==a){h=this._getShallowClone(c);h.outFields=this.getOutFields();h.returnGeometry=c.hasOwnProperty("returnGeometry")?c.returnGeometry:!c.outStatistics;h.returnGeometry&&(h.multipatchOption=this.multipatchOption);var m;l&&(h.outSpatialReference=new I(l.spatialReference.toJson()));if(!this._applyQueryFilters(h,"execute"===a&&!h.outStatistics)){switch(a){case "execute":m=new K({features:[]});break;case "executeForIds":m=[];break;case "executeForCount":m=0;break;case "executeForExtent":m={};}k(m,!0);return g;}if(c="executeForExtent"!==a&&this._canDoClientSideQuery(h)){return g._pendingDfd=N(this._doQuery(h,c,"executeForIds"===a||"executeForCount"===a)),g._pendingDfd.then(function(b){switch(a){case "execute":m=new K;m.features=b;break;case "executeForIds":m=b;break;case "executeForCount":m=b.length;}k(m,!0);}),g;}}if(this._collection){return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,e,g,!0),g;}this._ts&&(h._ts=(new Date).getTime());(g._pendingDfd=this._task[a](h)).addCallbacks(function(a){k(a,!!h.outStatistics);},function(a){f._resolve([a],null,e,g,!0);});return g;},_convertFeaturesToJson:function(a,b,c,d){var e=[],f=this._selectionSymbol,l=this.visibilityField,g,h=this.objectIdField;if(this.loaded&&(c||d)){g=k.filter(this.fields,function(a){return !1===a.editable&&(!d||a.name!==h);});}for(c=0;c<a.length;c++){var n=a[c],m={},r=n.geometry,p=n.attributes,s=n.symbol;if(r&&(!d||!this.loaded||this.allowGeometryUpdates)){m.geometry=r.toJson();}l?(m.attributes=p=q.mixin({},p),p[l]=n.visible?1:0):p&&(m.attributes=q.mixin({},p));m.attributes&&(g&&g.length)&&k.forEach(g,function(a){delete m.attributes[a.name];});s&&s!==f&&(m.symbol=s.toJson());e.push(m);}return b?e:F.toJson(e);},_selectHandler:function(a,b,c,d,e){var f;d=t;switch(b){case d.SELECTION_NEW:this.clearSelection(!0);f=!0;break;case d.SELECTION_ADD:f=!0;break;case d.SELECTION_SUBTRACT:f=!1;}d=a.features;var l=this._mode,g=[],h=this.objectIdField,k,m;if(f){for(f=0;f<d.length;f++){k=d[f],m=k.attributes[h],k=l._addFeatureIIf(m,k),g.push(k),this._selectFeatureIIf(m,k,l);}}else{for(f=0;f<d.length;f++){k=d[f],m=k.attributes[h],this._unSelectFeatureIIf(m,l),m=l._removeFeatureIIf(m),g.push(m||k);}}this._isSelOnly&&l._applyTimeFilter(!0);this._resolve([g,b,a.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",c,e);if(a.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(a,b,c){var d=this._selectedFeatures,e=d[a];e||(c._incRefCount(a),d[a]=b,this._isTable||(this._setSelectSymbol(b),b.attr("data-selected","")));return e||b;},_unSelectFeatureIIf:function(a,b){var c=this._selectedFeatures[a];c&&(b._decRefCount(a),delete this._selectedFeatures[a],this._isTable||(this._setUnSelectSymbol(c),c.attr("data-selected")));return c;},_isSelected:function(a){},_setSelectSymbol:function(a){var b=this._selectionSymbol;b&&!this._isSelOnly&&a.setSymbol(b);},_setUnSelectSymbol:function(a){var b=this._selectionSymbol;b&&!this._isSelOnly&&b===a.symbol&&a.setSymbol(null,!0);},_getOutFields:function(){var a=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),a=k.filter(a,function(a,b,e){return !!a&&k.indexOf(e,a)===b;}),b=q.clone(this._outFields);if(b){if(-1!==k.indexOf(b,"*")){return b;}k.forEach(a,function(a){-1===k.indexOf(b,a)&&b.push(a);});return b;}return a;},_checkFields:function(a){var b=a||this._getOutFields();k.forEach(b,function(a){"*"!==a&&(this._getField(a)||undefined);},this);!a&&(!this._isTable&&!this._fserver&&!this._collection&&!this._isStream)&&(k.some(this.fields,function(a){return a&&"esriFieldTypeGeometry"===a.type?!0:!1;})||undefined);},_fixFieldCase:function(a,b,c){var d=a&&a[b],e;if(d&&!q.isFunction(d)){if(e=!this._getField(d)&&this._getField(d,!0)){d=a[b]=e.name;}c&&c.push(d);}return d;},_fixRendererFields:function(){var a=this.renderer;this._orderBy=null;if(a&&0<this.fields.length){var b=[],c,a=k.filter([a,a.observationRenderer,a.latestObservationRenderer,a.trackRenderer],r.isDefined),d=[].concat(a);k.forEach(a,function(a){k.forEach(a.rendererInfos,function(a){a.renderer&&d.push(a.renderer);});});k.forEach(d,function(a){this._fixFieldCase(a,"attributeField",b);this._fixFieldCase(a,"attributeField2",b);this._fixFieldCase(a,"attributeField3",b);this._fixFieldCase(a.rotationInfo,"field",b);if((c=this._fixFieldCase(a.sizeInfo,"field",b))&&!this._orderBy){this._orderBy=[c+" DESC"];}this._fixFieldCase(a.sizeInfo,"normalizationField",b);this._fixFieldCase(a.colorInfo,"field",b);this._fixFieldCase(a.colorInfo,"normalizationField",b);this._fixFieldCase(a.field,"field",b);this._fixFieldCase(a.opacityInfo,"field",b);this._fixFieldCase(a.opacityInfo,"normalizationField",b);k.forEach(a.visualVariables,function(a){c=this._fixFieldCase(a,"field",b);"sizeInfo"===a.type&&(c&&!this._orderBy)&&(this._orderBy=[c+" DESC"]);this._fixFieldCase(a,"normalizationField",b);},this);if(!this._orderBy&&a.addBreak&&!q.isFunction(a.attributeField)&&(a.backgroundFillSymbol||this._hasSizeDiff(a))){this._orderBy=[a.attributeField+" DESC"];}},this);this._rendererFields=k.filter(b,r.isDefined);}},_hasSizeDiff:function(a){var b=Number.MAX_VALUE,c=-Number.MAX_VALUE,d,e;k.forEach(a.infos,function(a){if(e=a.symbol){d=0;switch(e.type){case "simplemarkersymbol":d=e.size;break;case "picturemarkersymbol":d=(e.width+e.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":d=e.width;break;case "simplefillsymbol":case "picturefillsymbol":d=e.outline&&e.outline.width;}d&&(b=Math.min(b,d),c=Math.max(c,d));}});return b!==Number.MAX_VALUE&&c!==-Number.MAX_VALUE&&1<Math.abs(c-b);},getOrderByFields:function(){var a=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&a?k.filter(a,function(a){a=a.split(" ")[0];return !!this._getField(a,!0);},this):null;},_getField:function(a,b){var c=this.fields;if(!c||0===c.length){return null;}var d;b&&(a=a.toLowerCase());k.some(c,function(c){var f=!1;(f=b?c&&c.name.toLowerCase()===a?!0:!1:c&&c.name===a?!0:!1)&&(d=c);return f;});return d;},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:k.map(k.filter(this.fields,function(a){return !!(a&&"esriFieldTypeDate"===a.type);}),function(a){return a.name;})});return this._dtOpts;},_applyNormalized:function(a,b){a&&b&&k.forEach(a,function(a,d){a&&b[d]&&a.setGeometry(b[d]);});},_editHandler:function(a,b,c,d,e,f){e=a.addResults;var l=a.updateResults;a=a.deleteResults;var g,h,n,m,q=this.objectIdField,p=this._mode,s=this._isTable;g=this.editFieldsInfo;var r=this.getOutFields()||[],x=g&&g.creatorField,v=g&&g.creationDateField,y=g&&g.editorField,z=g&&g.editDateField;g=g&&g.realm;-1===k.indexOf(r,"*")&&(x&&-1===k.indexOf(r,x)&&(x=null),v&&-1===k.indexOf(r,v)&&(v=null),y&&-1===k.indexOf(r,y)&&(y=null),z&&-1===k.indexOf(r,z)&&(z=null));var r=v||z?(new Date).getTime():null,u=x||y?this.getUserId():void 0;u&&g&&(u=u+"@"+g);if(e){for(g=0;g<e.length;g++){e[g]=new E(e[g]),s||(h=e[g],h.success&&(h=h.objectId,n=b[g],(m=n._graphicsLayer)&&m!==this&&m.remove(n),m=n.attributes||{},m[q]=h,x&&(m[x]=u),y&&(m[y]=u),v&&(m[v]=r),z&&(m[z]=r),n.setAttributes(m),p._init&&p.drawFeature(n)));}}if(l){for(g=0;g<l.length;g++){if(l[g]=new E(l[g]),!s&&(h=l[g],h.success)){h=h.objectId;n=c[h];if(b=p._getFeature(h)){b.geometry!==n.geometry&&b.setGeometry(fa.fromJson(n.geometry.toJson())),this._repaint(b,h);}n=b||n;m=n.attributes||{};y&&(m[y]=u);z&&(m[z]=r);n.setAttributes(m);}}}if(a){c=[];for(g=0;g<a.length;g++){if(a[g]=new E(a[g]),!s&&(h=a[g],h.success&&(h=h.objectId,n=p._getFeature(h)))){this._unSelectFeatureIIf(h,p)&&c.push(n),n._count=0,p._removeFeatureIIf(h);}}if(0<c.length){this.onSelectionComplete(c,t.SELECTION_SUBTRACT);}}this._resolve([e,l,a],"onEditsComplete",d,f);},_sendAttachment:function(a,b,c,d,e){var f=this;return D({url:this._url.path+"/"+b+"/"+("add"===a?"addAttachment":"updateAttachment"),form:c,content:q.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(c){var e="add"===a?"onAddAttachmentComplete":"onUpdateAttachmentComplete";c=new E(c["add"===a?"addAttachmentResult":"updateAttachmentResult"]);c.attachmentId=c.objectId;c.objectId=b;f._resolve([c],e,d);return c;}).addErrback(function(a){f._resolve([a],null,e,null,!0);});},_repaint:function(a,b,c){b=r.isDefined(b)?b:a.attributes[this.objectIdField];(!(b in this._selectedFeatures)||!this._selectionSymbol)&&a.setSymbol(a.symbol,c);},_getKind:function(a){var b=this._trackManager;return b?b.isLatestObservation(a)?1:0:0;}});q.mixin(t,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});ga._createWrappers(t);return t;});},"esri/layers/Field":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RangeDomain","./CodedValueDomain"],function(c,b,f,g,d,e){return c(null,{declaredClass:"esri.layers.Field",constructor:function(a){if(a&&b.isObject(a)&&(this.name=a.name,this.type=a.type,this.alias=a.alias,this.length=a.length,this.editable=a.editable,this.nullable=a.nullable,(a=a.domain)&&b.isObject(a))){switch(a.type){case "range":this.domain=new d(a);break;case "codedValue":this.domain=new e(a);}}}});});},"esri/layers/RangeDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang","./Domain"],function(b,c,f,g,d,e){return b([e],{declaredClass:"esri.layers.RangeDomain",constructor:function(a){a&&c.isObject(a)&&(this.minValue=a.range[0],this.maxValue=a.range[1]);},toJson:function(){var a=this.inherited(arguments);a.range=[this.minValue,this.maxValue];return d.fixJson(a);}});});},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,c,e,f,d){return b(null,{declaredClass:"esri.layers.Domain",constructor:function(a){a&&c.isObject(a)&&(this.name=a.name,this.type=a.type);},toJson:function(){return d.fixJson({name:this.name,type:this.type});}});});},"esri/layers/CodedValueDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../lang","./Domain"],function(d,b,e,h,k,f,g){return d([g],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(a){a&&b.isObject(a)&&(this.codedValues=a.codedValues);},getName:function(a){var c;e.some(this.codedValues,function(b){b.code==a&&(c=b.name);return !!c;});return c;},toJson:function(){var a=this.inherited(arguments);a.codedValues=b.clone(this.codedValues);return f.fixJson(a);}});});},"esri/layers/FeatureType":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../lang","../symbols/jsonUtils","./RangeDomain","./CodedValueDomain","./InheritedDomain","./FeatureTemplate"],function(g,h,k,s,t,l,m,n,p,q,r){return g(null,{declaredClass:"esri.layers.FeatureType",constructor:function(a){if(a&&h.isObject(a)){this.id=a.id;this.name=a.name;var c=a.symbol;c&&(this.symbol=m.fromJson(c));var c=a.domains,b,e=this.domains={};for(b in c){if(c.hasOwnProperty(b)){var d=c[b];switch(d.type){case "range":e[b]=new n(d);break;case "codedValue":e[b]=new p(d);break;case "inherited":e[b]=new q(d);}}}if(b=a.templates){c=this.templates=[];for(a=0;a<b.length;a++){c.push(new r(b[a]));}}}},toJson:function(){var a={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},c,b=this.domains,e=this.templates,d=l.fixJson;if(b){var f=a.domains={};for(c in b){b.hasOwnProperty(c)&&(f[c]=b[c]&&b[c].toJson());}d(f);}e&&(a.templates=k.map(e,function(a){return a.toJson();}));return d(a);}});});},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(a,c,d,e,b){return a([b],{declaredClass:"esri.layers.InheritedDomain"});});},"esri/layers/FeatureTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang","../graphic"],function(b,c,f,g,d,e){b=b(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(a){a&&c.isObject(a)&&(this.name=a.name,this.description=a.description,this.drawingTool=a.drawingTool,a=a.prototype,this.prototype=new e(a.geometry,null,a.attributes));},toJson:function(){return d.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});c.mixin(b,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});return b;});},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,c,d,e){return b(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(a){a&&c.isObject(a)&&(this.objectId=a.objectId,this.success=a.success,a.success||(a=a.error,this.error=Error(),this.error.code=a.code,this.error.message=a.description));}});});},"esri/layers/LabelClass":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","../kernel","../lang","../symbols/TextSymbol","../symbols/ShieldLabelSymbol"],function(e,c,h,b,k,d,f,g){return e(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(a){if(a&&(c.mixin(this,a),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=d.valueOf(this._labelPlacementLookup,a.labelPlacement)),a.symbol&&(this.symbol="esriSHD"===a.symbol.type?new g(a.symbol):new f(a.symbol)),a=this.sizeInfo)){a.minSize&&(a.minSize=b.pt2px(a.minSize)),a.maxSize&&(a.maxSize=b.pt2px(a.maxSize));}},getSymbol:function(){return this.symbol;},toJson:function(){var a=this.sizeInfo;a&&(a=c.mixin({},a),a.minSize&&(a.minSize=b.px2pt(a.minSize)),a.maxSize&&(a.maxSize=b.px2pt(a.maxSize)));a={labelExpression:this.labelExpression,labelExpressionInfo:this.labelExpressionInfo&&c.clone(this.labelExpressionInfo),useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:a,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return d.fixJson(a);}});});},"esri/symbols/ShieldLabelSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","../kernel","../lang","../urlUtils","./MarkerSymbol","./Font"],function(c,f,k,e,q,l,m,n,p){var g={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};c=c(n,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:e.defaultFont,constructor:function(a,b,d,h,c){a?f.isString(a)?(this.url=a,b&&(this.color=b),d&&(this.width=d),h&&(this.height=h),void 0!==c&&(this.font=c)):(this.width=e.pt2px(a.width),this.height=e.pt2px(a.height),b=a.imageData,!(9>k("ie"))&&b&&(d=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+b,this.imageData=d)):f.mixin(this,g);},getStroke:function(){return null;},getFill:function(){return this.color;},setWidth:function(a){this.width=a;return this;},setHeight:function(a){this.height=a;return this;},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this;},setFont:function(a){this.font=a;return this;},setText:function(a){this.text=a;return this;},getWidth:function(){return this.width;},getHeight:function(){return this.height;},getShapeDescriptors:function(){return {defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null};},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:")){var d=a,a=b,b=d.indexOf(";base64,")+8,b=d.substr(b);}var a=m.getAbsoluteUrl(a),d=e.px2pt(this.width),d=isNaN(d)?void 0:d,c=e.px2pt(this.height),c=isNaN(c)?void 0:c,a=l.fixJson(f.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:b,contentType:this.contentType,width:d,height:c}));this.font?(b=new p(this.font),a.font=b.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a;}});c.defaultProps=g;return c;});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference","../tasks/query","./RenderMode"],function(l,e,q,r,m,n,p){return l([p],{declaredClass:"esri.layers._SnapshotMode",constructor:function(a){this.featureLayer=a;this.pagination=a.queryPagination;this._featureMap={};this._drawFeatures=e.hitch(this,this._drawFeatures);this._queryErrorHandler=e.hitch(this,this._queryErrorHandler);},startup:function(){this.pagination=this.pagination&&null!=this.featureLayer.maxRecordCount;this.featureLayer._collection?this._applyTimeFilter():this._fetchAll();},propertyChangeHandler:function(a){this._init&&(a?this.featureLayer._collection?undefined:this._fetchAll():this._applyTimeFilter());},drawFeature:function(a){var d=a.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(d,a);this._incRefCount(d);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var a=this.featureLayer;a._collection?(a._fireUpdateStart(),a._refresh(!0),a._fireUpdateEnd()):this._fetchAll();},_getRequestId:function(a){return ("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var a=this.featureLayer;!a._collection&&!a.suspended&&(a._fireUpdateStart(),this._clearIIf(),this._sendRequest());},_sendRequest:function(a){var d=this.map,b=this.featureLayer,g=b.getDefinitionExpression(),c=new n;c.outFields=b.getOutFields();c.where=g||"1=1";c.returnGeometry=!0;c.outSpatialReference=new m(d.spatialReference.toJson());c.timeExtent=b.getTimeDefinition();c.maxAllowableOffset=b._maxOffset;c.quantizationParameters=b._quantizationParameters;b._ts&&(c._ts=(new Date).getTime());c.orderByFields=b.supportsAdvancedQueries?b.getOrderByFields():null;c.multipatchOption=b.multipatchOption;this.pagination&&(this._start=c.start=null==a?0:a,c.num=b.maxRecordCount);var f;b._usePatch&&(f=this._getRequestId(b),this._cancelPendingRequest(null,f));b._task.execute(c,this._drawFeatures,this._queryErrorHandler,f);},_drawFeatures:function(a){this._purgeRequests();var d=a.features,b=this.featureLayer,g=b.objectIdField,c,f=d.length,e=a.exceededTransferLimit&&!b._collection,h,k;for(c=0;c<f;c++){h=d[c],k=h.attributes[g],this._addFeatureIIf(k,h),this._incRefCount(k);}this._applyTimeFilter(!0);if(!this.pagination||!e){b._fireUpdateEnd(null,a.exceededTransferLimit?{queryLimitExceeded:!0}:null);}e&&(this.pagination&&this._sendRequest(this._start+b.maxRecordCount),b.onQueryLimitExceeded());},_queryErrorHandler:function(a){this._purgeRequests();var d=this.featureLayer;d._errorHandler(a);d._fireUpdateEnd(a);}});});},"esri/layers/RenderMode":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","../kernel"],function(l,m,n,h,p,f,q){return m(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(l._scopeName||"dojo")+"IoScript";},initialize:function(a){this.map=a;this._init=!0;},startup:function(){},propertyChangeHandler:function(a){},destroy:function(){this._init=!1;},drawFeature:function(a){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(a){(a=this._featureMap[a])&&a._count++;},_decRefCount:function(a){(a=this._featureMap[a])&&a._count--;},_getFeature:function(a){return this._featureMap[a];},_addFeatureIIf:function(a,b){var c=this._featureMap,e=c[a],d=this.featureLayer;e||(c[a]=b,d._add(b),b._count=0);return e||b;},_removeFeatureIIf:function(a){var b=this._featureMap[a],c=this.featureLayer;if(b){if(b._count){return;}delete this._featureMap[a];c._remove(b);}return b;},_clearIIf:function(){var a;a=this.featureLayer;var b=a.graphics,c=a._selectedFeatures,e=a.objectIdField;for(a=b.length-1;0<=a;a--){var d=b[a],g=d.attributes[e];g in c?d._count=1:(d._count=0,this._removeFeatureIIf(g));}},_isPending:function(a){return f[this._prefix+a]?!0:!1;},_cancelPendingRequest:function(a,b){if(a=a||f[this._prefix+b]){try{a.cancel(),f._validCheck(a);}catch(c){}}},_purgeRequests:function(){f._validCheck(null);},_toggleVisibility:function(a){var b=this.featureLayer,c=b.graphics,e=a?"show":"hide",d,g=c.length;a=a&&b._ager;for(d=0;d<g;d++){var k=c[d];k[e]();a&&b._repaint(k);}},_applyTimeFilter:function(a){var b=this.featureLayer;if(b.timeInfo&&!b.suspended){a||b._fireUpdateStart();var c=b._trackManager;c&&c.clearTracks();var e=b.getTimeDefinition(),d=b._getOffsettedTE(b._mapTimeExtent);d?(d=b._getTimeOverlap(e,d))?(e=b._filterByTime(b.graphics,d.startTime,d.endTime),c&&c.addFeatures(e.match),h.forEach(e.match,function(a){var c=a._shape;a.visible||(a.show(),(c=a._shape)&&c._moveToFront());b._ager&&c&&b._repaint(a);}),h.forEach(e.noMatch,function(a){a.visible&&a.hide();})):this._toggleVisibility(!1):(c&&c.addFeatures(b.graphics),this._toggleVisibility(!0));c&&(c.moveLatestToFront(),c.drawTracks());a||b._fireUpdateEnd();}}});});},"esri/layers/OnDemandMode":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../geometry/Point","../tasks/query","./RenderMode","./GridLayout"],function(t,m,v,r,z,A,w,u,x,y){return t([x],{declaredClass:"esri.layers._OnDemandMode",constructor:function(b){this.featureLayer=b;this._featureMap={};this._queryErrorHandler=v.hitch(this,this._queryErrorHandler);},initialize:function(b){this.inherited(arguments);var a=this.featureLayer,c=a._srInfo;this._gridLayer=new y(new w(c?c.valid[0]:b.extent.xmin,b.extent.ymax,b.spatialReference),{width:a._tileWidth,height:a._tileHeight},{width:b.width,height:b.height},c);this._cellMap={};this._gridLayer.setResolution(b.extent);},startup:function(){this._ioQueue=[];this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors());},propertyChangeHandler:function(b){this._init&&(2>b?this._zoomHandler():undefined);},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(b){var a=this._gridLayer,c=b.geometry,e=[];if(c){for(var e=a.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells,a=this._cellMap,d,g=b.attributes[this.featureLayer.objectIdField],f,h,k,c=0;c<e.length;c++){d=e[c],f=d.latticeID,h=d.row,k=d.col,f?d=a[f]=a[f]||d:(a[h]=a[h]||{},d=a[h][k]=a[h][k]||d),d.features=d.features||[],d.features.push(b),this._addFeatureIIf(g,b),this._incRefCount(g);}}},suspend:function(){this._init&&this._disableConnectors();},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler());},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var b=this.map;this._zoomConnect=m.connect(b,"onZoomEnd",this,this._zoomHandler);this._panConnect=m.connect(b,"onPanEnd",this,this._panHandler);this._resizeConnect=m.connect(b,"onResize",this,this._panHandler);},_disableConnectors:function(){m.disconnect(this._zoomConnect);m.disconnect(this._panConnect);m.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(!0);var b=this.featureLayer,a=this.map;b.suspended||(b._fireUpdateStart(),this._clearIIf(),(b=b._trackManager)&&b.clearTracks(),this._cellMap={},this._gridLayer.setResolution(a.extent),this._sendRequest());},_panHandler:function(b){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&b);},_getRequestId:function(b,a){return ("_"+b.name+b.layerId+b._ulid+"_"+a.resolution+"_"+(a.latticeID||a.row+"_"+a.col)).replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(b){this._exceeds=!1;var a=this.featureLayer,c=this.map;b=b||c.extent;c=this._gridLayer.getCellsInExtent(b,a.latticeTiling).cells;if(!a.isEditable()){var e=this._cellMap,c=r.filter(c,function(a){if(a.lattice){if(e[a.latticeID]){return !1;}}else{if(e[a.row]&&e[a.row][a.col]){return !1;}}return !0;});}var d=a.getOutFields(),g=a.getDefinitionExpression(),f=a._getOffsettedTE(a._mapTimeExtent),h=a.supportsAdvancedQueries?a.getOrderByFields():null,k=a._usePatch,p=this._ioQueue,n,m=this,t=this._drawFeatures,q,l,s;this._pending=this._pending||0;for(n=0;n<c.length;n++){q=c[n];l=new u;l.geometry=q.extent||q.lattice;l.outFields=d;l.where=g;a.latticeTiling&&q.extent&&(l.spatialRelationship=u.SPATIAL_REL_CONTAINS);l.returnGeometry=!0;l.timeExtent=f;a._ts&&(l._ts=(new Date).getTime());l.orderByFields=h;l.multipatchOption=a.multipatchOption;l.maxAllowableOffset=a._maxOffset;l.quantizationParameters=a._quantizationParameters;s=null;if(k&&(s=this._getRequestId(a,q),this._isPending(s))){continue;}this._pending++;p.push(a._task.execute(l,function(){var a=q;return function(b){t.apply(m,[b,a]);};}.call(this),this._queryErrorHandler,s));}this._removeOldCells(b);this._endCheck();},_drawFeatures:function(b,a){this._exceeds=this._exceeds||b.exceededTransferLimit;this._finalizeIO();var c=this.map.extent,e=a.extent,d=a.row,g=a.col,f=this.featureLayer.objectIdField,h=b.features,k=this._gridLayer,p=this._cellMap,n=a.latticeID,m=n?p[n]:p[d]&&p[d][g];if(a.resolution!=k._resolution||(n?n!==k.getLatticeID(c):!k.intersects(e,c))){m&&this._removeCell(d,g,n);}else{if(m){this._updateCell(m,h);}else{a.features=h;n?p[n]=a:(p[d]=p[d]||{},p[d][g]=a);e=h.length;for(c=0;c<e;c++){d=h[c],g=d.attributes[f],this._addFeatureIIf(g,d),this._incRefCount(g);}}}this._endCheck();},_queryErrorHandler:function(b){this._finalizeIO();this.featureLayer._errorHandler(b);this._endCheck(!0);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(b){if(0===this._pending){this._processIOQueue();var a=this.featureLayer,c=a._trackManager;c&&(c.clearTracks(),c.addFeatures(a.graphics),a._ager&&r.forEach(a.graphics,function(b){b._shape&&a._repaint(b);}),c.moveLatestToFront(),c.drawTracks());this.featureLayer._fireUpdateEnd(b&&Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds){a.onQueryLimitExceeded();}}},_processIOQueue:function(b){this._ioQueue=r.filter(this._ioQueue,function(a){return -1<a.fired?!1:!0;});b&&r.forEach(this._ioQueue,this._cancelPendingRequest);},_removeOldCells:function(b){var a=this._cellMap,c=this._gridLayer,e,d;for(e in a){if(a[e]){var g=a[e],f=g.latticeID,h=0,k=0;if(f){h++,f!==c.getLatticeID(b)&&(this._removeCell(null,null,f),k++);}else{for(d in g){g[d]&&(h++,c.intersects(g[d].extent,b)||(this._removeCell(e,d),k++));}}k===h&&delete a[e];}}},_updateCell:function(b,a){var c=this.featureLayer,e=c.objectIdField,c=c._selectedFeatures,d,g=a.length;b.features=b.features||[];for(d=0;d<g;d++){var f=a[d],h=f.attributes[e],k=this._addFeatureIIf(h,f);k===f?(this._incRefCount(h),b.features.push(k)):h in c||(k.setGeometry(f.geometry),k.setAttributes(f.attributes));}},_removeCell:function(b,a,c){var e=this._cellMap,d=this.featureLayer,g=d.objectIdField,f=c?e[c]:e[b]&&e[b][a];if(f){c?delete e[c]:delete e[b][a];b=f.features;for(a=0;a<b.length;a++){c=b[a].attributes[g],this._decRefCount(c),c in d._selectedFeatures||this._removeFeatureIIf(c);}}}});});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../SpatialReference","../geometry/Extent","../geometry/Polyline"],function(t,y,u,z,A,v,w,x){return t(null,{declaredClass:"esri.layers._GridLayout",constructor:function(a,d,b,e){this.origin=a;this.cellWidth=d.width;this.cellHeight=d.height;this.mapWidth=b.width;this.mapHeight=b.height;this.srInfo=e;},setResolution:function(a){this._resolution=(a.xmax-a.xmin)/this.mapWidth;this.srInfo&&(a=Math.round(2*this.srInfo.valid[1]/this._resolution),a=Math.round(a/this.cellWidth),this._frameStats=[a,0,a-1]);},getCellCoordinates:function(a){var d=this._resolution,b=this.origin;return {row:Math.floor((b.y-a.y)/(this.cellHeight*d)),col:Math.floor((a.x-b.x)/(this.cellWidth*d))};},normalize:function(a){var d=this._frameStats;if(d){var b=d[0],e=d[1],d=d[2];a<e?(a%=b,a=a<e?a+b:a):a>d&&(a%=b);}return a;},intersects:function(a,d){var b=this.srInfo;return b?u.some(d._getParts(b),function(b){return a.intersects(b.extent);}):a.intersects(d);},getCellExtent:function(a,d){var b=this._resolution,e=this.origin,k=this.cellWidth,l=this.cellHeight;return new w(d*k*b+e.x,e.y-(a+1)*l*b,(d+1)*k*b+e.x,e.y-a*l*b,new v(e.spatialReference.toJson()));},getLatticeID:function(a){var d=this.getCellCoordinates({x:a.xmin,y:a.ymax}),b=this.getCellCoordinates({x:a.xmax,y:a.ymin});a=d.row;var e=b.row,d=this.normalize(d.col),b=this.normalize(b.col);return a+"_"+e+"_"+d+"_"+b;},sorter:function(a,d){return a<d?-1:1;},getCellsInExtent:function(a,d){var b=this.getCellCoordinates({x:a.xmin,y:a.ymax}),e=this.getCellCoordinates({x:a.xmax,y:a.ymin}),k=b.row,l=e.row,b=b.col,e=e.col,n=[],c,f,m,g=[],h=[],q,r,s,p=[];for(c=k;c<=l;c++){for(f=b;f<=e;f++){m=this.normalize(f),a=this.getCellExtent(c,m),n.push({row:c,col:m,extent:a,resolution:this._resolution}),d&&(g.push(a.xmin,a.xmax),h.push(a.ymin,a.ymax));}}b=this.normalize(b);e=this.normalize(e);g.sort(this.sorter);h.sort(this.sorter);f=g.length;for(c=f-1;0<=c;c--){c<f-1&&g[c]===g[c+1]&&g.splice(c,1);}f=h.length;for(c=f-1;0<=c;c--){c<f-1&&h[c]===h[c+1]&&h.splice(c,1);}if(g.length&&h.length){m=g[0];q=g[g.length-1];r=h[0];s=h[h.length-1];f=g.length;for(c=0;c<f;c++){p.push([[g[c],s],[g[c],r]]);}f=h.length;for(c=0;c<f;c++){p.push([[m,h[c]],[q,h[c]]]);}c=new x({paths:p,spatialReference:this.origin.spatialReference.toJson()});n.push({latticeID:k+"_"+l+"_"+b+"_"+e,lattice:c,resolution:this._resolution});}return {minRow:k,maxRow:l,minCol:b,maxCol:e,cells:n};}});});},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(b,d,e,f,c){return b([c],{declaredClass:"esri.layers._SelectionMode",constructor:function(a){this.featureLayer=a;this._featureMap={};},propertyChangeHandler:function(a){this._init&&0===a&&this._applyTimeFilter();},resume:function(){this.propertyChangeHandler(0);}});});},"esri/layers/StreamMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../SpatialReference","../tasks/query","../tasks/QueryTask","../geometry/jsonUtils","./RenderMode"],function(n,m,k,u,v,p,q,r,s,t){return n([t],{declaredClass:"esri.layers._StreamMode",constructor:function(a,b){this.featureLayer=a;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=m.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._drawFeatures=m.hitch(this,this._drawFeatures);this._queryErrorHandler=m.hitch(this,this._queryErrorHandler);},startup:function(){},propertyChangeHandler:function(a){this._init&&(0===a?this._applyTimeFilter():3===a?this._redrawAllTracks():undefined);},drawFeature:function(a){var b=this.featureLayer,c=b.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));b._joinField&&this._getFeature(a.attributes[c])?this._drawBuffer.updates.push({oid:a.attributes[c],updates:a}):this._drawBuffer.adds.push(a);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var a=this.featureLayer;a&&(a._fireUpdateStart(),this._flushDrawBuffer());},_drawFeatures:function(a){this._purgeRequests();var b=this.featureLayer;b._create(a.features||[]);b._fireUpdateEnd(null,null);},_applyTimeFilter:function(a){this.inherited(arguments);this._redrawAllTracks();},_removeFeatures:function(a){var b=this.featureLayer,c=b.objectIdField;a&&k.forEach(a,function(a){a=a.attributes[c];b._unSelectFeatureIIf(a,this);this._decRefCount(a);this._removeFeatureIIf(a);},this);},_addFeatures:function(a){var b=this.featureLayer,c=b._endTimeField,f,d,e,g=[],h=[],l=[];f=b._trackManager;d=b.objectIdField;if(f){for(e in a=f.addFeatures(a),a){a.hasOwnProperty(e)&&(g.push(e),a[e].adds&&(h=h.concat(a[e].adds)),a[e].deletes&&(l=l.concat(a[e].deletes)));}}else{h=a;}k.forEach(h,function(a){var b=a.attributes[d],e;if(e=c&&a.attributes[c]){e=1000*Math.ceil(e/1000),this._featuresByTime[e]?this._featuresByTime[e].push(b):this._featuresByTime[e]=[b];}this._addFeatureIIf(b,a);this._incRefCount(b);},this);l.length&&this._removeFeatures(l);f&&f.refreshTracks(g);},_updateFeatures:function(a){var b=this.featureLayer,c,f,d=[];c=b._trackManager;f=b._trackIdField;k.forEach(a,function(a){var g=a.updates;a=this._getFeature(a.oid);var h;if(a){g.geometry&&a.setGeometry(g.geometry);g=g.attributes||{};for(h in g){g.hasOwnProperty(h)&&(a.attributes[h]=g[h]);}a.visible=this._checkFeatureTimeIntersects(a);c&&a.attributes[f]?d.push(a.attributes[f]):b._repaint(a,null,!0);}},this);d.length&&c.refreshTracks(d);},_redrawAllTracks:function(){var a=this.featureLayer._trackManager,b;if(a&&(b=a.trimTracks())&&0<b.length){this._removeFeatures(b),a.refreshTracks();}},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var a=this._drawBuffer,b=a.adds.splice(0,a.adds.length),c=a.updates.splice(0,a.updates.length),a=this.featureLayer;if(!a){return !1;}a.updating||a._fireUpdateStart();this._addFeatures(b);this._updateFeatures(c);if((b=this._getExpiredFeatures())&&b.length){this._removeFeatures(b),a._trackManager&&a._trackManager.removeFeatures(b);}a._purge();a._fireUpdateEnd();this._timeoutId=null;},_clearDrawBuffer:function(){var a=this._timeoutId,b=this._drawBuffer,c=b.adds,b=b.updates;a&&clearTimeout(a);c.splice(0,c.length);b.splice(0,b.length);this._timeoutId=null;},_setRefreshRate:function(a){a=a||0===a?a:200;0>a&&(a=200);this._refreshRate=a;},_checkFeatureTimeIntersects:function(a){var b=this.featureLayer,c=b.getMap().timeExtent;return !c||!b.timeInfo||!b.timeInfo.startTimeField&&!b.timeInfo.endTimeField?!0:0<b._filterByTime([a],c.startTime,c.endTime).match.length;},_getRequestId:function(a){return ("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchArchive:function(a){var b=this.featureLayer,c,f,d,e,g,h;b._fireUpdateStart();if(a){a=new r(a),c=new q,f=this.map,d=b.getFilter()||{},e=d.where||"1=1",g=d.geometry?s.fromJson(d.geometry):null,d=d.outFields?d.outFields.split(","):["*"],c.geometry=g,c.where=e,c.outFields=d,c.returnGeometry=!0,c.outSpatialReference=new p(f.spatialReference.toJson()),b._usePatch&&(h=this._getRequestId(b),this._cancelPendingRequest(null,h)),a.execute(c,this._drawFeatures,this._queryErrorHandler,h);}else{return this._fireUpdateEnd({error:"No url provided"}),!1;}},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a);},_getExpiredFeatures:function(){var a,b,c,f=[],d=[];if(!this.featureLayer._endTimeField){return d;}a=1000*Math.floor(this._lastEndTimeCheck/1000);this._lastEndTimeCheck=b=1000*Math.ceil(Date.now()/1000);if(a&&a!==b){for(c=this._featuresByTime;a<=b;a+=1000){c[a]&&(f=f.concat(c[a]),delete c[a]);}}k.forEach(f,function(a){(a=this._getFeature(a))&&d.push(a);},this);return d;}});});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../graphic","../geometry/Polyline","./GraphicsLayer"],function(m,r,d,s,t,n,p,q){return m(null,{declaredClass:"esri.layers._TrackManager",constructor:function(a){this.layer=a;this.trackMap={};this.trackLineMap={};},initialize:function(a){this.map=a;var c=this.layer,b=c._getRenderer(),b=b&&b.trackRenderer;if("esriGeometryPoint"===c.geometryType){var e=this.container=new q._GraphicsLayer({id:c.id+"_tracks",_child:!0});e.loaded=!0;e.onLoad(e);e._setMap(a,c._div);e.setRenderer(b);}},addFeatures:function(a){var c=this.trackMap,b=this.layer,e=b._trackIdField,f=[];d.forEach(a,function(a){var b=a.attributes[e];(c[b]=c[b]||[]).push(a);-1===d.indexOf(f,b)&&f.push(b);});var g=b._startTimeField,k=b.objectIdField,h=function(b,a){var c=b.attributes[g],f=a.attributes[g];return c===f?b.attributes[k]<a.attributes[k]?-1:1:c<f?-1:1;};d.forEach(f,function(b){c[b].sort(h);});},trimTracks:function(a){function c(a){for(a=b[a]||[];a.length>e;){f.push(a.shift());}};var b=this.trackMap,e=this.layer.maximumTrackPoints||0,f=[],g;if(!e){return f;}if(a){d.forEach(a,function(a){c(a);});}else{for(g in b){b.hasOwnProperty(g)&&c(g);}}return f;},drawTracks:function(a){function c(a){var c=f[a],h,d,l;d=b.trackLineMap[a];e.remove(d);delete b.trackLineMap[a];if(!c||2>c.length){return !1;}d=[];for(h=c.length-1;0<=h;h--){(l=c[h].geometry)&&d.push([l.x,l.y]);}c={};c[k]=a;1<d.length&&(d=new n(new p({paths:[d],spatialReference:g}),null,c),e.add(d),b.trackLineMap[a]=d);};var b=this,e=this.container,f,g,k,h;if(e){if(f=this.trackMap,g=this.map.spatialReference,k=this.layer._trackIdField,a){d.forEach(a,function(a){c(a);});}else{for(h in f){f.hasOwnProperty(h)&&c(h);}}}},refreshTracks:function(a){function c(a){var c,d;b.drawTracks([a]);if(g&&g.latestObservationRenderer){a=e[a]||[];c=a.length;for(d=0;d<c;d++){f._repaint(a[d],null,!0);}}};var b=this,e=this.trackMap,f=this.layer,g=f._getRenderer(),k;if(a){d.forEach(a,function(a){c(a);});}else{for(k in e){e.hasOwnProperty(k)&&c(k);}}this.moveLatestToFront();},moveLatestToFront:function(a){d.forEach(this.getLatestObservations(a),function(a){var b=a._shape;b&&b._moveToFront();this._repaint(a,null,!0);},this.layer);},getLatestObservations:function(a){function c(a){a=f[a];return a[a.length-1];};var b=[],e=this.layer._getRenderer(),f=this.trackMap,g;if(!e.latestObservationRenderer){return b;}if(a){d.forEach(a,function(a){b.push(c(a));});}else{for(g in f){f.hasOwnProperty(g)&&b.push(c(g));}}return b;},clearTracks:function(a){var c=this.getLatestObservations(a),b=this.container,e;a?d.forEach(a,function(a){delete this.trackMap[a];b&&(e=this.trackLineMap[a],b.remove(e),delete this.trackLineMap[a]);},this):(this.trackMap={},this.trackLineMap={},b&&b.clear());d.forEach(c,function(a){this._repaint(a,null,!0);},this.layer);},isLatestObservation:function(a){var c=this.trackMap[a.attributes[this.layer._trackIdField]];return c?c[c.length-1]===a:!1;},destroy:function(){var a=this.container;a&&(a.clear(),a._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null;}});});},"esri/layers/HeatmapManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/aspect","dojo/_base/array","require","../kernel","../sniff","../geometry/Point","./MapImageLayer","./MapImage","./FeatureLayer","../renderers/HeatmapRenderer","../tasks/query"],function(s,r,D,t,u,v,E,F,w,x,y,z,q,A){function B(){};function C(b){var a=b.layer;return {geometry:b.geometry,attributes:b.attributes,getLayer:function(){return a;}};};return s(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(b){this.sourceLayer=b;this._hndls=[];},initialize:function(b){this.map=b;var a=this.sourceLayer,c=a.renderer;a.setDrawMode(!1);var a=this.imageLayer=new x({className:"heatmapImgLyr"}),d=this;this.heatmapRenderer=c instanceof q?c:(c.getRendererInfoByZoom(b.getZoom())||c.getRendererInfoByScale(b.getScale())).renderer;this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);b.addLayer(a);v(["../workers/heatmapCalculator"],function(a){d._calculator=new a(r.mixin({width:d.map.width,height:d.map.height},d._getOptions()));d._setupRenderer();d.heatmapRenderer.getStats=function(a){return d._calculator.calculateStats(a||1);};d.heatmapRenderer.getHistogramData=function(a,b){return d._calculator.getHistogramData(a,b);};});},destroy:function(){this._removeHandlers();this.map.removeLayer(this.imageLayer);this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null;},_handleRendererChange:function(b){var a=b.renderer,c=a instanceof q;this.heatmapRenderer?c?this.heatmapRenderer=a:this._removeRenderer(b):c&&(this.heatmapRenderer=a,this.sourceLayer&&this.map&&this._setupRenderer());},_setupRenderer:function(){var b=this._hndls,a=this.sourceLayer,c=this.map,d=this;a._originalDraw=a._draw;a._draw=B;a._div.clear();setTimeout(this._resetGraphics.bind(this),250);b.push(a.on("update-end",function(a){d.recalculateHeatmap();}));b.push(a.on("suspend",function(a){d.imageLayer.suspend();}));b.push(a.on("resume",function(a){d.imageLayer.resume();}));b.push(t.after(a,"redraw",this.recalculateHeatmap));b.push(c.on("layer-remove",function(b){b.layer==a&&(c.removeLayer(d.imageLayer),d._removeRenderer({target:a}));}));a.mode!==z.MODE_ONDEMAND&&(b.push(c.on("resize, pan-end",function(a){setTimeout(d.recalculateHeatmap,16);})),b.push(c.on("zoom-end",function(b){setTimeout(function(){a._getRenderer().isInstanceOf(q)&&d.recalculateHeatmap();},16);})));this.imageLayer.suspended&&this.imageLayer.resume();a.graphics&&a.graphics.length&&this.recalculateHeatmap();},_removeRenderer:function(b){var a=b.target;a._draw=a._originalDraw;delete a._originalDraw;a.setDrawMode(!0);this._removeHandlers();this._hndls=[];a.renderer!=b.renderer&&a.renderer.getRendererInfo?(this.heatmapRenderer=null,this.imageLayer.suspend()):(a.redraw(),this.destroy());},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation();},_doWorkerCalculation:function(){},_doMainCalculation:function(){var b=this.sourceLayer,a=this.imageLayer,c=this.map,d=this.heatmapRenderer,g=this.map.extent,n=this.map.width,f=this.map.height,h=this._calculator,l=this,k=function(e){e=l._getScreenPoints(e.features,c,b);e=h.calculateImageData(r.mixin({screenPoints:e,mapinfo:{extent:[g.xmin,g.ymin,g.xmax,g.ymax],resolution:c.getResolution()},width:n,height:f},l._getOptions()));e=d.getSymbol(C({geometry:c.extent,attributes:{size:[n,f],imageData:e},layer:b}));e=new y({extent:c.extent,href:e.url});a.addImage(e);setTimeout(function(){var b=a._mapImages.slice(0,-1),c=b.length;if(1000<c){b=a._mapImages[c],a.removeAllImages(),a.addImage(b);}else{for(;c--&&b[c];){a.removeImage(b[c]);}}},250);},p={geometry:c.extent,timeExtent:c.timeExtent,spatialRelationship:A.SPATIAL_REL_INTERSECTS};null!=b._canDoClientSideQuery(p)?b.queryFeatures(p,k):k({features:b.graphics});},_getScreenPoints:function(b,a,c){var d=[],g=b.length,n=0,f=0,h,l=new w(a.extent.xmin,a.extent.ymax,a.spatialReference),k=a.toScreen(l),p=k.x,k=k.y,e=a.getResolution(),m;for(a.extent._parts&&(m=u.map(a.extent._parts,function(b){return c._intersects(a,b.extent)[0];}));g--;){f=b[g],f.geometry&&(h={x:Math.ceil((f.geometry.x-l.x)/e+p),y:Math.floor((l.y-f.geometry.y)/e-k),attributes:f.attributes},m&&(f=1<m.length&&h.x<-m[0]?m[1]:m[0],h.x+=f),d[n++]=h);}return d;},_removeHandlers:function(){for(var b=this._hndls.length;b--;){this._hndls[b].remove();}},_getOptions:function(){var b=this.heatmapRenderer;return {blurRadius:b.blurRadius,gradient:b.gradient,maxPixelIntensity:b.maxPixelIntensity,minPixelIntensity:b.minPixelIntensity,field:b.field};},_resetGraphics:function(){for(var b=this.sourceLayer.graphics,a=b.length,c;a--;){c=b[a],c._shape=c._offsets=void 0;}}});});},"esri/layers/MapImageLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-style","../kernel","../config","../sniff","../domUtils","../geometry/Point","../geometry/webMercatorUtils","./layer"],function(u,l,v,w,n,f,k,x,m,s,t,p,y){var r=u([y],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(b){this.inherited(arguments,[null,b]);this._mapImages=[];var a=v.hitch;this._panStart=a(this,this._panStart);this._pan=a(this,this._pan);this._extentChange=a(this,this._extentChange);this._zoom=a(this,this._zoom);this._zoomStart=a(this,this._zoomStart);this._scale=a(this,this._scale);this._resize=a(this,this._resize);l.connect(this,"onSuspend",this,this._onSuspend);l.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this);},opacity:1,addImage:function(b){var a=this._mapImages.push(b),a=a-1;b._idx=a;b._layer=this;this._div&&this._createImage(b,a);},removeImage:function(b){if(b){var a=b._idx,c=this._mapImages;if(c[a]===b){delete c[a];if(a=b._node){this._clearEvents(a),a.e_idx=a.e_bl=a.e_tr=a.e_l=a.e_t=a.e_w=a.e_h=null,a.parentNode&&(a.parentNode.removeChild(a),n.destroy(a));}b._node=b._idx=b._layer=null;}}},removeAllImages:function(){var b=this._mapImages,a,c=b.length;for(a=0;a<c;a++){var d=b[a];d&&this.removeImage(d);}this._mapImages=[];},getImages:function(){var b=this._mapImages,a=[],c,d=b.length;for(c=0;c<d;c++){b[c]&&a.push(b[c]);}return a;},setOpacity:function(b){this.opacity!=b&&(this._opacityChanged(this.opacity=b),this.onOpacityChange());},onOpacityChange:function(){},_opacityChanged:function(b){var a=this._div,c,d;if(a){if(!m("ie")||8<m("ie")){f.set(a,"opacity",b);}else{d=a.childNodes;c=d.length;for(a=0;a<c;a++){f.set(d[a],"opacity",b);}}}},_createImage:function(b,a){var c=n.create("img");f.set(c,{position:"absolute"});8>=m("ie")&&f.set(c,"opacity",this.opacity);b.rotation&&!(9>m("ie"))&&f.set(c,k._css.names.transform,k._css.rotate(360-b.rotation));b._node=c;c.e_idx=a;c.e_layer=this;c.e_load=l.connect(c,"onload",r.prototype._imageLoaded);c.e_error=l.connect(c,"onerror",r.prototype._imageError);c.e_abort=l.connect(c,"onabort",r.prototype._imageError);c.src=b.href;},_imageLoaded:function(b,a){var c=a||b.target||b.currentTarget,d=c.e_layer,e=d._mapImages[c.e_idx],g=d._map;g&&(g.__zooming||g.__panning||!d._sr)?d._standby.push(c):(d._clearEvents(c),e&&e._node===c&&g&&d._attach(e));},_imageError:function(b){b=b.target||b.currentTarget;var a=b.e_layer,c=a._mapImages[b.e_idx];a._clearEvents(b);c&&(c._node=null);},_clearEvents:function(b){var a=l.disconnect;a(b.e_load);a(b.e_error);a(b.e_abort);b.e_load=b.e_error=b.e_abort=b.e_layer=null;},_attach:function(b){var a=b.extent,c=a.spatialReference,d=this._sr,e=this._div,g=b._node,f=new t({x:a.xmin,y:a.ymin,spatialReference:c}),a=new t({x:a.xmax,y:a.ymax,spatialReference:c});d.equals(c)||(d.isWebMercator()&&4326===c.wkid?(f=p.geographicToWebMercator(f),a=p.geographicToWebMercator(a)):c.isWebMercator()&&4326===d.wkid&&(f=p.webMercatorToGeographic(f),a=p.webMercatorToGeographic(a)));g.e_bl=f;g.e_tr=a;b.visible&&(this._setPos(g,e._left,e._top),(this._active||e).appendChild(g));},_setPos:function(b,a,c){var d=b.e_bl,e=b.e_tr,g=this._map,d=g.toScreen(d),e=g.toScreen(e);a=d.x-a;c=e.y-c;var q=Math.abs(e.x-d.x),d=Math.abs(d.y-e.y),e={width:q+"px",height:d+"px"},h=this._mapImages[b.e_idx];"css-transforms"===g.navigationMode?e[k._css.names.transform]=k._css.translate(a,c)+(h.rotation?" "+k._css.rotate(360-h.rotation):""):(e.left=a+"px",e.top=c+"px");f.set(b,e);b.e_l=a;b.e_t=c;b.e_w=q;b.e_h=d;},managedSuspension:!0,_setMap:function(b,a){this.inherited(arguments);var c=this._div=n.create("div",null,a),d=k._css.names,e={position:"absolute"},g=b.__visibleDelta;if(!m("ie")||8<m("ie")){e.opacity=this.opacity;}"css-transforms"===b.navigationMode?(e[d.transform]=k._css.translate(g.x,g.y),f.set(c,e),c._left=g.x,c._top=g.y,e={position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible"},this._active=n.create("div",null,c),f.set(this._active,e),this._passive=n.create("div",null,c),f.set(this._passive,e)):(c._left=0,c._top=0,f.set(c,e));this._standby=[];d=this._mapImages;g=d.length;for(e=0;e<g;e++){var q=d[e];q._node||this._createImage(q,q._idx);}s.hide(c);return c;},_unsetMap:function(b,a){this._disconnect();var c=this._div;if(c){var d=this._mapImages,e,g=d.length;for(e=0;e<g;e++){var f=d[e];if(f){var h=f._node;h&&(this._clearEvents(h),h.e_idx=h.e_bl=h.e_tr=h.e_l=h.e_t=h.e_w=h.e_h=null);f._node=null;}}a.removeChild(c);n.destroy(c);}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments);},_onSuspend:function(){this._disconnect();s.hide(this._div);},_onResume:function(b){b.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());b=this._map;var a=this._div,c=b.__visibleDelta;"css-transforms"===b.navigationMode&&(a._left=c.x,a._top=c.y,f.set(a,k._css.names.transform,k._css.translate(a._left,a._top)));this._redraw("css-transforms"===b.navigationMode);this._connect(b);s.show(a);},_connect:function(b){if(!this._connections){var a=l.connect,c="css-transforms"===b.navigationMode;this._connections=[a(b,"onPanStart",this._panStart),a(b,"onPan",this._pan),a(b,"onExtentChange",this._extentChange),c&&a(b,"onZoomStart",this._zoomStart),c?a(b,"onScale",this._scale):a(b,"onZoom",this._zoom),c&&a(b,"onResize",this._resize)];}},_disconnect:function(){this._connections&&(w.forEach(this._connections,l.disconnect),this._connections=null);},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top;},_pan:function(b,a){var c=this._div;c._left=this._panL+a.x;c._top=this._panT+a.y;"css-transforms"===this._map.navigationMode?f.set(c,k._css.names.transform,k._css.translate(c._left,c._top)):f.set(c,{left:c._left+"px",top:c._top+"px"});},_extentChange:function(b,a,c){c?this._redraw("css-transforms"===this._map.navigationMode):a&&this._pan(b,a);this._processStandbyList();},_processStandbyList:function(){var b,a=this._standby;if(a&&a.length){for(b=a.length-1;0<=b;b--){this._imageLoaded(null,a[b]),a.splice(b,1);}}},_redraw:function(b){if(b){b=this._passive;var a=k._css.names;f.set(b,a.transition,"none");this._moveImages(b,this._active);f.set(b,a.transform,"none");}b=this._active||this._div;var a=this._div._left,c=this._div._top,d,e=b.childNodes.length,g;for(d=0;d<e;d++){g=b.childNodes[d],this._setPos(g,a,c);}},_zoom:function(b,a,c){b=this._div;var d=b._left,e=b._top,g,k=b.childNodes.length,h;for(g=0;g<k;g++){h=b.childNodes[g];var l=h.e_w*a,n=h.e_h*a,m=(c.x-d-h.e_l)*(l-h.e_w)/h.e_w,p=(c.y-e-h.e_t)*(n-h.e_h)/h.e_h,m=isNaN(m)?0:m,p=isNaN(p)?0:p;f.set(h,{left:h.e_l-m+"px",top:h.e_t-p+"px",width:l+"px",height:n+"px"});}},_zoomStart:function(){this._moveImages(this._active,this._passive);},_moveImages:function(b,a){var c=b.childNodes,d;d=c.length;if(0<d){for(d-=1;0<=d;d--){a.appendChild(c[d]);}}},_scale:function(b,a){var c=k._css.names,d=this._passive;f.set(d,c.transition,a?"none":c.transformName+" "+x.defaults.map.zoomDuration+"ms ease");k._css.matrix(b);f.set(d,c.transform,k._css.matrix(b));},_resize:function(b,a,c){f.set(this._active,{width:a+"px",height:c+"px"});f.set(this._passive,{width:a+"px",height:c+"px"});}});return r;});},"esri/layers/MapImage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../domUtils","../geometry/Extent"],function(e,f,h,k,d,g){return e(null,{declaredClass:"esri.layers.MapImage",constructor:function(a){f.mixin(this,a);this.extent=new g(this.extent);},visible:!0,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=!0;var a=this._node,b=this._layer,c;if(a){if(c=b&&b._div){b.suspended||b._setPos(a,c._left,c._top),(b._active||c).appendChild(a);}d.show(a);}}},hide:function(){if(this.visible){this.visible=!1;var a=this._node;a&&(d.hide(a),a.parentNode&&a.parentNode.removeChild(a));}}});});},"esri/dijit/Attribution":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","../kernel","../lang","../SpatialReference","../geometry/webMercatorUtils","../geometry/Extent"],function(w,l,h,q,x,C,D,y,s,t,r,k,u,E,v,z,A,B){return w(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(d,b){try{l.mixin(this,d);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];var a=this.domNode=y.byId(b),c=this.map,e="<span class='"+this.listClass+"'></span>";a&&(s.set(a,"innerHTML",e),this.listNode=x.query(".esriAttributionList",a)[0],this.itemNodes={});this._eventConnections=[q.connect(c,"onLayerAdd",this,this._onLayerAdd),q.connect(c,"onLayerRemove",this,this._onLayerRemove),q.connect(c,"onLayerSuspend",this,this._onLayerSuspend),q.connect(c,"onLayerResume",this,this._onLayerResume),q.connect(c,"onExtentChange",this,this._onExtentChange)];if(c.loaded){var f=c.layerIds.concat(c.graphicsLayerIds),g,n,p=f.length;for(n=0;n<p;n++){g=c.getLayer(f[n]),g.loaded&&this._onLayerAdd(g);}}}catch(h){}},startup:function(){},destroy:function(){h.forEach(this._eventConnections,q.disconnect);t.destroy(this.listNode);this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=null;},_onLayerAdd:function(d){try{var b=this._attributions,a=d.id;if(!v.isDefined(b[a])&&d.showAttribution){if(d.hasAttributionData){var c=d.getAttributionData();this._pendingDfds[a]=1;b[a]=c;c.addBoth(l.partial(this._onAttributionLoad,this,d));}else{b[a]=d.copyright||d.copyrightText||"",b[a]?(d.suspended||this._activeLayers.push(a),this._createNode(a)):this._onLayerRemove(d);}}}catch(e){}},_onAttributionLoad:function(d,b,a){var c=d._attributions,e=d._pendingDfds,f=b.id;if(e&&e[f]){delete e[f];if(!a||a instanceof Error){a="";}c[f]=a?d._createIndexByLevel(a,-1!==b.declaredClass.toLowerCase().indexOf("vetiledlayer")):b.copyright||b.copyrightText||"";c[f]?(b.suspended||d._activeLayers.push(f),d._createNode(f)):d._onLayerRemove(b);}},_onLayerRemove:function(d){try{var b=d.id,a=this.itemNodes,c,e=-1;this._onLayerSuspend(d);delete this._attributions[b];delete this._pendingDfds[b];c=this._getGroupIndex(b);-1!==c&&(e=h.indexOf(this._sharedLayers[c],b),-1!==e&&(this._sharedLayers[c].splice(e,1),1>=this._sharedLayers[c].length&&this._sharedLayers.splice(c,1)));a[b]&&-1===e&&t.destroy(a[b]);delete a[b];this._updateLastItem();}catch(f){}},_onLayerSuspend:function(d){try{var b=d.id;if(this._attributions[b]){var a=h.indexOf(this._activeLayers,b),c=this.itemNodes[b];-1!==a&&this._activeLayers.splice(a,1);c&&this._toggleItem(c,!1,this._getGroupIndex(b));}}catch(e){}},_onLayerResume:function(d){try{var b=d.id,a=this._attributions[b],c=this.itemNodes[b];if(a&&(-1===h.indexOf(this._activeLayers,b)&&this._activeLayers.push(b),c)){var e=l.isString(a)?a:this._getContributorsList(a,this.map.extent,this.map.getLevel());l.isString(a)||s.set(c,"innerHTML",e?e+this._getDelimiter():"");e&&this._toggleItem(c,!0,this._getGroupIndex(b));}}catch(f){}},_onExtentChange:function(d,b,a,c){try{var e=this._activeLayers,f=this._attributions,g=this.itemNodes,n,p,h,k,q=e.length||0;for(k=0;k<q;k++){if(p=e[k],h=f[p],(n=g[p])&&!l.isString(h)){var m=this._getContributorsList(h,d,c?c.level:-1);s.set(n,"innerHTML",m?m+this._getDelimiter():"");this._toggleItem(n,!!m,-1);}}}catch(r){}this._adjustCursorStyle();},_createNode:function(d){if(this.domNode){var b=this._checkShareInfo(d),a=b&&b.sharedWith,a=a&&this.itemNodes[a],c=this.map,e=this._attributions[d],e=l.isString(e)?e:this._getContributorsList(e,c.extent,c.getLevel()),c=!!e&&!c.getLayer(d).suspended;a?(this.itemNodes[d]=a,this._toggleItem(a,c,b.index)):(d=this.itemNodes[d]=t.create("span",{"class":this.itemClass,innerHTML:e?e+this._getDelimiter():"",style:{display:c?"inline":"none"}},this.listNode),c&&this._setLastItem(d));this._adjustCursorStyle();}},_checkShareInfo:function(d){var b=this._attributions,a,c,e=-1,f=b[d],g;if(f&&l.isString(f)){for(c in b){if(a=b[c],c!==d&&a&&l.isString(a)&&a.length===f.length&&a.toLowerCase()===f.toLowerCase()){g=c;break;}}b=this._sharedLayers;a=b.length;if(g){for(c=0;c<a;c++){if(f=b[c],-1!==h.indexOf(f,g)){e=c;f.push(d);break;}}-1===e&&(e=b.push([g,d])-1);}}return -1<e?{index:e,sharedWith:g}:null;},_getGroupIndex:function(d){var b=this._sharedLayers,a,c=b.length,e=-1;for(a=0;a<c;a++){if(-1!==h.indexOf(b[a],d)){e=a;break;}}return e;},_getDelimiter:function(){var d=this.itemDelimiter;return d?"<span class='"+this.delimiterClass+"'>"+d+"</span>":"";},_toggleItem:function(d,b,a){if(-1<a&&!b){a=this._sharedLayers[a];var c,e=a.length,f=this._activeLayers;for(c=0;c<e;c++){if(-1!==h.indexOf(f,a[c])){return;}}}r.set(d,"display",b?"inline":"none");this._updateLastItem();},_updateLastItem:function(){var d=this.listNode.childNodes,b;b=d.length;var a;if(b){for(b-=1;0<=b;b--){if(a=d[b],"none"!==r.get(a,"display")){this._setLastItem(a);break;}}}this._adjustCursorStyle();},_setLastItem:function(d){var b=this.itemClass,a=this.lastItemClass;this._lastItem&&k.replace(this._lastItem,b,a);d&&(k.replace(d,a,b),this._lastItem=d);},_createIndexByLevel:function(d,b){var a=d.contributors,c,e,f,g,n=a?a.length:0,p,h,k=new z(4326),l={},m;for(g=0;g<n;g++){c=a[g];h=(e=c.coverageAreas)?e.length:0;for(p=0;p<h;p++){f=e[p];m=f.bbox;m={extent:A.geographicToWebMercator(new B(m[1],m[0],m[3],m[2],k)),attribution:c.attribution||"",zoomMin:f.zoomMin-(b&&f.zoomMin?1:0),zoomMax:f.zoomMax-(b&&f.zoomMax?1:0),score:v.isDefined(f.score)?f.score:100,objectId:g};for(f=m.zoomMin;f<=m.zoomMax;f++){l[f]=l[f]||[],l[f].push(m);}}}return l;},_getContributorsList:function(d,b,a){var c="";if(b&&v.isDefined(a)&&-1<a){d=d[a];a=b.getCenter().normalize();for(var e=d?d.length:0,f=[],g={},c=0;c<e;c++){b=d[c],!g[b.objectId]&&b.extent.contains(a)&&(g[b.objectId]=1,f.push(b));}f.sort(function(a,b){return b.score-a.score||a.objectId-b.objectId;});e=f.length;for(c=0;c<e;c++){f[c]=f[c].attribution;}c=f.join(", ");}return c;},_adjustCursorStyle:function(){var d=u.position(this.listNode.parentNode,!0).h;k.contains(this.listNode.parentNode,"esriAttributionOpen")?(k.remove(this.listNode.parentNode,"esriAttributionOpen"),d>u.position(this.listNode.parentNode,!0).h?(r.set(this.listNode.parentNode,"cursor","pointer"),k.add(this.listNode.parentNode,"esriAttributionOpen")):r.set(this.listNode.parentNode,"cursor","default")):(k.add(this.listNode.parentNode,"esriAttributionOpen"),d<u.position(this.listNode.parentNode,!0).h?r.set(this.listNode.parentNode,"cursor","pointer"):r.set(this.listNode.parentNode,"cursor","default"),k.remove(this.listNode.parentNode,"esriAttributionOpen"));}});});},"esri/dijit/Geocoder":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/dom-construct","dojo/keys","dojo/on","dojo/query","dojo/i18n!../nls/jsapi","dojo/text!./templates/Geocoder.html","dojo/uacss","dijit/a11yclick","dijit/_TemplatedMixin","dijit/focus","../kernel","../SpatialReference","../graphic","../symbols/PictureMarkerSymbol","./_EventedWidget","../geometry/Point","../geometry/Extent","../tasks/locator","../tasks/query","../tasks/QueryTask","../geometry/scaleUtils"],function(y,z,e,q,n,f,g,m,A,d,l,r,s,B,J,p,C,t,K,u,v,D,E,w,x,F,G,H,I){return z("esri.dijit.Geocoder",[E,C],{templateString:B,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,_eventMap:{select:["result"],"find-results":["results"],"auto-complete":["results"],"geocoder-select":["geocoder"],clear:!0,"enter-key-select":!0,load:!0},constructor:function(a,b){this._css={GeocoderContainerClass:"esriGeocoderContainer",GeocoderClass:"esriGeocoder",GeocoderMultipleClass:"esriGeocoderMultiple",GeocoderIconClass:"esriGeocoderIcon",GeocoderActiveClass:"esriGeocoderActive",GeocoderResultsOpenClass:"esriGeocoderResultsOpen",GeocoderMenuOpenClass:"esriGeocoderMenuOpen",loadingClass:"esriGeocoderLoading",resultsContainerClass:"esriGeocoderResults",resultsItemClass:"esriGeocoderResult",resultsItemEvenClass:"esriGeocoderResultEven",resultsItemOddClass:"esriGeocoderResultOdd",resultsItemFirstClass:"esriGeocoderResultFirst",resultsItemLastClass:"esriGeocoderResultLast",resultsPartialMatchClass:"esriGeocoderResultPartial",searchButtonClass:"esriGeocoderSearch",clearButtonClass:"esriGeocoderReset",hasValueClass:"esriGeocoderHasValue",geocoderMenuClass:"esriGeocoderMenu",geocoderMenuHeaderClass:"esriGeocoderMenuHeader",geocoderMenuCloseClass:"esriGeocoderMenuClose",activeMenuClass:"esriGeocoderMenuActive",geocoderMenuArrowClass:"esriGeocoderMenuArrow",geocoderSelectedClass:"esriGeocoderSelected",geocoderSelectedCheckClass:"esriGeocoderSelectedCheck",GeocoderClearClass:"esriGeocoderClearFloat"};this.options={autoComplete:!1,arcgisGeocoder:!0,value:"",theme:"simpleGeocoder",activeGeocoderIndex:0,maxLocations:6,minCharacters:3,searchDelay:300,geocoderMenu:!0,autoNavigate:!0,showResults:!0,map:null,activeGeocoder:null,geocoders:null,zoomScale:10000,highlightLocation:!1,symbol:new D(y.toUrl(".")+"/images/sdk_gps_location.png",28,28),graphicsLayer:null};var c=e.mixin({},this.options,a);this.set("autoComplete",c.autoComplete);this.set("arcgisGeocoder",c.arcgisGeocoder);this.set("value",c.value);this.set("theme",c.theme);this.set("activeGeocoderIndex",c.activeGeocoderIndex);this.set("maxLocations",c.maxLocations);this.set("minCharacters",c.minCharacters);this.set("searchDelay",c.searchDelay);this.set("geocoderMenu",c.geocoderMenu);this.set("autoNavigate",c.autoNavigate);this.set("showResults",c.showResults);this.set("map",c.map);this.set("activeGeocoder",c.activeGeocoder);this.set("geocoders",c.geocoders);this.set("zoomScale",c.zoomScale);this.set("highlightLocation",c.highlightLocation);this.set("symbol",c.symbol);this.set("graphicsLayer",c.graphicsLayer);this.set("results",[]);this._i18n=s;this._deferreds=[];this._defaultSR=new u(4326);this.watch("value",this._updateValue);this.watch("theme",this._updateTheme);this.watch("activeGeocoder",this._setActiveGeocoder);this.watch("activeGeocoderIndex",this._setActiveGeocoderIndex);this.watch("geocoders",this._updateGeocoder);this.watch("arcgisGeocoder",this._updateGeocoder);this.watch("geocoderMenu",this._updateGeocoder);this.watch("map",this._setupEvents);this.domNode=b;},startup:function(){if(this._geocoders.length){if(this.domNode){if(this.get("map")){if(this.get("map").loaded){this._init();}else{l.once(this.get("map"),"load",e.hitch(this,function(){this._init();}));}}else{this._init();}}else{undefined,this.destroy();}}else{undefined,this.destroy();}},postCreate:function(){this.inherited(arguments);this.own(l(this.submitNode,p,e.hitch(this,this._findThenSelect)));this.own(l(this.geocoderMenuArrowNode,p,e.hitch(this,this._toggleGeolocatorMenu)));this.own(l(this.inputNode,p,e.hitch(this,this._inputClick)));this.own(l(this.clearNode,p,e.hitch(this,this.clear)));this.own(l(this.geocoderMenuCloseNode,p,e.hitch(this,this._hideGeolocatorMenu)));this._updateGeocoder();this._setupEvents();this.get("value")&&this._checkStatus();this._hideMenus();},destroy:function(){this._removeEvents();A.empty(this.domNode);this.inherited(arguments);},clear:function(){this.onClear();var a=this.get("highlightGraphic"),b=this.get("graphicsLayer");a&&(b?b.remove(a):this.get("map").graphics.remove(a),this.set("highlightGraphic",null));f.set(this.inputNode,"value","");this.set("value","");this.set("results",[]);g.remove(this.containerNode,this._css.hasValueClass);f.set(this.clearNode,"title","");this._hideMenus();this._hideLoading();},show:function(){m.set(this.domNode,"display","block");},hide:function(){m.set(this.domNode,"display","none");},find:function(a){var b=new q;if(a){if("string"===typeof a){this._findQuery(a).then(function(a){b.resolve(a);});}else{if("object"===typeof a&&a.hasOwnProperty("geometry")){var c;switch(a.geometry.type){case "extent":c=a.geometry.getCenter();break;case "multipoint":c=a.geometry.getExtent().getCenter();break;case "point":c=a.geometry;break;case "polygon":c=a.geometry.getExtent().getCenter();break;case "polyline":c=a.geometry.getExtent().getCenter();}c&&this._reverseGeocodePoint(c,a.geometry).then(function(c){c.results[0]&&(a.hasOwnProperty("attributes")&&c.results[0].feature.setAttributes(e.mixin(c.results[0].feature.attributes,a.attributes)),a.hasOwnProperty("infoTemplate")&&c.results[0].feature.setInfoTemplate(a.infoTemplate),a.hasOwnProperty("symbol")&&c.results[0].feature.setSymbol(a.symbol));b.resolve(c);},function(a){b.reject(a);});}else{"object"===typeof a&&"point"===a.type?this._reverseGeocodePoint(a).then(function(a){b.resolve(a);},function(a){b.reject(a);}):a instanceof Array&&2===a.length?(c=new w(a,new u({wkid:4326})),this._reverseGeocodePoint(c).then(function(a){b.resolve(a);},function(a){b.reject(a);})):b.reject("Geocoder:: Invalid find type");}}}else{this._findQuery(this.get("value")).then(function(a){b.resolve(a);});}return b.promise;},focus:function(){t.focus(this.inputNode);},blur:function(){t.curNode&&t.curNode.blur();this.inputNode.blur();this._hideMenus();var a=this.get("map");a&&a.enableKeyboardNavigation();},select:function(a){this.onSelect(a);this._hideMenus();this._hideLoading();this.get("autoNavigate")&&(a&&a.hasOwnProperty("extent")&&this.get("map"))&&this.get("map").setExtent(a.extent);if(a.feature){var b=this.get("highlightGraphic"),c=this.get("graphicsLayer"),k=this.get("symbol")||a.feature.symbol;b?(b.setGeometry(a.feature.geometry),b.setAttributes(a.feature.attributes),b.setInfoTemplate(a.feature.infoTemplate),b.setSymbol(k)):(b=a.feature,this.get("highlightLocation")&&(b.setSymbol(k),c?c.add(b):this.get("map").graphics.add(b)));this.set("highlightGraphic",b);}},onSelect:function(){},onFindResults:function(){},onAutoComplete:function(){},onGeocoderSelect:function(){},onClear:function(){},onEnterKeySelect:function(){},onLoad:function(){},_autoComplete:function(){var a=this.get("activeGeocoder"),b=this.reHostedFS.test(a.url);("query"!==a.type||b)&&this._query({delay:this.get("searchDelay"),autoComplete:!0,search:this.get("value")}).then(e.hitch(this,function(a){this.onAutoComplete(a);this.get("showResults")&&this._showResults(a);}));},_init:function(){this.set("loaded",!0);this.onLoad();},_containsNonLatinCharacter:function(a){for(var b=0;b<a.length;b++){if(255<a.charCodeAt(b)){return !0;}}return !1;},_findQuery:function(a){var b=new q;this._query({delay:0,search:a}).then(e.hitch(this,function(a){this.onFindResults(a);b.resolve(a);}),e.hitch(this,function(a){this.onFindResults(a);b.reject(a);}));return b.promise;},_reverseGeocodePoint:function(a,b){var c=new q;if(a&&this.get("activeGeocoder")){var k=b||a,d=this.get("activeGeocoder").distance||1500;this._task.outSpatialReference=this._defaultSR;this.get("map")&&(this._task.outSpatialReference=this.get("map").spatialReference);this._task.locationToAddress(a,d,e.hitch(this,function(a){a={results:[this._hydrateResult(a)],geometry:k};this.onFindResults(a);c.resolve(a);}),e.hitch(this,function(a){c.reject(a);}));}else{c.reject("Geocoder:: no point or active geocoder defined");}return c.promise;},_setEsriGeocoder:function(){this.get("arcgisGeocoder")?("object"===typeof this.get("arcgisGeocoder")?this._arcgisGeocoder=this.get("arcgisGeocoder"):this._arcgisGeocoder={},this._arcgisGeocoder.hasOwnProperty("suggest")||(this._arcgisGeocoder.suggest=!0),this._arcgisGeocoder.hasOwnProperty("singleLineFieldName")||(this._arcgisGeocoder.singleLineFieldName="SingleLine"),this._arcgisGeocoder.url||(this._arcgisGeocoder.url=("file:"===location.protocol?"http:":location.protocol)+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),this._arcgisGeocoder.name||(this._arcgisGeocoder.name=s.widgets.Geocoder.esriGeocoderName),this._arcgisGeocoder.hasOwnProperty("localSearchOptions")||(this._arcgisGeocoder.localSearchOptions={minScale:300000,distance:50000}),this.set("arcgisGeocoder",this._arcgisGeocoder)):this.set("arcgisGeocoder",!1);},_setActiveGeocoder:function(){this.set("activeGeocoder",this._geocoders[this.get("activeGeocoderIndex")]);this._task="query"===this.activeGeocoder.type?new H(this.get("activeGeocoder").url):new F(this.get("activeGeocoder").url);this._updatePlaceholder();},_setGeocoderList:function(){var a=[];this.get("arcgisGeocoder")&&(a=a.concat([this._arcgisGeocoder]));this.get("geocoders")&&this.get("geocoders").length&&(a=a.concat(this.get("geocoders")));this._geocoders=a;},_updateGeocoder:function(){this.set("activeGeocoderIndex",0);this._setEsriGeocoder();this._setGeocoderList();this._setActiveGeocoder();this._insertGeocoderMenuItems();},_updatePlaceholder:function(){this._placeholder="";this.get("activeGeocoder")&&this.get("activeGeocoder").placeholder&&(this._placeholder=this.get("activeGeocoder").placeholder);f.set(this.inputNode,"placeholder",this._placeholder);f.set(this.submitNode,"title",this._placeholder);},_updateValue:function(a,b,c){this._ignoreUpdateValue||(f.set(this.inputNode,"value",c),this._checkStatus());},_updateTheme:function(a,b,c){g.remove(this.domNode,b);g.add(this.domNode,c);},_setActiveGeocoderIndex:function(a,b,c){this.set("activeGeocoderIndex",c);this._setActiveGeocoder();this._hideMenus();this._insertGeocoderMenuItems();a={attr:this.get("activeGeocoder"),oldVal:b,newVal:c};this.onGeocoderSelect(a);},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer);},_query:function(a){a||(a={delay:0});a.search||(a.search=this.get("value"));var b=new q;this._deferreds.push(b);a.delay?(this._clearQueryTimeout(),this._queryTimer=setTimeout(e.hitch(this,function(){this._performTask(b,a);}),a.delay)):this._performTask(b,a);return b.promise;},_performTask:function(a,b){if(b.search){this._hideGeolocatorMenu();this._showLoading();var c="";this.get("activeGeocoder").prefix&&(c+=this.get("activeGeocoder").prefix);c+=b.search;this.get("activeGeocoder").suffix&&(c+=this.get("activeGeocoder").suffix);var k=this.get("activeGeocoder").outFields;k&&(k instanceof Array||(k=[k]));var d=this.get("maxLocations")||6,f=this.get("activeGeocoder").searchExtent,g=this._defaultSR;this.get("map")&&(g=this.get("map").spatialReference);if("query"===this.get("activeGeocoder").type){var h=new G;h.outSpatialReference=g;h.returnGeometry=!0;h.num=d;f&&(h.geometry=f);d=this.get("activeGeocoder").exactMatch;f=this.get("activeGeocoder").field;g="";this.reHostedFS.test(this.get("activeGeocoder").url)&&this._containsNonLatinCharacter(c)&&(g="N");h.where=d?f+" = "+g+"'"+c+"'":"UPPER("+f+") LIKE "+g+"'%"+c.toUpperCase()+"%'";k&&(h.outFields=k);this._task.execute(h,e.hitch(this,function(c){this._receivedResults(c.features,a,b);}),e.hitch(this,function(c){this._receivedResults([],a,b);}));}else{h={};this.get("activeGeocoder").categories&&(h.categories=this.get("activeGeocoder").categories);this._task.outSpatialReference=g;if(this.get("map")&&(this.get("activeGeocoder").localSearchOptions&&this.get("activeGeocoder").localSearchOptions.hasOwnProperty("distance")&&this.get("activeGeocoder").localSearchOptions.hasOwnProperty("minScale"))&&(g=this.get("map").getScale(),!this.get("activeGeocoder").localSearchOptions.minScale||g&&g<=parseFloat(this.get("activeGeocoder").localSearchOptions.minScale))){h.location=this.get("map").extent.getCenter(),h.distance=this.get("activeGeocoder").localSearchOptions.distance;}this.get("activeGeocoder").suggest&&b.autoComplete?(h.text=c,f&&(h.searchExtent=f),this._task.suggestLocations(h).then(e.hitch(this,function(c){this._receivedResults(c,a,b);}),e.hitch(this,function(c){this._receivedResults(c,a,b);}))):(h.address={},h.maxLocations=d,f&&(h.searchExtent=f),this.get("activeGeocoder").sourceCountry&&(h.countryCode=this.get("activeGeocoder").sourceCountry),b.magicKey&&(h.magicKey=b.magicKey),this.get("activeGeocoder").singleLineFieldName?h.address[this.get("activeGeocoder").singleLineFieldName]=c:h.address["Single Line Input"]=c,k&&(h.outFields=k),this._task.addressToLocations(h,e.hitch(this,function(c){this._receivedResults(c,a,b);}),e.hitch(this,function(c){this._receivedResults(c,a,b);})));}}else{this._hideLoading(),a.reject("Geocoder:: no search to perform");}(c=this.get("map"))&&c.enableKeyboardNavigation();},_showResults:function(){this._hideGeolocatorMenu();var a="";if(this.get("results")&&this.get("results").length&&this.resultsNode){for(var b=this.get("value"),c=RegExp("("+b+")","gi"),a=a+"<ul role=\"presentation\">",b=0;b<this.get("results").length&&5>b;++b){var k=this.get("results")[b].text||this.get("results")[b].name,d=this._css.resultsItemClass+" ",d=0===b%2?d+this._css.resultsItemOddClass:d+this._css.resultsItemEvenClass;0===b?d+=" "+this._css.resultsItemFirstClass:b===this.get("results").length-1&&(d+=" "+this._css.resultsItemLastClass);a+="<li title=\""+k+"\" data-text=\""+k+"\" data-item=\"true\" data-index=\""+b+"\" role=\"menuitem\" tabindex=\"0\" class=\""+d+"\">"+k.replace(c,"<strong class=\""+this._css.resultsPartialMatchClass+"\">$1</strong>")+"</li>";}a+="</ul>";this.resultsNode&&(this.resultsNode.innerHTML=a);this._autoCompleteEvent();this._showResultsMenu();}else{this.resultsNode&&(this.resultsNode.innerHTML=a),this._hideResultsMenu();}},_receivedResults:function(a,b){this._hideLoading();var c=this._hydrateResults(a);this.set("results",c);c={results:c,value:this.get("value")};b.resolve(c);},_showLoading:function(){g.add(this.containerNode,this._css.loadingClass);},_hideLoading:function(){g.remove(this.containerNode,this._css.loadingClass);},_showGeolocatorMenu:function(){g.add(this.containerNode,this._css.activeMenuClass);g.add(this.domNode,this._css.GeocoderMenuOpenClass);m.set(this.geocoderMenuNode,"display","block");f.set(this.geocoderMenuInsertNode,"aria-hidden","false");f.set(this.geocoderMenuArrowNode,"aria-expanded","true");},_hideGeolocatorMenu:function(){g.remove(this.containerNode,this._css.activeMenuClass);g.remove(this.domNode,this._css.GeocoderMenuOpenClass);m.set(this.geocoderMenuNode,"display","none");f.set(this.geocoderMenuInsertNode,"aria-hidden","true");f.set(this.geocoderMenuArrowNode,"aria-expanded","false");},_toggleGeolocatorMenu:function(){this._hideResultsMenu();"block"===m.get(this.geocoderMenuNode,"display")?this._hideGeolocatorMenu():this._showGeolocatorMenu();},_showResultsMenu:function(){g.add(this.containerNode,this._css.GeocoderActiveClass);g.add(this.domNode,this._css.GeocoderResultsOpenClass);m.set(this.resultsNode,"display","block");f.set(this.resultsNode,"aria-hidden","false");},_hideResultsMenu:function(){m.set(this.resultsNode,"display","none");g.remove(this.containerNode,this._css.GeocoderActiveClass);g.remove(this.domNode,this._css.GeocoderResultsOpenClass);f.set(this.resultsNode,"aria-hidden","true");},_hideMenus:function(){this._hideGeolocatorMenu();this._hideResultsMenu();},_insertGeocoderMenuItems:function(){if(this.get("geocoderMenu")&&this._geocoders&&1<this._geocoders.length){var a,b="",c;a="<ul role=\"presentation\">";for(c=0;c<this._geocoders.length;c++){b=this._css.resultsItemClass+" ";b=0===c%2?b+this._css.resultsItemOddClass:b+this._css.resultsItemEvenClass;c===this.get("activeGeocoderIndex")&&(b+=" "+this._css.geocoderSelectedClass);0===c?b+=" "+this._css.resultsItemFirstClass:c===this._geocoders.length-1&&(b+=" "+this._css.resultsItemLastClass);var d=this._geocoders[c].name||s.widgets.Geocoder.main.untitledGeocoder;a+="<li data-index=\""+c+"\" data-item=\"true\" role=\"menuitem\" tabindex=\"0\" class=\""+b+"\">";a+="<div class=\""+this._css.geocoderSelectedCheckClass+"\"></div>";a+=d;a+="<div class=\""+this._css.GeocoderClearClass+"\"></div>";a+="</li>";}this.geocoderMenuInsertNode.innerHTML=a+"</ul>";this._geocoderMenuEvent();m.set(this.geocoderMenuNode,"display","none");m.set(this.geocoderMenuArrowNode,"display","block");g.add(this.containerNode,this._css.GeocoderMultipleClass);}else{this.geocoderMenuInsertNode.innerHTML="",m.set(this.geocoderMenuNode,"display","none"),m.set(this.geocoderMenuArrowNode,"display","none"),g.remove(this.containerNode,this._css.GeocoderMultipleClass);}},_checkStatus:function(){this.get("value")?(g.add(this.containerNode,this._css.hasValueClass),f.set(this.clearNode,"title",s.widgets.Geocoder.main.clearButtonTitle)):this.clear();},_autoCompleteEvent:function(){var a=r("[data-item=\"true\"]",this.resultsNode);this._acEvent&&this._acEvent.remove();this._acEvent=l(a,"click, keydown",e.hitch(this,function(b){this._clearQueryTimeout();var c=parseInt(f.get(b.currentTarget,"data-index"),10),k=f.get(b.currentTarget,"data-text");"click"===b.type||"keydown"===b.type&&b.keyCode===d.ENTER?(f.set(this.inputNode,"value",k),this.set("value",k),this.get("results")&&this.get("results")[c]&&(b=this.get("results")[c],b.name?this.select(b):this._query({delay:0,search:b.text,magicKey:b.magicKey||null}).then(e.hitch(this,function(a){this.select(a.results[0]);})))):"keydown"===b.type&&(b.keyCode===d.BACKSPACE||b.keyCode===d.DELETE)?(n.stop(b),this.inputNode.focus(),b=this.inputNode.value.slice(0,-1),f.set(this.inputNode,"value",b),this.set("value",b)):"keydown"===b.type&&b.keyCode===d.UP_ARROW?(n.stop(b),b=c-1,0>b?this.inputNode.focus():a[b].focus()):"keydown"===b.type&&b.keyCode===d.DOWN_ARROW?(n.stop(b),b=c+1,b>=a.length?this.inputNode.focus():a[b].focus()):b.keyCode===d.ESCAPE&&this._hideMenus();}));},_geocoderMenuEvent:function(){var a=r("[data-item=\"true\"]",this.geocoderMenuInsertNode);this._gmEvent&&this._gmEvent.remove();this._gmEvent=l(a,"click, keydown",e.hitch(this,function(b){var c=parseInt(f.get(b.currentTarget,"data-index"),10);"click"===b.type||"keydown"===b.type&&b.keyCode===d.ENTER?(this._setActiveGeocoderIndex(null,null,c),this._hideGeolocatorMenu()):"keydown"===b.type&&b.keyCode===d.UP_ARROW?(n.stop(b),b=c-1,0>b?this.geocoderMenuArrowNode.focus():a[b].focus()):"keydown"===b.type&&b.keyCode===d.DOWN_ARROW?(n.stop(b),b=c+1,b>=a.length?this.geocoderMenuArrowNode.focus():a[b].focus()):b.keyCode===d.ESCAPE&&this._hideGeolocatorMenu();}));},_removeEvents:function(){var a;if(this._events&&this._events.length){for(a=0;a<this._events.length;a++){this._events[a].remove();}}this._acEvent&&this._acEvent.remove();this._gmEvent&&this._gmEvent.remove();this._events=[];},_setupEvents:function(){this._removeEvents();var a=l(document,"click",e.hitch(this,function(a){this._hideResultsMenu(a);}));this._events.push(a);a=l(this.inputNode,"keyup",e.hitch(this,function(a){this._inputKeyUp(a);}));this._events.push(a);a=l(this.inputNode,"keydown",e.hitch(this,function(a){this._inputKeyDown(a);}));this._events.push(a);a=l(this.geocoderMenuArrowNode,"keydown",this._geocoderMenuButtonKeyDown());this._events.push(a);this.get("map")&&(a=l(this.get("map"),"click",e.hitch(this,function(){this.blur();})),this._events.push(a));this._geocoderMenuEvent();this._autoCompleteEvent();},_findThenSelect:function(){this.find().then(e.hitch(this,function(a){a.results&&a.results.length&&(this.select(a.results[0]),this.onEnterKeySelect());}));},_inputKeyUp:function(a){if(a){this._clearQueryTimeout();var b=this.inputNode.value;this._ignoreUpdateValue=!0;this.set("value",b);this._ignoreUpdateValue=!1;var c=0;b&&(c=b.length);if(a.ctrlKey||a.shiftKey||a.metaKey||a.altKey||a.keyCode===d.copyKey||a.keyCode===d.ALT||a.keyCode===d.CTRL||a.keyCode===d.META||a.keyCode===d.SHIFT||a.keyCode===d.UP_ARROW||a.keyCode===d.DOWN_ARROW||a.keyCode===d.LEFT_ARROW||a.keyCode===d.RIGHT_ARROW){return a;}a&&a.keyCode===d.ENTER?(this._cancelDeferreds(),this._findThenSelect()):a&&a.keyCode===d.ESCAPE?(this._cancelDeferreds(),this._hideMenus()):a&&a.keyCode===d.TAB?(this._cancelDeferreds(),this._hideMenus()):this.get("autoComplete")&&c>=this.get("minCharacters")?this._autoComplete():this._hideMenus();this._checkStatus();}},_cancelDeferreds:function(){if(this._deferreds.length){for(var a=0;a<this._deferreds.length;a++){this._deferreds[a].cancel("Geocoder:: stop query");}this._deferreds=[];}},_inputKeyDown:function(a){var b=r("[data-item=\"true\"]",this.resultsNode);a&&a.keyCode===d.TAB?(this._cancelDeferreds(),this._hideMenus()):a&&a.keyCode===d.UP_ARROW?(n.stop(a),(a=b.length)&&b[a-1].focus()):a&&a.keyCode===d.DOWN_ARROW&&(n.stop(a),b[0]&&b[0].focus());},_geocoderMenuButtonKeyDown:function(a){var b=r("[data-item=\"true\"]",this.geocoderMenuInsertNode);a&&a.keyCode===d.UP_ARROW?(n.stop(a),this._showGeolocatorMenu(),(a=b.length)&&b[a-1].focus()):a&&a.keyCode===d.DOWN_ARROW&&(n.stop(a),this._showGeolocatorMenu(),b[0]&&b[0].focus());},_inputClick:function(){this._hideGeolocatorMenu();this.get("value")||(this.clear(),this._hideMenus());this._checkStatus();var a=this.get("map");a&&a.disableKeyboardNavigation();},_hydrateResult:function(a){var b={},c=this._defaultSR,d;this.get("map")&&(c=this.get("map").spatialReference);if(a.hasOwnProperty("text")&&a.hasOwnProperty("magicKey")){return a;}if(a.hasOwnProperty("feature")){b.feature=new v(a.feature),(d=b.feature.geometry)&&d.setSpatialReference(c);}else{if(a.hasOwnProperty("geometry")){var e=a.symbol||null;d=a.attributes||{};b.feature=new v(a.geometry,e,d,a.infoTemplate||null);(d=b.feature.geometry)&&d.setSpatialReference(c);}else{a.hasOwnProperty("location")?(e=new w(a.location.x,a.location.y,c),d={},a.hasOwnProperty("attributes")&&(d=a.attributes),a.hasOwnProperty("score")&&(d.score=a.score),b.feature=new v(e,null,d,null)):b.feature=null;}}if(a.hasOwnProperty("extent")){b.extent=new x(a.extent),b.extent.setSpatialReference(new u(c));}else{if(b.feature&&b.feature.geometry){switch(b.feature.geometry.type){case "extent":b.extent=b.feature.geometry;break;case "multipoint":b.extent=b.feature.geometry.getExtent();break;case "polygon":b.extent=b.feature.geometry.getExtent();break;case "polyline":b.extent=b.feature.geometry.getExtent();break;case "point":this.get("map")?this.get("map").getScale()>this.get("zoomScale")?b.extent=I.getExtentForScale(this.get("map"),this.get("zoomScale")).centerAt(b.feature.geometry):b.extent=this.get("map").extent.centerAt(b.feature.geometry):b.extent=new x({xmin:b.feature.geometry.x-0.25,ymin:b.feature.geometry.y-0.25,xmax:b.feature.geometry.x+0.25,ymax:b.feature.geometry.y+0.25,spatialReference:{wkid:4326}});}}else{b.extent=null;}}a.hasOwnProperty("name")?b.name=a.name:"query"===this.activeGeocoder.type&&this.activeGeocoder.field&&a.hasOwnProperty("attributes")&&a.attributes.hasOwnProperty(this.activeGeocoder.field)?b.name=a.attributes[this.activeGeocoder.field]:a.hasOwnProperty("Match_addr")&&"string"===typeof a.Match_addr?b.name=a.Match_addr:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Match_addr")?b.name=a.address.Match_addr:a.hasOwnProperty("address")&&"string"===typeof a.address?b.name=a.address:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Address")?b.name=a.address.Address:b.name=b.feature&&b.feature.geometry?b.feature.geometry.x+","+b.feature.geometry.y:"";return b;},_hydrateResults:function(a){var b=[],c=0;if(a&&a.length){for(c;c<a.length;c++){var d=this._hydrateResult(a[c]);b.push(d);}}return b;}});});},"esri/tasks/locator":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","../kernel","../request","../deferredUtils","./Task","./AddressCandidate"],function(t,f,u,p,l,z,A,q,v,y,m){return t(y,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(a){this._geocodeHandler=f.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=f.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=f.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents();},outSpatialReference:null,setOutSpatialReference:function(a){this.outSpatialReference=a;},_geocodeHandler:function(a,b,k,g,c){try{var h=a.candidates,e;b=[];var d,n=h.length,r=a.spatialReference,f;for(d=0;d<n;d++){e=h[d];if(f=e.location){f.spatialReference=r;}b[d]=new m(e);}this._successHandler([b],"onAddressToLocationsComplete",k,c);}catch(l){this._errorHandler(l,g,c);}},_geocodeAddressesHandler:function(a,b,k,g,c){try{var h=a.locations;b=[];var e,d=h.length,n=a.spatialReference,f;for(e=0;e<d;e++){if(f=h[e].location){f.spatialReference=n;}b[e]=new m(h[e]);}this._successHandler([b],"onAddressesToLocationsComplete",k,c);}catch(l){this._errorHandler(l,g,c);}},addressToLocations:function(a,b,k,g,c){var h,e,d,n,r,m,w;a.address&&(g=k,k=b,b=a.outFields,c=a.searchExtent,w=a.countryCode,h=a.magicKey,e=a.distance,m=a.categories,a.location&&this.normalization&&(d=a.location.normalize()),n=a.maxLocations,r=a.forStorage,a=a.address);c&&(c=c.shiftCentralMeridian());var x=this.outSpatialReference;a=this._encode(f.mixin({},this._url.query,a,{f:"json",outSR:x&&l.toJson(x.toJson()),outFields:b&&b.join(",")||null,searchExtent:c&&l.toJson(c.toJson()),category:m&&m.join(",")||null,countryCode:w||null,magicKey:h||null,distance:e||null,location:d||null,maxLocations:n||null,forStorage:r||null}));var t=this._geocodeHandler,u=this._errorHandler,s=new p(v._dfdCanceller);s._pendingDfd=q({url:this._url.path+"/findAddressCandidates",content:a,callbackParamName:"callback",load:function(a,b){t(a,b,k,g,s);},error:function(a){u(a,g,s);}});return s;},suggestLocations:function(a){var b;b=new p;a.hasOwnProperty("location")&&this.normalization&&(a.location=a.location.normalize());a.searchExtent&&(a.searchExtent=a.searchExtent.shiftCentralMeridian());a=this._encode(f.mixin({},this._url.query,{f:"json",text:a.text,searchExtent:a.searchExtent&&l.toJson(a.searchExtent.toJson()),category:a.categories&&a.categories.join(",")||null,location:a.location||null,distance:a.distance||null},{f:"json"}));q({url:this._url.path+"/suggest",content:a,callbackParamName:"callback"}).then(f.hitch(this,function(a){a=a.suggestions||[];this.onSuggestLocationsComplete(a);b.resolve(a);}),f.hitch(this,function(a){this._errorHandler(a);b.reject(a);}));return b;},addressesToLocations:function(a,b,k){var g=this.outSpatialReference,c=[];u.forEach(a.addresses,function(a,b){c.push({attributes:a});});a=this._encode(f.mixin({},this._url.query,{addresses:l.toJson({records:c})},{f:"json",outSR:g&&l.toJson(g.toJson())}));var h=this._geocodeAddressesHandler,e=this._errorHandler,d=new p(v._dfdCanceller);d._pendingDfd=q({url:this._url.path+"/geocodeAddresses",content:a,callbackParamName:"callback",load:function(a,c){h(a,c,b,k,d);},error:function(a){e(a,k,d);}});return d;},_reverseGeocodeHandler:function(a,b,f,g,c){try{var h=new m({address:a.address,location:a.location,score:100});this._successHandler([h],"onLocationToAddressComplete",f,c);}catch(e){this._errorHandler(e,g,c);}},locationToAddress:function(a,b,k,g){a&&this.normalization&&(a=a.normalize());var c=this.outSpatialReference;a=this._encode(f.mixin({},this._url.query,{outSR:c&&l.toJson(c.toJson()),location:a&&l.toJson(a.toJson()),distance:b,f:"json"}));var h=this._reverseGeocodeHandler,e=this._errorHandler,d=new p(v._dfdCanceller);d._pendingDfd=q({url:this._url.path+"/reverseGeocode",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,k,g,d);},error:function(a){e(a,g,d);}});return d;},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});});},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(a,b,d,e,c){return a(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(a){b.mixin(this,a);this.location=new c(this.location);}});});},"esri/dijit/HomeButton":function(){define(["dojo/Evented","dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","dijit/_WidgetBase","dijit/a11yclick","dijit/_TemplatedMixin","dojo/on","dojo/Deferred","dojo/text!./templates/HomeButton.html","dojo/i18n!../nls/jsapi","dojo/dom-class","dojo/dom-style"],function(h,k,d,s,t,l,m,n,f,p,q,r,e,g){return k("esri.dijit.HomeButton",[l,n,h],{templateString:q,options:{theme:"HomeButton",map:null,extent:null,fit:!1,visible:!0},constructor:function(c,a){var b=d.mixin({},this.options,c);this.domNode=a;this._i18n=r;this.set("map",b.map);this.set("theme",b.theme);this.set("visible",b.visible);this.set("extent",b.extent);this.set("fit",b.fit);this.watch("theme",this._updateThemeWatch);this.watch("visible",this._visible);this._css={container:"homeContainer",home:"home",loading:"loading"};},postCreate:function(){this.inherited(arguments);this.own(f(this._homeNode,m,d.hitch(this,this.home)));},startup:function(){this.map||(this.destroy(),undefined);if(this.map.loaded){this._init();}else{f.once(this.map,"load",d.hitch(this,function(){this._init();}));}},destroy:function(){this.inherited(arguments);},home:function(){var c=new p,a=this.get("extent");this._showLoading();var b={extent:a};a?this.map.extent!==a?this.map.setExtent(a,this.get("fit")).then(d.hitch(this,function(){this._hideLoading();this.emit("home",b);c.resolve(b);}),d.hitch(this,function(a){a||(a=Error("HomeButton::Error setting map extent"));b.error=a;this.emit("home",b);c.reject(a);})):(this._hideLoading(),this.emit("home",b),c.resolve(b)):(this._hideLoading(),a=Error("HomeButton::home extent is undefined"),b.error=a,this.emit("home",b),c.reject(a));return c.promise;},show:function(){this.set("visible",!0);},hide:function(){this.set("visible",!1);},_init:function(){this._visible();this.get("extent")||this.set("extent",this.map.extent);this.set("loaded",!0);this.emit("load",{});},_showLoading:function(){e.add(this._homeNode,this._css.loading);},_hideLoading:function(){e.remove(this._homeNode,this._css.loading);},_updateThemeWatch:function(c,a,b){e.remove(this.domNode,a);e.add(this.domNode,b);},_visible:function(){this.get("visible")?g.set(this.domNode,"display","block"):g.set(this.domNode,"display","none");}});});},"esri/dijit/Legend":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/json","dojo/_base/Color","dojo/has","dojo/sniff","dojo/DeferredList","dojo/json","dojo/number","dojo/dom","dojo/dom-construct","dojo/dom-style","dijit/_Widget","dojox/gfx","dojox/gfx/matrix","dojox/html/entities","../kernel","../config","../request","../lang","../renderers/SimpleRenderer","../renderers/UniqueValueRenderer","../renderers/ClassBreaksRenderer","../renderers/ScaleDependentRenderer","../renderers/DotDensityRenderer","../renderers/TemporalRenderer","../renderers/HeatmapRenderer","../symbols/SimpleMarkerSymbol","../symbols/PictureFillSymbol","../symbols/jsonUtils","./_EventedWidget","dojo/i18n!../nls/jsapi","dojo/i18n!dojo/cldr/nls/number"],function(A,K,s,m,n,L,y,v,$,M,N,F,q,e,t,O,G,P,Q,aa,H,I,D,B,J,E,R,S,T,U,V,W,C,X,Y,Z){var x=K([X,O],{declaredClass:"esri.dijit.Legend",widgetsInTemplate:!1,layers:null,alignRight:!1,hoverLabelShowing:!1,dotDensitySwatchSize:26,dotCoverage:75,reZeros:RegExp("\\"+Z.decimal+"0+$","g"),reZerosFractional:RegExp("(\\d)0*$","g"),_ieTimer:100,_isRightToLeft:!1,_align:null,_legendAlign:null,constructor:function(a,b){s.mixin(this,Y.widgets.legend);a=a||{};a.map?b?(this.map=a.map,this.layerInfos=a.layerInfos,this._respectCurrentMapScale=!1===a.respectCurrentMapScale?!1:!0,this.arrangement=a.arrangement===x.ALIGN_RIGHT?x.ALIGN_RIGHT:x.ALIGN_LEFT,this.arrangement===x.ALIGN_RIGHT&&(this.alignRight=!0),this.autoUpdate=!1===a.autoUpdate?!1:!0,this._surfaceItems=[]):console.error("esri.dijit.Legend: must specify a container for the legend"):console.error("esri.dijit.Legend: unable to find the 'map' property in parameters");},postMixInProperties:function(){this.inherited(arguments);var a=["ar","he"],b,c;for(b=0;b<a.length;b+=1){c=a[b],A.locale&&-1!==A.locale.indexOf(c)&&(-1!==A.locale.indexOf("-")?-1!==A.locale.indexOf(c+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0);}this._isRightToLeft?(this._align=this.alignRight?"left":"right",this._legendAlign=this.alignRight?"esriLegendLeft":"esriLegendRight"):(this._align=this.alignRight?"right":"left",this._legendAlign=this.alignRight?"esriLegendRight":"esriLegendLeft");},startup:function(){this.inherited(arguments);this._initialize();9>v("ie")&&(this._repaintItems=s.hitch(this,this._repaintItems),setTimeout(this._repaintItems,this._ieTimer));},destroy:function(){this._deactivate();this._removeHoverHandlers();this.inherited(arguments);},refresh:function(a){if(this.domNode){a?(this.layerInfos=a,this.layers=[],m.forEach(this.layerInfos,function(a){this._isSupportedLayerType(a.layer)&&(a.title&&(a.layer._titleForLegend=a.title),a.layer._hideDefaultSymbol=!1===a.defaultSymbol?!0:!1,a.hideLayers?(a.layer._hideLayersInLegend=a.hideLayers,this._addSubLayersToHide(a)):a.layer._hideLayersInLegend=[],a.hoverLabel&&(a.layer._hoverLabel=a.hoverLabel),a.hoverLabels&&(a.layer._hoverLabels=a.hoverLabels),this.layers.push(a.layer));},this)):this.useAllMapLayers&&(this.layers=this.layerInfos=null);for(a=this.domNode.children.length-1;0<=a;a--){e.destroy(this.domNode.children[a]);}this._removeHoverHandlers();this.startup();}},_legendUrl:"http://utility.arcgis.com/sharing/tools/legend",_initialize:function(){this.layerInfos&&(this.layers=[],m.forEach(this.layerInfos,function(a){this._isSupportedLayerType(a.layer)&&(a.title&&(a.layer._titleForLegend=a.title),a.layer._hideDefaultSymbol=!1===a.defaultSymbol?!0:!1,a.hideLayers?(a.layer._hideLayersInLegend=a.hideLayers,this._addSubLayersToHide(a)):a.layer._hideLayersInLegend=[],a.hoverLabel&&(a.layer._hoverLabel=a.hoverLabel),a.hoverLabels&&(a.layer._hoverLabels=a.hoverLabels),this.layers.push(a.layer));},this));this.useAllMapLayers=!1;if(!this.layers){this.useAllMapLayers=!0;this.layers=[];var a=[],b=[];m.forEach(this.map.layerIds,function(c){c=this.map.getLayer(c);var d;this._isSupportedLayerType(c)&&(c.arcgisProps&&c.arcgisProps.title&&(c._titleForLegend=c.arcgisProps.title),this.layers.push(c));"esri.layers.KMLLayer"==c.declaredClass&&(d=c.getLayers(),m.forEach(d,function(b){a.push(b.id);},this));"esri.layers.GeoRSSLayer"==c.declaredClass&&(d=c.getFeatureLayers(),m.forEach(d,function(a){b.push(a.id);},this));},this);m.forEach(this.map.graphicsLayerIds,function(c){var d=this.map.getLayer(c);-1==m.indexOf(a,c)&&-1==m.indexOf(b,c)&&(this._isSupportedLayerType(d)&&d._params&&d._params.drawMode)&&(d.arcgisProps&&d.arcgisProps.title&&(d._titleForLegend=d.arcgisProps.title),this.layers.push(d));},this);}this._createLegend();},_activate:function(){this._deactivate();this.autoUpdate&&(this._respectCurrentMapScale&&(this._ozeConnect=n.connect(this.map,"onZoomEnd",this,"_refreshLayers")),this.useAllMapLayers&&(this._olaConnect=n.connect(this.map,"onLayerAdd",this,"_updateAllMapLayers"),this._olrConnect=n.connect(this.map,"onLayerRemove",this,"_updateAllMapLayers"),this._olroConnect=n.connect(this.map,"onLayersReordered",this,"_updateAllMapLayers")),m.forEach(this.layers,function(a){a.ovcConnect=n.connect(a,"onVisibilityChange",this,"_refreshLayers");a.oscConnect=n.connect(a,"onScaleRangeChange",this,"_refreshLayers");"esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass&&a.supportsDynamicLayers&&(a.odcConnect=n.connect(a,"_onDynamicLayersChange",s.hitch(this,"_updateDynamicLayers",a)));"esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&(a.oirConnect=n.connect(a,"onRenderingChange",s.partial(this._updateImageServiceLayers,this,a)));},this));},_deactivate:function(){this._ozeConnect&&n.disconnect(this._ozeConnect);this._olaConnect&&n.disconnect(this._olaConnect);this._olroConnect&&n.disconnect(this._olroConnect);this._olrConnect&&n.disconnect(this._olrConnect);m.forEach(this.layers,function(a){a.ovcConnect&&n.disconnect(a.ovcConnect);a.oscConnect&&n.disconnect(a.oscConnect);a.odcConnect&&n.disconnect(a.odcConnect);a.oirConnect&&n.disconnect(a.oirConnect);},this);},_updateDynamicLayers:function(a){delete a.legendResponse;this._refreshLayers();},_updateImageServiceLayers:function(a,b){delete b.legendResponse;a._refreshLayers();},_refreshLayers:function(){this.refresh();},_updateAllMapLayers:function(){this.layers=[];m.forEach(this.map.layerIds,function(a){a=this.map.getLayer(a);this._isSupportedLayerType(a)&&this.layers.push(a);},this);m.forEach(this.map.graphicsLayerIds,function(a){a=this.map.getLayer(a);this._isSupportedLayerType(a)&&(a._params&&a._params.drawMode)&&this.layers.push(a);},this);this.refresh();},_createLegend:function(){var a=!1;t.set(this.domNode,"position","relative");e.create("div",{id:this.id+"_msg",className:"esriLegendMsg",innerHTML:this.NLS_creatingLegend+"..."},this.domNode);var b=[];m.forEach(this.layers,function(c){if("esri.layers.KMLLayer"==c.declaredClass||"esri.layers.GeoRSSLayer"==c.declaredClass){var f;c.loaded?("esri.layers.KMLLayer"==c.declaredClass?f=c.getLayers():"esri.layers.GeoRSSLayer"==c.declaredClass&&(f=c.getFeatureLayers(),c._hideLayersInLegend&&(f=m.filter(f,function(a){return -1==m.indexOf(c._hideLayersInLegend,a.id);}))),m.forEach(f,function(a){"esri.layers.FeatureLayer"==a.declaredClass&&c._titleForLegend&&(a._titleForLegend=c._titleForLegend+" - ","esriGeometryPoint"==a.geometryType?a._titleForLegend+=this.NLS_points:"esriGeometryPolyline"==a.geometryType?a._titleForLegend+=this.NLS_lines:"esriGeometryPolygon"==a.geometryType&&(a._titleForLegend+=this.NLS_polygons),b.push(a));},this)):n.connect(c,"onLoad",s.hitch(this,function(){this.refresh(this.layerInfos);}));}else{if("esri.layers.WMSLayer"===c.declaredClass){if(c.loaded){if(c.visible&&0<c.layerInfos.length&&m.some(c.layerInfos,function(a){return a.legendURL;})){var g=!1;m.forEach(c.layerInfos,function(b){b.legendURL&&-1<m.indexOf(c.visibleLayers,b.name)&&(g||(e.create("div",{innerHTML:"<span class='esriLegendServiceLabel'>"+(c._titleForLegend||c.name||c.id)+"</span>"},this.domNode),g=!0),e.create("div",{innerHTML:"<img src='"+b.legendURL+"'/>"},this.domNode),a=!0);},this);}}else{n.connect(c,"onLoad",s.hitch(this,function(){this.refresh(this.layerInfos);}));}}else{b.push(c);}}},this);var c=[];m.forEach(b,function(a){if(a.loaded){if(!0===a.visible&&(a.layerInfos||a.renderer||"esri.layers.ArcGISImageServiceLayer"==a.declaredClass)){var b=e.create("div",{id:this.id+"_"+a.id,style:{display:"none"},"class":"esriLegendService"});e.create("span",{innerHTML:this._getServiceTitle(a),"class":"esriLegendServiceLabel"},e.create("td",{align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%"},b)))));e.place(b,this.id,"first");a.legendResponse||a.renderer?this._createLegendForLayer(a):c.push(this._legendRequest(a));}}else{var g=n.connect(a,"onLoad",this,function(a){n.disconnect(g);g=null;this.refresh();});}},this);0===c.length&&!a?(q.byId(this.id+"_msg").innerHTML=this.NLS_noLegend,this._activate()):(new M(c)).addCallback(s.hitch(this,function(b){a?q.byId(this.id+"_msg").innerHTML="":q.byId(this.id+"_msg").innerHTML=this.NLS_noLegend;this._activate();}));},_createLegendForLayer:function(a){if(a.legendResponse||a.renderer){var b=!1;if(a.legendResponse){var c=a.dynamicLayerInfos||a.layerInfos;c&&c.length?m.forEach(c,function(c,f){if(!a._hideLayersInLegend||-1==m.indexOf(a._hideLayersInLegend,c.id)){var g=this._buildLegendItems(a,c,f);b=b||g;}},this):"esri.layers.ArcGISImageServiceLayer"==a.declaredClass&&(b=this._buildLegendItems(a,{id:0,name:null,title:a.name,subLayerIds:null,parentLayerId:-1},0));}else{a.renderer&&(c=a.url?a.url.substring(a.url.lastIndexOf("/")+1,a.url.length):"fc_"+a.id,b=this._buildLegendItems(a,{id:c,name:null,subLayerIds:null,parentLayerId:-1},0));}b&&(t.set(q.byId(this.id+"_"+a.id),"display","block"),t.set(q.byId(this.id+"_msg"),"display","none"));}},_legendRequest:function(a){if(a.loaded){return 10.01<=a.version?this._legendRequestServer(a):this._legendRequestTools(a);}n.connect(a,"onLoad",s.hitch(this,"_legendRequest"));},_legendRequestServer:function(a){var b=a.url,c=b.indexOf("?"),b=-1<c?b.substring(0,c)+"/legend"+b.substring(c):b+"/legend";(c=a._getToken())&&(b+="?token="+c);var d=s.hitch(this,"_processLegendResponse"),c={f:"json"};a._params.dynamicLayers&&(c.dynamicLayers=N.stringify(this._createDynamicLayers(a)),"[{}]"===c.dynamicLayers&&(c.dynamicLayers="[]"));a._params.bandIds&&(c.bandIds=a._params.bandIds);a._params.renderingRule&&(c.renderingRule=a._params.renderingRule);return I({url:b,content:c,callbackParamName:"callback",load:function(b,c){d(a,b,c);},error:H.defaults.io.errorHandler});},_legendRequestTools:function(a){var b=a.url.toLowerCase().indexOf("/rest/"),b=a.url.substring(0,b)+a.url.substring(b+5,a.url.length),b=this._legendUrl+"?soapUrl="+window.escape(b);if(!v("ie")||8<v("ie")){b+="&returnbytes=true";}var c=s.hitch(this,"_processLegendResponse");return I({url:b,content:{f:"json"},callbackParamName:"callback",load:function(b,f){c(a,b,f);},error:H.defaults.io.errorHandler});},_processLegendResponse:function(a,b){b&&b.layers?(a.legendResponse=b,q.byId(this.id+"_"+a.id)&&e.empty(q.byId(this.id+"_"+a.id)),e.create("span",{innerHTML:this._getServiceTitle(a),"class":"esriLegendServiceLabel"},e.create("td",{align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%"},q.byId(this.id+"_"+a.id)))))),this._createLegendForLayer(a)):undefined;},_buildLegendItems:function(a,b,c){var d=!1,f=q.byId(this.id+"_"+a.id),g=b.parentLayerId;if(b.subLayerIds){a=e.create("div",{id:this.id+"_"+a.id+"_"+b.id+"_group",style:{display:"none"},"class":-1==g?0<c?"esriLegendGroupLayer":"":this._legendAlign},-1==g?f:q.byId(this.id+"_"+a.id+"_"+g+"_group")),e.create("td",{innerHTML:b.name,align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%","class":"esriLegendLayerLabel"},a))));}else{if(a.visibleLayers&&-1==(","+a.visibleLayers+",").indexOf(","+b.id+",")){return d;}c=e.create("div",{id:this.id+"_"+a.id+"_"+b.id,style:{display:"none"},"class":-1<g?this._legendAlign:""},-1==g?f:q.byId(this.id+"_"+a.id+"_"+g+"_group"));e.create("td",{innerHTML:b.name||"",align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%","class":"esriLegendLayerLabel"},c))));a.legendResponse?d=d||this._buildLegendItems_Tools(a,b,c):a.renderer&&(d=d||this._buildLegendItems_Renderer(a,b,c));}return d;},_buildLegendItems_Tools:function(a,b,c){var d=b.parentLayerId,f=this.map.getScale(),g=!1,p=function(a,b){var c,d;for(c=0;c<a.length;c++){if(b.dynamicLayerInfos){for(d=0;d<b.dynamicLayerInfos[d].length;d++){if(b.dynamicLayerInfos[d].mapLayerId==a[c].layerId){return a[c];}}}else{if(b.id==a[c].layerId){return a[c];}}}return {};};if(!this._respectCurrentMapScale||this._respectCurrentMapScale&&this._isLayerInScale(a,b,f)){var l=!0;if("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISMapServiceLayer"===a.declaredClass){var k=this._getEffectiveScale(a,b);if(k.minScale&&k.minScale<f||k.maxScale&&k.maxScale>f){l=!1;}}if(l){var f=p(a.legendResponse.layers,b),h=f.legendType,w=f.legend;if(w){c=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},c);var r=e.create("tbody",{},c);(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(c,a,b);m.forEach(w,function(c){if(!(10.1<=a.version&&!c.values&&1<w.length&&(a._hideDefaultSymbol||"<all other values>"===c.label||!c.label&&!("esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&10.3<=a.version)))){if(c.url&&0===c.url.indexOf("http")||c.imageData&&0<c.imageData.length){g=!0,this._buildRow_Tools(c,r,a,b.id,h);}}},this);}}}g&&(t.set(q.byId(this.id+"_"+a.id+"_"+b.id),"display","block"),-1<d&&(t.set(q.byId(this.id+"_"+a.id+"_"+d+"_group"),"display","block"),this._findParentGroup(a.id,a,d)));return g;},_buildRow_Tools:function(a,b,c,d,f){var g=e.create("tr",{},b),p;this.alignRight?(b=e.create("td",{align:this._isRightToLeft?"left":"right"},g),p=e.create("td",{align:this._isRightToLeft?"left":"right",width:35},g)):(p=e.create("td",{width:35},g),b=e.create("td",{},g));g=a.url;(!v("ie")||9<=v("ie")||9>v("ie")&&"esri.layers.ArcGISImageServiceLayer"===c.declaredClass)&&a.imageData&&0<a.imageData.length?g="data:image/png;base64,"+a.imageData:0!==a.url.indexOf("http")&&(g=c.url+"/"+d+"/images/"+a.url,(d=c._getToken())&&(g+="?token="+d));d=e.create("img",{src:g,border:0,style:"opacity:"+c.opacity},p);a=e.create("td",{innerHTML:a.label,align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%",dir:"ltr"},b))));f&&("Stretched"===f&&10.3<=c.version&&"esri.layers.ArcGISImageServiceLayer"===c.declaredClass)&&(a.style.verticalAlign="top",a.style.lineHeight="1",d.style.marginBottom="-1px",d.style.display="block",b.style.verticalAlign="top");9>v("ie")&&(d.style.filter="alpha(opacity="+100*c.opacity+")");},_getVariable:function(a,b){return a?a[b]||m.filter(a.visualVariables,function(a){return a.type===b;})[0]:null;},_buildLegendItems_Renderer:function(a,b,c){var d=b.parentLayerId,f=this.map,g=f.getScale(),p=!1;if(!this._respectCurrentMapScale||this._isLayerInScale(a,b,g)){var l,k,h=a.renderer,w,r,u,n,z;if(h instanceof R&&(h=(h="zoom"===h.rangeType?h.getRendererInfoByZoom(f.getZoom()):h.getRendererInfoByScale(g))&&h.renderer,!h)){return !1;}var f=this._getVariable(h,"colorInfo"),g=this._getVariable(h,"opacityInfo"),v=this._getVariable(h,"sizeInfo");f?(w=this._getMedianColor(h,f),f.field&&(u=s.isFunction(f.field)?null:a._getField(f.field,!0))):g&&(z=s.isFunction(g.field)?null:a._getField(g.field,!0));v&&v.field&&(n=s.isFunction(v.field)?null:a._getField(v.field,!0));if(h instanceof U){p=!0,this._showHeatRamp(a,b,h,c);}else{if(h instanceof S){p=!0,this._showDotDensityLegend(a,b,h,c);}else{if(h instanceof T){p=!0,k=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},c),l=e.create("tbody",{},k),(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(k,a,b),h.latestObservationRenderer&&h.latestObservationRenderer instanceof B&&this._buildRow_Renderer(a,h.latestObservationRenderer.symbol,w,h.latestObservationRenderer.label||this.NLS_currentObservations,null,l),h.observationRenderer&&h.observationRenderer instanceof B&&this._buildRow_Renderer(a,h.observationRenderer.symbol,w,h.observationRenderer.label||this.NLS_previousObservations,null,l);}else{if(h instanceof J){if(h.infos&&0<h.infos.length){p=!0;k=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},c);l=e.create("tbody",{},k);(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(k,a,b);var x=[];m.forEach(h.infos,function(b){var c=null;a._editable&&a.types&&(c=this._getTemplateFromTypes(a.types,b.value));var d=b.label;null==d&&(d=b.value);-1===m.indexOf(x,d)&&(x.push(d),this._buildRow_Renderer(a,b.symbol,w,d,c,l));},this);}}else{h instanceof E?h.infos&&0<h.infos.length&&(p=!0,k=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},c),l=e.create("tbody",{},k),(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(k,a,b),m.forEach(h.infos,function(b){var c=b.label;null==c&&(c=b.minValue+" - "+b.maxValue);this._buildRow_Renderer(a,b.symbol,w,c,null,l);},this)):h instanceof B&&(p=!0,k=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},c),l=e.create("tbody",{},k),(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(k,a,b),r=null,a._editable&&(a.templates&&0<a.templates.length)&&(r=a.templates[0]),k=(u||z)&&n?null:u||z||n,this._buildRow_Renderer(a,h.symbol,w,k?k.alias||k.name:h.label,r,l),r=h.symbol&&h.symbol.color,k&&(u=z=n=null));}}}}p&&(f&&f.field?(u&&this._isSmartRenderer(h,u.name)&&(u=null),this._showColorRamp(a,b,h,null,c,f,u)):g&&r&&this._showColorRamp(a,b,h,r,c,g,z),v&&v.field&&(n&&this._isSmartRenderer(h,n.name)&&(n=null),this._showSizeLegend(a,b,h,v,w,c,n)));!a._hideDefaultSymbol&&h.defaultSymbol&&(p=!0,k=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},c),l=e.create("tbody",{},k),this._buildRow_Renderer(a,h.defaultSymbol,null,h.defaultLabel||"others",null,l));}p&&(t.set(q.byId(this.id+"_"+a.id+"_"+b.id),"display","block"),-1<d&&(t.set(q.byId(this.id+"_"+a.id+"_"+d+"_group"),"display","block"),this._findParentGroup(a.id,d)));return p;},_isSmartRenderer:function(a,b){return a instanceof E&&a.infos&&1===a.infos.length&&a.attributeField===b;},_showColorRamp:function(a,b,c,d,f,g,p){var l;l=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},f);f=e.create("tbody",{},l);(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(l,a,b);p&&this._addSubHeader(f,p.alias||p.name);b=this._getRampStops(c,g,d);b.length&&this._drawColorRamp(f,b,a);},_getMedianColor:function(a,b){var c,d;b.colors?(c=b.minDataValue,d=b.maxDataValue):b.stops&&(c=b.stops[0].value,d=b.stops[b.stops.length-1].value);return a.getColor(c+(d-c)/2,{colorInfo:b});},_getRampStops:function(a,b,c){var d,f,g,p,e=!1;b.colors||b.opacityValues?(f=b.maxDataValue-b.minDataValue,d=m.map([0,0.25,0.5,0.75,1],function(a){g=b.minDataValue+a*f;return Number(g.toFixed(6));}),this._checkPrecision(0,4,d)):b.stops&&(d=m.map(b.stops,function(a){return a.value;}),(e=m.some(b.stops,function(a){return !!a.label;}))&&(p=m.map(b.stops,function(a){return a.label;})));var k=d[0],h,n,r;f=d[d.length-1]-k;return m.map(d,function(g,m){c?(h=new y(c.toRgba()),n=a.getOpacity(g,{opacityInfo:b}),null!=n&&(h.a=n)):h=a.getColor(g,{colorInfo:b});r="";0===m?r="≤ ":m===d.length-1&&(r="≥ ");return {value:g,color:h,offset:1-(g-k)/f,label:e?p[m]:r+F.format(g,{places:20,round:-1}).replace(this.reZerosFractional,"$1").replace(this.reZeros,"")};},this).reverse();},_checkPrecision:function(a,b,c){var d=a+(b-a)/2,f=c[a],g=c[d],p=c[b],e=Math.floor(f),k=Math.floor(g),h=Math.floor(p);e===f&&(h===p&&k!==g&&e!==k&&h!==k)&&(c[d]=k);a+1!==d&&this._checkPrecision(a,d,c);d+1!==b&&this._checkPrecision(d,b,c);},_drawColorRamp:function(a,b,c){var d=e.create("tr",{},a),f,g,p,l,k,h,n;this.alignRight?(a=e.create("td",{align:this._isRightToLeft?"left":"right"},d),f=e.create("td",{align:this._isRightToLeft?"left":"right",width:34},d)):(f=e.create("td",{width:34,align:"center"},d),a=e.create("td",{},d));g=e.create("div",{style:"position: relative; width:34px;"},f);p=e.create("div",{"class":"esriLegendColorRamp"},g);d=t.get(p,"width");f=t.get(p,"height");t.set(g,"height",f+"px");p=G.createSurface(p,d,f);9>v("ie")&&(k=p.getEventSource(),t.set(k,"position","relative"),t.set(k.parentNode,"position","relative"));try{h=p.createRect({width:d,height:f}),h.setFill({type:"linear",x1:0,y1:0,x2:0,y2:f,colors:b}).setStroke(null),p.createRect({width:d,height:f}).setFill(new y([255,255,255,1-c.opacity])).setStroke(null),this._surfaceItems.push(p);}catch(r){p.clear(),p.destroy();}l=e.create("div",{"class":"esriLegendColorRampLabels"},a);m.forEach(b,function(a,c){a.label&&(n="top:"+100*a.offset+"%;",e.create("div",{"class":"esriLegendColorRampTick"+(c===b.length-1?" esriLegendColorRampTickLast":""),innerHTML:"&nbsp;",style:n},g),e.create("div",{"class":"esriLegendColorRampLabel",innerHTML:a.label,style:n},l));});},_showHeatRamp:function(a,b,c,d){var f,g=c.field;f=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d);d=e.create("tbody",{},f);(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(f,a,b);(g=g&&a.getField(g))&&this._addSubHeader(d,g.alias||g.name);b=this._getHeatmapStops(c);b.length&&this._drawColorRamp(d,b,a);},_getHeatmapStops:function(a){var b=a.colorStops;a=a.colors;var c,d,f,g;if(b&&b[0]){if(c=b.length-1,a=b[0]&&null!=b[0].ratio){if((a=b[c])&&1!==a.ratio){b=b.slice(0),b.push({ratio:1,color:a.color}),c++;}}else{d=b[0].value,f=b[c].value-d,b=m.map(b,function(a){return {color:a.color,ratio:(a.value-d)/f};});}}else{a&&a[0]&&(c=a.length-1,g=1/(a.length-1),b=m.map(a,function(a,b){return {color:a,ratio:b*g};}));}b=m.map(b,function(a,b){var d="";0===b?d="Low":b===c&&(d="High");return {color:a.color,label:d,offset:1-a.ratio};});return b.reverse();},_showDotDensityLegend:function(a,b,c,d){var f=c.legendOptions,g,p,l,k,h,n,r,u=this.dotDensitySwatchSize,q=Math.round(u/2);f&&(p=f.backgroundColor,l=f.outline,k=f.valueUnit,h=f.dotCoverage);h=(h||this.dotCoverage)/100;r=Math.round(u*u/Math.pow(c.dotSize,2)*h);d=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d);n=e.create("tbody",{},d);(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(d,a,b);this._addSubHeader(n,D.substitute({value:c.dotValue,unit:k||""},this.NLS_dotValue));m.forEach(c.fields,function(b){b=s.mixin({},b);b.numPoints=r;g=new W(c._generateImageSrc(u,u,[b],{x:0,y:0},{x:u,y:u},p),l||c.outline,u,u);b=a._getField(b.name,!0)||b;this._buildRow_Renderer(a,g,null,b.alias||b.name,null,n,{type:"path",path:"M "+-q+","+-q+" L "+q+","+-q+" L "+q+","+q+" L "+-q+","+q+" L "+-q+","+-q+" E"});},this);},_showSizeLegend:function(a,b,c,d,f,g,p){var l=d.legendOptions,l=l&&l.customValues,k,h=d.minDataValue,n=d.maxDataValue,r=this._getSizeSymbol(c,f);"unknown"!==d.valueUnit||(!r||!l&&(null==h||null==n))||(f=e.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},g),k=e.create("tbody",{},f),(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(f,a,b),p&&this._addSubHeader(k,p.alias||p.name),b=l||this._getDataValues(h,n),m.forEach(b,function(b){r=C.fromJson(r.toJson());this._applySize(r,c,d,b);b=F.format(b,{places:20,round:-1}).replace(this.reZerosFractional,"$1").replace(this.reZeros,"");this._buildRow_Renderer(a,r,null,b,null,k);},this));},_getSizeSymbol:function(a,b){var c,d;if(a instanceof B){d=!0,c=a.symbol;}else{if(a instanceof J||a instanceof E){c=a.infos[0].symbol;}}if(c=-1!==c.type.indexOf("fillsymbol")?null:c){!d&&"picturemarkersymbol"===c.type?(c=new V,c.setStyle("square"),c.outline.setWidth(1)):c=C.fromJson(c.toJson()),b?c.setColor(new y(b.toRgba())):d||c.setColor(new y([127,127,127]));}return c;},_applySize:function(a,b,c,d){var f=a.type;c={sizeInfo:c,shape:-1!==f.indexOf("markersymbol")?a.style:null};b=b.getSize(d,c);switch(f){case "simplemarkersymbol":a.setSize(b);break;case "picturemarkersymbol":a.setWidth(b);a.setHeight(b);break;case "simplelinesymbol":case "cartographiclinesymbol":a.setWidth(b);}},_getDataValues:function(a,b){var c=[a,b],d=Math.LN10,f=Math.log(a),g=Math.log(b),e,l,k,h,n;m.forEach([1,2.5,5],function(a){h=Math.log(a);e=Math.ceil((f-h)/d);l=Math.floor((g-h)/d);if(!(Infinity===Math.abs(e)||Infinity===Math.abs(l))){for(k=e;k<l+1;k++){n=a*Math.pow(10,k),-1===m.indexOf(c,n)&&c.push(n);}}});c.sort(this._sorter);return c.reverse();},_sorter:function(a,b){return a-b;},_buildRow_Renderer:function(a,b,c,d,f,g,p){var l=e.create("tr",{},g),k;this.alignRight?(g=e.create("td",{align:this._isRightToLeft?"left":"right"},l),k=e.create("td",{align:this._isRightToLeft?"left":"right",width:35},l)):(k=e.create("td",{width:35,align:"center"},l),g=e.create("td",{},l));var h=l=30;"simplemarkersymbol"==b.type?(l=Math.min(Math.max(l,b.size+12),125),h=Math.min(Math.max(h,b.size+12),125)):"picturemarkersymbol"==b.type&&(l=Math.min(Math.max(l,b.width),125),h=Math.min(b.height||h,125));k=e.create("div",{style:"width:"+l+"px;height:"+h+"px;"},k);D.isDefined(d)&&"number"===typeof d&&(d=""+d);e.create("td",{innerHTML:d||"",align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%"},g))));a=this._drawSymbol(k,b,c,l,h,f,a,p);this._surfaceItems.push(a);},_addSubHeader:function(a,b){var c=e.create("tr",{},a),c=e.create("td",{align:this._align,colspan:2},c);e.create("td",{innerHTML:b||"",align:this._align},e.create("tr",{},e.create("tbody",{},e.create("table",{width:"95%"},c))));},_drawSymbol:function(a,b,c,d,f,g,e,l){b=C.fromJson(b.toJson());var k=e.opacity;c&&b.setColor(new y(c.toRgba()));if("simplelinesymbol"===b.type||"cartographiclinesymbol"===b.type||"textsymbol"===b.type){if(!b.color){return;}c=b.color.toRgba();c[3]*=k;b.color.setColor(c);}else{if("simplemarkersymbol"===b.type||"simplefillsymbol"===b.type){if(!b.color){return;}c=b.color.toRgba();c[3]*=k;b.color.setColor(c);b.outline&&b.outline.color&&(c=b.outline.color.toRgba(),c[3]*=k,b.outline.color.setColor(c));}else{"picturemarkersymbol"===b.type&&(a.style.opacity=k,a.style.filter="alpha(opacity=("+100*k+"))");}}a=G.createSurface(a,d,f);9>v("ie")&&(c=a.getEventSource(),t.set(c,"position","relative"),t.set(c.parentNode,"position","relative"));g=this._getDrawingToolShape(b,g)||C.getShapeDescriptors(b);var h;try{h=a.createShape(l||g.defaultShape).setFill(g.fill).setStroke(g.stroke);}catch(n){a.clear();a.destroy();return;}var m=h.getBoundingBox();l=m.width;g=m.height;var k=-(m.x+l/2),q=-(m.y+g/2);c=a.getDimensions();k={dx:k+c.width/2,dy:q+c.height/2};if("simplemarkersymbol"===b.type&&"path"===b.style){d=e._getScaleMatrix(m,b.size),h.applyTransform(P.scaleAt(d.xx,d.yy,{x:c.width/2,y:c.height/2}));}else{if(l>d||g>f){e=l/d>g/f,d=((e?d:f)-5)/(e?l:g),s.mixin(k,{xx:d,yy:d});}}h.applyTransform(k);return a;},_getDrawingToolShape:function(a,b){var c;switch(b?b.drawingTool||null:null){case "esriFeatureEditToolArrow":c={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolTriangle":c={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":c={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":c={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":c={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null;}return {defaultShape:c,fill:a.getFill(),stroke:a.getStroke()};},_repaintItems:function(){m.forEach(this._surfaceItems,function(a){this._repaint(a);},this);},_repaint:function(a){if(a){a.getStroke&&a.setStroke&&a.setStroke(a.getStroke());try{a.getFill&&a.setFill&&a.setFill(a.getFill());}catch(b){}a.children&&s.isArray(a.children)&&m.forEach(a.children,this._repaint,this);}},_createHoverAction:function(a,b,c){var d=b._hoverLabel||b._hoverLabels[c.id];d&&(b.mouseMoveHandler=b.mouseMoveHandler||{},b.mouseMoveHandler[c.id]=n.connect(a,"onmousemove",s.hitch(this,function(a,b){this.mouseX=b.clientX;this.mouseY=b.clientY;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,t.set(q.byId(this.id+"_hoverLabel"),"display","none"));setTimeout(s.hitch(this,function(a,b,c){if(a==this.mouseX&&b==this.mouseY&&!this.hoverLabelShowing){if(this.hoverLabelShowing=!0,q.byId(this.id+"_hoverLabel")){var d=q.byId(this.id+"_hoverLabel");d.innerHTML="<span>"+c+"</span>";t.set(d,"top",b+"px");t.set(d,"left",a+15+"px");t.set(d,"display","");}else{e.create("div",{innerHTML:"<span>"+c+"</span>",id:this.id+"_hoverLabel","class":"esriLegendHoverLabel",style:{top:b+"px",left:a+15+"px"}},document.body);}}},b.clientX,b.clientY,a),500);},d)),b.mouseOutHandler=b.mouseOutHandler||{},b.mouseOutHandler[c.id]=n.connect(a,"onmouseout",s.hitch(this,function(a){this.mouseY=this.mouseX=-1;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,t.set(q.byId(this.id+"_hoverLabel"),"display","none"));})));},_removeHoverHandlers:function(){var a;m.forEach(this.layers,function(b){if(b.mouseMoveHandler){for(a in b.mouseMoveHandler){n.disconnect(b.mouseMoveHandler[a]);}}if(b.mouseOutHandler){for(a in b.mouseOutHandler){n.disconnect(b.mouseOutHandler[a]);}}});},_createDynamicLayers:function(a){var b=[],c;m.forEach(a.dynamicLayerInfos||a.layerInfos,function(d){c={id:d.id};c.source=d.source&&d.source.toJson();var f;a.layerDefinitions&&a.layerDefinitions[d.id]&&(f=a.layerDefinitions[d.id]);f&&(c.definitionExpression=f);var g;a.layerDrawingOptions&&a.layerDrawingOptions[d.id]&&(g=a.layerDrawingOptions[d.id]);g&&(c.drawingInfo=g.toJson());c.minScale=d.minScale||0;c.maxScale=d.maxScale||0;b.push(c);});return b;},_getTemplateFromTypes:function(a,b){var c;for(c=0;c<a.length;c++){if(a[c].id==b&&a[c].templates&&0<a[c].templates.length){return a[c].templates[0];}}return null;},_findParentGroup:function(a,b,c){var d,f=b.dynamicLayerInfos||b.layerInfos;for(d=0;d<f.length;d++){if(c==f[d].id){-1<f[d].parentLayerId&&(t.set(q.byId(this.id+"_"+a+"_"+f[d].parentLayerId+"_group"),"display","block"),this._findParentGroup(a,b,f[d].parentLayerId));break;}}},_addSubLayersToHide:function(a){function b(c,d){var f=a.layer.dynamicLayerInfos||a.layer.layerInfos,g,e;for(g=0;g<f.length;g++){if(f[g].id===c&&f[g].subLayerIds){for(e=0;e<f[g].subLayerIds.length;e++){var l=f[g].subLayerIds[e];-1===m.indexOf(d,l)&&(d.push(l),b(l,d));}}}};a.layer.layerInfos&&m.forEach(a.layer._hideLayersInLegend,function(c){b(c,a.layer._hideLayersInLegend);});},_isLayerInScale:function(a,b,c){var d,f=!0;if(a.legendResponse&&a.legendResponse.layers){for(d=0;d<a.legendResponse.layers.length;d++){var g=a.legendResponse.layers[d];if(b.id==g.layerId){var e,l;!a.minScale&&0!==a.minScale||!a.maxScale&&0!==a.maxScale?(0==g.minScale&&a.tileInfo&&(e=a.tileInfo.lods[0].scale),0==g.maxScale&&a.tileInfo&&(l=a.tileInfo.lods[a.tileInfo.lods.length-1].scale)):(e=Math.min(a.minScale,g.minScale)||a.minScale||g.minScale,l=Math.max(a.maxScale,g.maxScale));if(0<e&&e<c||l>c){f=!1;}break;}}}else{if(a.minScale||a.maxScale){if(a.minScale&&a.minScale<c||a.maxScale&&a.maxScale>c){f=!1;}}}return f;},_getServiceTitle:function(a){var b=a._titleForLegend;b||((b=a.url)?-1<a.url.indexOf("/MapServer")?(b=a.url.substring(0,a.url.indexOf("/MapServer")),b=b.substring(b.lastIndexOf("/")+1,b.length)):-1<a.url.indexOf("/ImageServer")?(b=a.url.substring(0,a.url.indexOf("/ImageServer")),b=b.substring(b.lastIndexOf("/")+1,b.length)):-1<a.url.indexOf("/FeatureServer")&&(b=a.url.substring(0,a.url.indexOf("/FeatureServer")),b=b.substring(b.lastIndexOf("/")+1,b.length)):b="",a.name&&(b=0<b.length?b+(" - "+a.name):a.name));return Q.encode(b);},_getEffectiveScale:function(a,b){var c=b.minScale,d=b.maxScale;if(D.isDefined(b.parentLayerId)){var f=a.layerInfos,g=b.parentLayerId,e;for(e=f.length-1;0<=e;e--){if(f[e].id==g){if(0==c&&0<f[e].minScale?c=f[e].minScale:0<c&&0==f[e].minScale||0<c&&0<f[e].minScale&&(c=Math.min(c,f[e].minScale)),d=Math.max(d||0,f[e].maxScale||0),-1<f[e].parentLayerId){g=f[e].parentLayerId;}else{break;}}}}return {minScale:c,maxScale:d};},_isSupportedLayerType:function(a){return a&&("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&10.2<=a.version||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass||"esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass||"esri.layers.KMLLayer"===a.declaredClass||"esri.layers.GeoRSSLayer"===a.declaredClass||"esri.layers.WMSLayer"===a.declaredClass||"esri.layers.CSVLayer"===a.declaredClass)?!0:!1;}});s.mixin(x,{ALIGN_LEFT:0,ALIGN_RIGHT:1});return x;});},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(lang){var dhe=lang.getObject("dojox.html.entities",true);var _124e=function(str,map){var _124f,_1250;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_124f=map._encCache.mapper;_1250=map._encCache.regexp;}else{_124f={};_1250=["["];var i;for(i=0;i<map.length;i++){_124f[map[i][0]]="&"+map[i][1]+";";_1250.push(map[i][0]);}_1250.push("]");_1250=new RegExp(_1250.join(""),"g");map._encCache={mapper:_124f,regexp:_1250,length:map.length};}str=str.replace(_1250,function(c){return _124f[c];});return str;};var _1251=function(str,map){var _1252,_1253;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_1252=map._decCache.mapper;_1253=map._decCache.regexp;}else{_1252={};_1253=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_1253.push("|");}_1252[e]=map[i][0];_1253.push(e);}_1253.push(")");_1253=new RegExp(_1253.join(""),"g");map._decCache={mapper:_1252,regexp:_1253,length:map.length};}str=str.replace(_1253,function(c){return _1252[c];});return str;};dhe.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],[" ","nbsp"]];dhe.latin=[["¡","iexcl"],["¢","cent"],["£","pound"],["€","euro"],["¤","curren"],["¥","yen"],["¦","brvbar"],["§","sect"],["¨","uml"],["©","copy"],["ª","ordf"],["«","laquo"],["¬","not"],["­","shy"],["®","reg"],["¯","macr"],["°","deg"],["±","plusmn"],["²","sup2"],["³","sup3"],["´","acute"],["µ","micro"],["¶","para"],["·","middot"],["¸","cedil"],["¹","sup1"],["º","ordm"],["»","raquo"],["¼","frac14"],["½","frac12"],["¾","frac34"],["¿","iquest"],["À","Agrave"],["Á","Aacute"],["Â","Acirc"],["Ã","Atilde"],["Ä","Auml"],["Å","Aring"],["Æ","AElig"],["Ç","Ccedil"],["È","Egrave"],["É","Eacute"],["Ê","Ecirc"],["Ë","Euml"],["Ì","Igrave"],["Í","Iacute"],["Î","Icirc"],["Ï","Iuml"],["Ð","ETH"],["Ñ","Ntilde"],["Ò","Ograve"],["Ó","Oacute"],["Ô","Ocirc"],["Õ","Otilde"],["Ö","Ouml"],["×","times"],["Ø","Oslash"],["Ù","Ugrave"],["Ú","Uacute"],["Û","Ucirc"],["Ü","Uuml"],["Ý","Yacute"],["Þ","THORN"],["ß","szlig"],["à","agrave"],["á","aacute"],["â","acirc"],["ã","atilde"],["ä","auml"],["å","aring"],["æ","aelig"],["ç","ccedil"],["è","egrave"],["é","eacute"],["ê","ecirc"],["ë","euml"],["ì","igrave"],["í","iacute"],["î","icirc"],["ï","iuml"],["ð","eth"],["ñ","ntilde"],["ò","ograve"],["ó","oacute"],["ô","ocirc"],["õ","otilde"],["ö","ouml"],["÷","divide"],["ø","oslash"],["ù","ugrave"],["ú","uacute"],["û","ucirc"],["ü","uuml"],["ý","yacute"],["þ","thorn"],["ÿ","yuml"],["ƒ","fnof"],["Α","Alpha"],["Β","Beta"],["Γ","Gamma"],["Δ","Delta"],["Ε","Epsilon"],["Ζ","Zeta"],["Η","Eta"],["Θ","Theta"],["Ι","Iota"],["Κ","Kappa"],["Λ","Lambda"],["Μ","Mu"],["Ν","Nu"],["Ξ","Xi"],["Ο","Omicron"],["Π","Pi"],["Ρ","Rho"],["Σ","Sigma"],["Τ","Tau"],["Υ","Upsilon"],["Φ","Phi"],["Χ","Chi"],["Ψ","Psi"],["Ω","Omega"],["α","alpha"],["β","beta"],["γ","gamma"],["δ","delta"],["ε","epsilon"],["ζ","zeta"],["η","eta"],["θ","theta"],["ι","iota"],["κ","kappa"],["λ","lambda"],["μ","mu"],["ν","nu"],["ξ","xi"],["ο","omicron"],["π","pi"],["ρ","rho"],["ς","sigmaf"],["σ","sigma"],["τ","tau"],["υ","upsilon"],["φ","phi"],["χ","chi"],["ψ","psi"],["ω","omega"],["ϑ","thetasym"],["ϒ","upsih"],["ϖ","piv"],["•","bull"],["…","hellip"],["′","prime"],["″","Prime"],["‾","oline"],["⁄","frasl"],["℘","weierp"],["ℑ","image"],["ℜ","real"],["™","trade"],["ℵ","alefsym"],["←","larr"],["↑","uarr"],["→","rarr"],["↓","darr"],["↔","harr"],["↵","crarr"],["⇐","lArr"],["⇑","uArr"],["⇒","rArr"],["⇓","dArr"],["⇔","hArr"],["∀","forall"],["∂","part"],["∃","exist"],["∅","empty"],["∇","nabla"],["∈","isin"],["∉","notin"],["∋","ni"],["∏","prod"],["∑","sum"],["−","minus"],["∗","lowast"],["√","radic"],["∝","prop"],["∞","infin"],["∠","ang"],["∧","and"],["∨","or"],["∩","cap"],["∪","cup"],["∫","int"],["∴","there4"],["∼","sim"],["≅","cong"],["≈","asymp"],["≠","ne"],["≡","equiv"],["≤","le"],["≥","ge"],["⊂","sub"],["⊃","sup"],["⊄","nsub"],["⊆","sube"],["⊇","supe"],["⊕","oplus"],["⊗","otimes"],["⊥","perp"],["⋅","sdot"],["⌈","lceil"],["⌉","rceil"],["⌊","lfloor"],["⌋","rfloor"],["〈","lang"],["〉","rang"],["◊","loz"],["♠","spades"],["♣","clubs"],["♥","hearts"],["♦","diams"],["Œ","OElig"],["œ","oelig"],["Š","Scaron"],["š","scaron"],["Ÿ","Yuml"],["ˆ","circ"],["˜","tilde"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["–","ndash"],["—","mdash"],["‘","lsquo"],["’","rsquo"],["‚","sbquo"],["“","ldquo"],["”","rdquo"],["„","bdquo"],["†","dagger"],["‡","Dagger"],["‰","permil"],["‹","lsaquo"],["›","rsaquo"]];dhe.encode=function(str,m){if(str){if(!m){str=_124e(str,dhe.html);str=_124e(str,dhe.latin);}else{str=_124e(str,m);}}return str;};dhe.decode=function(str,m){if(str){if(!m){str=_1251(str,dhe.html);str=_1251(str,dhe.latin);}else{str=_1251(str,m);}}return str;};return dhe;});},"esri/dijit/LocateButton":function(){define(["require","dojo/Evented","dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../config","dijit/_WidgetBase","dijit/a11yclick","dijit/_TemplatedMixin","dojo/on","dojo/Deferred","dojo/text!./templates/LocateButton.html","dojo/i18n!../nls/jsapi","dojo/dom-class","dojo/dom-style","dojo/dom-attr","../geometry/webMercatorUtils","../geometry/Point","../SpatialReference","../graphic","../symbols/PictureMarkerSymbol","../tasks/ProjectParameters"],function(n,p,q,d,C,D,k,r,s,t,l,g,u,v,e,m,h,w,x,y,z,A,B){return q("esri.dijit.LocateButton",[r,t,p],{templateString:u,options:{theme:"LocateButton",map:null,visible:!0,highlightLocation:!0,symbol:new A(n.toUrl(".")+"/images/sdk_gps_location.png",28,28),infoTemplate:null,scale:null,useTracking:!1,clearOnTrackingStop:!1,setScale:!0,centerAt:!0,timeout:15000,graphicsLayer:null,geolocationOptions:{maximumAge:0,timeout:15000,enableHighAccuracy:!0}},constructor:function(a,c){var b=d.mixin({},this.options,a);this.domNode=c;this._i18n=v;navigator.geolocation||(b.visible=!1,undefined);this.set("map",b.map);this.set("theme",b.theme);this.set("visible",b.visible);this.set("scale",b.scale);this.set("highlightLocation",b.highlightLocation);this.set("symbol",b.symbol);this.set("infoTemplate",b.infoTemplate);this.set("geolocationOptions",b.geolocationOptions);this.set("useTracking",b.useTracking);this.set("setScale",b.setScale);this.set("centerAt",b.centerAt);this.set("timeout",b.timeout);this.set("graphicsLayer",b.graphicsLayer);this.set("clearOnTrackingStop",b.clearOnTrackingStop);this.watch("theme",this._updateThemeWatch);this.watch("visible",this._visible);this.watch("tracking",this._locate);this.watch("useTracking",d.hitch(this,function(){this.get("tracking")&&!this.get("useTracking")&&this._stopTracking();this._setTitle();}));this._css={container:"locateContainer",locate:"zoomLocateButton",loading:"loading",tracking:"tracking"};},postCreate:function(){this.inherited(arguments);this.own(l(this._locateNode,s,d.hitch(this,this.locate)));},startup:function(){this.get("map")||(this.destroy(),undefined);if(this.get("map").loaded){this._init();}else{l.once(this.get("map"),"load",d.hitch(this,function(){this._init();}));}},destroy:function(){this._graphicsEvent&&this._graphicsEvent.remove();this._removeWatchPosition();this.inherited(arguments);},clear:function(){var a=this.get("highlightGraphic"),c=this.get("graphicsLayer");a&&(c?c.remove(a):this.get("map").graphics.remove(a),this.set("highlightGraphic",null));},locate:function(){this.get("useTracking")&&this.set("tracking",!this.get("tracking"));return this._locate();},show:function(){this.set("visible",!0);},hide:function(){this.set("visible",!1);},_setTitle:function(){this.get("useTracking")?this.get("tracking")?h.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.stopTracking):h.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.tracking):h.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.title);},_removeWatchPosition:function(){this.get("watchId")&&(navigator.geolocation.clearWatch(this.get("watchId")),this.set("watchId",null));this._removePrivateVars();},_stopTracking:function(){e.remove(this._locateNode,this._css.tracking);this._removeWatchPosition();this.get("clearOnTrackingStop")&&this.clear();this._hideLoading();},_startTracking:function(){e.add(this._locateNode,this._css.tracking);this._removeWatchPosition();var a=navigator.geolocation.watchPosition(d.hitch(this,function(a){this._setPosition(a).then(d.hitch(this,function(a){this._locateEvent(a);}),d.hitch(this,function(a){a||(a=Error("LocateButton::Error setting the position."));this._locateError(a);}));}),d.hitch(this,function(a){a||(a=Error("LocateButton::Could not get tracking position."));this._locateError(a);}),this.get("geolocationOptions"));this.set("watchId",a);},_removePrivateVars:function(){this._scale=this._position=this._graphic=null;},_getCurrentPosition:function(){var a=new g;this._removePrivateVars();var c=setTimeout(d.hitch(this,function(){clearTimeout(c);a.reject(Error("LocateButton::time expired for getting location."));}),this.get("timeout"));navigator.geolocation.getCurrentPosition(d.hitch(this,function(b){clearTimeout(c);this._setPosition(b).then(d.hitch(this,function(b){a.resolve(b);}),d.hitch(this,function(b){b||(b=Error("LocateButton::Error setting map position."));a.reject(b);}));}),d.hitch(this,function(b){b||(b=Error("LocateButton::Could not get current position."));a.reject(b);}),this.get("geolocationOptions"));return a.promise;},_locate:function(){var a=new g;this._showLoading();if(navigator.geolocation){this.get("useTracking")?this.get("tracking")?(this._startTracking(),a.resolve({tracking:!0})):(this._stopTracking(),a.resolve({tracking:!1})):this._getCurrentPosition().then(d.hitch(this,function(b){this._locateEvent(b);a.resolve(b);}),d.hitch(this,function(b){b||(b=Error("LocateButton::Could not get current position."));this._locateError(b);a.reject(b);}));}else{var c=Error("LocateButton::geolocation unsupported");this._locateError(c);a.reject(c);}this._setTitle();return a.promise;},_projectPoint:function(a){var c=new g,b=this.get("map").spatialReference,f=b.wkid;b.isWebMercator()?(a=w.geographicToWebMercator(a),c.resolve(a)):k.defaults.geometryService&&4326!==f?(f=new B,f.geometries=[a],f.outSR=b,k.defaults.geometryService.project(f).then(d.hitch(this,function(a){a&&a.length?c.resolve(a[0]):c.reject(Error("LocateButton::Point was not projected."));}),function(a){a||(a=Error("LocateButton::please specify a geometry service on esri/config to project."));c.reject(a);})):c.resolve(a);return c.promise;},_getScale:function(a){var c=this.get("scale");return a&&a.coords?c||a.coords.accuracy||50000:c||50000;},_createPoint:function(a){var c;a&&a.coords&&(c=new x([a.coords.longitude,a.coords.latitude],new y({wkid:4326})));return c;},_setPosition:function(a){var c=new g,b,f;this._removePrivateVars();if((this._position=a)&&a.coords){if(b=this._createPoint(a)){this._graphic=f=this._createGraphic(b,a);}var e=this._getScale(a);this._scale=e;b?this._projectPoint(b).then(d.hitch(this,function(b){this._graphic=f=this._createGraphic(b,a);var g={graphic:f,scale:e,position:a};this.get("setScale")&&this.get("map").setScale(e);this.get("centerAt")?this.get("map").centerAt(b).then(d.hitch(this,function(){c.resolve(g);}),d.hitch(this,function(a){a||(a=Error("LocateButton::Could not center map."));c.reject(a);})):c.resolve(g);}),d.hitch(this,function(a){a||(a=Error("LocateButton::Error projecting point."));c.reject(a);})):(b=Error("LocateButton::Invalid point"),c.reject(b));}else{b=Error("LocateButton::Invalid position"),c.reject(b);}return c.promise;},_createGraphic:function(a,c){var b;a&&(b={position:c},b=new z(a,this.get("symbol"),b,this.get("infoTemplate")));return b;},_locateEvent:function(a){if(a.graphic){var c=this.get("highlightGraphic"),b=this.get("graphicsLayer");c?(c.setGeometry(a.graphic.geometry),c.setAttributes(a.graphic.attributes),c.setInfoTemplate(a.graphic.infoTemplate),c.setSymbol(a.graphic.symbol)):(c=a.graphic,this.get("highlightLocation")&&(b?b.add(c):this.get("map").graphics.add(c)));this.set("highlightGraphic",c);}this._hideLoading();this.emit("locate",a);},_locateError:function(a){a={graphic:this._graphic,scale:this._scale,position:this._position,error:a};this._hideLoading();this.emit("locate",a);},_showLoading:function(){this.get("useTracking")||e.add(this._locateNode,this._css.loading);},_hideLoading:function(){this.get("useTracking")||e.remove(this._locateNode,this._css.loading);},_init:function(){this._visible();this._setTitle();this.get("tracking")&&this.get("useTracking")&&this._locate();this.set("loaded",!0);this.emit("load",{});},_updateThemeWatch:function(a,c,b){e.remove(this.domNode,c);e.add(this.domNode,b);},_visible:function(){this.get("visible")?m.set(this.domNode,"display","block"):m.set(this.domNode,"display","none");}});});},"esri/tasks/ProjectParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","../kernel","../lang","../geometry/jsonUtils"],function(c,g,d,b,h,k,e,f){return c(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var c=d.map(this.geometries,function(a){return a.toJson();}),a={};a.outSR=this.outSR.wkid||b.toJson(this.outSR.toJson());a.inSR=this.geometries[0].spatialReference.wkid||b.toJson(this.geometries[0].spatialReference.toJson());a.geometries=b.toJson({geometryType:f.getJsonType(this.geometries[0]),geometries:c});this.transformation&&(a.transformation=this.transformation.wkid||b.toJson(this.transformation));e.isDefined(this.transformForward)&&(a.transformForward=this.transformForward);return a;}});});},"esri/dijit/PopupMobile":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/window","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","../InfoWindowBase","../PopupBase","./InfoView","./NavigationBar","../kernel","../domUtils","dojo/i18n!../nls/jsapi","dojo/NodeList-dom"],function(n,t,r,b,q,s,h,C,D,u,v,e,p,w,m,x,y,z,A,E,g,B){return t([x,y],{declaredClass:"esri.dijit.PopupMobile",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:10,marginTop:10,highlight:!0,popupNavigationBar:null,popupInfoView:null,location:null,xIcon:n.toUrl("./images/whitex.png"),dArrowIcon:n.toUrl("./images/whitedown.png"),lArrowIcon:n.toUrl("./images/whitel.png"),rArrowIcon:n.toUrl("./images/whiter.png"),constructor:function(a,c){this.initialize();r.mixin(this,a);this.domNode=u.byId(c);this._nls=r.mixin({},B.widgets.popup);var f=this.domNode;e.add(f,"esriPopupMobile");v.set(f,"innerHTML","<div class='sizer'><div class='titlePane'><div class='spinner hidden'></div><div class='title'></div><div style='text-align:center'><div class='titleButton prev hidden'></div><div class='footer' style='display:inline-block;width:60px;height:15px;'></div><div class='titleButton next hidden'></div></div><div class='titleButton close'></div><div class='titleButton arrow hidden'></div></div></div><div class='pointer top hidden'></div><div class='pointer bottom hidden'></div>");var d=h.query(".titlePane",f)[0];this._arrowButton=h.query(".arrow",d)[0];this._pointerTop=h.query(".top",f)[0];this._pointerBottom=h.query(".bottom",f)[0];this._title=h.query(".title",d)[0];this._footer=h.query(".footer",d)[0];this._prev=h.query(".prev",d)[0];this._next=h.query(".next",d)[0];this._spinner=h.query(".spinner",d)[0];this._eventConnections=[b.connect(h.query(".close",d)[0],"onclick",this,this.hide),b.connect(this._arrowButton,"onclick",this,this._toggleView),b.connect(this._prev,"onclick",this,function(){this.selectPrevious();this._updateUI();}),b.connect(this._next,"onclick",this,function(){this.selectNext();this._updateUI();})];this._initPopupNavigationBar();this._initPopupInfoView();g.hide(f);this.isShowing=!1;},setMap:function(a){this.inherited(arguments);p.place(this.domNode,a.root);this.highlight&&this.enableHighlight(a);},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(a,c){this.destroyDijits(this._title);this.place(a,this._title);this.destroyDijits(this._footer);this.place(c,this._footer);this.isShowing&&(this.startupDijits(this._title),this.startupDijits(this._footer));},setContent:function(a){this.destroyDijits(this._contentPane);this.place(a,this._contentPane);this.startupDijits(this._contentPane);},show:function(a){if(a){var c=this.map;a.spatialReference?(this.location=a,a=c.toScreen(a)):this.location=c.toMap(a);this._maximized?this.restore():this._setPosition(a);this.isShowing||(g.show(this.domNode),this.isShowing=!0,this.onShow());}else{g.show(this.domNode),this.isShowing=!0;}},hide:function(){this.isShowing&&(g.hide(this.domNode),this.isShowing=!1,this.onHide());},onShow:function(){this._followMap();this.startupDijits(this._title);this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);this.destroyDijits(this._footer);q.forEach(this._eventConnections,b.disconnect);p.destroy(this.domNode);},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;","&nbsp;");e.add(this._arrowButton,"hidden");this._updateUI();this.hideHighlight();},onSelectionChange:function(){var a=this.selectedIndex;this._updateUI();0<=a&&(this.setContent(this.features[a].getContent()),this.updateHighlight(this.map,this.features[a]),this.isShowing&&this.showHighlight());},onDfdComplete:function(){this._updateUI();},_followMap:function(){this._unfollowMap();var a=this.map;this._handles=[b.connect(a,"onPanStart",this,this._onPanStart),b.connect(a,"onPan",this,this._onPan),b.connect(a,"onZoomStart",this,this._onZoomStart),b.connect(a,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var a=this._handles;a&&(q.forEach(a,b.disconnect),this._handles=null);},_onPanStart:function(){var a=this.domNode.style;this._panOrigin={left:a.left,top:a.top,right:a.right,bottom:a.bottom};},_onPan:function(a,c){var f=this._panOrigin,d=c.x,e=c.y,b=f.left,k=f.top,l=f.right,f=f.bottom;b&&(b=parseFloat(b)+d+"px");k&&(k=parseFloat(k)+e+"px");l&&(l=parseFloat(l)-d+"px");f&&(f=parseFloat(f)-e+"px");m.set(this.domNode,{left:b,top:k,right:l,bottom:f});},_onZoomStart:function(){g.hide(this.domNode);},_onExtentChange:function(a,c,f){f&&(g.show(this.domNode),this.show(this._targetLocation||this.location),this._targetLocation=null);},_setPosition:function(a){var c=a.x;a=a.y;var f=w.getContentBox(this.map.container),d=f.w,f=f.h,b=0,g=a+10,k=118,l=d-18;18<c&&c<l?(b=c-130,0>b?b=0:b>d-260&&(b=d-260)):18>=c?b=c-18:c>=l&&(b=d-260+(c-l));118<c&&c<d-130?k=118:118>=c?18<c?k=c-12:18>=c&&(k=6):c>=d-130&&(c<l?k=118+c-(d-130):c>=l&&(k=118+l-(d-130)));a<=f/2?(m.set(this.domNode,{left:b+"px",top:g+"px",bottom:null}),m.set(this._pointerTop,{left:k+"px"}),e.add(this._pointerBottom,"hidden"),e.remove(this._pointerTop,"hidden")):(m.set(this.domNode,{left:b+"px",top:g-64+"px",bottom:null}),m.set(this._pointerBottom,{left:k+"px"}),e.add(this._pointerTop,"hidden"),e.remove(this._pointerBottom,"hidden"));},_showPointer:function(a){q.forEach(["topLeft","topRight","bottomRight","bottomLeft"],function(c){c===a?h.query(".pointer."+c,this.domNode).removeClass("hidden"):h.query(".pointer."+c,this.domNode).addClass("hidden");},this);},_toggleView:function(){this.popupNavigationBar||this._initPopupNavigationBar();this.popupInfoView||this._initPopupInfoView();this.hide();g.show(this.popupNavigationBar.container);g.show(this.popupInfoView.container);0<=this.selectedIndex&&this.setContent(this.features[this.selectedIndex].getContent());},_handleNavigationBar:function(a){this.popupInfoView.animateTo(0);switch(a.name){case "CloseButton":g.hide(this.popupNavigationBar.container);g.hide(this.popupInfoView.container);this.hide();break;case "ToggleButton":g.hide(this.popupNavigationBar.container);g.hide(this.popupInfoView.container);this.show(this.location);break;case "PreviousButton":this.selectPrevious();this._updateUI();break;case "NextButton":this.selectNext(),this._updateUI();}},_initPopupNavigationBar:function(){var a={};a.items=[{name:"CloseButton",type:"img",src:this.xIcon,srcAlt:this.xIcon,position:"left"},{name:"Title",type:"span",text:"",position:"center"},{name:"ToggleButton",type:"img",src:this.dArrowIcon,srcAlt:this.dArrowIcon,position:"right",toggleGroup:"toggle"},{name:"PreviousButton",type:"img",src:this.lArrowIcon,srcAlt:this.lArrowIcon,position:"right2",toggleGroup:"previous"},{name:"NextButton",type:"img",src:this.rArrowIcon,srcAlt:this.rArrowIcon,position:"right1",toggleGroup:"next"}];this.popupNavigationBar=new A(a,p.create("div",{},s.body()));b.connect(this.popupNavigationBar,"onCreate",this,function(a){this._prevFeatureButton=a[3]._node;this._nextFeatureButton=a[4]._node;});b.connect(this.popupNavigationBar,"onSelect",this,this._handleNavigationBar);b.connect(this.popupNavigationBar,"onUnSelect",this,this._handleNavigationBar);this.popupNavigationBar.startup();g.hide(this.popupNavigationBar.container);},_initPopupInfoView:function(){this.popupInfoView=new z({items:[{name:"Navigator",type:"div",text:""},{name:"content",type:"div",text:""},{name:"attachment",type:"div",text:""}]},p.create("div",{},s.body()));e.add(this.popupInfoView.container,"esriMobilePopupInfoView");this.popupInfoView.enableTouchScroll();b.connect(this.popupInfoView,"onCreate",this,function(a){this._contentPane=a[1]._node;0<=this.selectedIndex&&this.setContent(this.features[this.selectedIndex].getContent());});b.connect(this.popupInfoView,"onSwipeLeft",this,function(){});b.connect(this.popupInfoView,"onSwipeRight",this,function(){});this.popupInfoView.startup();},_updateUI:function(){var a="&nbsp;",c="&nbsp;",b=this.selectedIndex,d=this.features,g=this.deferreds,h=this._prevFeatureButton.parentNode,k=this._nextFeatureButton.parentNode,l=this._spinner,m=this._nls;d&&1<=d.length?(a=d[b].getTitle(),c=b+1+" of "+d.length,e.remove(this._arrowButton,"hidden"),0===b?(e.add(h,"hidden"),e.add(this._prev,"hidden")):(e.remove(h,"hidden"),e.remove(this._prev,"hidden")),b===d.length-1?(e.add(k,"hidden"),e.add(this._next,"hidden")):(e.remove(k,"hidden"),e.remove(this._next,"hidden"))):(e.add(this._arrowButton,"hidden"),e.add(h,"hidden"),e.add(k,"hidden"),e.add(this._prev,"hidden"),e.add(this._next,"hidden"));this.setTitle(a,c);this.popupNavigationBar.getItems()[1]._node.innerHTML=c;g&&g.length?(e.remove(l,"hidden"),this.setTitle(m.NLS_searching+"...","&nbsp;")):(e.add(l,"hidden"),(!d||!d.length)&&this.setTitle("No Information","&nbsp;"));}});});},"esri/dijit/InfoView":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","../kernel","./_TouchBase"],function(l,r,m,d,n,s,t,p,h,e,k,u,q){return l(null,{declaredClass:"esri.dijit.InfoView",_items:[],_top:null,_sections:[],_isDecelerate:!1,constructor:function(a,c){var b;this.container=p.byId(c);this._touchBase=q(this.container,null);this._slideDiv=e.create("div",null,this.container,"first");this.events=[];this._items=a.items;a.sections&&(this._sections=a.sections);h.add(this.container,"esriMobileInfoView");if(0===this._sections.length){e.create("div",{},this._slideDiv);}else{for(b=0;b<this._sections.length;b++){var d=e.create("div",{"class":"esriMobileInfoViewSection"},this._slideDiv);e.create("div",{innerHTML:this._sections[b].title},d);}}for(b=0;b<this._items.length;b++){var f,d=0;this._items[b].section&&(d=this._items[b].section);switch(this._items[b].type){case "div":f=e.create("div",{"class":"esriMobileInfoViewItem",style:this._items[b].style},this._slideDiv.childNodes[d]),f=e.create("div",{innerHTML:this._items[b].text},f);}this._items[b].className&&h.add(f,this._items[b].className);f._index=b;f._item=this._items[b];this._items[b]._node=f;}this.startTouchY=0;},startup:function(){this.onCreate(this._items);this._animateTo(0);},destroy:function(){m.forEach(this.events,d.disconnect);this._touchBase=null;n.query("img",this.container).forEach(function(a){a._index=null;a._item=null;e.destroy(a);});this._items=null;e.destroy(this._slideDiv);e.destroy(this.container);this.container=this._slideDiv=null;},getItems:function(){return this._items;},setPreventDefault:function(a){this._touchBase.setPreventDefault(a);},enableTouchScroll:function(){this._touchBase.setPreventDefault(!0);this.events.push(d.connect(this._touchBase,"onTouchStart",this,this._onTouchStartHandler));this.events.push(d.connect(this._touchBase,"onTouchMove",this,this._onTouchMoveHandler));this.events.push(d.connect(this._touchBase,"onTouchEnd",this,this._onTouchEndHandler));this._slideDiv.style.webkitTransform="translate3d(0,"+this._top+"px, 0)";},disableTouchScroll:function(){d.disconnect(this.events.pop());d.disconnect(this.events.pop());d.disconnect(this.events.pop());this._touchBase.setPreventDefault(!1);this._slideDiv.style.webkitTransform="translate3d(0, 0px, 0)";},animateTo:function(){this._slideDiv.style.WebkitTransitionDuration="0s";this._animateTo(0);},onSelect:function(a){},onUnSelect:function(a){},onCreate:function(a){},onClick:function(a){},onSwipeLeft:function(){},onSwipeRight:function(){},_onTouchStartHandler:function(a){this._slideDiv.style.WebkitTransitionDuration="0s";this._moveDirection=null;this._startTime=new Date;this.startTouchY=a.touches[0].clientY;this.contentStartOffsetY=this.contentOffsetY;},_onTouchMoveHandler:function(a){this._moveDirection||(Math.abs(a.curY)>Math.abs(a.curX)?this._moveDirection="vertical":this._moveDirection="horizontal");"horizontal"!==this._moveDirection&&"vertical"===this._moveDirection&&this._animateTo(a.touches[0].clientY-this.startTouchY+this.contentStartOffsetY);},_onTouchEndHandler:function(a){this._endTime=new Date;this._deltaMovement=a.curY;if("vertical"===this._moveDirection){this._shouldStartMomentum()?this._doMomentum():this._snapToBounds();}else{if("horizontal"===this._moveDirection){if("left"===a.swipeDirection){this.onSwipeLeft();}else{if("right"===a.swipeDirection){this.onSwipeRight();}}}}},_shouldStartMomentum:function(){this._diff=this._endTime-this._startTime;this._velocity=this._deltaMovement/this._diff;return 0.2<Math.abs(this._velocity)&&200>this._diff?!0:!1;},_pullToStop:function(a){80<Math.abs(a)&&(a=0<a?80:-contentBox.h+parentBox.h-10-80);this._slideDiv.style.webkitTransition="-webkit-transform 200ms cubic-bezier(0, 0, 1, 1)";var c=d.connect(this._slideDiv,"webkitTransitionEnd",this,function(){0<a?this._animateTo(0):this._animateTo(-contentBox.h+parentBox.h-10);d.disconnect(c);});this._animateTo(a);},_doMomentum:function(){var a,c;a=k.getContentBox(this.container);var b=0>this._velocity?0.001:-0.001;c=-(this._velocity*this._velocity)/(2*b);var d=-this._velocity/b,b=3*0.6-0,f=1-b,g=0,e=0;if(a.h>this._slideDiv.scrollHeight){this.contentOffsetY=0,e=300;}else{if(0<this.contentOffsetY+c){a=0;for(c=Math.floor(d/20);a<c;a++){if(g=(f*20*a^3)+(b*20*a^2)+0*20*a+0,g=0>this._velocity?-g:g,0<this.contentOffsetY+g){e=20*a;break;}}0===e&&(e=300);this.contentOffsetY=0;}else{if(Math.abs(this.contentOffsetY+c)+a.h>this._slideDiv.scrollHeight){this.contentOffsetY=a.h-this._slideDiv.scrollHeight;a=0;for(c=Math.floor(d/20);a<c;a++){if(g=(f*20*a^3)+(b*20*a^2)+0*20*a+0,g=0>this._velocity?-g:g,Math.abs(this.contentOffsetY+g)>this._slideDiv.scrollHeight){e=20*a;break;}}}else{e=d,this.contentOffsetY+=c;}}}this._slideDiv.style.webkitTransition="-webkit-transform "+e+"ms cubic-bezier(0, 0.3, 0.6, 1)";this._animateTo(this.contentOffsetY);},_snapToBounds:function(){var a=k.getContentBox(this.container);a.h>this._slideDiv.scrollHeight?this.contentOffsetY=0:0<this.contentOffsetY?this.contentOffsetY=0:Math.abs(this.contentOffsetY)+a.h>this._slideDiv.scrollHeight&&(this.contentOffsetY=a.h-this._slideDiv.scrollHeight);this._slideDiv.style.WebkitTransitionDuration="0.5s";this._animateTo(this.contentOffsetY);},_animateTo:function(a){this.contentOffsetY=a;this._slideDiv.style.webkitTransform="translate3d(0, "+a+"px, 0)";},_stopMomentum:function(){if(this._isDecelerating()){var a=document.defaultView.getComputedStyle(this._slideDiv,null),a=new WebKitCSSMatrix(a.webkitTransform);this._slideDiv.style.webkitTransition="";this.animateTo(a.m42);}},_isDecelerating:function(){return this.isDecelerate?!0:!1;},_toggleNode:function(a,c){"ON"===c.toggleState?(c.toggleState="OFF",c.src&&(a.src=c.src.toString()),this.onUnSelect(c)):(c.toggleState="ON",c.srcAlt&&(a.src=c.srcAlt),this.onSelect(c));}});});},"esri/dijit/_TouchBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/dom","dojo/has","../kernel"],function(c,e,b,d,f,g){return c(null,{declaredClass:"esri.dijit._TouchBase",_preventDefault:!0,_swipeThreshold:20,constructor:function(a,c){this.domNode=d.byId(a);this.events=[b.connect(this.domNode,"touchstart",this,this._touchStartHandler),b.connect(this.domNode,"touchmove",this,this._touchMoveHandler),b.connect(this.domNode,"touchend",this,this._touchEndHandler),b.connect(this.domNode,"onclick",this,this._clickHandler)];},setPreventDefault:function(a){this._preventDefault=a;},disableOnClick:function(){b.disconnect(this.events.pop());},_clickHandler:function(a){if(this._moved){a.preventDefault();}else{this.onclick(a);}},_touchStartHandler:function(a){this._moved=!1;this.client_x=a.targetTouches[0].clientX;this.client_y=a.targetTouches[0].clientY;this.down_x=a.targetTouches[0].pageX;this.down_y=a.targetTouches[0].pageY;a.downX=this.down_x;a.downY=this.down_y;this.onTouchStart(a);},_touchMoveHandler:function(a){this._preventDefault&&a.preventDefault();this._moved=!0;this.up_x=a.targetTouches[0].pageX;this.cur_x=a.targetTouches[0].pageX-this.down_x;this.cur_y=a.targetTouches[0].pageY-this.down_y;a.curX=this.cur_x;a.curY=this.cur_y;this.onTouchMove(a);},_touchEndHandler:function(a){this._moved?(a.curX=this.cur_x,a.curY=this.cur_y,this.down_x-this.up_x>this._swipeThreshold?a.swipeDirection="left":this.up_x-this.down_x>this._swipeThreshold&&(a.swipeDirection="right")):(a.clientX=this.client_x,a.clientY=this.client_y);this.onTouchEnd(a);},onTouchStart:function(a){},onTouchMove:function(a){},onTouchEnd:function(a){},onclick:function(a){}});});},"esri/dijit/NavigationBar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","./_TouchBase","../kernel"],function(m,r,k,n,l,s,t,p,g,d,q,u){return m(null,{declaredClass:"esri.dijit.NavigationBar",_items:[],constructor:function(a,b){var c;this.container=p.byId(b);this._touchBase=q(this.container,null);this._slideDiv=d.create("div",{},this.container,"first");this.events=[k.connect(this._touchBase,"onclick",this,this._onClickHandler)];this._items=a.items;g.add(this.container,"esriMobileNavigationBar");var h=d.create("div",{},this._slideDiv);for(c=0;c<this._items.length;c++){var e,f;switch(this._items[c].type){case "img":f=d.create("div",{"class":"esriMobileNavigationItem"},h);e=d.create("img",{src:this._items[c].src.toString(),style:{width:"100%",height:"100%"}},f);break;case "span":f=d.create("div",{"class":"esriMobileNavigationItem"},h);e=d.create("span",{innerHTML:this._items[c].text},f);break;case "div":f=d.create("div",{"class":"esriMobileNavigationInfoPanel"},h),e=d.create("div",{innerHTML:this._items[c].text},f);}g.add(f,this._items[c].position);this._items[c].className&&g.add(e,this._items[c].className);e._index=c;e._item=this._items[c];this._items[c]._node=e;}},startup:function(){this.onCreate(this._items);},destroy:function(){n.forEach(this.events,k.disconnect);this._touchBase=null;l.query("img",this.container).forEach(function(a){a._index=null;a._item=null;d.destroy(a);});this._items=null;d.destroy(this._slideDiv);d.destroy(this.container);this.container=this._slideDiv=null;},getItems:function(){return this._items;},select:function(a){this._markSelected(a._node,a);},onSelect:function(a){},onUnSelect:function(a){},onCreate:function(a){},_onClickHandler:function(a){if("img"===a.target.tagName.toLowerCase()){var b=a.target,c=b._item;l.query("img",this.container).forEach(function(a){a!==b&&a._item.toggleGroup===c.toggleGroup&&this._markUnSelected(a,a._item);},this);this._toggleNode(b,c);}},_toggleNode:function(a,b){"ON"===b.toggleState?(b.toggleState="OFF",b.src&&(a.src=b.src.toString()),this.onUnSelect(b)):(b.toggleState="ON",b.srcAlt&&(a.src=b.srcAlt),this.onSelect(b));},_markSelected:function(a,b){b.toggleState="ON";b.srcAlt&&(a.src=b.srcAlt);this.onSelect(b);},_markUnSelected:function(a,b){"ON"===b.toggleState&&(b.toggleState="OFF",b.src&&(a.src=b.src.toString()),this.onUnSelect(b));}});});},"esri/dijit/Scalebar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/query","../kernel","../lang","../domUtils","../units","../SpatialReference","../WKIDUnitConversion","../geometry/Point","../geometry/ScreenPoint","../geometry/Polyline","../geometry/geodesicUtils","../geometry/webMercatorUtils","../geometry/screenUtils","../geometry/normalizeUtils","dojo/i18n!../nls/jsapi"],function(D,m,l,g,n,p,E,s,G,k,H,t,u,v,w,q,x,y,z,A,r,B,C,F){return D(null,{declaredClass:"esri.dijit.Scalebar",map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,localStrings:F.widgets.scalebar,constructor:function(a,c){this.metricScalebar=p.create("div",{innerHTML:"<div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div><div class='esriScalebarLine esriScalebarMetricLine'></div>"});this.englishScalebar=p.create("div",{innerHTML:"<div class='esriScalebarLine esriScalebarEnglishLine'></div><div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div>"});this.domNode=p.create("div");a=a||{};if(a.map){if(a.scalebarUnit){if("english"!==a.scalebarUnit&&"metric"!==a.scalebarUnit&&"dual"!==a.scalebarUnit){console.error("scalebar unit only accepts english or metric or dual");return;}this.scalebarUnit=a.scalebarUnit;}else{this.scalebarUnit="english";}if(a.scalebarStyle){if("ruler"!==a.scalebarStyle&&"line"!==a.scalebarStyle){console.error("scalebar style must be ruler or line");return;}this.scalebarStyle=a.scalebarStyle;}else{this.scalebarStyle="ruler";}this.background=a.background;switch(this.scalebarUnit){case "english":"ruler"===this.scalebarStyle&&(this.englishScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>");this.domNode.appendChild(this.englishScalebar);break;case "metric":"ruler"===this.scalebarStyle&&(this.metricScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>");this.domNode.appendChild(this.metricScalebar);break;case "dual":this.domNode.appendChild(this.metricScalebar),this.domNode.appendChild(this.englishScalebar);}this.map=a.map;c?c.appendChild(this.domNode):(this.map.container.appendChild(this.domNode),a.attachTo?n.add(this.domNode,"scalebar_"+a.attachTo):n.add(this.domNode,"scalebar_bottom-left"));n.add(this.domNode,"esriScalebar");if(this.map.loaded){this._getDistance(this.map.extent),this._checkBingMaps();}else{var b=g.connect(this.map,"onLoad",this,function(){g.disconnect(b);b=null;this._getDistance(this.map.extent);this._checkBingMaps();});}this._mapOnPan=g.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=g.connect(this.map,"onExtentChange",this,this._getDistance);l.forEach(this.map.layerIds,function(a,b){"esri.virtualearth.VETiledLayer"===this.map.getLayer(a).declaredClass&&g.connect(this.map.getLayer(a),"onVisibilityChange",m.hitch(this,function(a){this._checkBingMaps();}));},this);this._mapOnLayerAdd=g.connect(this.map,"onLayerAdd",m.hitch(this,function(a){"esri.virtualearth.VETiledLayer"===a.declaredClass&&g.connect(a,"onVisibilityChange",m.hitch(this,function(a){this._checkBingMaps();}));this._checkBingMaps();}));this._mapOnLayerRemove=g.connect(this.map,"onLayerRemove",m.hitch(this,this._checkBingMaps));}else{console.error("scalebar: unable to find the 'map' property in parameters");}},hide:function(){this._hidden=!0;u.hide(this.domNode);},show:function(){this._hidden=!1;u.show(this.domNode);},destroy:function(){g.disconnect(this._mapOnPan);g.disconnect(this._mapOnExtentChange);g.disconnect(this._mapOnLayerAdd);g.disconnect(this._mapOnLayerRemove);this.hide();this.map=null;p.destroy(this.domNode);},_checkBingMaps:function(){n.contains(this.domNode,"scalebar_bottom-left")&&(s.set(this.domNode,"left","25px"),l.forEach(this.map.layerIds,function(a,c){if("esri.virtualearth.VETiledLayer"===this.map.getLayer(a).declaredClass&&this.map.getLayer(a).visible){var b="95px";this.map._mapParams.nav&&(b="115px");s.set(this.domNode,"left",b);}},this));},_getDistance:function(a){var c=E.position(this.domNode,!0).y-this.map.position.y,c=c>this.map.height?this.map.height:c,c=0>c?0:c,b=new y(0,c),c=new y(this.map.width,c),f,e;this.mapUnit="esriDecimalDegrees";var d=B.toMapPoint(a,this.map.width,this.map.height,b),h=B.toMapPoint(a,this.map.width,this.map.height,c),b=new x(a.xmin,(a.ymin+a.ymax)/2,this.map.spatialReference),c=new x(a.xmax,(a.ymin+a.ymax)/2,this.map.spatialReference);if(3857===this.map.spatialReference.wkid||102100===this.map.spatialReference.wkid||102113===this.map.spatialReference.wkid||this.map.spatialReference.wkt&&-1!=this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator")){d=r.webMercatorToGeographic(d,!0),h=r.webMercatorToGeographic(h,!0),b=r.webMercatorToGeographic(b,!0),c=r.webMercatorToGeographic(c,!0);}else{if(t.isDefined(q[this.map.spatialReference.wkid])||this.map.spatialReference.wkt&&0===this.map.spatialReference.wkt.indexOf("PROJCS")){this.mapUnit="linearUnit";a=Math.abs(a.xmax-a.xmin);if(t.isDefined(q[this.map.spatialReference.wkid])){e=q.values[q[this.map.spatialReference.wkid]];}else{e=this.map.spatialReference.wkt;f=e.lastIndexOf(",")+1;var g=e.lastIndexOf("]]");e=parseFloat(e.substring(f,g));}a*=e;e=a/1609;f=a/1000;}}"esriDecimalDegrees"===this.mapUnit&&(a=new z(new w({wkid:4326})),a.addPath([d,h]),d=C._straightLineDensify(a,10),a=A.geodesicLengths([d],v.KILOMETERS)[0],d=new z(new w({wkid:4326})),d.addPath([b,c]),b=C._straightLineDensify(d,10),A.geodesicLengths([b],v.KILOMETERS),e=a/1.609,f=a);"english"===this.scalebarUnit?this._getScaleBarLength(e,"mi"):"metric"===this.scalebarUnit?this._getScaleBarLength(f,"km"):"dual"===this.scalebarUnit&&(this._getScaleBarLength(e,"mi"),this._getScaleBarLength(f,"km"));},_getScaleBarLength:function(a,c){var b=50*a/this.map.width,f=0,e=c;0.1>b&&("mi"===c?(b*=5280,e="ft"):"km"===c&&(b*=1000,e="m"));for(;1<=b;){b/=10,f++;}var d,h;0.5<b?(d=1,h=0.5):0.3<b?(d=0.5,h=0.3):0.2<b?(d=0.3,h=0.2):0.15<b?(d=0.2,h=0.15):0.1<=b&&(d=0.15,h=0.1);d=d/b>=b/h?h:d;b=50*(d/b);f=Math.pow(10,f)*d;this._drawScaleBar(b,f,e);},_drawScaleBar:function(a,c,b){var f=2*Math.round(a),e,d;"mi"===b||"ft"===b?(this.englishScalebar.style.width=f+"px",a=k(".esriScalebarFirstNumber",this.englishScalebar),e=k(".esriScalebarSecondNumber",this.englishScalebar),d=k(".esriScalebarMetricLineBackground",this.englishScalebar)):(this.metricScalebar.style.width=f+"px",a=k(".esriScalebarFirstNumber",this.metricScalebar),e=k(".esriScalebarSecondNumber",this.metricScalebar),d=k(".esriScalebarMetricLineBackground",this.metricScalebar));l.forEach(d,function(a,b){a.style.width=f-2+"px";},this);l.forEach(a,function(a,b){a.innerHTML=c;},this);l.forEach(e,function(a,d){a.innerHTML="esriUnknown"!==this.mapUnit?2*c+this.localStrings[b]:2*c+"Unknown Unit";},this);}});});},"esri/units":function(){define(["dojo/has","./kernel"],function(a,b){return {CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles"};});},"esri/geometry/geodesicUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../SpatialReference","./Point","./Polyline","./Polygon"],function(s,E,F,G,D,t,y,B){function v(a){var r=Math.PI/180,b=Math.sin(a.y*r),b=0.9933056200098026*(b/(1-0.006694379990197414*b*b)-6.111035746609262*Math.log((1-0.0818191908429643*b)/(1+0.0818191908429643*b)));return new t(6378137*a.x*r,3189068.5*b);};function x(a,r,b,d){var f=1/298.257223563,p=Math.sin(b);b=Math.cos(b);a=(1-f)*Math.tan(a);var h=1/Math.sqrt(1+a*a),m=a*h,e=Math.atan2(a,b);a=h*p*h*p;for(var k=1-a,c=272331606107.54688*k/40408299984661.45,u=1+c/16384*(4096+c*(-768+c*(320-175*c))),g=c/1024*(256+c*(-128+c*(74-47*c))),c=d/(6356752.31424518*u),w=2*Math.PI,l,n,q,s;1e-12<Math.abs(c-w);){q=Math.cos(2*e+c),l=Math.sin(c),n=Math.cos(c),s=g*l*(q+g/4*(n*(-1+2*q*q)-g/6*q*(-3+4*l*l)*(-3+4*q*q))),w=c,c=d/(6356752.31424518*u)+s;}d=m*l-h*n*b;d=Math.atan2(m*n+h*l*b,(1-f)*Math.sqrt(a+d*d));p=Math.atan2(l*p,h*n-m*l*b);b=f/16*k*(4+f*(4-3*k));f=p-(1-b)*f*Math.sqrt(a)*(c+b*l*(q+b*n*(-1+2*q*q)));return new t((r+f)/(Math.PI/180),d/(Math.PI/180),new D({wkid:4326}));};function z(a,r,b,d){var f=1/298.257223563,p=d-r,h=Math.atan((1-f)*Math.tan(a)),m=Math.atan((1-f)*Math.tan(b)),e=Math.sin(h),h=Math.cos(h),k=Math.sin(m),m=Math.cos(m),c=p,u,g=1000,w,l,n,q,s,t,v;do{n=Math.sin(c);q=Math.cos(c);l=Math.sqrt(m*n*m*n+(h*k-e*m*q)*(h*k-e*m*q));if(0===l){return 0;}q=e*k+h*m*q;s=Math.atan2(l,q);t=h*m*n/l;w=1-t*t;n=q-2*e*k/w;isNaN(n)&&(n=0);v=f/16*w*(4+f*(4-3*w));u=c;c=p+(1-v)*f*t*(s+v*l*(n+v*q*(-1+2*n*n)));}while(1e-12<Math.abs(c-u)&&0<--g);if(0===g){return e=6371009*Math.acos(Math.sin(a)*Math.sin(b)+Math.cos(a)*Math.cos(b)*Math.cos(d-r)),k=d-r,h=Math.sin(k)*Math.cos(b),a=Math.cos(a)*Math.sin(b)-Math.sin(a)*Math.cos(b)*Math.cos(k),{azimuth:Math.atan2(h,a),geodesicDistance:e};}a=272331606107.54688*w/40408299984661.45;b=a/1024*(256+a*(-128+a*(74-47*a)));a=6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(s-b*l*(n+b/4*(q*(-1+2*n*n)-b/6*n*(-3+4*l*l)*(-3+4*n*n))));b=Math.atan2(m*Math.sin(c),h*k-e*m*Math.cos(c));e=Math.atan2(h*Math.sin(c),h*k*Math.cos(c)-e*m);return {azimuth:b,geodesicDistance:a,reverseAzimuth:e};};function C(a,r){var b=Math.PI/180;637.100877151506>r&&(r=637.100877151506);if(!(a instanceof y||a instanceof B)){throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),Error("_geodesicDensify: the input geometry is neither polyline nor polygon");}var d=a instanceof y,f=[],p;s.forEach(d?a.paths:a.rings,function(a){f.push(p=[]);p.push([a[0][0],a[0][1]]);var m,e,k,c,u,g;m=a[0][0]*b;e=a[0][1]*b;for(u=0;u<a.length-1;u++){if(k=a[u+1][0]*b,c=a[u+1][1]*b,!(m===k&&e===c)){c=z(e,m,c,k);k=c.azimuth;c=c.geodesicDistance;var d=c/r;if(1<d){for(g=1;g<=d-1;g++){var l=x(e,m,k,g*r);p.push([l.x,l.y]);}g=x(e,m,k,(c+Math.floor(d-1)*r)/2);p.push([g.x,g.y]);}e=x(e,m,k,c);p.push([e.x,e.y]);m=e.x*b;e=e.y*b;}}});return d?new y({paths:f,spatialReference:a.spatialReference}):new B({rings:f,spatialReference:a.spatialReference});};var A={esriMiles:1,esriKilometers:1.609344,esriFeet:5280,esriMeters:1609.34,esriYards:1760,esriNauticalMiles:0.869,esriCentimeters:160934,esriDecimeters:16093.4,esriInches:63360,esriMillimeters:1609340,esriAcres:1,esriAres:40.4685642,esriSquareKilometers:0.00404685642,esriSquareMiles:0.0015625,esriSquareFeet:43560,esriSquareMeters:4046.85642,esriHectares:0.404685642,esriSquareYards:4840,esriSquareInches:6272640,esriSquareMillimeters:4046856420,esriSquareCentimeters:40468564.2,esriSquareDecimeters:404685.642};return {geodesicDensify:C,geodesicLengths:function(a,r){var b=Math.PI/180,d=[];s.forEach(a,function(a,p){var h=0;s.forEach(a.paths,function(a,e){var k=0,c,d,g,f,l;for(c=1;c<a.length;c++){d=a[c-1][0]*b,g=a[c][0]*b,f=a[c-1][1]*b,l=a[c][1]*b,f===l&&d===g||(d=z(f,d,l,g),k+=d.geodesicDistance/1609.344);}h+=k;});h*=A[r];d.push(h);});return d;},geodesicAreas:function(a,r){var b=[];s.forEach(a,function(a,d){var e=C(a,10000);b.push(e);});var d=[],f,p;s.forEach(b,function(a,b){var e=0;s.forEach(a.rings,function(a,b){f=v(new t(a[0][0],a[0][1]));p=v(new t(a[a.length-1][0],a[a.length-1][1]));var d=p.x*f.y-f.x*p.y,g;for(g=0;g<a.length-1;g++){f=v(new t(a[g+1][0],a[g+1][1])),p=v(new t(a[g][0],a[g][1])),d+=p.x*f.y-f.x*p.y;}e+=d/4046.87;});e*=A[r];d.push(e/-2);});return d;},_unitsDictionary:A,_toEqualAreaPoint:v,_directGeodeticSolver:x,_inverseGeodeticSolver:z};});},"esri/tasks/IdentifyTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../request","../geometry/normalizeUtils","./Task","./IdentifyResult"],function(b,h,l,r,s,m,n,p,q){b=b(p,{declaredClass:"esri.tasks.IdentifyTask",_eventMap:{complete:["results"]},constructor:function(a,f){this._url.path+="/identify";this._handler=h.hitch(this,this._handler);this.gdbVersion=f&&f.gdbVersion;this.registerConnectEvents();},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(a,f,b,d,c){try{var e=[];l.forEach(a.results,function(a,b){e[b]=new q(a);});this._successHandler([e],"onComplete",b,c);}catch(g){this._errorHandler(g,d,c);}},execute:function(a,b,k,d){var c=d.assembly;a=this._encode(h.mixin({},this._url.query,{f:"json"},a.toJson(c&&c[0])));var e=this._handler,g=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return m({url:this._url.path,content:a,callbackParamName:"callback",load:function(a,c){e(a,c,b,k,d.dfd);},error:function(a){g(a,k,d.dfd);}});},onComplete:function(){}});n._createWrappers(b);return b;});},"esri/tasks/IdentifyResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../graphic","../geometry/jsonUtils"],function(b,c,f,g,d,e){return b(null,{declaredClass:"esri.tasks.IdentifyResult",constructor:function(a){c.mixin(this,a);this.feature=new d(a.geometry?e.fromJson(a.geometry):null,null,a.attributes);delete this.geometry;delete this.attributes;}});});},"esri/tasks/IdentifyParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","../kernel","../layerUtils","../geometry/jsonUtils","../geometry/scaleUtils"],function(f,n,g,e,r,s,h,p,q){var d=f(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=d.LAYER_OPTION_TOP;},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:!1,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(b){var c=b&&b.geometry||this.geometry,a=this.mapExtent,d=this.spatialReference,k=this.layerIds;b={tolerance:this.tolerance,returnGeometry:this.returnGeometry,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset};if(c){var l=c.toJson();delete l.spatialReference;b.geometry=e.toJson(l);b.geometryType=p.getJsonType(c);}d?b.sr=d.wkid||e.toJson(d.toJson()):c&&c.spatialReference?b.sr=c.spatialReference.wkid||e.toJson(c.spatialReference.toJson()):a&&a.spatialReference&&(b.sr=a.spatialReference.wkid||e.toJson(a.spatialReference.toJson()));a&&(b.mapExtent=a.xmin+","+a.ymin+","+a.xmax+","+a.ymax);b.layers=this.layerOption;k&&(b.layers+=":"+k.join(","));b.layerDefs=h._serializeLayerDefinitions(this.layerDefinitions);c=this.timeExtent;b.time=c?c.toJson().join(","):null;b.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var a=q.getScale({extent:a,width:this.width,spatialReference:a.spatialReference}),f=h._getLayersForScale(a,this.dynamicLayerInfos),m=[];g.forEach(this.dynamicLayerInfos,function(b){if(!b.subLayerIds){var a=b.id;if((!this.layerIds||this.layerIds&&-1!==g.indexOf(this.layerIds,a))&&-1!==g.indexOf(f,a)){var c={id:a};c.source=b.source&&b.source.toJson();var d;this.layerDefinitions&&this.layerDefinitions[a]&&(d=this.layerDefinitions[a]);d&&(c.definitionExpression=d);var e;this.layerTimeOptions&&this.layerTimeOptions[a]&&(e=this.layerTimeOptions[a]);e&&(c.layerTimeOptions=e.toJson());m.push(c);}}},this);a=e.toJson(m);"[]"===a&&(a="[{}]");b.dynamicLayers=a;}return b;}});n.mixin(d,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});return d;});},"esri/toolbars/draw":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Color","dojo/_base/window","dojo/has","dojo/sniff","dojo/keys","dojo/dom-construct","dojo/dom-style","dojo/dom-geometry","../kernel","../sniff","./_toolbar","../symbols/SimpleMarkerSymbol","../symbols/SimpleLineSymbol","../symbols/SimpleFillSymbol","../graphic","../geometry/jsonUtils","../geometry/webMercatorUtils","../geometry/Polyline","../geometry/Polygon","../geometry/Multipoint","../geometry/Rect","dojo/i18n!../nls/jsapi"],function(G,l,y,k,w,x,p,A,H,B,C,I,M,N,J,D,u,E,r,K,L,s,q,z,F,t){var h=G(J,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(c,a){this.markerSymbol=new D(D.STYLE_SOLID,10,new u(u.STYLE_SOLID,new w([255,0,0]),2),new w([0,0,0,0.25]));this.lineSymbol=new u(u.STYLE_SOLID,new w([255,0,0]),2);this.fillSymbol=new E(E.STYLE_SOLID,new u(u.STYLE_SOLID,new w([255,0,0]),2),new w([0,0,0,0.25]));this._points=[];this._mouse=!p("esri-touch")&&!p("esri-pointer");this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=l.mixin(l.mixin({},this._defaultOptions),a||{});if(A("ios")||A("android")){this._options.showTooltips=!1;}this._onKeyDownHandler=l.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=l.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=l.hitch(this,this._onMouseUpHandler);this._onClickHandler=l.hitch(this,this._onClickHandler);this._onMouseMoveHandler=l.hitch(this,this._onMouseMoveHandler);this._onMouseDragHandler=l.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=l.hitch(this,this._onDblClickHandler);this._updateTooltip=l.hitch(this,this._updateTooltip);this._hideTooltip=l.hitch(this,this._hideTooltip);this._redrawGraphic=l.hitch(this,this._redrawGraphic);},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(c){this.respectDrawingVertexOrder=c;},setMarkerSymbol:function(c){this.markerSymbol=c;},setLineSymbol:function(c){this.lineSymbol=c;},setFillSymbol:function(c){this.fillSymbol=c;},activate:function(c,a){this._geometryType&&this.deactivate();var b=this.map,d=k.connect,g=h;this._options=l.mixin(l.mixin({},this._options),a||{});b.navigationManager.setImmediateClick(!1);switch(c){case g.ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.UP_ARROW:case g.DOWN_ARROW:case g.TRIANGLE:case g.CIRCLE:case g.ELLIPSE:case g.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=d(b,"onClick",this._onClickHandler);this._onMouseDownHandler_connect=d(b,this._mouse?"onMouseDown":"onSwipeStart",this._onMouseDownHandler);this._onMouseDragHandler_connect=d(b,this._mouse?"onMouseDrag":"onSwipeMove",this._onMouseDragHandler);this._onMouseUpHandler_connect=d(b,this._mouse?"onMouseUp":"onSwipeEnd",this._onMouseUpHandler);p("esri-touch")&&!p("esri-pointer")&&(this._onMouseDownHandler2_connect=d(b,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler2_connect=d(b,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=d(b,"onMouseUp",this._onMouseUpHandler));break;case g.POINT:this._onClickHandler_connect=d(b,"onClick",this._onClickHandler);break;case g.LINE:case g.EXTENT:case g.FREEHAND_POLYLINE:case g.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._onMouseDownHandler_connect=d(b,this._mouse?"onMouseDown":"onSwipeStart",this._onMouseDownHandler);this._onMouseDragHandler_connect=d(b,this._mouse?"onMouseDrag":"onSwipeMove",this._onMouseDragHandler);this._onMouseUpHandler_connect=d(b,this._mouse?"onMouseUp":"onSwipeEnd",this._onMouseUpHandler);p("esri-touch")&&!p("esri-pointer")&&(this._onMouseDownHandler2_connect=d(b,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler2_connect=d(b,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=d(b,"onMouseUp",this._onMouseUpHandler));break;case g.POLYLINE:case g.POLYGON:case g.MULTI_POINT:b.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=d(b,"onClick",this._onClickHandler);this._onDblClickHandler_connect=d(b,"onDblClick",this._onDblClickHandler);this._dblClickZoom=b.isDoubleClickZoom;b.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+c);return;}this._onKeyDown_connect=d(b,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=d(b,"onExtentChange",this._redrawGraphic);this._geometryType=c;this._toggleTooltip(!0);b.snappingManager&&("freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType)&&(b.snappingManager._startSelectionLayerQuery(),b.snappingManager._setUpSnapping());this.onActivate(this._geometryType);},deactivate:function(){var c=this.map;this._clear();var a=k.disconnect;a(this._onMouseMoveHandler_connect);a(this._onMouseDownHandler_connect);a(this._onMouseDragHandler_connect);a(this._onMouseUpHandler_connect);a(this._onMouseDownHandler2_connect);a(this._onMouseDragHandler2_connect);a(this._onMouseUpHandler2_connect);a(this._onClickHandler_connect);a(this._onDblClickHandler_connect);a(this._onKeyDown_connect);a(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;c.snappingManager&&(c.snappingManager._stopSelectionLayerQuery(),c.snappingManager._killOffSnapping());switch(this._geometryType){case h.CIRCLE:case h.ELLIPSE:case h.TRIANGLE:case h.ARROW:case h.LEFT_ARROW:case h.RIGHT_ARROW:case h.UP_ARROW:case h.DOWN_ARROW:case h.RECTANGLE:case h.LINE:case h.EXTENT:case h.FREEHAND_POLYLINE:case h.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;case h.POLYLINE:case h.POLYGON:case h.MULTI_POINT:this._dblClickZoom&&c.enableDoubleClickZoom();}a=this._geometryType;this._geometryType=null;c.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(a);},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._tGraphic&&this.map.graphics.remove(this._tGraphic,!0);this._graphic=this._tGraphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[];},finishDrawing:function(){var c,a=this._points,b=this.map.spatialReference,d=h,a=a.slice(0,a.length);switch(this._geometryType){case d.POLYLINE:if(!this._graphic||2>a.length){return;}c=new s(b);c.addPath([].concat(a));break;case d.POLYGON:if(!this._graphic||3>a.length){return;}c=new q(b);a=[].concat(a,[a[0].offset(0,0)]);!q.prototype.isClockwise(a)&&!this.respectDrawingVertexOrder&&(undefined,a.reverse());c.addRing(a);break;case d.MULTI_POINT:c=new z(b),y.forEach(a,function(a){c.addPoint(a);});}k.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(c);},_drawEnd:function(c){if(c){var a=this.map.spatialReference,b;this.onDrawEnd(c);a&&(a.isWebMercator()?b=L.webMercatorToGeographic(c,!0):4326===a.wkid&&(b=K.fromJson(c.toJson())));this.onDrawComplete({geometry:c,geographicGeometry:b});}},_normalizeRect:function(c,a,b){var d=c.x;c=c.y;var g=a.x;a=a.y;var h=Math.abs(d-g),l=Math.abs(c-a);return {x:Math.min(d,g),y:Math.max(c,a),width:h,height:l,spatialReference:b};},_onMouseDownHandler:function(c){this._dragged=!1;var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);var b=a||c.mapPoint,d=h;a=this.map;var g=a.spatialReference;this._points.push(b.offset(0,0));switch(this._geometryType){case d.LINE:this._graphic=a.graphics.add(new r(new s({paths:[[[b.x,b.y],[b.x,b.y]]],spatialReference:g}),this.lineSymbol),!0);a.snappingManager&&a.snappingManager._setGraphic(this._graphic);break;case d.FREEHAND_POLYLINE:this._oldPoint=c.screenPoint;b=new s(g);b.addPath(this._points);this._graphic=a.graphics.add(new r(b,this.lineSymbol),!0);a.snappingManager&&a.snappingManager._setGraphic(this._graphic);break;case d.CIRCLE:case d.ELLIPSE:case d.TRIANGLE:case d.ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:case d.UP_ARROW:case d.DOWN_ARROW:case d.RECTANGLE:case d.FREEHAND_POLYGON:this._oldPoint=c.screenPoint,b=new q(g),b.addRing(this._points),this._graphic=a.graphics.add(new r(b,this.fillSymbol),!0),a.snappingManager&&a.snappingManager._setGraphic(this._graphic);}p("esri-touch")&&c.preventDefault();},_onMouseMoveHandler:function(c){var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);var b=this._points[this._points.length-1];c=a||c.mapPoint;a=this._tGraphic;var d=a.geometry;switch(this._geometryType){case h.POLYLINE:case h.POLYGON:d.setPoint(0,0,{x:b.x,y:b.y}),d.setPoint(0,1,{x:c.x,y:c.y}),a.setGeometry(d);}},_onMouseDragHandler:function(c){if(p("esri-touch")&&!this._points.length){c.preventDefault();}else{this._dragged=!0;var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);var b=this._points[0],d=a||c.mapPoint,g=this.map,v=g.spatialReference;a=this._graphic;var k=h,m=g.toScreen(b),f=g.toScreen(d),e=[],e=f.x-m.x,f=f.y-m.y,n=Math.sqrt(e*e+f*f);switch(this._geometryType){case k.CIRCLE:this._hideTooltip();a.geometry=q.createCircle({center:m,r:n,numberOfPoints:60,map:g});a.setGeometry(a.geometry);break;case k.ELLIPSE:this._hideTooltip();a.geometry=q.createEllipse({center:m,longAxis:e,shortAxis:f,numberOfPoints:60,map:g});a.setGeometry(a.geometry);break;case k.TRIANGLE:this._hideTooltip();e=[[0,-n],[0.8660254037844386*n,0.5*n],[-0.8660254037844386*n,0.5*n],[0,-n]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.ARROW:this._hideTooltip();b=f/n;g=e/n;d=0.25*g*n;v=0.25*n/(f/e);n*=0.25*b;e=[[e,f],[e-d*(1+24/v),f+24*g-n],[e-d*(1+12/v),f+12*g-n],[-12*b,12*g],[12*b,-12*g],[e-d*(1-12/v),f-12*g-n],[e-d*(1-24/v),f-24*g-n],[e,f]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.LEFT_ARROW:this._hideTooltip();e=0>=e?[[e,0],[0.75*e,f],[0.75*e,0.5*f],[0,0.5*f],[0,-0.5*f],[0.75*e,-0.5*f],[0.75*e,-f],[e,0]]:[[0,0],[0.25*e,f],[0.25*e,0.5*f],[e,0.5*f],[e,-0.5*f],[0.25*e,-0.5*f],[0.25*e,-f],[0,0]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.RIGHT_ARROW:this._hideTooltip();e=0<=e?[[e,0],[0.75*e,f],[0.75*e,0.5*f],[0,0.5*f],[0,-0.5*f],[0.75*e,-0.5*f],[0.75*e,-f],[e,0]]:[[0,0],[0.25*e,f],[0.25*e,0.5*f],[e,0.5*f],[e,-0.5*f],[0.25*e,-0.5*f],[0.25*e,-f],[0,0]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.UP_ARROW:this._hideTooltip();e=0>=f?[[0,f],[-e,0.75*f],[-0.5*e,0.75*f],[-0.5*e,0],[0.5*e,0],[0.5*e,0.75*f],[e,0.75*f],[0,f]]:[[0,0],[-e,0.25*f],[-0.5*e,0.25*f],[-0.5*e,f],[0.5*e,f],[0.5*e,0.25*f],[e,0.25*f],[0,0]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.DOWN_ARROW:this._hideTooltip();e=0<=f?[[0,f],[-e,0.75*f],[-0.5*e,0.75*f],[-0.5*e,0],[0.5*e,0],[0.5*e,0.75*f],[e,0.75*f],[0,f]]:[[0,0],[-e,0.25*f],[-0.5*e,0.25*f],[-0.5*e,f],[0.5*e,f],[0.5*e,0.25*f],[e,0.25*f],[0,0]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.RECTANGLE:this._hideTooltip();e=[[0,0],[e,0],[e,f],[0,f],[0,0]];a.geometry=this._toPolygon(e,m.x,m.y);a.setGeometry(a.geometry);break;case k.LINE:a.setGeometry(l.mixin(a.geometry,{paths:[[[b.x,b.y],[d.x,d.y]]]}));break;case k.EXTENT:a&&g.graphics.remove(a,!0);a=new F(this._normalizeRect(b,d,v));a._originOnly=!0;this._graphic=g.graphics.add(new r(a,this.fillSymbol),!0);g.snappingManager&&g.snappingManager._setGraphic(this._graphic);break;case k.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(c)){p("esri-touch")&&c.preventDefault();return;}this._points.push(c.mapPoint.offset(0,0));a.geometry._insertPoints([d.offset(0,0)],0);a.setGeometry(a.geometry);break;case k.FREEHAND_POLYGON:this._hideTooltip();if(!1===this._canDrawFreehandPoint(c)){p("esri-touch")&&c.preventDefault();return;}this._points.push(c.mapPoint.offset(0,0));a.geometry._insertPoints([d.offset(0,0)],0);a.setGeometry(a.geometry);}p("esri-touch")&&c.preventDefault();}},_canDrawFreehandPoint:function(c){if(!this._oldPoint){return !1;}var a=this._oldPoint.x-c.screenPoint.x,b=this._oldPoint.y-c.screenPoint.y,d=this._options.tolerance;if((0>a?-1*a:a)<d&&(0>b?-1*b:b)<d){return !1;}a=new Date;if(a-this._startTime<this._options.drawTime){return !1;}this._startTime=a;this._oldPoint=c.screenPoint;return !0;},_onMouseUpHandler:function(c){if(this._dragged){0===this._points.length&&this._points.push(c.mapPoint.offset(0,0));var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);var b=this._points[0];a=a||c.mapPoint;var d=this.map.spatialReference,g=h,k;switch(this._geometryType){case g.CIRCLE:case g.ELLIPSE:case g.TRIANGLE:case g.ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.UP_ARROW:case g.DOWN_ARROW:case g.RECTANGLE:k=this._graphic.geometry;break;case g.LINE:k=new s({paths:[[[b.x,b.y],[a.x,a.y]]],spatialReference:d});break;case g.EXTENT:k=(new F(this._normalizeRect(b,a,d))).getExtent();break;case g.FREEHAND_POLYLINE:k=new s(d);k.addPath([].concat(this._points,[a.offset(0,0)]));break;case g.FREEHAND_POLYGON:k=new q(d),b=[].concat(this._points,[a.offset(0,0),this._points[0].offset(0,0)]),!q.prototype.isClockwise(b)&&!this.respectDrawingVertexOrder&&(undefined,b.reverse()),k.addRing(b);}p("esri-touch")&&c.preventDefault();this._clear();this._drawEnd(k);}else{this._clear();}},_onClickHandler:function(c){var a;this.map.snappingManager&&(a=this.map.snappingManager._snappingPoint);c=a||c.mapPoint;a=this.map;var b=a.toScreen(c),d=h;this._points.push(c.offset(0,0));switch(this._geometryType){case d.POINT:this._drawEnd(c.offset(0,0));this._setTooltipMessage(0);break;case d.POLYLINE:1===this._points.length?(b=new s(a.spatialReference),b.addPath(this._points),this._graphic=a.graphics.add(new r(b,this.lineSymbol),!0),a.snappingManager&&a.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=k.connect(a,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=a.graphics.add(new r(new s({paths:[[[c.x,c.y],[c.x,c.y]]],spatialReference:a.spatialReference}),this.lineSymbol),!0)):(this._graphic.geometry._insertPoints([c.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),a=this._tGraphic,b=a.geometry,b.setPoint(0,0,c.offset(0,0)),b.setPoint(0,1,c.offset(0,0)),a.setGeometry(b));break;case d.POLYGON:1===this._points.length?(b=new q(a.spatialReference),b.addRing(this._points),this._graphic=a.graphics.add(new r(b,this.fillSymbol),!0),a.snappingManager&&a.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=k.connect(a,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=a.graphics.add(new r(new s({paths:[[[c.x,c.y],[c.x,c.y]]],spatialReference:a.spatialReference}),this.fillSymbol),!0)):(this._graphic.geometry._insertPoints([c.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol),a=this._tGraphic,b=a.geometry,b.setPoint(0,0,c.offset(0,0)),b.setPoint(0,1,c.offset(0,0)),a.setGeometry(b));break;case d.MULTI_POINT:c=this._points;1===c.length?(b=new z(a.spatialReference),b.addPoint(c[c.length-1]),this._graphic=a.graphics.add(new r(b,this.markerSymbol),!0),a.snappingManager&&a.snappingManager._setGraphic(this._graphic)):(this._graphic.geometry.addPoint(c[c.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case d.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],b.x,b.y);break;case d.LEFT_ARROW:this._addShape([[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],b.x,b.y);break;case d.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],b.x,b.y);break;case d.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],b.x,b.y);break;case d.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],b.x,b.y);break;case d.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]],b.x,b.y);break;case d.RECTANGLE:this._addShape([[0,-96],[96,-96],[96,0],[0,0],[0,-96]],b.x-48,b.y+48);break;case d.CIRCLE:this._clear();this._drawEnd(q.createCircle({center:b,r:48,numberOfPoints:60,map:a}));break;case d.ELLIPSE:this._clear(),this._drawEnd(q.createEllipse({center:b,longAxis:48,shortAxis:24,numberOfPoints:60,map:a}));}this._setTooltipMessage(this._points.length);},_addShape:function(c,a,b){this._setTooltipMessage(0);this._clear();this._drawEnd(this._toPolygon(c,a,b));},_toPolygon:function(c,a,b){var d=this.map,g=new q(d.spatialReference);g.addRing(y.map(c,function(c){return d.toMap({x:c[0]+a,y:c[1]+b});}));return g;},_onDblClickHandler:function(c){var a,b=this._points,d=this.map.spatialReference,g=h;p("esri-touch")&&b.push(c.mapPoint);b=b.slice(0,b.length);switch(this._geometryType){case g.POLYLINE:if(!this._graphic||2>b.length){k.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(c);return;}a=new s(d);a.addPath([].concat(b));break;case g.POLYGON:if(!this._graphic||2>b.length){k.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(c);return;}a=new q(d);c=[].concat(b,[b[0].offset(0,0)]);!q.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&(undefined,c.reverse());a.addRing(c);break;case g.MULTI_POINT:a=new z(d),y.forEach(b,function(b){a.addPoint(b);});}k.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(a);},_onKeyDownHandler:function(c){c.keyCode===H.ESCAPE&&(k.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0));},_toggleTooltip:function(c){this._options.showTooltips&&(c?this._tooltip||(this._tooltip=B.create("div",{"class":"tooltip"},this.map.container),I.isBodyLtr()||C.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=k.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=k.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=k.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(k.disconnect(this._onTooltipMouseEnterHandler_connect),k.disconnect(this._onTooltipMouseLeaveHandler_connect),k.disconnect(this._onTooltipMouseMoveHandler_connect),B.destroy(this._tooltip),this._tooltip=null));},_hideTooltip:function(){var c=this._tooltip;c&&(c.style.display="none");},_setTooltipMessage:function(c){var a=this._tooltip;if(a){var b="";switch(this._geometryType){case h.POINT:b=t.toolbars.draw.addPoint;break;case h.ARROW:case h.LEFT_ARROW:case h.RIGHT_ARROW:case h.UP_ARROW:case h.DOWN_ARROW:case h.TRIANGLE:case h.RECTANGLE:case h.CIRCLE:case h.ELLIPSE:b=t.toolbars.draw.addShape;break;case h.LINE:case h.EXTENT:case h.FREEHAND_POLYLINE:case h.FREEHAND_POLYGON:b=t.toolbars.draw.freehand;break;case h.POLYLINE:case h.POLYGON:b=t.toolbars.draw.start;1===c?b=t.toolbars.draw.resume:2<=c&&(b=t.toolbars.draw.complete);break;case h.MULTI_POINT:b=t.toolbars.draw.addMultipoint,1<=c&&(b=t.toolbars.draw.finish);}a.innerHTML=b;}},_updateTooltip:function(c){var a=this._tooltip;if(a){var b;c.clientX||c.pageY?(b=c.clientX,c=c.clientY):(b=c.clientX+x.body().scrollLeft-x.body().clientLeft,c=c.clientY+x.body().scrollTop-x.body().clientTop);a.style.display="none";C.set(a,{left:b+this._options.tooltipOffset+"px",top:c+"px"});a.style.display="";}},_redrawGraphic:function(c,a,b,d){if(b||this.map.wrapAround180){(c=this._graphic)&&c.setGeometry(c.geometry),(c=this._tGraphic)&&c.setGeometry(c.geometry);}},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});l.mixin(h,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});return h;});},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(g,k,l,m,h){return g([h],{declaredClass:"esri.toolbars._Toolbar",constructor:function(c){this.map=c;},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(c,d,e,f){var a=this.map;c&&(this._mapNavState={isDoubleClickZoom:a.isDoubleClickZoom,isClickRecenter:a.isClickRecenter,isPan:a.isPan,isRubberBandZoom:a.isRubberBandZoom,isKeyboardNavigation:a.isKeyboardNavigation,isScrollWheelZoom:a.isScrollWheelZoom},a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),a.disableKeyboardNavigation());d&&a.hideZoomSlider();e&&a.hidePanArrows();f&&a.graphics.disableMouseEvents();},_activateMapTools:function(c,d,e,f){var a=this.map,b=this._mapNavState;c&&b&&(b.isDoubleClickZoom&&a.enableDoubleClickZoom(),b.isClickRecenter&&a.enableClickRecenter(),b.isPan&&a.enablePan(),b.isRubberBandZoom&&a.enableRubberBandZoom(),b.isKeyboardNavigation&&a.enableKeyboardNavigation(),b.isScrollWheelZoom&&a.enableScrollWheelZoom());d&&a.showZoomSlider();e&&a.showPanArrows();f&&a.graphics.enableMouseEvents();}});});},"xstyle/has-class":function(){define(["dojo/has"],function(has){var _1254={};return function(){var test,args=arguments;for(var i=0;i<args.length;i++){var test=args[i];if(!_1254[test]){_1254[test]=true;var parts=test.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),_1255=has(parts[2]),lower=-parts[4];if((lower>0?lower<=_1255&&(-parts[5]||lower)>=_1255:!!_1255)==!parts[1]){document.documentElement.className+=" has-"+test;}}}};});},"url:esri/dijit/templates/Geocoder.html":"<div class=\"${theme}\" role=\"presentation\">\n    <div class=\"${_css.GeocoderContainerClass}\" role=\"presentation\">\n    \t<div class=\"${_css.GeocoderClass}\" data-dojo-attach-point=\"containerNode\" role=\"presentation\">\n    \t\t<div title=\"${_i18n.widgets.Geocoder.main.searchButtonTitle}\" tabindex=\"0\" class=\"${_css.searchButtonClass} ${_css.GeocoderIconClass}\" data-dojo-attach-point=\"submitNode\" role=\"button\"></div>\n    \t\t<div aria-haspopup=\"true\" id=\"${id}_menu_button\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuButtonTitle}\" tabindex=\"0\" class=\"${_css.geocoderMenuArrowClass} ${_css.GeocoderIconClass}\" data-dojo-attach-point=\"geocoderMenuArrowNode\" role=\"button\" aria-expanded=\"false\"></div>\n    \t\t<input aria-haspopup=\"true\" id=\"${id}_input\" tabindex=\"0\" placeholder=\"\" value=\"${value}\" autocomplete=\"off\" type=\"text\" data-dojo-attach-point=\"inputNode\" role=\"textbox\">\n    \t\t<div tabindex=\"0\" class=\"${_css.clearButtonClass} ${_css.GeocoderIconClass}\" data-dojo-attach-point=\"clearNode\" role=\"button\"></div>\n    \t\t<div class=\"${_css.GeocoderClearClass}\" role=\"presentation\"></div>\n    \t</div>\n    \t<div class=\"${_css.resultsContainerClass}\" data-dojo-attach-point=\"resultsNode\" aria-labelledby=\"${id}_input\" role=\"menu\" aria-hidden=\"true\"></div>\n    \t<div class=\"${_css.geocoderMenuClass}\" data-dojo-attach-point=\"geocoderMenuNode\" role=\"presentation\">\n    \t\t<div class=\"${_css.geocoderMenuHeaderClass}\">\n    \t\t\t${_i18n.widgets.Geocoder.main.geocoderMenuHeader}\n    \t\t\t<div role=\"button\" data-dojo-attach-point=\"geocoderMenuCloseNode\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuCloseTitle}\" tabindex=\"0\" class=\"${_css.geocoderMenuCloseClass}\"></div>\n    \t\t\t<div class=\"${_css.GeocoderClearClass}\" role=\"presentation\"></div>\n    \t\t</div>\n    \t\t<div data-dojo-attach-point=\"geocoderMenuInsertNode\" aria-labelledby=\"${id}_menu_button\" role=\"menu\" aria-hidden=\"true\"></div>\n    \t</div>\n    </div>\n</div>","url:esri/dijit/templates/HomeButton.html":"<div class=\"${theme}\" role=\"presentation\">\n    <div class=\"${_css.container}\">\n            <div data-dojo-attach-point=\"_homeNode\" title=\"${_i18n.widgets.homeButton.home.title}\" role=\"button\" class=\"${_css.home}\"><span>${_i18n.widgets.homeButton.home.button}</span></div>\n    </div>\n</div>","url:esri/dijit/templates/LocateButton.html":"<div class=\"${theme}\" role=\"presentation\">\n    <div class=\"${_css.container}\">\n            <div data-dojo-attach-point=\"_locateNode\" role=\"button\" class=\"${_css.locate}\"><span>${_i18n.widgets.locateButton.locate.button}</span></div>\n    </div>\n</div>\n","*now":function(r){r(["dojo/i18n!*preload*dojo/nls/dojo*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\"]"]);}}});(function(){var _1256=this.require;_1256({cache:{}});!_1256.async&&_1256(["dojo"]);_1256.boot&&_1256.apply(null,_1256.boot);})();